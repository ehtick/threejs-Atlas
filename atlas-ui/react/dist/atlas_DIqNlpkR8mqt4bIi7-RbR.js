import{r,j as e,V as re,c as ie}from"./atlas_bDOTfl6YifhEgi64OZoGp.js";import{S as le,C as ce,P as de,W as ue,B as me,E as ge,L as pe,a as he,e as O,t as f,X,v as Y,r as Z,h as xe,Y as be}from"./atlas_qztAvZEx8WjDTLkWZU69P.js";const ve=({animationType:u,onAnimationComplete:n})=>{const m=r.useRef(null),l=r.useRef(null),c=r.useRef(null),S=r.useRef(null),h=r.useRef(null),[g,G]=r.useState(!1);console.log("UniverseAnimationCanvas render, animationType:",u);const E=()=>{const t=document.createElement("canvas");t.width=64,t.height=64;const a=t.getContext("2d");a.clearRect(0,0,64,64);const i=a.createRadialGradient(32,32,0,32,32,32);i.addColorStop(0,"rgba(255,255,255,1.0)"),i.addColorStop(.3,"rgba(255,255,255,0.8)"),i.addColorStop(.7,"rgba(255,255,255,0.2)"),i.addColorStop(1,"rgba(255,255,255,0.0)"),a.fillStyle=i,a.beginPath(),a.arc(32,32,32,0,Math.PI*2),a.fill();const y=new xe(t);return y.premultiplyAlpha=!1,y.format=be,y},P=()=>{if(console.log("Initializing Three.js scene..."),!m.current){console.error("mountRef.current is null");return}try{const t=new le;t.background=new ce(17),l.current=t;const a=new de(75,window.innerWidth/window.innerHeight,.1,1e3);a.position.z=5,S.current=a;const i=new ue({antialias:!0,alpha:!1});i.setSize(window.innerWidth,window.innerHeight),m.current.appendChild(i.domElement),c.current=i,console.log("Three.js scene initialized successfully");const y=new me(10,10,10),K=new ge(y),ee=new pe({color:6710886,transparent:!0,opacity:.5,linewidth:3}),w=new he(K,ee);t.add(w);const te=new Float32Array([0,0,0]),ae=new Float32Array([1,1,1]),ne=new Float32Array([10]),z=new O;z.setAttribute("position",new f(te,3)),z.setAttribute("color",new f(ae,3)),z.setAttribute("size",new f(ne,1));const D=new X({size:7,vertexColors:!0,blending:Y,transparent:!0,alphaTest:.01,map:E()}),se=new Z(z,D);t.add(se);const x=7500,R=new Float32Array(x*3),B=new Float32Array(x*3),W=new Float32Array(x),L=new Float32Array(x);for(let s=0;s<x;s++){let o,d,b;const I=3+Math.floor(Math.random()*3);let F=1/0,v=0,T=0,k=0;for(let C=0;C<I;C++){const N=(Math.random()-.5)*10,A=(Math.random()-.5)*10,p=(Math.random()-.5)*10,M=Math.sqrt(N*N+A*A+p*p),V=Math.pow(Math.random(),1.8)+M*.1;V<F&&(F=V,v=N,T=A,k=p)}o=v,d=T,b=k,R[s*3]=o,R[s*3+1]=d,R[s*3+2]=b;const q=Math.sqrt(o*o+d*d+b*b);L[s]=q,B[s*3]=.2,B[s*3+1]=.5,B[s*3+2]=1,W[s]=Math.random()*.4+.1}const j=new O;j.setAttribute("position",new f(R,3)),j.setAttribute("color",new f(B,3)),j.setAttribute("size",new f(W,1));const U=new X({size:.1,vertexColors:!0,blending:Y,transparent:!0,alphaTest:.01,depthWrite:!1,map:E()}),$=new Z(j,U);t.add($);let oe=Date.now();const H=()=>{const s=(Date.now()-oe)/1e3,o=s*.5,d=Math.min(s/7,1),b=Math.pow(o*.8,3),I=Math.pow(d,2)*20,F=1+b+I,v=o*.05*F;w.rotation.x=Math.sin(v*.7)*.2,w.rotation.y=v*.5,w.rotation.z=Math.cos(v*.3)*.15,$.rotation.copy(w.rotation);const T=3+Math.sin(o*8)*2;D.size=T,D.opacity=.8+Math.sin(o*10)*.2;const k=Math.sqrt(75),q=d*k;let C=0;for(let M=0;M<x;M++)L[M]<=q&&C++;j.setDrawRange(0,C),U.opacity=1;const N=15+Math.sin(o*.5)*3,A=1-d*.8,p=N*A;if(a.position.x=Math.cos(o*.2)*p,a.position.y=Math.sin(o*.15)*p*.5,a.position.z=Math.sin(o*.2)*p,a.lookAt(0,0,0),i.render(t,a),s>7.5&&n){console.log("Big Bang animation complete, calling callback"),n();return}h.current=requestAnimationFrame(H)};H()}catch(t){console.error("Error initializing Three.js scene:",t)}};return r.useEffect(()=>{console.log("useEffect triggered, animationType:",u,"isVisible:",g),u&&!g&&(console.log("Setting visible and initializing scene"),G(!0),setTimeout(()=>{P()},100))},[u,g]),r.useEffect(()=>()=>{console.log("Cleaning up animation"),h.current&&cancelAnimationFrame(h.current),c.current&&m.current&&c.current.domElement.parentNode&&(m.current.removeChild(c.current.domElement),c.current.dispose())},[]),console.log("Rendering component, isVisible:",g),g?e.jsx("div",{ref:m,className:"fixed inset-0 z-50 bg-black",style:{width:"100vw",height:"100vh"}}):(console.log("Component not visible, returning null"),null)},fe=({version:u})=>{const[n,m]=r.useState(""),[l,c]=r.useState("selection"),[S,h]=r.useState(null),g=[{value:"default",title:"The Core Continuum",description:"Venture into the primordial universe where time and space converge for you, exploring the vast cosmos we all traverse as a single entity."},{value:"custom",title:"Design the Multiverse",description:"Generate a personal universe with its own seed and cosmic origin time, a completely unique creation entirely shaped by your decision."}],G=t=>{m(t)},E=t=>{t.preventDefault(),!(!n||l!=="selection")&&(c("animating"),h(n==="default"?"core":"multiverse"))},P=()=>{console.log("Animation completed, current state:",l),c("redirecting"),h(null),setTimeout(()=>{console.log("Redirecting to Flask with universe type:",n);const t=document.createElement("form");t.method="POST",t.action="/onboarding";const a=document.createElement("input");a.type="hidden",a.name="universe_type",a.value=n,t.appendChild(a),document.body.appendChild(t),t.submit()},1e3)};return e.jsxs(e.Fragment,{children:[S&&e.jsx("div",{className:"fixed inset-0 bg-black z-50 opacity-0 animate-fade-in",children:e.jsx(ve,{animationType:S,onAnimationComplete:P})}),e.jsxs("div",{className:`w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto transition-opacity duration-500 ${l!=="selection"?"opacity-0 pointer-events-none":"opacity-100"}`,children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("header",{className:"bg-black/20 backdrop-blur-md border-b border-white/10 px-4 sm:px-6 py-6",children:e.jsxs("div",{className:"w-full flex flex-col items-center space-y-4",children:[e.jsx("img",{src:"/static/atlas-logo.jpg",alt:"Atlas Logo",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-full border-2 border-cyan-400 shadow-lg animate-pulse"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Atlas Initialization Protocol"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-300 mt-2",children:"Quantum Navigation System Startup Sequence"})]})]})}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("form",{onSubmit:E,className:"space-y-8",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"Will you journey through a shared universe or forge a new one of your own?"})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8 mb-12",children:g.map(t=>e.jsx("div",{onClick:()=>G(t.value),className:`
                        relative group cursor-pointer transition-all duration-500 transform hover:scale-105
                        ${n===t.value?"shadow-2xl shadow-cyan-400/25 scale-105":"hover:shadow-xl hover:shadow-blue-500/20"}
                      `,children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 via-slate-700/80 to-slate-800/80 backdrop-blur-lg rounded-2xl border border-white/10 p-6 sm:p-8 h-full",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("div",{className:`
                            w-6 h-6 rounded-full border-2 transition-all duration-300
                            ${n===t.value?"bg-cyan-400 border-cyan-400 shadow-lg shadow-cyan-400/50":"border-gray-400 group-hover:border-cyan-400"}
                          `,children:n===t.value&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent",children:t.title}),e.jsx("p",{className:"text-gray-300 leading-relaxed text-sm sm:text-base",children:t.description})]}),e.jsx("div",{className:`
                          absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300
                          bg-gradient-to-br from-cyan-500/10 via-blue-500/10 to-purple-500/10
                          ${n===t.value?"opacity-20":""}
                        `})]})},t.value))}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{type:"submit",disabled:!n||l!=="selection",className:`
                      relative overflow-hidden group px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-500 transform
                      ${n&&l==="selection"?"bg-gradient-to-r from-cyan-500 via-blue-500 to-purple-500 text-white shadow-2xl shadow-blue-500/30 hover:shadow-blue-500/50 hover:scale-110 active:scale-95":"bg-gray-600 text-gray-400 cursor-not-allowed"}
                    `,children:[n&&l==="selection"&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 opacity-20 group-hover:opacity-40 transition-opacity duration-300"}),e.jsx("span",{className:"relative z-10",children:e.jsx("span",{children:n?"Initialize Protocol":"Select Universe Type"})})]})})]})})}),e.jsx(re,{version:u})]})]}),l==="redirecting"&&e.jsx("div",{className:"fixed inset-0 bg-black z-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-cyan-400 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-cyan-400 text-xl font-semibold",children:"Atlas Initialization Protocol Finished"})]})})]})},Q=document.querySelector('meta[name="atlas-version"]'),_=document.querySelector('meta[name="atlas-version-hash"]'),ye={version:Q&&Q.getAttribute("content")||"1.0.0",versionHash:_&&_.getAttribute("content")||""},J=document.getElementById("atlas-react-root");J?ie.createRoot(J).render(r.createElement(fe,ye)):console.error("Container atlas-react-root not found!");
