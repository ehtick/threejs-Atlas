import{r as h,j as e}from"./atlas_Bv5zr7cG9joXJ1l7Eo-6s.js";import{L as x}from"./atlas_BEwgRMCv3nORtnEmsrVRp.js";class d{static encodeUrl(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_")}static generateGalaxyUrl(t,s=1){const r=`coordinates=${t[0]},${t[1]},${t[2]}&page=${s}`,o=this.encodeUrl(r);return`${window.location.origin}/stargate/${o}`}static generateSystemUrl(t,s,r=1){const o=`coordinates=${t[0]},${t[1]},${t[2]}&system=${s}&page=${r}`,c=this.encodeUrl(o);return`${window.location.origin}/stargate/${c}`}static generatePlanetUrl(t,s,r,o=1){const c=`coordinates=${t[0]},${t[1]},${t[2]}&system=${s}&planet=${r.toLowerCase()}&page=${o}`,n=this.encodeUrl(c);return`${window.location.origin}/stargate/${n}`}static getCurrentPage(){try{const s=new URLSearchParams(window.location.search).get("page");if(s)return parseInt(s,10);const r=window.location.pathname.match(/\/galaxy\/(\d+)/);return r?parseInt(r[1],10):1}catch{return 1}}}const L=({type:l,name:t,coordinates:s,systemIndex:r,planetName:o,className:c=""})=>{const[n,p]=h.useState(!1),[g,u]=h.useState(!1),m=()=>{try{const a=s.split(",").map(Number),i=d.getCurrentPage();switch(l){case"galaxy":return d.generateGalaxyUrl(a,i);case"system":if(r!==void 0)return d.generateSystemUrl(a,r,i);break;case"planet":if(r!==void 0&&o)return d.generatePlanetUrl(a,r,o,i);break}return window.location.pathname}catch(a){return console.error("Error generating stargate URL:",a),window.location.pathname}};h.useEffect(()=>{const a=x.getLocations(),i=m(),$=a.some(v=>v.stargateUrl===i);p($)},[s,r,o,l]);const w=async()=>{u(!0);try{const a=m();x.saveLocation({name:t,type:l,stargateUrl:a}),p(!0),setTimeout(()=>{u(!1)},300)}catch(a){console.error("Error saving location:",a),u(!1)}},b=a=>a.replace(/_/g," ");return e.jsx(e.Fragment,{children:e.jsx("button",{onClick:w,disabled:n||g,className:`inline-flex items-center self-start space-x-1 px-1.5 py-0.5 rounded transition-all duration-200 text-[10px] font-medium h-[21px] box-border ${n?"bg-green-500/20 border border-green-500/50 text-green-400 cursor-default":g?"bg-blue-500/20 border border-blue-500/50 text-blue-400 cursor-wait":"bg-white/10 hover:bg-white/20 border border-white/20 hover:border-white/40 text-white hover:text-blue-300"} ${c}`,title:n?"Location saved":`Save ${b(t)} to bookmarks`,children:g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-[10px] uppercase",children:"Saving..."})]}):n?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),e.jsx("span",{className:"text-[10px] uppercase",children:"Saved"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"text-[10px] uppercase",children:"Save"})]})})})};export{L as S};
