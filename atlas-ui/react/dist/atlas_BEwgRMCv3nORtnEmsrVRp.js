import{j as s,r as h}from"./atlas_Bv5zr7cG9joXJ1l7Eo-6s.js";const T=()=>s.jsx("header",{className:"bg-black/20 backdrop-blur-md border-b border-white/10 px-4 sm:px-6 py-4",children:s.jsxs("div",{className:"w-full flex items-center justify-between",children:[s.jsxs("a",{href:"/",className:"flex items-center space-x-3 sm:space-x-4",children:[s.jsx("img",{src:"/static/atlas-logo.jpg",alt:"Atlas Logo",className:"h-10 w-10 sm:h-12 sm:w-12 rounded-full border-2 border-blue-400 shadow-lg"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"The Atlas"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 hidden sm:block",children:"Universal Navigation System"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"ONLINE"})]}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-400 hidden lg:block",children:"Quantum Navigation Ready"})]})]})}),y=i=>{const[t,e,a]=i.split(",").map(Number);return`${t.toString(36)}_${e.toString(36)}_${a.toString(36)}`};class f{static STORAGE_KEY="__atlasArchive";static MAX_ENTRIES_PER_GALAXY=1e3;static getData(){try{this.cleanupLegacyStorage();const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):{g:{}}}catch(t){return console.error("Error reading Atlas archive:",t),{g:{}}}}static cleanupLegacyStorage(){try{const t="atlasHistoricalData";localStorage.getItem(t)&&localStorage.removeItem(t)}catch(t){console.error("Error cleaning up legacy storage:",t)}}static saveData(t){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(e){console.error("Error saving Atlas archive:",e)}}static performCleanup(t){const e=Object.keys(t.g);e.length>100&&e.slice(0,e.length-100).forEach(r=>delete t.g[r]),Object.keys(t.g).forEach(a=>{const r=t.g[a],o=Object.keys(r);o.length>this.MAX_ENTRIES_PER_GALAXY&&o.slice(0,o.length-this.MAX_ENTRIES_PER_GALAXY).forEach(c=>delete r[c])})}static performEmergencyCleanup(){const t=document.body.getAttribute("data-coordinates");if(t){const e=y(t),a=this.getData(),r=a.g[e];a.g={},r&&(a.g[e]=r),this.saveData(a)}}static markPlanetVisited(t,e,a,r){const o=this.getData(),n=y(t),c=e.toString(16),x=r.findIndex(g=>g.name.toLowerCase()===a.toLowerCase());if(x===-1){console.warn(`Planet ${a} not found in system planets list`);return}o.g[n]||(o.g[n]={}),o.g[n][c]||(o.g[n][c]="");const d=this.bitmapToIndices(o.g[n][c]);d.includes(x)||(d.push(x),o.g[n][c]=this.indicesToBitmap(d),this.saveData(o))}static markSystemVisited(t,e){const a=this.getData(),r=y(t),o=e.toString(16);a.g[r]||(a.g[r]={}),a.g[r][o]||(a.g[r][o]="",this.saveData(a))}static bitmapToIndices(t){return t?t.split("").map((e,a)=>e==="1"?a:-1).filter(e=>e!==-1):[]}static indicesToBitmap(t){if(t.length===0)return"";const e=Math.max(...t),a=Array(e+1).fill("0");return t.forEach(r=>{r>=0&&(a[r]="1")}),a.join("")}static isSystemVisited(t,e){const a=this.getData(),r=y(t),o=e.toString(16);return!!(a.g[r]&&o in a.g[r])}static getVisitedPlanets(t,e,a){const r=this.getData(),o=y(t),n=e.toString(16),c=r.g[o]?.[n]||"";return this.bitmapToIndices(c).map(d=>{const g=a[d];return g?g.name.toLowerCase():null}).filter(d=>d!==null)}static getVisitedPlanetCount(t,e){const a=this.getData(),r=y(t),o=e.toString(16),n=a.g[r]?.[o]||"";return this.bitmapToIndices(n).length}static getStorageStats(){const t=this.getData(),e=JSON.stringify(t);let a=0,r=0;return Object.values(t.g).forEach(o=>{a+=Object.keys(o).length,Object.values(o).forEach(n=>{r+=n.length})}),{size:e.length,galaxies:Object.keys(t.g).length,systems:a,planets:r}}}const R=(i,t,e,a)=>{f.markPlanetVisited(i,t,e,a)},P=(i,t)=>{f.markSystemVisited(i,t)},B=(i,t,e)=>f.getVisitedPlanets(i,t,e),I=(i,t)=>f.isSystemVisited(i,t),G=(i,t,e,a)=>{if(!I(i,t))return"none";{const r=f.getVisitedPlanetCount(i,t);return r>=e&&e>0?"complete":(r>0,"partial")}},D=()=>f.getStorageStats();class j{static STORAGE_KEY="_atlasDailyChallenges";static BASE_GOALS={galaxies:4,systems:10,planets:30};static getTodaysChallenges(){const t=new Date().toISOString().split("T")[0],e=this.getStoredChallenges();return!e||e.date!==t?this.createNewDayChallenges(t,e):e}static getStoredChallenges(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):null}catch(t){return console.error("Error reading daily challenges:",t),null}}static createNewDayChallenges(t,e){const a=e?e.dayNumber+1:1,r=Math.min(1+(a-1)*.1,2),o=this.getCurrentStats(),n=[{type:"galaxies",current:o.galaxies,target:Math.ceil(this.BASE_GOALS.galaxies*r),dayNumber:a,completed:!1},{type:"systems",current:o.systems,target:Math.ceil(this.BASE_GOALS.systems*r),dayNumber:a,completed:!1},{type:"planets",current:o.planets,target:Math.ceil(this.BASE_GOALS.planets*r),dayNumber:a,completed:!1}],c={date:t,dayNumber:a,challenges:n,lastReset:Date.now()};return this.saveChallenges(c),c}static getCurrentStats(){try{const t=localStorage.getItem("__atlasArchive");if(!t)return{galaxies:0,systems:0,planets:0};const e=JSON.parse(t);let a=0,r=0;return Object.values(e.g||{}).forEach(o=>{a+=Object.keys(o).length,Object.values(o).forEach(n=>{typeof n=="string"&&(r+=(n.match(/1/g)||[]).length)})}),{galaxies:Object.keys(e.g||{}).length,systems:a,planets:r}}catch(t){return console.error("Error getting current stats:",t),{galaxies:0,systems:0,planets:0}}}static updateProgress(){const t=this.getTodaysChallenges(),e=this.getCurrentStats(),a=t.challenges.every(o=>o.completed);t.challenges.forEach(o=>{const n=e[o.type];o.current=n,o.completed=n>=o.target});const r=t.challenges.every(o=>o.completed);return!a&&r&&this.recordCompletedDay(t.date),this.saveChallenges(t),t}static recordCompletedDay(t){try{const e="_atlasCompletionHistory",a=localStorage.getItem(e),r=a?JSON.parse(a):[];r.includes(t)||(r.push(t),localStorage.setItem(e,JSON.stringify(r)))}catch(e){console.error("Error recording completed day:",e)}}static saveChallenges(t){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(e){console.error("Error saving daily challenges:",e)}}static getCompletionStatus(){const t=this.getTodaysChallenges(),e=t.challenges.filter(r=>r.completed).length,a=t.challenges.length;return{completed:e,total:a,allCompleted:e===a}}static getDayInfo(){const t=this.getTodaysChallenges();return{dayNumber:t.dayNumber,multiplier:Math.min(1+(t.dayNumber-1)*.1,2)}}}class b{static STORAGE_KEY="_atlasLocations";static BASE_MAX_LOCATIONS=50;static BONUS_PER_COMPLETION=10;static ABSOLUTE_MAX_LOCATIONS=1e3;static getLocations(){try{const t=localStorage.getItem(this.STORAGE_KEY);if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e:[]}catch(t){return console.error("Error reading saved locations:",t),[]}}static saveLocation(t){try{const e=this.getLocations(),a=e.findIndex(n=>n.stargateUrl===t.stargateUrl),r={...t,id:this.generateId(),timestamp:Date.now()};a!==-1?e[a]=r:e.push(r);const o=this.getCurrentMaxLocations();e.length>o&&(e.sort((n,c)=>c.timestamp-n.timestamp),e.splice(o)),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Error saving location:",e)}}static removeLocation(t){try{const a=this.getLocations().filter(r=>r.id!==t);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a))}catch(e){console.error("Error removing location:",e)}}static clearAllLocations(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(t){console.error("Error clearing locations:",t)}}static generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static getCurrentMaxLocations(){try{const t=this.getCompletedDaysCount(),e=j.getCompletionStatus().allCompleted?1:0,a=this.BASE_MAX_LOCATIONS+(t+e)*this.BONUS_PER_COMPLETION;return Math.min(a,this.ABSOLUTE_MAX_LOCATIONS)}catch(t){return console.error("Error calculating max locations:",t),this.BASE_MAX_LOCATIONS}}static getCompletedDaysCount(){try{const e=localStorage.getItem("_atlasCompletionHistory");if(e){const a=JSON.parse(e);return Array.isArray(a)?a.length:0}return 0}catch(t){return console.error("Error getting completion history:",t),0}}static getLocationStats(){const t=this.getLocations(),e=this.getCurrentMaxLocations();return console.log("Location debug:",{completedDays:this.getCompletedDaysCount(),todayCompleted:j.getCompletionStatus().allCompleted,maxAllowed:e}),{total:t.length,galaxies:t.filter(a=>a.type==="galaxy").length,systems:t.filter(a=>a.type==="system").length,planets:t.filter(a=>a.type==="planet").length,maxAllowed:e}}}const A=({value:i,max:t,label:e,color:a="indigo",size:r="xs",showPercentage:o=!1})=>{const n=t>0?Math.min(i/t*100,100):0,c={indigo:{bg:"bg-indigo-500/20",fill:"bg-gradient-to-r from-indigo-500 to-indigo-400",text:"text-indigo-400"},blue:{bg:"bg-blue-500/20",fill:"bg-gradient-to-r from-blue-500 to-blue-400",text:"text-blue-400"},purple:{bg:"bg-purple-500/20",fill:"bg-gradient-to-r from-purple-500 to-purple-400",text:"text-purple-400"},cyan:{bg:"bg-cyan-500/20",fill:"bg-gradient-to-r from-cyan-500 to-cyan-400",text:"text-cyan-400"},green:{bg:"bg-green-500/20",fill:"bg-gradient-to-r from-green-500 to-green-400",text:"text-green-400"}},x={xs:"h-1.5",sm:"h-2"},d=c[a],g=x[r];return s.jsxs("div",{className:"w-full",children:[e&&s.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[s.jsx("span",{className:"text-gray-400",children:e}),o&&s.jsxs("span",{className:`${d.text} font-medium`,children:[n.toFixed(0),"%"]})]}),s.jsx("div",{className:`w-full ${d.bg} rounded-full overflow-hidden ${g}`,children:s.jsx("div",{className:`${d.fill} ${g} rounded-full transition-all duration-700 ease-out shadow-sm`,style:{width:`${n}%`},children:s.jsx("div",{className:`w-full h-full ${d.fill} opacity-50 animate-pulse`})})})]})},K=({currentLocation:i})=>{const[t,e]=h.useState(!1),[a,r]=h.useState(!1),[o,n]=h.useState("stats"),[c,x]=h.useState(null),[d,g]=h.useState([]),[u,w]=h.useState(null),[p,L]=h.useState(null),v=h.useRef(null);h.useEffect(()=>{if(t){x(D()),g(b.getLocations()),w(b.getLocationStats());const l=j.updateProgress();L(l)}},[t]);const S=()=>{r(!0),setTimeout(()=>{e(!1),r(!1)},300)},O=()=>{t?S():e(!0)};h.useEffect(()=>{const l=m=>{t&&!a&&v.current&&!v.current.contains(m.target)&&S()};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[t,a]);const _=l=>{if(l===0)return"0 B";const m=1024,N=["B","KB","MB"],E=Math.floor(Math.log(l)/Math.log(m));return parseFloat((l/Math.pow(m,E)).toFixed(2))+" "+N[E]},C=l=>l.replace(/_/g," "),k=(l,m)=>{l.stopPropagation(),b.removeLocation(m),g(b.getLocations()),w(b.getLocationStats())};return s.jsx(s.Fragment,{children:s.jsxs("div",{ref:v,className:"fixed bottom-4 sm:bottom-6 right-4 sm:right-6 z-50",children:[s.jsxs("button",{onClick:O,className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-600 via-purple-600 to-blue-800 hover:from-blue-500 hover:via-purple-500 hover:to-blue-700 text-white rounded-full shadow-2xl border-2 border-blue-400/30 transition-all duration-300 transform hover:scale-105 backdrop-blur-sm",title:"Spaceship Control Panel",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("svg",{className:"flex items-center justify-center",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",children:s.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[s.jsx("path",{d:"M12 3a6.02 6.02 0 0 0-5.923 4.9c-.086.466-.13.699.032 1.005c.161.307.39.409.847.613c1.38.614 3.134.982 5.044.982s3.665-.368 5.044-.982c.457-.204.686-.306.847-.613c.162-.306.118-.54.032-1.005A6.02 6.02 0 0 0 12 3"}),s.jsx("path",{d:"M17 5.5c2.989.788 5 2.26 5 3.945C22 11.961 17.523 14 12 14S2 11.96 2 9.445C2 7.76 4.011 6.288 7 5.5M12 18v3m5-4l1 4M7 17l-1 4"})]})})}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-blue-400/20 animate-ping"})]}),t&&s.jsxs("div",{className:"fixed bottom-20 sm:bottom-24 right-2 sm:right-6 w-[calc(100vw-1rem)] sm:w-96 max-w-md max-h-[70vh] sm:max-h-96 bg-black/90 backdrop-blur-xl rounded-2xl border border-blue-400/30 shadow-2xl z-40 overflow-hidden transition-all duration-300 ease-out",style:{animation:a?"slideDownFadeOut 0.3s ease-out forwards":"slideUpFadeIn 0.3s ease-out forwards"},children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 p-4 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),s.jsx("h3",{className:"text-white font-bold text-lg",children:"ðŸš€ Spaceship Control"})]}),s.jsx("button",{onClick:S,className:"text-gray-400 hover:text-white transition-colors duration-200",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex mt-3 space-x-1",children:[s.jsx("button",{onClick:()=>n("stats"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 ${o==="stats"?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:"ðŸ“Š Statistics"}),s.jsxs("button",{onClick:()=>n("locations"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 ${o==="locations"?"bg-purple-500/30 text-purple-300 border border-purple-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:["ðŸ“ Saved Locations (",u?.total||0,")"]})]})]}),s.jsxs("div",{className:"p-4 max-h-64 overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[o==="stats"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-white font-semibold text-sm",children:"ðŸŒŸ Daily Challenges"}),p&&s.jsxs("div",{className:"text-xs text-indigo-400 font-medium",children:["Day ",p.dayNumber," â€¢ x",Math.min(1+(p.dayNumber-1)*.1,2).toFixed(1)]})]}),p&&s.jsx("div",{className:"space-y-3 mb-4",children:p.challenges.map(l=>{const m={galaxies:"indigo",systems:"blue",planets:"purple"},N={galaxies:"Galaxies Explored",systems:"Systems Visited",planets:"Planets Discovered"};return s.jsxs("div",{className:"relative",children:[s.jsx(A,{value:l.current,max:l.target,label:`${N[l.type]}: ${l.current}/${l.target}`,color:m[l.type],showPercentage:!0}),l.completed&&s.jsx("div",{className:"absolute -right-3 top-0 text-white bg-green-500 px-0.5 rounded-full text-[8px]",children:"âœ“"})]},l.type)})}),p&&s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-4",children:[s.jsxs("div",{className:"bg-white/5 rounded-lg p-2 border border-indigo-500/20",children:[s.jsx("div",{className:"text-gray-400",children:"Completed"}),s.jsxs("div",{className:"text-indigo-400 font-bold",children:[p.challenges.filter(l=>l.completed).length,"/",p.challenges.length]})]}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-2 border border-green-500/20",children:[s.jsx("div",{className:"text-gray-400",children:"Archive Size"}),s.jsx("div",{className:"text-green-400 font-bold",children:c?_(c.size):"0 B"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-semibold mb-3 text-sm",children:"ðŸ“ Saved Locations"}),s.jsx("div",{className:"mb-3",children:s.jsx(A,{value:u?.total||0,max:u?.maxAllowed||50,label:`Saved Locations: ${u?.total||0}/${u?.maxAllowed||50}`,color:"cyan",showPercentage:!0})}),s.jsxs("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[s.jsxs("div",{className:"bg-white/5 rounded p-1.5 text-center",children:[s.jsx("div",{className:"text-gray-400 text-[10px]",children:"Galaxies"}),s.jsx("div",{className:"text-indigo-400 font-bold text-xs",children:u?.galaxies||0})]}),s.jsxs("div",{className:"bg-white/5 rounded p-1.5 text-center",children:[s.jsx("div",{className:"text-gray-400 text-[10px]",children:"Systems"}),s.jsx("div",{className:"text-blue-400 font-bold text-xs",children:u?.systems||0})]}),s.jsxs("div",{className:"bg-white/5 rounded p-1.5 text-center",children:[s.jsx("div",{className:"text-gray-400 text-[10px]",children:"Planets"}),s.jsx("div",{className:"text-purple-400 font-bold text-xs",children:u?.planets||0})]})]}),s.jsx("div",{className:"text-[10px] text-gray-500 mt-2",children:"*Complete your daily tasks to be able to save more Atlas locations"})]})]}),o==="locations"&&s.jsx("div",{className:"space-y-2",children:d.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"No saved locations"}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Use the ðŸ“ button to save locations"})]}):d.map(l=>s.jsx("div",{className:"bg-white/5 hover:bg-white/10 rounded-lg p-2 border border-white/10 hover:border-white/20 transition-all duration-200 group",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("a",{href:l.stargateUrl,className:"flex-1 min-w-0 hover:text-blue-300 transition-colors duration-200",title:`Navigate to ${C(l.name)}`,children:s.jsxs("div",{className:"flex items-center space-x-1.5",children:[s.jsxs("div",{className:"text-[10px]",children:[l.type==="galaxy"&&"ðŸŒŒ",l.type==="system"&&"â­",l.type==="planet"&&"ðŸª"]}),s.jsx("div",{className:"text-white text-xs font-medium truncate",children:C(l.name)}),s.jsx("div",{className:"text-gray-500 text-[10px] shrink-0",children:new Date(l.timestamp).toLocaleDateString()})]})}),s.jsx("button",{onClick:m=>k(m,l.id),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-400 transition-all duration-200 ml-1",title:"Remove location",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},l.id))})]})]})]})})};export{T as H,b as L,K as S,B as a,P as b,G as g,R as m};
