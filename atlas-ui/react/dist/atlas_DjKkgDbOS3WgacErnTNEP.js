import{S as l}from"./atlas_BJ-3dIBoTMvLRTvbW4jvB.js";import{C as n}from"./atlas_CqUMNY_RyRklhCsbOI68T.js";const a={LAVA_WAVE_HEIGHT:{min:.02,max:.06},LAVA_WAVE_FREQUENCY:{min:1,max:2.5},LAVA_WAVE_SPEED:{min:.02,max:.1},EMISSIVE_INTENSITY:{min:3,max:6},GLOW_INTENSITY:{min:2,max:4},TEMPERATURE:{min:.8,max:1},TIME_SPEED:{min:.05,max:.5}};class c{layerMesh;material;params;layerSystem;startTime;constructor(E,e={}){this.layerSystem=E;const o=e.seed||Math.floor(Math.random()*1e6),t=new l(o);this.startTime=e.startTime||o%1e4/1e3;const m=new n(16747520),i={h:0,s:0,l:0};m.getHSL(i);const r=e.moltenColor instanceof n?e.moltenColor:new n().setHSL(i.h,1,.5),S=e.coreColor instanceof n?e.coreColor:new n().setHSL(i.h+.05,.9,.6),A=e.coolingColor instanceof n?e.coolingColor:new n().setHSL(i.h-.05,.8,.3);this.params={moltenColor:r,coreColor:S,coolingColor:A,lavaWaveHeight:e.lavaWaveHeight||t.uniform(a.LAVA_WAVE_HEIGHT.min,a.LAVA_WAVE_HEIGHT.max),lavaWaveFrequency:e.lavaWaveFrequency||t.uniform(a.LAVA_WAVE_FREQUENCY.min,a.LAVA_WAVE_FREQUENCY.max),lavaWaveSpeed:e.lavaWaveSpeed||t.uniform(a.LAVA_WAVE_SPEED.min,a.LAVA_WAVE_SPEED.max),secondaryLavaWaveHeight:e.secondaryLavaWaveHeight||t.uniform(a.LAVA_WAVE_HEIGHT.min*.7,a.LAVA_WAVE_HEIGHT.max*.7),secondaryLavaWaveFrequency:e.secondaryLavaWaveFrequency||t.uniform(a.LAVA_WAVE_FREQUENCY.min*1.3,a.LAVA_WAVE_FREQUENCY.max*1.3),secondaryLavaWaveSpeed:e.secondaryLavaWaveSpeed||t.uniform(a.LAVA_WAVE_SPEED.min*1.2,a.LAVA_WAVE_SPEED.max*1.2),lavaDistortionScale:e.lavaDistortionScale||2,lavaDistortionSpeed:e.lavaDistortionSpeed||.2,emissiveIntensity:e.emissiveIntensity||t.uniform(a.EMISSIVE_INTENSITY.min,a.EMISSIVE_INTENSITY.max),glowIntensity:e.glowIntensity||t.uniform(a.GLOW_INTENSITY.min,a.GLOW_INTENSITY.max),viscosity:e.viscosity||.8,temperature:e.temperature||t.uniform(a.TEMPERATURE.min,a.TEMPERATURE.max),lavaRoughness:e.lavaRoughness||.9,lavaMetalness:e.lavaMetalness||.1,lavaNormalScale:e.lavaNormalScale||.08,lavaNormalSpeed:e.lavaNormalSpeed||.1,seed:o,startTime:this.startTime,timeSpeed:e.timeSpeed||t.uniform(a.TIME_SPEED.min,a.TIME_SPEED.max)},this.material=this.layerSystem.createMoltenLavaLayerMaterial(this.params),this.layerMesh=this.layerSystem.addEffectLayer("moltenLava",this.material,this.layerSystem.getNextScaleFactor(),this)}update(E){const o=(this.startTime+Date.now()/1e3*this.params.timeSpeed)%1e3;this.material.uniforms.time&&(this.material.uniforms.time.value=o)}dispose(){}}function _(s,E,e){const o=e||12345,t=new l(o+8e3),m={emissiveIntensity:t.uniform(a.EMISSIVE_INTENSITY.min,a.EMISSIVE_INTENSITY.max),glowIntensity:t.uniform(a.GLOW_INTENSITY.min,a.GLOW_INTENSITY.max),temperature:t.uniform(a.TEMPERATURE.min,a.TEMPERATURE.max),viscosity:.9,lavaRoughness:.8,lavaMetalness:.1,lavaNormalScale:.06,lavaNormalSpeed:.08,seed:o};return new c(s,m)}export{c as M,_ as c};
