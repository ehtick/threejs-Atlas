import{r as o,j as s,R as Oe}from"./atlas_BiACxVxc6cO5okV5F68Rd.js";import{W as Be}from"./atlas_hV4YbJX4LmBeaYZmYRF0y.js";import{O as Ne}from"./atlas_BJLzboHTaSIGvKgNbvLUr.js";import{e as A}from"./atlas_wcPzamFt5CPpIcmd124GE.js";import{E as j,c as Ue}from"./atlas_DIajYqgJJlFIdWNB9l9vK.js";import{g as Ge}from"./atlas_BkcglrC3q9-fMfrzU8uke.js";import{P as He}from"./atlas_BMkCctBHLeH7Oacwp8KHY.js";import{c as We}from"./atlas_DqkZSA4SKHSRE9_1MZZpu.js";import{a1 as $e,a2 as Ve,C as ye,a3 as Ye,a4 as Ze,a5 as Xe,a6 as qe,a7 as we,a8 as Je,b as Ke,z as Qe,M as et,m as tt}from"./atlas_BOOzg5XYrrU1N4SZySfRd.js";const rt=({planetData:d,showInConsole:b=!0,showInPage:G=!1})=>{const[q,J]=o.useState([]),[D,H]=o.useState({});o.useEffect(()=>{if(!d)return;const u=z(d);H(u),J(L(d)),typeof window<"u"&&(window.__DEBUG_PLANET_DATA=d,window.__DEBUG_PLANET_ANALYSIS=u)},[d,b]);function z(u){const f={hasValidStructure:!1,missingFields:[],dataIntegrity:"unknown",renderingIssues:[],colorConsistency:"unknown"};if(u.planet_info&&u.surface_elements?f.hasValidStructure=!0:(u.planet_info||f.missingFields.push("planet_info"),u.surface_elements||f.missingFields.push("surface_elements")),u.surface_elements?.type==="oceanic"&&(f.oceanicData={hasAbstractLands:!!u.surface_elements.abstract_lands?.length,numGreenPatches:u.surface_elements.green_patches?.length||0,numClouds:u.surface_elements.clouds?.length||0,hasDepths:u.surface_elements.depths?.enabled||!1,baseColorIsBlue:u.planet_info?.base_color==="#0000FF",greenPatchColor:u.surface_elements.green_patches?.[0]?.color,issues:[]},f.oceanicData.numGreenPatches>15&&f.oceanicData.issues.push("Muchos parches verdes pueden ocultar el ocÃ©ano azul"),f.oceanicData.baseColorIsBlue||f.oceanicData.issues.push(`Color base no es azul puro: ${u.planet_info?.base_color}`),f.renderingIssues=f.oceanicData.issues),u.planet_info?.base_color&&u.planet_info?.type){const M={Oceanic:"#0000FF",Rocky:"#808080",Icy:"#ADD8E6",Desert:"#FFD700",Lava:"#FF0000"}[u.planet_info.type];M&&u.planet_info.base_color!==M?f.colorConsistency=`Inconsistente: esperado ${M}, recibido ${u.planet_info.base_color}`:f.colorConsistency="Correcto"}return f}function L(u){const f=[];if(!u.surface_elements?.type)return["No surface type defined"];const I=u.surface_elements.type.toLowerCase();switch(I){case"oceanic":f.push("OceanWavesEffect (PROBLEMA: ignora green_patches de Python)");break;case"rocky":f.push("RockyTerrainEffect");break;case"icy":f.push("IcyTerrainEffect");break;case"gas giant":f.push("GasGiantBandsEffect");break;default:f.push(`Generic effect for type: ${I}`)}return u.atmosphere?.density>0&&f.push("AtmosphericEffect"),u.rings&&f.push("RingSystemEffect"),f}return G?s.jsxs("div",{style:{position:"fixed",top:10,right:10,background:"rgba(0, 0, 0, 0.9)",color:"#00ff00",padding:"10px",borderRadius:"5px",fontFamily:"monospace",fontSize:"12px",maxWidth:"400px",maxHeight:"600px",overflow:"auto",zIndex:1e4,border:"1px solid #00ff00"},children:[s.jsxs("h3",{style:{margin:"0 0 10px 0",color:"#00ff00"},children:["ðŸ” Planet Debug: ",d.planet_info?.name]}),s.jsxs("div",{style:{marginBottom:"10px"},children:[s.jsx("strong",{children:"Type:"})," ",d.planet_info?.type,s.jsx("br",{}),s.jsx("strong",{children:"Base Color:"})," ",d.planet_info?.base_color,s.jsx("br",{}),s.jsx("strong",{children:"Radius:"})," ",d.planet_info?.radius]}),d.surface_elements?.type==="oceanic"&&s.jsxs("div",{style:{marginBottom:"10px",borderTop:"1px solid #00ff00",paddingTop:"10px"},children:[s.jsx("strong",{children:"ðŸŒŠ Oceanic Data:"}),s.jsx("br",{}),s.jsxs("span",{style:{color:D.oceanicData?.baseColorIsBlue?"#00ff00":"#ff0000"},children:["Base Color: ",D.oceanicData?.baseColorIsBlue?"âœ“ Blue":"âœ— Not Blue"]}),s.jsx("br",{}),"Green Patches: ",D.oceanicData?.numGreenPatches,s.jsx("br",{}),"Clouds: ",D.oceanicData?.numClouds,s.jsx("br",{}),"Has Depths: ",D.oceanicData?.hasDepths?"Yes":"No",s.jsx("br",{}),D.oceanicData?.issues?.length>0&&s.jsxs("div",{style:{color:"#ffaa00",marginTop:"5px"},children:["âš ï¸ Issues:",s.jsx("br",{}),D.oceanicData.issues.map((u,f)=>s.jsxs("div",{children:["- ",u]},f))]})]}),s.jsxs("div",{style:{borderTop:"1px solid #00ff00",paddingTop:"10px"},children:[s.jsx("strong",{children:"ðŸŽ¨ Effects Applied:"}),s.jsx("br",{}),q.map((u,f)=>s.jsxs("div",{style:{color:u.includes("PROBLEMA")?"#ff0000":"#00ff00"},children:["- ",u]},f))]}),s.jsx("button",{style:{marginTop:"10px",background:"#00ff00",color:"#000",border:"none",padding:"5px 10px",cursor:"pointer",borderRadius:"3px"},children:"Log to Console"})]}):null};function nt(d){o.useEffect(()=>{if(d&&d.surface_elements?.type==="oceanic"){d.surface_elements.green_patches?.length>0;const b=d.planet_info?.base_color;b!=="#0000FF"&&console.warn("âš ï¸ Planeta oceÃ¡nico sin color azul base!",b)}},[d])}const U=2.5,Re=()=>{const d=45*Math.PI/180;return U/(Math.tan(d/2)*.5)},st=o.forwardRef(({planetName:d,containerClassName:b="",width:G=800,height:q=600,autoRotate:J=!0,enableControls:D=!0,showDebugInfo:H=!1,planetData:z,cosmicOriginTime:L,initialAngleRotation:u,onDataLoaded:f,onEffectsCreated:I,onError:M},Pe)=>{const x=o.useRef(null),p=o.useRef(null),y=o.useRef(null),P=o.useRef(null),m=o.useRef(null),O=o.useRef(null),Ee=o.useRef(new $e),K=o.useRef(null),Q=o.useRef(0),S=o.useRef(null),[ce,W]=o.useState(!0),[le,F]=o.useState(null),[g,ue]=o.useState(null),[ve,ee]=o.useState([]),[$,te]=o.useState({activeEffects:0,enabledEffects:0,frameRate:0,renderTime:0}),B=o.useRef([]),re=o.useRef(0),V=o.useRef(null),E=o.useRef(null),w=o.useRef(null);o.useImperativeHandle(Pe,()=>({captureScreenshot:()=>{if(!y.current||!p.current||!P.current)return;const e=y.current,r=p.current,t=P.current,n=e.domElement.width,i=e.domElement.height,c=3840/n,a=[];r.traverse(h=>{if(h.isPoints&&h.material){const l=h.material;if(l.size!==void 0&&(a.push({material:l,originalSize:l.size}),l.size=l.size*c*1.75),l.uniforms&&(l.uniforms.size&&(a.push({material:l,uniform:"size",originalValue:l.uniforms.size.value}),l.uniforms.size.value=l.uniforms.size.value*c*1.75),l.uniforms.scale&&(a.push({material:l,uniform:"scale",originalValue:l.uniforms.scale.value}),l.uniforms.scale.value=l.uniforms.scale.value*c*1.75)),h.geometry&&h.geometry.attributes.size){const R=h.geometry.attributes.size,T=R.array.slice();a.push({geometry:h.geometry,originalSizeArray:T});for(let k=0;k<R.array.length;k++)R.array[k]*=c*1.75;R.needsUpdate=!0}}if(h.isSprite&&(a.push({object:h,originalScale:h.scale.clone()}),h.scale.multiplyScalar(c*1.75)),h.isLine&&h.material){const l=h.material;l.linewidth!==void 0&&(a.push({material:l,originalLinewidth:l.linewidth}),l.linewidth=l.linewidth*c*1.75)}}),e.setSize(3840,3840),t.aspect=1,t.updateProjectionMatrix(),e.render(r,t),e.domElement.toBlob(h=>{if(h){const l=URL.createObjectURL(h),R=document.createElement("a");R.href=l,R.download=`planet_${d}_${Date.now()}.png`,R.click(),URL.revokeObjectURL(l)}a.forEach(({material:l,object:R,originalSize:T,originalScale:k,originalLinewidth:he,uniform:ge,originalValue:_e,geometry:be,originalSizeArray:oe})=>{if(T!==void 0&&(l.size=T),k!==void 0&&R.scale.copy(k),he!==void 0&&(l.linewidth=he),ge&&_e!==void 0&&(l.uniforms[ge].value=_e),be&&oe){const xe=be.attributes.size;for(let X=0;X<oe.length;X++)xe.array[X]=oe[X];xe.needsUpdate=!0}}),e.setSize(n,i),t.aspect=n/i,t.updateProjectionMatrix()},"image/png",1)}}));const Se=Math.floor(Date.now()/1e3),[Ce,at]=o.useState(0),Ae=L||g?.timing?.cosmic_origin_time||Date.now()/1e3-3600,De=Se-Ae+Ce;Q.current=De;const ne=o.useCallback(()=>{if(!x.current||!y.current||!P.current)return;const e=x.current,r=e.clientWidth||400,t=e.clientHeight||400;y.current.setSize(r,t),w.current&&w.current.setSize(r,t),P.current.aspect=r/t,P.current.updateProjectionMatrix()},[]),fe=async e=>{if(!(!m.current||!p.current||!E.current)){j.log("Applying modular effects from API data",{planet:e.planet_info.name,type:e.planet_info.type});try{ie();const r=Ge(e);E.current.updateBaseColor(r);const t=A.createEffectsFromPythonPlanetData(e,U,m.current,p.current,E.current),n=e.planet_info?.type||e.surface_elements?.planet_type||e.planet_type;if((n==="toxic"||n==="Toxic")&&p.current&&P.current&&y.current)try{const i=We(p.current,P.current,y.current,U,{planet_type:"toxic",toxic_intensity:.8,atmosphere_thickness:.6},e.seeds?.planet_seed);if(i){w.current=i;const c={id:`effect_toxic_postprocessing_${Date.now()}`,type:"toxic_post_processing",effect:{dispose:()=>i.dispose(),update:a=>i.update(a),updateUniforms:a=>i.update(a),addToScene:()=>{},apply:()=>{}},priority:100,enabled:!0,name:"Toxic Post-Processing (Bloom + Godrays + Chromatic Aberration)"};A.effects.set(c.id,c),t.push(c),j.log("Created toxic post-processing effects")}}catch(i){j.error("Error creating toxic post-processing",i)}else w.current&&(w.current.dispose(),w.current=null);ee(t),B.current=t,I&&I(t),j.log(`Successfully applied ${t.length} modular effects`),ae()}catch{Y()}}},Me=o.useCallback(()=>{if(!x.current)return!1;try{for(;x.current.firstChild;)x.current.removeChild(x.current.firstChild);p.current=null,P.current=null,y.current=null,m.current=null,_.current=null;const e=x.current,r=e.clientWidth||G||400,t=e.clientHeight||q||400,n=new Ve;n.background=new ye(1297),p.current=n;const i=new Ye(45,r/t,.1,1e4),c=Re();i.position.set(0,0,c),i.lookAt(0,0,0),P.current=i;const a=new Be({antialias:!0,alpha:!0,powerPreference:"high-performance"});return a.setSize(r,t),a.setPixelRatio(Math.min(window.devicePixelRatio,2)),a.shadowMap.enabled=!0,a.shadowMap.type=Ze,a.toneMapping=Xe,a.toneMappingExposure=1.2,a.outputColorSpace=qe,x.current.appendChild(a.domElement),y.current=a,Te(n,null),ke(n),D&&ze(i,a.domElement),!0}catch{return!1}},[g,z,L]),je=e=>{if(!e)return 0;const r=e.sun_angle||e.lighting?.sun_angle;if(r!==void 0)return r;const t=e.timing?.current_orbital_angle||e.timing?.orbital_angle;return t??0},v=o.useRef(null),se=o.useRef(null),N=o.useRef(null),_=o.useRef(null),Le=e=>{e.castShadow=!0,e.shadow.mapSize.width=2048,e.shadow.mapSize.height=2048,e.shadow.camera.near=.5,e.shadow.camera.far=50,e.shadow.camera.left=-10,e.shadow.camera.right=10,e.shadow.camera.top=10,e.shadow.camera.bottom=-10},de=e=>{if(!v.current||!p.current)return;const r=je(e),t=10,n=r+Math.PI,i=Math.sin(r)*5,c=t*Math.cos(n),a=i,C=t*Math.sin(n);v.current.position.set(c,a,C),v.current.target.position.set(0,0,0),p.current.children.includes(v.current.target)||p.current.add(v.current.target),se.current&&se.current.position.set(-c*.5,0,-C*.5),E.current&&v.current&&E.current.updateFromThreeLight(v.current),v.current&&A.updateLightForAllEffects(v.current)},Te=(e,r)=>{{const t=new we(16777215,2);t.position.set(-10,5,10),t.target.position.set(0,0,0),t.castShadow=!0,Le(t),e.add(t),e.add(t.target),v.current=t;const n=new we(16777215,.05);n.position.set(8,-3,-5),e.add(n),se.current=n;const i=new Je(2236996,.1);e.add(i),setTimeout(()=>{E.current&&t&&E.current.updateFromThreeLight(t),t&&A.updateLightForAllEffects(t)},50);return}},ke=e=>{const r=new Ke(U,128,64),t=new Qe({color:8421504}),n=new et(r,t);n.castShadow=!0,n.receiveShadow=!0,n.position.set(0,0,0),e.add(n),m.current=n;const i=new ye(8421504);E.current=new He(n,i),E.current.addToScene(e)},ze=(e,r)=>{const t=new Ne(e,r);t.enableDamping=!0,t.dampingFactor=.05;const n=Re();t.minDistance=n*.5,t.maxDistance=n*2,t.autoRotate=J,t.autoRotateSpeed=.5,t.enablePan=!0,t.enableZoom=!0,t.target.set(0,0,0),O.current=t},Ie=o.useCallback(async()=>{if(!window.isLoadingPlanetData){window.isLoadingPlanetData=!0;try{W(!0),F(null),j.log("Loading planet data from API",{planetName:d});const r=await fetch("/api/planet/rendering-data");if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const t=await r.json();if(!t.success)throw new Error(t.error||"Failed to fetch planet data");const n=t.planet_data,i=t.timing,c=t.rendering_data,a={planet_info:c?.planet_info||{name:n.name,type:n.planet_type,base_color:"#808080",radius:n.diameter/15e3,orbital_radius:n.orbital_radius},surface_elements:c?.surface_elements,atmosphere:c?.atmosphere,rings:c?.rings,effects_3d:c?.effects_3d,shader_uniforms:c?.shader_uniforms,universal_actions:c?.universal_actions,timing:{cosmic_origin_time:i.cosmic_origin_time,current_time_seconds:i.current_time_seconds,elapsed_time:i.elapsed_time,initial_orbital_angle:n.initial_orbital_angle,current_orbital_angle:n.current_orbital_angle,max_orbital_radius:i.max_orbital_radius,system_max_orbital_radius:n.system_max_orbital_radius},original_planet_data:n,seeds:c?.seeds};return ue(a),S.current=a,j.log("API data loaded successfully",{planet:a.planet_info.name,type:a.planet_info.type,hasEffects:!!a.surface_elements,fullRenderingData:c}),f&&f(a),a}catch(e){const r=e instanceof Error?e.message:"Unknown error";return F(r),M&&M(r),null}finally{W(!1),window.isLoadingPlanetData=!1}}},[d,f,M]);o.useCallback(async()=>{if(!window.isLoadingPlanetData){window.isLoadingPlanetData=!0;try{W(!0),F(null),j.log("Loading planet data from API",{planetName:d});const r=await fetch("/api/planet/rendering-data");if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const t=await r.json();if(!t.success)throw new Error(t.error||"Failed to fetch planet data");const n=t.planet_data,i=t.timing,c=t.rendering_data,a={planet_info:c?.planet_info||{name:n.name,type:n.planet_type,base_color:"#808080",radius:n.diameter/15e3,orbital_radius:n.orbital_radius},surface_elements:c?.surface_elements,atmosphere:c?.atmosphere,rings:c?.rings,effects_3d:c?.effects_3d,shader_uniforms:c?.shader_uniforms,universal_actions:c?.universal_actions,timing:{cosmic_origin_time:i.cosmic_origin_time,current_time_seconds:i.current_time_seconds,elapsed_time:i.elapsed_time,initial_orbital_angle:n.initial_orbital_angle,current_orbital_angle:n.current_orbital_angle,max_orbital_radius:i.max_orbital_radius,system_max_orbital_radius:n.system_max_orbital_radius},original_planet_data:n,seeds:c?.seeds};ue(a),S.current=a,j.log("API data loaded successfully",{planet:a.planet_info.name,type:a.planet_info.type,hasEffects:!!a.surface_elements,fullRenderingData:c}),de(a),_.current&&p.current&&(p.current.remove(_.current),_.current.geometry.dispose(),_.current.material.dispose(),_.current=null),await fe(a),f&&f(a)}catch(e){const r=e instanceof Error?e.message:"Unknown error";F(r),M&&M(r),Y()}finally{W(!1),window.isLoadingPlanetData=!1}}},[d,z,L,u]);const pe=o.useCallback(()=>{if(!g||!m.current)return;const e=z?.orbital_period_seconds||365.25*24*3600,r=2*Math.PI/e,t=g.timing?.initial_orbital_angle||0,n=Date.now()/1e3,i=0,c=L||g.timing?.cosmic_origin_time||Date.now()/1e3-3600,a=n-c+i,C=(t+a*r)%(2*Math.PI),Z=g.timing?.max_orbital_radius||100,l=20+g.planet_info?.orbital_radius/Z*80,R=l,T=l*Math.cos(C),k=R*Math.sin(C);m.current.position.x=T,m.current.position.z=k,m.current.position.y=0},[g,z,L]),Fe=o.useCallback(async e=>{const r=e||g;if(r&&p.current)try{de(r),_.current&&p.current&&(p.current.remove(_.current),_.current.geometry.dispose(),_.current.material.dispose(),_.current=null),await fe(r)}catch{Y()}},[g]),Y=()=>{if(!(!p.current||!m.current)){j.warn("Applying fallback effects for planet type:",z?.planet_type);try{ie(),m.current.material instanceof tt&&m.current.material.color.setHex(6710886);try{const e=Ue("generic"),r=A.createEffectsFromList(e,U,m.current);r.forEach(t=>{t.effect.addToScene&&p.current&&m.current&&t.effect.addToScene(p.current,m.current.position)}),B.current=r,ee(r)}catch{}ae()}catch{}}},ie=()=>{B.current.forEach(e=>{try{A.removeEffect(e.id),e.effect.dispose&&e.effect.dispose()}catch{}}),w.current&&(w.current.dispose(),w.current=null),B.current=[],ee([])},me=o.useCallback(()=>{K.current=requestAnimationFrame(me);const e=performance.now(),r=Ee.current.getDelta();O.current&&O.current.update();try{A.updateAllEffects(r,m.current?.rotation.y,P.current||void 0)}catch{}if(m.current&&S.current){S.current.planet_info?.name;const i=S.current.original_planet_data,c=i?.orbital_period_seconds||365.25*24*3600,a=S.current.timing?.initial_orbital_angle||0;L||S.current.timing?.cosmic_origin_time||Date.now()/1e3-3600;const C=i?.axial_tilt||0,Z=2*Math.PI/c;(a+Q.current*Z)%(2*Math.PI);const h=S.current.timing?.max_orbital_radius||S.current.timing?.system_max_orbital_radius,l=i?.orbital_radius;if(!h||!l)return;i?.eccentricity_factor,m.current.position.set(0,0,0);const R=i?.rotation_period_seconds||86400,T=2*Math.PI/R;m.current.rotation.y=Q.current*T%(2*Math.PI),m.current.rotation.z=C*(Math.PI/180)}B.current.forEach(i=>{i.effect.updateUniforms&&i.effect.updateUniforms(r)});const n=Array.from(A.effects.values()).find(i=>i.type==="toxic_post_processing")?.enabled||!1;if(w.current&&n&&(w.current.update(r),v.current&&w.current.updateLightPosition(v.current.position,P.current)),y.current&&p.current&&P.current){const i=performance.now();w.current&&n?w.current.render():y.current.render(p.current,P.current);const c=performance.now()-i;if(e-re.current>5e3){const a=1e3/(e-re.current);ae(),te(C=>({...C,frameRate:Math.round(a),renderTime:Math.round(c*100)/100})),re.current=e}}},[]),ae=o.useCallback(()=>{const e=A.getStats();te(r=>({...r,activeEffects:e.activeEffects,enabledEffects:e.enabledEffects}))},[]);return o.useEffect(()=>{let e=!0;return window.tonnirLoggedInPlanet=!1,window.orbitChecked=!1,window.debugOrbitRadius=null,window.debugSystemMaxRadius=null,window.planetNameLogged=!1,window.timingDataLogged=!1,window.isLoadingPlanetData=!1,window.orbitalAngleSourceLogged=!1,window.orbitalAngleDebugged=!1,window.positionDebugged=!1,window.animationLoopDebugged=!1,(async()=>{try{if(!e)return;const t=await Ie();if(!e)return;if(!Me()){e&&F("Failed to initialize 3D renderer");return}if(!e||(me(),x.current&&"ResizeObserver"in window&&(V.current=new ResizeObserver(ne),V.current.observe(x.current)),window.addEventListener("resize",ne),!e))return;t?await Fe(t):Y()}catch(t){e&&F(t instanceof Error?t.message:"Unknown initialization error")}})(),()=>{if(e=!1,S.current=null,K.current&&cancelAnimationFrame(K.current),V.current&&V.current.disconnect(),window.removeEventListener("resize",ne),ie(),E.current&&(E.current.dispose(),E.current=null),O.current&&O.current.dispose(),N.current&&p.current&&(p.current.remove(N.current),N.current.geometry.dispose(),N.current.material.dispose(),N.current=null),_.current&&p.current&&(p.current.remove(_.current),_.current.geometry.dispose(),_.current.material.dispose(),_.current=null),y.current&&x.current)try{x.current.contains(y.current.domElement)&&x.current.removeChild(y.current.domElement),y.current.dispose()}catch{}}},[]),o.useEffect(()=>{const e=setInterval(()=>{const r=A.getStats();te(t=>({...t,activeEffects:r.activeEffects,enabledEffects:r.enabledEffects}))},1e4);return()=>clearInterval(e)},[]),o.useEffect(()=>{g&&p.current&&m.current&&pe()},[g,pe]),nt(g),s.jsxs("div",{className:`relative ${b}`,children:[H&&g&&s.jsx(rt,{planetData:g,showInPage:!0,showInConsole:!0}),s.jsx("div",{ref:x,className:"w-full h-full",style:{minHeight:"300px",aspectRatio:"1"}}),ce&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:s.jsxs("div",{className:"text-white text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),s.jsx("div",{children:"Loading planet..."})]})}),le&&s.jsxs("div",{className:"absolute top-0 left-0 right-0 p-2 bg-red-500 text-white text-sm",children:[s.jsx("strong",{children:"Error:"})," ",le]}),g&&!ce&&s.jsx("div",{className:"absolute bottom-0 left-0 p-2 text-white bg-black bg-opacity-50 max-w-xs rounded-tr-lg",children:s.jsx("h3",{className:"text-xs font-bold",children:g.planet_info.name})}),H&&s.jsxs("div",{className:"absolute top-0 right-0 p-4 text-white bg-black bg-opacity-70 text-xs font-mono",children:[s.jsx("h4",{className:"font-bold mb-2",children:"Debug Info"}),s.jsxs("div",{children:["Frame Rate: ",$.frameRate," FPS"]}),s.jsxs("div",{children:["Render Time: ",$.renderTime,"ms"]}),s.jsxs("div",{children:["Active Effects: ",$.activeEffects]}),s.jsxs("div",{children:["Enabled Effects: ",$.enabledEffects]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"font-semibold",children:"Effects:"}),ve.map(e=>s.jsxs("div",{className:"ml-2",children:[e.type," (",e.enabled?"ON":"OFF",")"]},e.id))]})]})]})});class it extends Oe.Component{constructor(b){super(b),this.state={hasError:!1,error:null}}static getDerivedStateFromError(b){return{hasError:!0,error:b.message}}componentDidCatch(b,G){}render(){return this.state.hasError?s.jsx("div",{className:"flex items-center justify-center w-full h-full bg-gray-900/50 rounded",children:s.jsxs("div",{className:"text-center p-4",children:[s.jsx("div",{className:"text-red-400 text-sm mb-2",children:"3D Renderer Error"}),s.jsx("div",{className:"text-xs text-gray-400",children:this.state.error})]})}):this.props.children}}const gt=o.forwardRef((d,b)=>s.jsx(it,{children:s.jsx(st,{ref:b,...d})}));export{gt as M};
