import{S,D as f,g as A}from"./atlas_DSDeNuR3l3HMz0UA3yLvy.js";import{C as o}from"./atlas_BjkcO1_mNssSqp05cLhjd.js";const t={WAVE_HEIGHT:{min:.05,max:.12},WAVE_FREQUENCY:{min:2,max:5},WAVE_SPEED:{min:.2,max:.8},SPECULAR_INTENSITY:{min:2,max:6},TRANSPARENCY:{min:.2,max:.5},TIME_SPEED:{min:.1,max:1}};class C{layerMesh;material;params;layerSystem;startTime;constructor(a,e={}){this.layerSystem=a;const i=e.seed||Math.floor(Math.random()*1e6),n=new S(i);this.startTime=e.startTime||i%1e4/1e3;const r=e.waterColor instanceof o?e.waterColor:e.waterColor?new o(e.waterColor):new o(3050379),s=e.deepWaterColor instanceof o?e.deepWaterColor:e.deepWaterColor?new o(e.deepWaterColor):new o(13158),m=e.foamColor instanceof o?e.foamColor:e.foamColor?new o(e.foamColor):new o(16777215);this.params={waterColor:r,deepWaterColor:s,foamColor:m,waveHeight:e.waveHeight||n.uniform(t.WAVE_HEIGHT.min,t.WAVE_HEIGHT.max),waveFrequency:e.waveFrequency||n.uniform(t.WAVE_FREQUENCY.min,t.WAVE_FREQUENCY.max),waveSpeed:e.waveSpeed||n.uniform(t.WAVE_SPEED.min,t.WAVE_SPEED.max),secondaryWaveHeight:e.secondaryWaveHeight||n.uniform(t.WAVE_HEIGHT.min*.6,t.WAVE_HEIGHT.max*.6),secondaryWaveFrequency:e.secondaryWaveFrequency||n.uniform(t.WAVE_FREQUENCY.min*1.2,t.WAVE_FREQUENCY.max*1.2),secondaryWaveSpeed:e.secondaryWaveSpeed||n.uniform(t.WAVE_SPEED.min*1.1,t.WAVE_SPEED.max*1.1),distortionScale:e.distortionScale||3,distortionSpeed:e.distortionSpeed||.5,specularIntensity:e.specularIntensity||n.uniform(t.SPECULAR_INTENSITY.min,t.SPECULAR_INTENSITY.max),reflectivity:e.reflectivity||.3,transparency:e.transparency||n.uniform(t.TRANSPARENCY.min,t.TRANSPARENCY.max),roughness:e.roughness||.1,metalness:e.metalness||.2,normalScale:e.normalScale||.05,normalSpeed:e.normalSpeed||.5,seed:i,startTime:this.startTime,timeSpeed:e.timeSpeed||n.uniform(t.TIME_SPEED.min,t.TIME_SPEED.max)},this.material=this.layerSystem.createAquiferWaterLayerMaterial(this.params),this.layerMesh=this.layerSystem.addEffectLayer("aquiferWater",this.material,this.layerSystem.getNextScaleFactor(),this)}update(a){const e=this.params.cosmicOriginTime||f,i=A(e,this.params.timeSpeed,this.startTime);this.material.uniforms.time&&(this.material.uniforms.time.value=i)}dispose(){}}function y(l,a,e){const i=a.planet_info||{},n=i.base_color?typeof i.base_color=="string"?new o(i.base_color):new o().fromArray(i.base_color):new o(4886754),r={h:0,s:0,l:0};n.getHSL(r);const s=new o().setHSL(r.h,Math.min(1,r.s*1.2),Math.min(1,r.l*.8)),m=new o().setHSL(r.h,Math.min(1,r.s*1.3),Math.max(0,r.l*.4)),E=12345,c=new S(E+5e3),d={waterColor:s,deepWaterColor:m,foamColor:new o(.9,.95,1),specularIntensity:c.uniform(t.SPECULAR_INTENSITY.min,t.SPECULAR_INTENSITY.max),reflectivity:.3,transparency:c.uniform(t.TRANSPARENCY.min,t.TRANSPARENCY.max),roughness:.05,metalness:.1,normalScale:.02,normalSpeed:.6,cosmicOriginTime:a.timing?.cosmic_origin_time,seed:E};return new C(l,d)}export{C as A,y as c};
