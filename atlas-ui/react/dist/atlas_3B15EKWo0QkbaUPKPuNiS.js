import{j as s,r as v}from"./atlas_BGo7KNTC_D9rNHeIOnwpB.js";import{u as X,g as q}from"./atlas_5StMBQg7EZ_DcUhMgqODi.js";const ae=()=>s.jsx("header",{className:"bg-black/20 backdrop-blur-md border-b border-white/10 px-4 sm:px-6 py-4",children:s.jsxs("div",{className:"w-full flex items-center justify-between",children:[s.jsxs("a",{href:"/",className:"flex items-center space-x-3 sm:space-x-4",children:[s.jsx("img",{src:"/static/atlas-logo.jpg",alt:"Atlas Logo",className:"h-10 w-10 sm:h-12 sm:w-12 rounded-full border-2 border-blue-400 shadow-lg"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"The Atlas"}),s.jsx("p",{className:"text-xs sm:text-sm text-gray-400 hidden sm:block",children:"Universal Navigation System"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"ONLINE"})]}),s.jsx("div",{className:"text-xs sm:text-sm text-gray-400 hidden lg:block",children:"Quantum Navigation Ready"})]})]})}),F={SPACESHIP:"_atlasSpaceShip",ARCHIVE:"__atlasArchive",DAILY_CHALLENGES:"_atlasDailyChallenges",LOCATIONS:"_atlasLocations"},D=(m,e)=>{try{const t=btoa(m),r=new TextEncoder().encode(e),n=q(r),o=btoa(String.fromCharCode(...n));localStorage.setItem(t,o)}catch(t){console.error("Error encoding/compressing:",t),localStorage.setItem(m,e)}},C=m=>{try{const e=btoa(m),t=localStorage.getItem(e);if(t===null)return null;const a=atob(t),r=new Uint8Array(a.split("").map(i=>i.charCodeAt(0))),n=X(r);return new TextDecoder().decode(n)}catch(e){return console.error("Error decoding/decompressing:",e),localStorage.getItem(m)}},B=m=>{try{const e=btoa(m);localStorage.removeItem(e)}catch(e){console.error("Error removing encoded item:",e),localStorage.removeItem(m)}},Q=()=>{Object.values(F).forEach(e=>{const t=localStorage.getItem(e);t!==null&&(D(e,t),localStorage.removeItem(e),console.log(`Migrated ${e} to encoded storage`))})};class O{static STORAGE_KEY="_atlasDailyChallenges";static BASE_GOALS={galaxies:1,systems:3,planets:10};static getTodaysChallenges(){const e=new Date().toISOString().split("T")[0],t=this.getStoredChallenges();return!t||t.date!==e?this.createNewDayChallenges(e,t):t}static getStoredChallenges(){try{const e=C(this.STORAGE_KEY);return e?JSON.parse(e):null}catch(e){return console.error("Error reading daily challenges:",e),null}}static createNewDayChallenges(e,t){const a=t?t.dayNumber+1:1,r=Math.pow(1.1,a-1),n=this.getCurrentStats(),o=[{type:"galaxies",current:n.galaxies,target:Math.ceil(a*this.BASE_GOALS.galaxies*r),dayNumber:a,completed:!1},{type:"systems",current:n.systems,target:Math.ceil(a*this.BASE_GOALS.systems*r),dayNumber:a,completed:!1},{type:"planets",current:n.planets,target:Math.ceil(a*this.BASE_GOALS.planets*r),dayNumber:a,completed:!1}],i=(t?.totalCompletedDays||0)+(t?.dayCompleted?1:0),l={date:e,dayNumber:a,challenges:o,lastReset:Date.now(),totalCompletedDays:i,dayCompleted:!1};return this.saveChallenges(l),l}static getCurrentStats(){try{const e=C("__atlasArchive");if(!e)return{galaxies:0,systems:0,planets:0};const t=JSON.parse(e);let a=0,r=0;Object.values(t.g||{}).forEach(l=>{a+=Object.keys(l).length,Object.values(l).forEach(c=>{typeof c=="string"&&(r+=(c.match(/1/g)||[]).length)})});const n=new Set(Object.keys(t.g||{})),o=new Set(Object.keys(t.gv||{}));return{galaxies:new Set([...n,...o]).size,systems:a,planets:r}}catch(e){return console.error("Error getting current stats:",e),{galaxies:0,systems:0,planets:0}}}static updateProgress(){const e=this.getTodaysChallenges(),t=this.getCurrentStats();return e.challenges.forEach(r=>{const n=t[r.type];r.current=n,r.completed=n>=r.target}),e.challenges.every(r=>r.completed)&&!e.dayCompleted&&(e.dayCompleted=!0),this.saveChallenges(e),e}static getCompletedDaysCount(){try{return this.getTodaysChallenges().totalCompletedDays||0}catch(e){return console.error("Error getting completed days count:",e),0}}static saveChallenges(e){try{D(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving daily challenges:",t)}}static getCompletionStatus(){const e=this.getTodaysChallenges(),t=e.challenges.filter(r=>r.completed).length,a=e.challenges.length;return{completed:t,total:a,allCompleted:t===a}}static getDayInfo(){const e=this.getTodaysChallenges(),t=Math.pow(1.1,e.dayNumber-1);return{dayNumber:e.dayNumber,multiplier:Math.round(t*100)/100}}}const M=m=>{const[e,t,a]=m.split(",").map(Number);return`${e.toString(36)}_${t.toString(36)}_${a.toString(36)}`};class T{static STORAGE_KEY=F.ARCHIVE;static MAX_ENTRIES_PER_GALAXY=1e3;static getData(){try{this.migrateToEncodedStorage(),this.cleanupLegacyStorage();const e=C(this.STORAGE_KEY);if(!e)return{g:{},gv:{}};const t=JSON.parse(e);return t.gv||(t.gv={}),t}catch(e){return console.error("Error reading Atlas archive:",e),{g:{},gv:{}}}}static cleanupLegacyStorage(){try{const e="atlasHistoricalData";localStorage.getItem(e)&&localStorage.removeItem(e)}catch(e){console.error("Error cleaning up legacy storage:",e)}}static migrateToEncodedStorage(){try{localStorage.getItem(this.STORAGE_KEY)&&Q()}catch(e){console.error("Error migrating to encoded storage:",e)}}static saveData(e){try{D(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving Atlas archive:",t)}}static performCleanup(e){const t=Object.keys(e.g);t.length>100&&t.slice(0,t.length-100).forEach(r=>delete e.g[r]),Object.keys(e.g).forEach(a=>{const r=e.g[a],n=Object.keys(r);n.length>this.MAX_ENTRIES_PER_GALAXY&&n.slice(0,n.length-this.MAX_ENTRIES_PER_GALAXY).forEach(i=>delete r[i])})}static performEmergencyCleanup(){const e=document.body.getAttribute("data-coordinates");if(e){const t=M(e),a=this.getData(),r=a.g[t];a.g={},r&&(a.g[t]=r),this.saveData(a)}}static markPlanetVisited(e,t,a,r){const n=this.getData(),o=M(e),i=t.toString(16),l=r.findIndex(u=>u.name.toLowerCase()===a.toLowerCase());if(l===-1){console.warn(`Planet ${a} not found in system planets list`);return}n.g[o]||(n.g[o]={}),n.g[o][i]||(n.g[o][i]="");const c=this.bitmapToIndices(n.g[o][i]);c.includes(l)||(c.push(l),n.g[o][i]=this.indicesToBitmap(c),this.saveData(n),O.updateProgress())}static markGalaxyVisited(e){const t=this.getData(),a=M(e);t.gv[a]||(t.gv[a]=!0,console.log(`🌌 Galaxy marked as visited: ${e} (hash: ${a})`),this.saveData(t),O.updateProgress())}static markSystemVisited(e,t){const a=this.getData(),r=M(e),n=t.toString(16);this.markGalaxyVisited(e),a.g[r]||(a.g[r]={}),a.g[r][n]||(a.g[r][n]="",this.saveData(a),O.updateProgress())}static bitmapToIndices(e){return e?e.split("").map((t,a)=>t==="1"?a:-1).filter(t=>t!==-1):[]}static indicesToBitmap(e){if(e.length===0)return"";const t=Math.max(...e),a=Array(t+1).fill("0");return e.forEach(r=>{r>=0&&(a[r]="1")}),a.join("")}static isGalaxyVisited(e){const t=this.getData(),a=M(e);return!!t.gv[a]}static isSystemVisited(e,t){const a=this.getData(),r=M(e),n=t.toString(16);return!!(a.g[r]&&n in a.g[r])}static getVisitedPlanets(e,t,a){const r=this.getData(),n=M(e),o=t.toString(16),i=r.g[n]?.[o]||"";return this.bitmapToIndices(i).map(c=>{const u=a[c];return u?u.name.toLowerCase():null}).filter(c=>c!==null)}static getVisitedPlanetCount(e,t){const a=this.getData(),r=M(e),n=t.toString(16),o=a.g[r]?.[n]||"";return this.bitmapToIndices(o).length}static getStorageStats(){const e=this.getData();let t=0;Object.values(F).forEach(c=>{const u=C(c);u&&(t+=u.length)});let r=0,n=0;Object.values(e.g).forEach(c=>{r+=Object.keys(c).length,Object.values(c).forEach(u=>{typeof u=="string"&&(n+=(u.match(/1/g)||[]).length)})});const o=new Set(Object.keys(e.g||{})),i=new Set(Object.keys(e.gv||{})),l=new Set([...o,...i]);return{size:t,galaxies:l.size,visitedGalaxies:Object.keys(e.gv).length,systems:r,planets:n}}}const re=m=>{T.markGalaxyVisited(m)},ne=(m,e,t,a)=>{T.markPlanetVisited(m,e,t,a)},oe=(m,e)=>{T.markSystemVisited(m,e)},ie=(m,e,t)=>T.getVisitedPlanets(m,e,t),Z=(m,e)=>T.isSystemVisited(m,e),le=(m,e,t,a)=>{if(!Z(m,e))return"none";{const r=T.getVisitedPlanetCount(m,e);return r>=t&&t>0?"complete":(r>0,"partial")}},ee=()=>T.getStorageStats();class R{static STORAGE_KEY="_atlasLocations";static BASE_MAX_LOCATIONS=5;static BONUS_PER_COMPLETION=5;static ABSOLUTE_MAX_LOCATIONS=999;static getLocations(){try{const e=C(this.STORAGE_KEY);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Error reading saved locations:",e),[]}}static async saveLocation(e){try{const t=this.getLocations(),a=this.getCurrentMaxLocations(),r=t.findIndex(o=>o.stargateUrl===e.stargateUrl),n={...e,id:this.generateId(),timestamp:Date.now()};return r!==-1?(t[r]=n,D(this.STORAGE_KEY,JSON.stringify(t)),!0):t.length>=a&&!await this.showSlotFullDialog(a)?!1:(t.push(n),t.length>a&&(t.sort((o,i)=>i.timestamp-o.timestamp),t.splice(a)),D(this.STORAGE_KEY,JSON.stringify(t)),!0)}catch(t){return console.error("Error saving location:",t),!1}}static saveLocationSync(e){const t=this.getLocations(),a=this.getCurrentMaxLocations(),r=t.findIndex(o=>o.stargateUrl===e.stargateUrl),n={...e,id:this.generateId(),timestamp:Date.now()};r!==-1?t[r]=n:t.push(n),t.length>a&&(t.sort((o,i)=>i.timestamp-o.timestamp),t.splice(a)),D(this.STORAGE_KEY,JSON.stringify(t))}static removeLocation(e){try{const a=this.getLocations().filter(r=>r.id!==e);D(this.STORAGE_KEY,JSON.stringify(a))}catch(t){console.error("Error removing location:",t)}}static clearAllLocations(){try{B(this.STORAGE_KEY)}catch(e){console.error("Error clearing locations:",e)}}static generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static async showSlotFullDialog(e){return new Promise(t=>{const a=document.createElement("div");a.className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm transition-all duration-300 opacity-0",a.style.backdropFilter="blur(8px)";const r=document.createElement("div");r.className="relative bg-gradient-to-br from-slate-900/95 to-slate-800/95 border border-slate-600/50 rounded-2xl p-8 max-w-md mx-4 text-white shadow-2xl backdrop-blur-xl transform scale-95 transition-all duration-300",r.style.backdropFilter="blur(20px)",r.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.05)";const n=document.createElement("div");n.className="text-center";const o=document.createElement("div");o.className="inline-flex items-center justify-center w-16 h-16 bg-amber-500/20 rounded-full mb-6";const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("class","w-8 h-8 text-amber-400"),i.setAttribute("fill","none"),i.setAttribute("stroke","currentColor"),i.setAttribute("viewBox","0 0 24 24");const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("stroke-linecap","round"),l.setAttribute("stroke-linejoin","round"),l.setAttribute("stroke-width","2"),l.setAttribute("d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z");const c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-width","2"),c.setAttribute("d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"),i.appendChild(l),i.appendChild(c),o.appendChild(i);const u=document.createElement("h2");u.className="text-2xl font-bold mb-4 text-white",u.textContent="Storage Full";const p=document.createElement("p");p.className="text-slate-400 mb-6 text-[10px] bg-slate-800/50 rounded-lg p-3 border border-slate-700/50",p.textContent="💡 Complete daily challenges to increase your storage capacity";const N=document.createElement("p");N.className="text-slate-300 mb-4 text-base leading-relaxed",N.textContent="You have reached your maximum of ";const y=document.createElement("span");y.className="font-bold text-amber-400 bg-amber-400/10 px-2 py-1 rounded-lg",y.textContent=e.toString(),N.appendChild(y),N.appendChild(document.createTextNode(" saved locations."));const A=document.createElement("p");A.className="text-slate-200 mb-8 text-base",A.textContent="Overwrite the oldest saved location?";const f=document.createElement("div");f.className="flex gap-4 justify-center";const S=document.createElement("button");S.id="cancelSave",S.className="px-6 py-3 bg-slate-700/80 hover:bg-slate-600/80 border border-slate-600/50 hover:border-slate-500/50 rounded-xl transition-all duration-200 font-medium text-slate-200 hover:text-white transform hover:scale-105 hover:shadow-lg",S.textContent="Cancel";const b=document.createElement("button");b.id="confirmOverwrite",b.className="px-6 py-3 bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-500 hover:to-amber-400 rounded-xl transition-all duration-200 font-semibold text-white transform hover:scale-105 hover:shadow-lg border border-amber-400/30",b.textContent="Overwrite",f.appendChild(S),f.appendChild(b),n.appendChild(o),n.appendChild(u),n.appendChild(p),n.appendChild(N),n.appendChild(A),n.appendChild(f),r.appendChild(n),a.appendChild(r),document.body.appendChild(a),requestAnimationFrame(()=>{a.style.opacity="1",r.style.transform="scale(1)"});const I=r.querySelector("#cancelSave"),j=r.querySelector("#confirmOverwrite"),L=E=>{a.style.opacity="0",r.style.transform="scale(0.95)",setTimeout(()=>{document.body.contains(a)&&document.body.removeChild(a),t(E)},300)};I?.addEventListener("click",()=>{L(!1)}),j?.addEventListener("click",()=>{L(!0)}),a.addEventListener("click",E=>{E.target===a&&L(!1)});const h=E=>{E.key==="Escape"&&(document.removeEventListener("keydown",h),L(!1))};document.addEventListener("keydown",h)})}static hasAvailableSlot(){const e=this.getLocations(),t=this.getCurrentMaxLocations();return e.length<t}static getAvailableSlots(){const e=this.getLocations(),t=this.getCurrentMaxLocations();return Math.max(0,t-e.length)}static getCurrentMaxLocations(){try{const e=this.getCompletedDaysCount(),t=O.getCompletionStatus().allCompleted?1:0,a=this.BASE_MAX_LOCATIONS+(e+t)*this.BONUS_PER_COMPLETION;return Math.min(a,this.ABSOLUTE_MAX_LOCATIONS)}catch(e){return console.error("Error calculating max locations:",e),this.BASE_MAX_LOCATIONS}}static getCompletedDaysCount(){try{const e=C("_atlasDailyChallenges");return e&&JSON.parse(e).totalCompletedDays||0}catch(e){return console.error("Error getting completion history:",e),0}}static getLocationStats(){const e=this.getLocations(),t=this.getCurrentMaxLocations();return console.log("Location debug:",{completedDays:this.getCompletedDaysCount(),todayCompleted:O.getCompletionStatus().allCompleted,maxAllowed:t}),{total:e.length,galaxies:e.filter(a=>a.type==="galaxy").length,systems:e.filter(a=>a.type==="system").length,planets:e.filter(a=>a.type==="planet").length,maxAllowed:t,available:Math.max(0,t-e.length)}}static async saveLocationWithConfirmation(e,t,a){try{const r={name:e,type:t,stargateUrl:a};return await this.saveLocation(r)?{success:!0,message:`Location "${e}" saved successfully!`}:{success:!1,message:"Save operation cancelled by user."}}catch(r){return console.error("Error saving location with confirmation:",r),{success:!1,message:"Failed to save location. Please try again."}}}}class w{static STORAGE_KEY="_atlasSpaceShip";static COLLECTION_COOLDOWNS={planet:900*1e3,system:2700*1e3,galaxy:5400*1e3};static PASSIVE_INTERVAL=60*1e3;static DEFAULT_DATA={r:{a:300,e:200,d:250},u:{l:1,ef:1,rn:500,st:1e3,m:1},c:{},t:{},s:{tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0}};static getData(){try{const e=C(this.STORAGE_KEY);if(!e)return this.saveData(this.DEFAULT_DATA),{...this.DEFAULT_DATA};const t=JSON.parse(e),a=this.expandData(t);return{r:a.r||{...this.DEFAULT_DATA.r},u:a.u||{...this.DEFAULT_DATA.u},c:a.c||{},t:a.t||{},s:a.s||{...this.DEFAULT_DATA.s}}}catch(e){return console.error("Error reading spaceship data:",e),{...this.DEFAULT_DATA}}}static saveData(e){try{const a=Date.now()-1440*60*1e3;Object.keys(e.c).forEach(o=>{e.c[o]<a&&delete e.c[o]});const r=Object.keys(e.c);if(r.length>500){const o=r.sort((l,c)=>e.c[l]-e.c[c]);o.slice(0,o.length-500).forEach(l=>delete e.c[l])}const n=this.compactData(e);D(this.STORAGE_KEY,JSON.stringify(n))}catch(t){console.error("Error saving spaceship data:",t),t.name==="QuotaExceededError"&&this.performEmergencyCleanup()}}static performEmergencyCleanup(){const e=this.getData();e.c={},e.s={tc:0,tr:{a:0,e:0,d:0},tt:0},this.saveData(e)}static getResources(){const e=this.getData();return{antimatter:e.r.a,element115:e.r.e,deuterium:e.r.d}}static setResources(e){const t=this.getData(),a=t.u;t.r.a=Math.min(Math.max(0,e.antimatter),a.st),t.r.e=Math.min(Math.max(0,e.element115),a.st),t.r.d=Math.min(Math.max(0,e.deuterium),a.st),this.saveData(t)}static addResources(e){const t=this.getData(),a=t.u;t.r.a=Math.min(t.r.a+e.antimatter,a.st),t.r.e=Math.min(t.r.e+e.element115,a.st),t.r.d=Math.min(t.r.d+e.deuterium,a.st),t.s&&(t.s.tr=t.s.tr||{a:0,e:0,d:0},t.s.tr.a+=e.antimatter,t.s.tr.e+=e.element115,t.s.tr.d+=e.deuterium),this.saveData(t)}static consumeResources(e){const t=this.getData(),a={antimatter:Math.floor(e.antimatter/t.u.ef),element115:Math.floor(e.element115/t.u.ef),deuterium:Math.floor(e.deuterium/t.u.ef)};return t.r.a>=a.antimatter&&t.r.e>=a.element115&&t.r.d>=a.deuterium?(t.r.a-=a.antimatter,t.r.e-=a.element115,t.r.d-=a.deuterium,t.s&&(t.s.tt=(t.s.tt||0)+1),this.saveData(t),!0):!1}static getUpgrade(){const e=this.getData();return{level:e.u.l,efficiency:e.u.ef,range:e.u.rn,storage:e.u.st,multiplier:e.u.m}}static upgradeShip(e){const t=this.getData();if(t.u.l>=100)return!1;if(t.r.a>=e.antimatter&&t.r.e>=e.element115&&t.r.d>=e.deuterium){t.r.a-=e.antimatter,t.r.e-=e.element115,t.r.d-=e.deuterium,t.u.l+=1;let r=Math.min(4,1+(t.u.l-1)*.2),n=t.u.l<=25?500+(t.u.l-1)*200:5500+Math.floor(Math.log(t.u.l-25+1)*800);n=Math.min(n,25e3);let o=t.u.l<=20?1e3+(t.u.l-1)*400:1e3+20*400+Math.floor(Math.log(t.u.l-20+1)*1200);o=Math.min(o,5e4);let i=1+(t.u.l-1)*.242;return t.u.ef=Math.min(6,r),t.u.rn=Math.floor(n),t.u.st=Math.floor(o),t.u.m=Math.min(25,i),this.saveData(t),!0}return!1}static getLocationTypeFromId(e){return e.startsWith("planet_")?"planet":e.startsWith("system_")?"system":e.startsWith("galaxy_")?"galaxy":"planet"}static getCooldownForLocation(e){const t=this.getLocationTypeFromId(e);return this.COLLECTION_COOLDOWNS[t]}static canCollectFromLocation(e){const a=this.getData().c[e];if(!a)return!0;const r=Date.now(),n=this.getCooldownForLocation(e);return r-a>=n}static getTimeUntilNextCollection(e){const a=this.getData().c[e];if(!a)return 0;const r=Date.now(),o=this.getCooldownForLocation(e)-(r-a);return o>0?o/(1e3*60*60):0}static markLocationCollected(e){const t=this.getData();t.c[e]=Date.now(),this.updateCollectionStreaks(t),this.saveData(t)}static updateCollectionStreaks(e){const t=Date.now(),a=new Date(t).toDateString(),r=e.t.lc?new Date(e.t.lc).toDateString():null;if(e.s||(e.s={tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0}),e.s.tc=(e.s.tc||0)+1,a!==r){const n=e.t.lc;if(e.t.lc=t,r&&n){const o=new Date(n),i=new Date(t),l=Math.floor((i.getTime()-o.getTime())/(1e3*60*60*24));l===1?e.s.cs=(e.s.cs||0)+1:l>1&&(e.s.cs=1)}else e.s.cs=1;e.s.dc=1}else e.s.dc=(e.s.dc||0)+1}static getCollectionStreakInfo(){const e=this.getData(),t=e.s?.cs||0,a=e.s?.dc||0,r=t>=3?1.25:1;return{currentStreak:t,dailyCollections:a,streakMultiplier:r}}static getCollectionCount(e){const t=this.getData();return Object.keys(t.c).filter(r=>r.startsWith(e.split("_")[0])).length}static shouldProcessPassive(){const e=this.getData(),t=Date.now(),a=e.t.lp||0;return t-a>=this.PASSIVE_INTERVAL}static markPassiveProcessed(){const e=this.getData();e.t.lp=Date.now(),this.saveData(e)}static getStats(){const e=this.getData();return{totalCollections:e.s?.tc||0,totalResourcesCollected:e.s?.tr||{antimatter:0,element115:0,deuterium:0},totalTravels:e.s?.tt||0}}static migrateFromOldStorage(){try{const e=["atlas_ship_resources","atlas_ship_upgrades","atlas_resource_collections","_atlasSpaceShip_collections","_atlasSpaceShip_lastPassive","atlas_last_resource_generation","atlas_last_passive_generation"];if(C(this.STORAGE_KEY))return;const a=localStorage.getItem("atlas_ship_resources"),r=localStorage.getItem("atlas_ship_upgrades"),n=localStorage.getItem("atlas_resource_collections")||localStorage.getItem("_atlasSpaceShip_collections"),o={...this.DEFAULT_DATA};if(a)try{const i=JSON.parse(a);o.r.a=i.antimatter||150,o.r.e=i.element115||100,o.r.d=i.deuterium||125}catch{}if(r)try{const i=JSON.parse(r);o.u.l=i.level||1,o.u.ef=i.efficiency||1,o.u.rn=i.range||300,o.u.st=i.storage||500,o.u.m=i.multiplier||i.passiveGeneration||1}catch{}if(n)try{const i=JSON.parse(n);Object.keys(i).forEach(l=>{i[l].lastCollected&&(o.c[i[l].id]=i[l].lastCollected)})}catch{}this.saveData(o),e.forEach(i=>{try{localStorage.removeItem(i)}catch{}}),console.log("Successfully migrated to unified spaceship storage")}catch(e){console.error("Error during migration:",e)}}static reset(){B(this.STORAGE_KEY)}static getStorageSize(){return(C(this.STORAGE_KEY)||"{}").length}static compactData(e){return{r:e.r,u:e.u,c:e.c,s:e.s,t:e.t}}static expandData(e){const t=Date.now(),a=1440*60*1e3,r={};return e.c&&Object.keys(e.c).forEach(o=>{const i=e.c[o],l=15778368e5,c=1893456e6;if(i===0){const u=t-a;r[o]=u}else if(i>=l&&i<=c)r[o]=i;else if(i>0&&i<86400*30){const u=t-i*1e3;r[o]=u}else r[o]=t-a}),{r:e.r||{a:300,e:200,d:250},u:e.u||{l:1,ef:1,rn:500,st:1e3,m:1},c:r,t:e.t||{},s:e.s||{tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0}}}static cleanCorruptedTimestamps(){const e=this.getData(),t=Date.now(),a=15778368e5,r=1893456e6,n=1440*60*1e3;let o=!1;Object.keys(e.c).forEach(i=>{const l=e.c[i];(l===0||l<a||l>r)&&(e.c[i]=t-n,o=!0)}),o&&this.saveData(e)}}const ce=Object.freeze(Object.defineProperty({__proto__:null,UnifiedSpaceshipStorage:w},Symbol.toStringTag,{value:"Module"}));class g{static initialize(){w.migrateFromOldStorage()}static getResources(){return w.getResources()}static getUpgrade(){return w.getUpgrade()}static addResources(e){w.addResources({antimatter:e.antimatter||0,element115:e.element115||0,deuterium:e.deuterium||0})}static consumeResources(e){return w.consumeResources(e)}static calculateTravelCost(e,t=0){const r={galaxy:{antimatter:25,element115:20,deuterium:15},system:{antimatter:8,element115:6,deuterium:10},planet:{antimatter:2,element115:1,deuterium:3}}[e],n=Math.max(1,t/100);return{antimatter:Math.floor(r.antimatter*n),element115:Math.floor(r.element115*n),deuterium:Math.floor(r.deuterium*n)}}static canAffordTravel(e,t=0){const a=this.calculateTravelCost(e,t),r=this.getResources(),n=this.getUpgrade(),o={antimatter:Math.floor(a.antimatter/n.efficiency),element115:Math.floor(a.element115/n.efficiency),deuterium:Math.floor(a.deuterium/n.efficiency)};return r.antimatter>=o.antimatter&&r.element115>=o.element115&&r.deuterium>=o.deuterium&&t<=n.range}static getUpgradeCost(e){let t;e<=20?t=1e3+(e-1)*400:t=1e3+20*400+Math.floor(Math.log(e-20+1)*1200);const r=Math.floor(t*.4/1.3),n=1+(e-1)*.01,o=Math.floor(r*n);return{antimatter:o,element115:Math.floor(o*1.3),deuterium:Math.floor(o*.9)}}static canAffordUpgrade(){const e=this.getUpgrade();if(e.level>=100)return!1;const a=this.getUpgradeCost(e.level),r=this.getResources();return r.antimatter>=a.antimatter&&r.element115>=a.element115&&r.deuterium>=a.deuterium}static upgradeShip(){const e=this.getUpgrade(),t=this.getUpgradeCost(e.level);return w.upgradeShip(t)}static calculatePassiveGeneration(){const e=this.getUpgrade(),t=JSON.parse(C("_atlasLocations")||"[]"),a=Array.isArray(t)?t:t.locations||[];let r={antimatter:0,element115:0,deuterium:0},n={planets:0,systems:0,galaxies:0};return a.forEach(o=>{o.type==="planet"?(n.planets++,r.antimatter+=3,r.element115+=2,r.deuterium+=3):o.type==="system"&&(n.systems++,r.antimatter+=1,r.element115+=1,r.deuterium+=1)}),r.antimatter=Math.floor(r.antimatter*e.multiplier),r.element115=Math.floor(r.element115*e.multiplier),r.deuterium=Math.floor(r.deuterium*e.multiplier),{...r,sources:n}}static processPassiveGeneration(){if(w.shouldProcessPassive()){const e=this.calculatePassiveGeneration();(e.antimatter>0||e.element115>0||e.deuterium>0)&&(this.addResources({antimatter:e.antimatter,element115:e.element115,deuterium:e.deuterium}),this.showPassiveGenerationNotification(e)),w.markPassiveProcessed()}}static getAccumulatedResourcesWithLimit(){const e=this.calculatePassiveGeneration(),t=this.getUpgrade(),a=this.getUpgradeCost(t.level),r={antimatter:a.antimatter*5,element115:a.element115*5,deuterium:a.deuterium*5},o=w.getData().t.lp,i=Date.now();if(!o||o===0||e.sources.planets===0&&e.sources.systems===0)return e;const l=Math.floor((i-o)/(60*1e3));return l<1?{antimatter:0,element115:0,deuterium:0,sources:e.sources}:l>=1?{antimatter:Math.min(e.antimatter*l,r.antimatter*2),element115:Math.min(e.element115*l,r.element115*2),deuterium:Math.min(e.deuterium*l,r.deuterium*2),sources:e.sources}:{antimatter:Math.min(e.antimatter*l,r.antimatter*2),element115:Math.min(e.element115*l,r.element115*2),deuterium:Math.min(e.deuterium*l,r.deuterium*2),sources:e.sources}}static showPassiveGenerationNotification(e){if(e.antimatter+e.element115+e.deuterium===0)return;const t=document.createElement("div");t.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-purple-900/90 to-blue-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-purple-500/50 w-[90vw] max-w-lg",t.style.animation="slideInDown 0.3s ease-out";const a=document.createElement("div");a.className="flex items-center space-x-3";const r=document.createElement("span");r.className="text-2xl",r.textContent="⛏️";const n=document.createElement("div"),o=document.createElement("div");o.className="text-sm font-bold text-purple-300",o.textContent="Mining Operations Complete!";const i=document.createElement("div");i.className="text-xs text-purple-200 mt-1 flex gap-3";const l=document.createElement("span");l.className="text-purple-300",l.textContent=`+${e.antimatter} AM`;const c=document.createElement("span");c.className="text-cyan-300",c.textContent=`+${e.element115} E115`;const u=document.createElement("span");u.className="text-orange-300",u.textContent=`+${e.deuterium} D`,i.appendChild(l),i.appendChild(c),i.appendChild(u);const p=document.createElement("div");if(p.className="text-xs text-purple-300 mt-1",p.textContent=`Collected from ${e.sources.planets}🪐 ${e.sources.systems}⭐`,n.appendChild(o),n.appendChild(i),n.appendChild(p),a.appendChild(r),a.appendChild(n),t.appendChild(a),!document.getElementById("collection-toast-styles")){const N=document.createElement("style");N.id="collection-toast-styles",N.textContent=`
        @keyframes slideInDown {
          from {
            transform: translate(-50%, -100%);
            opacity: 0;
          }
          to {
            transform: translate(-50%, 0);
            opacity: 1;
          }
        }
        @keyframes slideOutUp {
          from {
            transform: translate(-50%, 0);
            opacity: 1;
          }
          to {
            transform: translate(-50%, -100%);
            opacity: 0;
          }
        }
      `,document.head.appendChild(N)}document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideOutUp 0.3s ease-in forwards",setTimeout(()=>{t.remove()},300)},3e3)}static reset(){w.reset()}static getResourcesPercentage(){const e=this.getResources(),t=this.getUpgrade();return{antimatter:e.antimatter/t.storage*100,element115:e.element115/t.storage*100,deuterium:e.deuterium/t.storage*100}}static getPassiveGenerationInfo(){const e=this.calculatePassiveGeneration(),t=w.shouldProcessPassive()?0:(60*1e3-(Date.now()-(w.getData().t.lp||0)))/1e3;return{generation:e,perHour:{antimatter:e.antimatter*60,element115:e.element115*60,deuterium:e.deuterium*60},nextGenerationIn:Math.max(0,t)}}static getExchangeRates(){const e=this.getResources();return{antimatter:[{from:"antimatter",to:"element115",rate:1.2,available:e.antimatter},{from:"antimatter",to:"deuterium",rate:.8,available:e.antimatter}],element115:[{from:"element115",to:"antimatter",rate:.9,available:e.element115},{from:"element115",to:"deuterium",rate:1.1,available:e.element115}],deuterium:[{from:"deuterium",to:"antimatter",rate:1.3,available:e.deuterium},{from:"deuterium",to:"element115",rate:.95,available:e.deuterium}]}}static exchangeResources(e,t,a){const r=this.getResources(),i=this.getExchangeRates()[e].find(p=>p.to===t);if(!i||a<=0||r[e]<a)return!1;const l=Math.floor(a*i.rate),c=this.getUpgrade();if(r[t]+l>c.storage)return!1;const u={...r};return u[e]-=a,u[t]+=l,w.setResources(u),this.showExchangeNotification(e,t,a,l),!0}static showExchangeNotification(e,t,a,r){const n=document.createElement("div");n.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-amber-900/90 to-orange-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-amber-500/50",n.style.animation="slideInDown 0.3s ease-out";const o={antimatter:{name:"AM",color:"text-purple-300"},element115:{name:"E115",color:"text-cyan-300"},deuterium:{name:"D",color:"text-orange-300"}},i=o[e],l=o[t],c=document.createElement("div");c.className="flex items-center space-x-3";const u=document.createElement("span");u.className="text-2xl",u.textContent="🔄";const p=document.createElement("div"),N=document.createElement("div");N.className="text-sm font-bold text-amber-300",N.textContent="Resource Exchange";const y=document.createElement("div");y.className="text-xs text-amber-200 mt-1";const A=document.createElement("span");A.className=i.color,A.textContent=`-${a} ${i.name}`;const f=document.createElement("span");f.className="text-amber-300 mx-2",f.textContent="→";const S=document.createElement("span");S.className=l.color,S.textContent=`+${r} ${l.name}`,y.appendChild(A),y.appendChild(f),y.appendChild(S),p.appendChild(N),p.appendChild(y),c.appendChild(u),c.appendChild(p),n.appendChild(c),document.body.appendChild(n),setTimeout(()=>{n.style.animation="slideOutUp 0.3s ease-in forwards",setTimeout(()=>{n.remove()},300)},3e3)}}class G{static listeners=new Map;static subscribe(e,t){return this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t),()=>{const a=this.listeners.get(e);if(a){const r=a.indexOf(t);r>-1&&a.splice(r,1)}}}static emit(e,t){const a=this.listeners.get(e);a&&a.forEach(r=>{try{r(t)}catch(n){console.warn("Error in resource event callback:",n)}})}static clear(){this.listeners.clear()}}const k=({value:m,max:e,label:t,color:a="indigo",size:r="xs",showPercentage:n=!1})=>{const o=e>0?Math.min(m/e*100,100):0,i={indigo:{bg:"bg-indigo-500/20",fill:"bg-gradient-to-r from-indigo-500 to-indigo-400",text:"text-indigo-400"},blue:{bg:"bg-blue-500/20",fill:"bg-gradient-to-r from-blue-500 to-blue-400",text:"text-blue-400"},purple:{bg:"bg-purple-500/20",fill:"bg-gradient-to-r from-purple-500 to-purple-400",text:"text-purple-400"},cyan:{bg:"bg-cyan-500/20",fill:"bg-gradient-to-r from-cyan-500 to-cyan-400",text:"text-cyan-400"},green:{bg:"bg-green-500/20",fill:"bg-gradient-to-r from-green-500 to-green-400",text:"text-green-400"},orange:{bg:"bg-orange-500/20",fill:"bg-gradient-to-r from-orange-500 to-orange-400",text:"text-orange-400"},yellow:{bg:"bg-yellow-500/20",fill:"bg-gradient-to-r from-yellow-500 to-yellow-400",text:"text-yellow-400"}},l={xs:"h-1.5",sm:"h-2"},c=i[a]||i.indigo,u=l[r];return s.jsxs("div",{className:"w-full",children:[t&&s.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[s.jsx("span",{className:"text-gray-400",children:t}),n&&s.jsxs("span",{className:`${c.text} font-medium`,children:[o.toFixed(0),"%"]})]}),s.jsx("div",{className:`w-full ${c.bg} rounded-full overflow-hidden ${u}`,children:s.jsx("div",{className:`${c.fill} ${u} rounded-full transition-all duration-700 ease-out shadow-sm`,style:{width:`${o}%`},children:s.jsx("div",{className:`w-full h-full ${c.fill} opacity-50 animate-pulse`})})})]})},de=({currentLocation:m})=>{const[e,t]=v.useState(!1),[a,r]=v.useState(!1),[n,o]=v.useState("stats"),[i,l]=v.useState(null),[c,u]=v.useState([]),[p,N]=v.useState(null),[y,A]=v.useState(null),[f,S]=v.useState({antimatter:0,element115:0,deuterium:0}),[b,I]=v.useState({level:1,efficiency:1,range:300,storage:500,multiplier:1}),[j,L]=v.useState({antimatter:0,element115:0,deuterium:0}),[h,E]=v.useState({antimatter:0,element115:0,deuterium:0,sources:{planets:0,systems:0,galaxies:0}}),[Y,P]=v.useState(!1),$=v.useRef(null);v.useEffect(()=>{if(e){l(ee()),u(R.getLocations()),N(R.getLocationStats());const d=O.updateProgress();A(d),S(g.getResources()),I(g.getUpgrade());const x=g.getUpgrade();L(g.getUpgradeCost(x.level));const _=g.getAccumulatedResourcesWithLimit();E(_)}},[e]),v.useEffect(()=>{if(!e)return;const d=()=>{const J=g.getAccumulatedResourcesWithLimit();E(J)},x=()=>{S(g.getResources())},_=setInterval(d,15e3),U=G.subscribe("resources_updated",x);return()=>{clearInterval(_),U()}},[e]);const V=()=>{r(!0),setTimeout(()=>{t(!1),r(!1)},300)},z=()=>{e?V():t(!0)};v.useEffect(()=>{const d=x=>{e&&!a&&$.current&&!$.current.contains(x.target)&&V()};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[e,a]);const H=d=>{if(d===0)return"0 B";const x=1024,_=["B","KB","MB"],U=Math.floor(Math.log(d)/Math.log(x));return parseFloat((d/Math.pow(x,U)).toFixed(2))+" "+_[U]},K=d=>d.replace(/_/g," "),W=(d,x)=>{d.stopPropagation(),R.removeLocation(x),u(R.getLocations()),N(R.getLocationStats())};return s.jsx(s.Fragment,{children:s.jsxs("div",{ref:$,className:"fixed bottom-4 sm:bottom-6 right-4 sm:right-6 z-50",children:[s.jsxs("button",{onClick:z,className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-600 via-purple-600 to-blue-800 hover:from-blue-500 hover:via-purple-500 hover:to-blue-700 text-white rounded-full shadow-2xl border-2 border-blue-400/30 transition-all duration-300 transform hover:scale-105 backdrop-blur-sm",title:"Spaceship Control Panel",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("svg",{className:"flex items-center justify-center",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",children:s.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[s.jsx("path",{d:"M12 3a6.02 6.02 0 0 0-5.923 4.9c-.086.466-.13.699.032 1.005c.161.307.39.409.847.613c1.38.614 3.134.982 5.044.982s3.665-.368 5.044-.982c.457-.204.686-.306.847-.613c.162-.306.118-.54.032-1.005A6.02 6.02 0 0 0 12 3"}),s.jsx("path",{d:"M17 5.5c2.989.788 5 2.26 5 3.945C22 11.961 17.523 14 12 14S2 11.96 2 9.445C2 7.76 4.011 6.288 7 5.5M12 18v3m5-4l1 4M7 17l-1 4"})]})})}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-blue-400/20 animate-ping"})]}),e&&s.jsxs("div",{className:"fixed bottom-20 sm:bottom-24 right-2 sm:right-6 w-[calc(100vw-1rem)] sm:w-96 max-w-md max-h-[70vh] sm:max-h-96 bg-black/90 backdrop-blur-xl rounded-2xl border border-blue-400/30 shadow-2xl z-40 overflow-hidden transition-all duration-300 ease-out",style:{animation:a?"slideDownFadeOut 0.3s ease-out forwards":"slideUpFadeIn 0.3s ease-out forwards"},children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 p-4 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),s.jsx("h3",{className:"text-white font-bold text-lg",children:"🚀 Spaceship Control"})]}),s.jsx("button",{onClick:V,className:"text-gray-400 hover:text-white transition-colors duration-200",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex mt-3 space-x-1 overflow-x-auto",children:[s.jsx("button",{onClick:()=>o("stats"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 whitespace-nowrap ${n==="stats"?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:"📊 Stats"}),s.jsx("button",{onClick:()=>o("ship"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 whitespace-nowrap ${n==="ship"?"bg-green-500/30 text-green-300 border border-green-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:"🚀 Ship"}),s.jsxs("button",{onClick:()=>o("saved"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 whitespace-nowrap ${n==="saved"?"bg-purple-500/30 text-purple-300 border border-purple-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:["📍 Saved (",p?.total||0,")"]})]})]}),s.jsxs("div",{className:"p-4 max-h-64 overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[n==="stats"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-white font-semibold text-xs",children:"🌟 Daily Challenges"}),y&&s.jsxs("div",{className:"text-[10px] text-indigo-400 font-medium",children:["Day ",y.dayNumber," • x",O.getDayInfo().multiplier]})]}),y&&s.jsx("div",{className:"space-y-1.5 mb-2",children:y.challenges.map(d=>{const x={galaxies:"indigo",systems:"blue",planets:"purple"},_={galaxies:"Galaxies",systems:"Systems",planets:"Planets"};return s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"text-[10px] text-gray-400 mb-0.5",children:_[d.type]}),s.jsx(k,{value:d.current,max:d.target,label:`${d.current}/${d.target}`,color:x[d.type],showPercentage:!0}),d.completed&&s.jsx("div",{className:"absolute -right-2 -top-1 text-white bg-green-500 px-0.5 rounded-full text-[8px]",children:"✓"})]},d.type)})}),y&&s.jsxs("div",{className:"grid grid-cols-2 gap-1 text-[10px] mb-2",children:[s.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[s.jsx("div",{className:"text-gray-400 text-[9px]",children:"Completed"}),s.jsxs("div",{className:"text-indigo-400 font-bold",children:[y.challenges.filter(d=>d.completed).length,"/",y.challenges.length]})]}),s.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-green-500/20",children:[s.jsx("div",{className:"text-gray-400 text-[9px]",children:"Atlas Size"}),s.jsx("div",{className:"text-green-400 font-bold",children:i?H(i.size):"0 B"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-semibold mb-2 text-xs",children:"📍 Saved Locations"}),s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"text-[10px] text-gray-400 mb-0.5",children:"Storage Usage"}),s.jsx(k,{value:p?.total||0,max:p?.maxAllowed||50,label:`${p?.total||0}/${p?.maxAllowed||50}`,color:"cyan",showPercentage:!0})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-1 text-[10px]",children:[s.jsxs("div",{className:"bg-white/5 rounded p-1 text-center",children:[s.jsx("div",{className:"text-gray-400 text-[9px]",children:"Galaxies"}),s.jsx("div",{className:"text-indigo-400 font-bold",children:p?.galaxies||0})]}),s.jsxs("div",{className:"bg-white/5 rounded p-1 text-center",children:[s.jsx("div",{className:"text-gray-400 text-[9px]",children:"Systems"}),s.jsx("div",{className:"text-blue-400 font-bold",children:p?.systems||0})]}),s.jsxs("div",{className:"bg-white/5 rounded p-1 text-center",children:[s.jsx("div",{className:"text-gray-400 text-[9px]",children:"Planets"}),s.jsx("div",{className:"text-purple-400 font-bold",children:p?.planets||0})]})]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-1",children:"*Complete daily tasks to save more locations"})]})]}),n==="ship"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-white font-semibold mb-2 text-xs flex items-center gap-1",children:["⚡ Resources",s.jsxs("div",{className:"text-[10px] text-gray-400",children:["Lv.",b.level]})]}),s.jsxs("div",{className:"space-y-1 mb-2",children:[s.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-purple-500/20",children:[s.jsxs("div",{className:"flex justify-between text-[10px] mb-0.5",children:[s.jsx("span",{className:"text-purple-300",children:"Antimatter"}),s.jsxs("span",{className:"text-white font-mono",children:[f.antimatter,"/",b.storage]})]}),s.jsx(k,{value:f.antimatter,max:b.storage,label:"",color:"purple",showPercentage:!1})]}),s.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[s.jsxs("div",{className:"flex justify-between text-[10px] mb-0.5",children:[s.jsx("span",{className:"text-cyan-300",children:"Element 115"}),s.jsxs("span",{className:"text-white font-mono",children:[f.element115,"/",b.storage]})]}),s.jsx(k,{value:f.element115,max:b.storage,label:"",color:"cyan",showPercentage:!1})]}),s.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-orange-500/20",children:[s.jsxs("div",{className:"flex justify-between text-[10px] mb-0.5",children:[s.jsx("span",{className:"text-orange-300",children:"Deuterium"}),s.jsxs("span",{className:"text-white font-mono",children:[f.deuterium,"/",b.storage]})]}),s.jsx(k,{value:f.deuterium,max:b.storage,label:"",color:"orange",showPercentage:!1})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-semibold mb-2 text-xs",children:"🔧 Ship Upgrade"}),s.jsxs("div",{className:"grid grid-cols-3 gap-1 text-[10px] mb-2",children:[s.jsxs("div",{className:"bg-white/5 rounded p-1 border border-blue-500/20",children:[s.jsx("div",{className:"text-gray-400 text-[9px]",children:"Efficiency"}),s.jsxs("div",{className:"text-blue-400 font-bold",children:[b.efficiency.toFixed(1),"x"]})]}),s.jsxs("div",{className:"bg-white/5 rounded p-1 border border-yellow-500/20",children:[s.jsx("div",{className:"text-gray-400 text-[9px]",children:"Storage"}),s.jsx("div",{className:"text-yellow-400 font-bold",children:b.storage})]}),s.jsxs("div",{className:"bg-white/5 rounded p-1 border border-indigo-500/20",children:[s.jsx("div",{className:"text-gray-400 text-[9px]",children:"Multiplier"}),s.jsxs("div",{className:"text-indigo-400 font-bold",children:[b.multiplier.toFixed(1),"x"]})]})]}),b.level<100&&!g.canAffordUpgrade()&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded p-1.5 mb-2",children:[s.jsx("div",{className:"text-[10px] text-red-300 font-semibold mb-0.5",children:"Missing resources:"}),s.jsxs("div",{className:"text-[9px] text-red-200 space-y-0.5",children:[j.antimatter>f.antimatter&&s.jsxs("div",{children:["• Need ",j.antimatter-f.antimatter," more Antimatter"]}),j.element115>f.element115&&s.jsxs("div",{children:["• Need ",j.element115-f.element115," more Element 115"]}),j.deuterium>f.deuterium&&s.jsxs("div",{children:["• Need ",j.deuterium-f.deuterium," more Deuterium"]})]})]}),s.jsx("button",{onClick:()=>{if(g.upgradeShip()){S(g.getResources()),I(g.getUpgrade());const d=g.getUpgrade();L(g.getUpgradeCost(d.level));const x=g.getAccumulatedResourcesWithLimit();E(x),G.emit("resources_updated")}},disabled:!g.canAffordUpgrade(),className:`w-full px-2 py-1.5 rounded text-[10px] font-medium transition-all duration-200 ${g.canAffordUpgrade()?"bg-gradient-to-r from-green-600/30 to-blue-600/30 hover:from-green-600/40 hover:to-blue-600/40 text-green-300 border border-green-500/50 hover:border-green-400/70 cursor-pointer":"bg-gray-700/30 text-gray-500 border border-gray-600/30 cursor-not-allowed"}`,children:b.level>=100?s.jsx("div",{className:"text-yellow-400",children:"🌟 MAX LEVEL - Ultimate Spaceship!"}):s.jsxs("div",{children:[s.jsxs("div",{className:"font-bold",children:["Upgrade to Level ",b.level+1]}),s.jsxs("div",{className:"opacity-80 flex gap-2 justify-center mt-0.5",children:[s.jsxs("span",{className:"text-purple-300",children:[j.antimatter,"AM"]}),s.jsxs("span",{className:"text-cyan-300",children:[j.element115,"E115"]}),s.jsxs("span",{className:"text-orange-300",children:[j.deuterium,"D"]})]})]})})]})]}),n==="saved"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-500/20 to-blue-500/20 rounded-lg p-2 border border-purple-500/30",children:[s.jsx("h4",{className:"text-white font-semibold text-xs flex items-center gap-1 mb-1",children:"⛏️ Mining Operations"}),h.sources.planets===0&&h.sources.systems===0?s.jsx("div",{className:"text-[10px] text-gray-400",children:"💡 Save planets and systems to enable mining operations"}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-1",children:[s.jsx("span",{className:"text-purple-300",children:"Generating/min:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"text-purple-300",children:["+",Math.round(b.multiplier*(h.sources.planets*3+h.sources.systems*1))," AM"]}),s.jsxs("span",{className:"text-cyan-300",children:["+",Math.round(b.multiplier*(h.sources.planets*2+h.sources.systems*1))," E115"]}),s.jsxs("span",{className:"text-orange-300",children:["+",Math.round(b.multiplier*(h.sources.planets*3+h.sources.systems*1))," D"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-2",children:[s.jsx("span",{className:"text-gray-400",children:"Ready to collect:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"text-purple-300",children:["+",h.antimatter," AM"]}),s.jsxs("span",{className:"text-cyan-300",children:["+",h.element115," E115"]}),s.jsxs("span",{className:"text-orange-300",children:["+",h.deuterium," D"]})]})]}),s.jsxs("button",{onClick:()=>{P(!0)},disabled:h.antimatter+h.element115+h.deuterium===0,className:`w-full px-2 py-1.5 rounded text-[10px] font-medium transition-all duration-200 ${h.antimatter+h.element115+h.deuterium>0?"bg-gradient-to-r from-purple-600/30 to-blue-600/30 hover:from-purple-600/40 hover:to-blue-600/40 text-purple-300 border border-purple-500/50 hover:border-purple-400/70 cursor-pointer":"bg-gray-700/30 text-gray-500 border border-gray-600/30 cursor-not-allowed"}`,children:["🚀 Collect From ",h.sources.planets,"🪐 ",h.sources.systems,"⭐"]})]})]}),s.jsx("div",{className:"space-y-1",children:c.length===0?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"No saved locations"}),s.jsx("div",{className:"text-gray-500 text-[10px]",children:"Use the 📍 button to save locations"})]}):c.map(d=>s.jsx("div",{className:"bg-white/5 hover:bg-white/10 rounded p-1.5 border border-white/10 hover:border-white/20 transition-all duration-200 group",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("a",{href:d.stargateUrl,className:"flex-1 min-w-0 hover:text-blue-300 transition-colors duration-200",title:`Navigate to ${K(d.name)}`,children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsxs("div",{className:"text-[8px]",children:[d.type==="galaxy"&&"🌌",d.type==="system"&&"⭐",d.type==="planet"&&"🪐"]}),s.jsx("div",{className:"text-white text-[10px] font-medium truncate",children:K(d.name)}),s.jsx("div",{className:"text-gray-500 text-[8px] shrink-0",children:(()=>{try{const x=new Date(d.timestamp);return isNaN(x.getTime())?"N/A":x.toLocaleDateString()}catch{return"N/A"}})()})]})}),s.jsx("button",{onClick:x=>W(x,d.id),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-400 transition-all duration-200 ml-1",title:"Remove location",children:s.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},d.id))})]})]})]}),Y&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl border border-purple-400/30 shadow-2xl w-full max-w-md",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 to-blue-600/20 p-4 border-b border-white/10 rounded-t-2xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:"⛏️ Mass Collection"}),s.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-white transition-colors duration-200",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"Collect resources from all your saved mining locations at once."}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-3 mb-4",children:[s.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Available to collect:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:`font-bold ${h.antimatter>0?"text-purple-300":"text-gray-500"}`,children:["+",h.antimatter]}),s.jsx("div",{className:"text-gray-500",children:"Antimatter"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:`font-bold ${h.element115>0?"text-cyan-300":"text-gray-500"}`,children:["+",h.element115]}),s.jsx("div",{className:"text-gray-500",children:"Element 115"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:`font-bold ${h.deuterium>0?"text-orange-300":"text-gray-500"}`,children:["+",h.deuterium]}),s.jsx("div",{className:"text-gray-500",children:"Deuterium"})]})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["🌟 Sources: ",h.sources.planets," Planets, ",h.sources.systems," Systems"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-2 rounded-lg text-sm font-medium bg-gray-700/50 text-gray-300 hover:bg-gray-700/70 border border-gray-600/50 transition-all duration-200",children:"Cancel"}),s.jsx("button",{onClick:()=>{g.addResources({antimatter:h.antimatter,element115:h.element115,deuterium:h.deuterium}),g.showPassiveGenerationNotification(h);const d=JSON.parse(C("_atlasSpaceShip")||"{}");d.t||(d.t={}),d.t.lp=Date.now(),D("_atlasSpaceShip",JSON.stringify(d)),S(g.getResources());const x=g.getAccumulatedResourcesWithLimit();E(x),G.emit("resources_updated"),P(!1)},className:"flex-1 px-4 py-2 rounded-lg text-sm font-medium bg-gradient-to-r from-purple-600/30 to-blue-600/30 hover:from-purple-600/40 hover:to-blue-600/40 text-purple-300 border border-purple-500/50 hover:border-purple-400/70 transition-all duration-200",children:"🚀 Collect All"})]})]})]})})]})})},me=()=>{const[m,e]=v.useState({antimatter:0,element115:0,deuterium:0}),[t,a]=v.useState(500),[r,n]=v.useState(!1);v.useEffect(()=>{const l=()=>{e(g.getResources()),a(g.getUpgrade().storage)};l();const c=setInterval(l,5e3),u=G.subscribe("resources_updated",l);return()=>{clearInterval(c),u()}},[]);const o=l=>l>=1e3?`${(l/1e3).toFixed(1)}k`:l.toString(),i=l=>l/t*100;return s.jsx("div",{className:"fixed top-0 left-0 right-0 z-50",children:s.jsxs("div",{className:`flex w-full transition-all duration-300 ease-out backdrop-blur-md ${r?"h-16":"h-1.5"} group`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[s.jsxs("div",{className:"w-1/3 relative bg-purple-900/30 backdrop-blur-md border-r border-white/20 overflow-hidden",children:[s.jsx("div",{className:"absolute left-0 h-full bg-gradient-to-r from-purple-600 to-purple-400 transition-all duration-300",style:{width:`${i(m.antimatter)}%`}}),r&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white p-2",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs font-semibold text-purple-300 mb-1",children:"Antimatter"}),s.jsx("div",{className:"text-xs text-white font-mono",children:o(m.antimatter)})]})})]}),s.jsxs("div",{className:"w-1/3 relative bg-cyan-900/30 backdrop-blur-md border-r border-white/20 overflow-hidden",children:[s.jsx("div",{className:"absolute left-0 h-full bg-gradient-to-r from-cyan-600 to-cyan-400 transition-all duration-300",style:{width:`${i(m.element115)}%`}}),r&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white p-2",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs font-semibold text-cyan-300 mb-1",children:"Element 115"}),s.jsx("div",{className:"text-xs text-white font-mono",children:o(m.element115)})]})})]}),s.jsxs("div",{className:"w-1/3 relative bg-orange-900/30 backdrop-blur-md overflow-hidden",children:[s.jsx("div",{className:"absolute left-0 h-full bg-gradient-to-r from-orange-600 to-orange-400 transition-all duration-300",style:{width:`${i(m.deuterium)}%`}}),r&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white p-2",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs font-semibold text-orange-300 mb-1",children:"Deuterium"}),s.jsx("div",{className:"text-xs text-white font-mono",children:o(m.deuterium)})]})})]})]})})};class ue{static getTravelCost(e,t=0){return g.calculateTravelCost(e,t)}static canAffordTravel(e,t=0){return!0}static executeTravel(e,t=0){const a=this.getTravelCost(e,t),r=g.getResources(),n=g.getUpgrade(),o={antimatter:Math.floor(a.antimatter/n.efficiency),element115:Math.floor(a.element115/n.efficiency),deuterium:Math.floor(a.deuterium/n.efficiency)},i=[r.antimatter/o.antimatter,r.element115/o.element115,r.deuterium/o.deuterium],l=Math.min(...i);return l>=1?(g.consumeResources(o),"success"):l>=.5?(g.consumeResources({antimatter:Math.min(r.antimatter,o.antimatter),element115:Math.min(r.element115,o.element115),deuterium:Math.min(r.deuterium,o.deuterium)}),"partial"):"emergency"}static previewTravelCost(e,t=0){const a=this.getTravelCost(e,t),r=g.getUpgrade(),n={antimatter:Math.floor(a.antimatter/r.efficiency),element115:Math.floor(a.element115/r.efficiency),deuterium:Math.floor(a.deuterium/r.efficiency)};return`${n.antimatter}AM | ${n.element115}E115 | ${n.deuterium}D`}static getTravelEfficiency(){return g.getUpgrade().efficiency}static getMaxTravelRange(){return g.getUpgrade().range}}export{me as F,ae as H,R as L,G as R,de as S,w as U,ue as a,ie as b,ne as c,oe as d,ce as e,le as g,re as m};
