import{r as i,j as e,a as nt,U as st,c as $e,R as Fe}from"./atlas_BGo7KNTC_D9rNHeIOnwpB.js";import{R as ot,L as at,g as rt,S as Me,m as it,F as lt,H as ct,a as dt}from"./atlas_CUYkglEYtrK-j5RaIV74A.js";import{W as De}from"./atlas_CpfeS5VhE5H57rIqo09CI.js";import{W as Ge,C as Ce,X as Ae,G as je,q as Ve,cz as Oe,x as Te,cA as Le,cB as ke,b as le,z as se,M as X,V as Ne,B as Re,cC as Ue,n as Ze,a0 as Be,$ as Ke,v as Qe,cD as Je,cE as et,S as Pe,c as ut,A as Se,g as ze,cF as mt,D as He,cG as We,t as Xe,y as ht,P as pt,cH as xt}from"./atlas_Bng76Ipsc6y2pOae0EuhP.js";import{R as ft,S as gt,M as vt,a as Ie,b as Ye,T as wt}from"./atlas_tWwhs3uxVw9kyauFo4waU.js";import{O as bt}from"./atlas_sLbA9m1UOHQtiV0wkxe1n.js";import{V as yt}from"./atlas_BC--f3teBajIZvYzpPvMJ.js";import"./atlas_5StMBQg7EZ_DcUhMgqODi.js";const jt=({coordinates:t,galaxyName:l})=>{const f=i.useRef(null),g=i.useRef(null),c=i.useRef(null),R=i.useRef(null);return i.useEffect(()=>{if(!f.current)return;const p=f.current,d=p.clientWidth,Z=p.clientHeight,P=new Ge;P.background=new Ce(657930),g.current=P;const y=new Ae(45,d/Z,.1,1e3);y.position.set(20,15,20),y.lookAt(0,0,0);const v=new De({antialias:!0,alpha:!0});v.setSize(d,Z),v.setClearColor(0,.2),c.current=v,p.appendChild(v.domElement);const j=0,C=1e7,I=5e6,[K,x,k]=t,u=((K-j)/(C-j)-.5)*16,a=((x-j)/(C-j)-.5)*16,B=((k-j)/(C-j)-.5)*16,h=new je;P.add(h);const G=new Ve(16,16,16),z=new Oe(G),E=new Te({color:16777215,opacity:.4,transparent:!0,linewidth:2}),s=new Le(z,E);h.add(s);const O=new ke(16,16,16777215,16777215);O.material.opacity=.1,O.material.transparent=!0,O.position.y=-8,h.add(O);const Y=new ke(16,16,16777215,16777215);Y.material.opacity=.05,Y.material.transparent=!0,Y.rotation.z=Math.PI/2,Y.position.x=-8,h.add(Y);const q=new ke(16,16,16777215,16777215);q.material.opacity=.05,q.material.transparent=!0,q.rotation.x=Math.PI/2,q.position.z=-8,h.add(q);const ae=new le(.5,32,32),oe=new se({color:16777215,transparent:!0,opacity:.9}),w=new X(ae,oe);w.position.set(0,0,0),h.add(w);const N=new X(new le(.8,32,32),new se({color:16777215,transparent:!0,opacity:.2}));w.add(N);const _=new le(.4,32,32),ce=new se({color:6605055,transparent:!0,opacity:1}),de=new X(_,ce);de.position.set(u,a,B),h.add(de);const pe=new X(new le(.7,32,32),new se({color:6605055,transparent:!0,opacity:.3}));if(de.add(pe),Math.sqrt(Math.pow(K-I,2)+Math.pow(x-I,2)+Math.pow(k-I,2))<2e6){const o=[new Ne(0,0,0),new Ne(u,a,B)],H=new Re().setFromPoints(o),T=new Ue({color:16762980,dashSize:.6,gapSize:.6,opacity:.4,transparent:!0,linewidth:2}),L=new Ze(H,T);L.computeLineDistances(),h.add(L)}const xe=new Be(4210752,.6);P.add(xe);const m=new Ke(16777215,.8);m.position.set(10,10,10),P.add(m);const n=(o,H)=>{const T=document.createElement("canvas"),L=T.getContext("2d");if(!L)return null;T.width=64,T.height=64,L.fillStyle=`#${H.toString(16).padStart(6,"0")}`,L.font="bold 48px Arial",L.textAlign="center",L.textBaseline="middle",L.fillText(o,32,32);const S=new Qe(T),U=new Je({map:S,transparent:!0,opacity:.8}),Q=new et(U);return Q.scale.set(1.6,1.6,1),Q},r=n("X",16739179);r&&(r.position.set(8.4,-7.6,-7.6),h.add(r));const b=n("Y",7077739);b&&(b.position.set(-7.6,8.4,-7.6),h.add(b));const V=n("Z",7039999);V&&(V.position.set(-7.6,-7.6,8.4),h.add(V));let D=!1,$=0,W=0,A=!0,J=0;const re=o=>{D=!0,A=!1,$=o.clientX,W=o.clientY},ve=o=>{if(!D)return;const H=o.clientX-$,T=o.clientY-W;h.rotation.y+=H*.01,h.rotation.x+=T*.01,$=o.clientX,W=o.clientY},me=()=>{D=!1,setTimeout(()=>{D||(A=!0)},3e3)},ue=o=>{o.preventDefault();const H=.1,T=y.position.distanceTo(new Ne(0,0,0));o.deltaY>0&&T<50?y.position.multiplyScalar(1+H):o.deltaY<0&&T>10&&y.position.multiplyScalar(1-H)},we=o=>{o.key==="Escape"&&document.dispatchEvent(new CustomEvent("universe-close-fullscreen"))},be=o=>{if(o.preventDefault(),o.touches.length===1)D=!0,A=!1,$=o.touches[0].clientX,W=o.touches[0].clientY;else if(o.touches.length===2){const H=o.touches[0].clientX-o.touches[1].clientX,T=o.touches[0].clientY-o.touches[1].clientY;J=Math.sqrt(H*H+T*T)}},ye=o=>{if(o.preventDefault(),o.touches.length===1&&D){const H=o.touches[0].clientX-$,T=o.touches[0].clientY-W;h.rotation.y+=H*.01,h.rotation.x+=T*.01,$=o.touches[0].clientX,W=o.touches[0].clientY}else if(o.touches.length===2){const H=o.touches[0].clientX-o.touches[1].clientX,T=o.touches[0].clientY-o.touches[1].clientY,L=Math.sqrt(H*H+T*T);if(J>0){const U=L/J,Q=y.position.distanceTo(new Ne(0,0,0));U>1&&Q>10?y.position.multiplyScalar(1-.01):U<1&&Q<50&&y.position.multiplyScalar(1+.01)}J=L}},fe=o=>{o.preventDefault(),D=!1,J=0,setTimeout(()=>{D||(A=!0)},3e3)},F=v.domElement;F.style.cursor="grab",F.addEventListener("mousedown",o=>{F.style.cursor="grabbing",re(o)}),F.addEventListener("mousemove",ve),F.addEventListener("mouseup",()=>{F.style.cursor="grab",me()}),F.addEventListener("mouseleave",()=>{F.style.cursor="grab",me()}),F.addEventListener("wheel",ue),F.addEventListener("touchstart",be,{passive:!1}),F.addEventListener("touchmove",ye,{passive:!1}),F.addEventListener("touchend",fe,{passive:!1}),document.addEventListener("keydown",we);const he=()=>{R.current=requestAnimationFrame(he),A&&(h.rotation.y+=.002,h.rotation.x+=.001);const o=Date.now()*.005;w.scale.setScalar(1+Math.sin(o)*.1),de.rotation.y+=.01,v.render(P,y)};he();const ge=()=>{const o=p.clientWidth,H=p.clientHeight;y.aspect=o/H,y.updateProjectionMatrix(),v.setSize(o,H)};return window.addEventListener("resize",ge),()=>{window.removeEventListener("resize",ge),document.removeEventListener("keydown",we),F.removeEventListener("mousedown",re),F.removeEventListener("mousemove",ve),F.removeEventListener("mouseup",me),F.removeEventListener("mouseleave",me),F.removeEventListener("wheel",ue),F.removeEventListener("touchstart",be),F.removeEventListener("touchmove",ye),F.removeEventListener("touchend",fe),R.current&&cancelAnimationFrame(R.current),p&&v.domElement&&p.removeChild(v.domElement),v.dispose(),G.dispose(),z.dispose(),E.dispose(),ae.dispose(),oe.dispose(),_.dispose(),ce.dispose()}},[t,l]),e.jsx("div",{ref:f,className:"w-full h-full"})},Nt=({coordinates:t,galaxyName:l})=>{const f=i.useRef(null),g=i.useRef(null),c=i.useRef(null),R=i.useRef(null),[p,d]=i.useState(!1),[Z,P]=i.useState(!1),[y,v]=i.useState(!1),j=()=>{P(!0),setTimeout(()=>{d(!1),P(!1)},300)};i.useEffect(()=>{const u=a=>{a.key==="Escape"&&p&&j()};return document.addEventListener("universe-close-fullscreen",j),document.addEventListener("keydown",u),()=>{document.removeEventListener("universe-close-fullscreen",j),document.removeEventListener("keydown",u)}},[p]),i.useEffect(()=>{if(p&&y){const u=setTimeout(()=>{v(!1)},50);return()=>clearTimeout(u)}},[p,y]),i.useEffect(()=>{if(!f.current)return;const u=f.current,a=u.clientWidth,B=a<640,h=new Ge;h.background=new Ce(657930),g.current=h;const G=new Ae(30,a/120,.1,1e3);G.position.set(12,8,12),G.lookAt(0,0,0);const z=new De({antialias:!0,alpha:!0});z.setSize(a,120),z.setClearColor(0,.2),c.current=z,u.appendChild(z.domElement);const E=0,s=1e7,O=5e6,[Y,q,ae]=t,oe=((Y-E)/(s-E)-.5)*8,w=((q-E)/(s-E)-.5)*8,N=((ae-E)/(s-E)-.5)*8,_=new je;h.add(_);const ce=new Ve(8,8,8),de=new Oe(ce),pe=new Te({color:16777215,opacity:.4,transparent:!0}),Ee=new Le(de,pe);_.add(Ee);const xe=new ke(8,8,16777215,16777215);xe.material.opacity=.1,xe.material.transparent=!0,xe.position.y=-4,_.add(xe);const m=new ke(8,8,16777215,16777215);m.material.opacity=.05,m.material.transparent=!0,m.rotation.z=Math.PI/2,m.position.x=-4,_.add(m);const n=new ke(8,8,16777215,16777215);n.material.opacity=.05,n.material.transparent=!0,n.rotation.x=Math.PI/2,n.position.z=-4,_.add(n);const r=new le(.25,16,16),b=new se({color:16777215,transparent:!0,opacity:.9}),V=new X(r,b);V.position.set(0,0,0),_.add(V);const D=new X(new le(.45,16,16),new se({color:16777215,transparent:!0,opacity:.2}));V.add(D);const $=new le(.2,16,16),W=new se({color:6605055,transparent:!0,opacity:1}),A=new X($,W);A.position.set(oe,w,N),_.add(A);const J=new X(new le(.35,16,16),new se({color:6605055,transparent:!0,opacity:.3}));if(A.add(J),Math.sqrt(Math.pow(Y-O,2)+Math.pow(q-O,2)+Math.pow(ae-O,2))<2e6){const M=[new Ne(0,0,0),new Ne(oe,w,N)],ee=new Re().setFromPoints(M),te=new Ue({color:16762980,dashSize:.3,gapSize:.3,opacity:.4,transparent:!0}),ne=new Ze(ee,te);ne.computeLineDistances(),_.add(ne)}const ve=new Be(4210752,.6);h.add(ve);const me=new Ke(16777215,.8);me.position.set(5,5,5),h.add(me);const ue=(M,ee)=>{const te=document.createElement("canvas"),ne=te.getContext("2d");if(!ne)return null;te.width=32,te.height=32,ne.fillStyle=`#${ee.toString(16).padStart(6,"0")}`,ne.font="bold 24px Arial",ne.textAlign="center",ne.textBaseline="middle",ne.fillText(M,16,16);const ie=new Qe(te),tt=new Je({map:ie,transparent:!0,opacity:.8}),_e=new et(tt);return _e.scale.set(.8,.8,1),_e},we=ue("X",16739179);we&&(we.position.set(4.2,-3.8,-3.8),_.add(we));const be=ue("Y",7077739);be&&(be.position.set(-3.8,4.2,-3.8),_.add(be));const ye=ue("Z",7039999);ye&&(ye.position.set(-3.8,-3.8,4.2),_.add(ye));let fe=!1,F=0,he=0,ge=!0;const o=M=>{fe=!0,ge=!1,F=M.clientX,he=M.clientY},H=M=>{if(!fe)return;const ee=M.clientX-F,te=M.clientY-he;_.rotation.y+=ee*.01,_.rotation.x+=te*.01,F=M.clientX,he=M.clientY},T=()=>{fe=!1,setTimeout(()=>{fe||(ge=!0)},3e3)},L=M=>{M.preventDefault();const ee=.1,te=G.position.distanceTo(new Ne(0,0,0));M.deltaY>0&&te<25?G.position.multiplyScalar(1+ee):M.deltaY<0&&te>5&&G.position.multiplyScalar(1-ee)},S=z.domElement;S.style.cursor="grab",S.style.borderRadius="8px",S.addEventListener("mousedown",M=>{S.style.cursor="grabbing",o(M)}),S.addEventListener("mousemove",H),S.addEventListener("mouseup",()=>{S.style.cursor="grab",T()}),S.addEventListener("mouseleave",()=>{S.style.cursor="grab",T()}),S.addEventListener("wheel",L);const U=()=>{R.current=requestAnimationFrame(U),ge&&(_.rotation.y+=.002,_.rotation.x+=.001);const M=Date.now()*.005;V.scale.setScalar(1+Math.sin(M)*.1),A.rotation.y+=.01,z.render(h,G)};U();const Q=()=>{const M=u.clientWidth,ee=M<640?150:160;G.aspect=M/ee,G.updateProjectionMatrix(),z.setSize(M,ee)};return window.addEventListener("resize",Q),()=>{window.removeEventListener("resize",Q),S.removeEventListener("mousedown",o),S.removeEventListener("mousemove",H),S.removeEventListener("mouseup",T),S.removeEventListener("mouseleave",T),S.removeEventListener("wheel",L),R.current&&cancelAnimationFrame(R.current),u&&z.domElement&&u.removeChild(z.domElement),z.dispose(),ce.dispose(),de.dispose(),pe.dispose(),r.dispose(),b.dispose(),$.dispose(),W.dispose()}},[t,l]);const C=u=>u.replace(/_/g," "),I=u=>u>=1e6?`${(u/1e6).toFixed(1)}M`:u>=1e3?`${(u/1e3).toFixed(1)}K`:u.toString(),[K,x,k]=t;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Galaxy Location"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:f,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsxs("button",{onClick:()=>{d(!0),v(!0)},className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 flex items-center gap-1 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:[e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),e.jsx("span",{className:"text-xs text-white hidden sm:inline",children:"Expand"})]})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-[10px]",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:C(l)})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:[I(K),", ",I(x),", ",I(k)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom • Drag: Rotate View"})]})]}),p&&nt.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${Z||y?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${Z||y?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:C(l)})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[C(l)," - Galaxy Location"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Galaxy"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[I(K),", ",I(x),", ",I(k)]})]})]}),e.jsx("button",{onClick:j,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(jt,{coordinates:t,galaxyName:l})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},Mt=({galaxy:t})=>{const[l,f]=i.useState({isOnCooldown:!1,isSaved:!1,isCollecting:!1,timeUntilNext:0});i.useEffect(()=>{let c;const R=()=>{const P=Ie.generateLocationId("galaxy",t.coordinates.join(","),void 0,void 0),y=Ie.canCollectFromLocation(P),v=Ie.getTimeUntilNextCollection(P),j=t.coordinates,C=Ye.generateGalaxyUrl(j,Ye.getCurrentPage()),K=at.getLocations().some(x=>x.stargateUrl===C);f(x=>({isOnCooldown:!y&&v>0,isSaved:K,isCollecting:x.isCollecting,timeUntilNext:v}))},p=()=>{f(P=>({...P,isCollecting:!0})),c=setTimeout(()=>{f(P=>({...P,isCollecting:!1}))},1e3)};R();const d=setInterval(R,1e3),Z=ot.subscribe("mining_completed",p);return()=>{clearInterval(d),c&&clearTimeout(c),Z()}},[t.name,t.coordinates]);const g=c=>c.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex gap-2 z-10",children:[e.jsx(ft,{locationType:"galaxy",locationId:t.name,coordinates:t.coordinates.join(","),className:"text-xs"}),e.jsx(gt,{type:"galaxy",name:t.name,coordinates:t.coordinates.join(","),className:"text-xs"}),e.jsx("div",{className:"inline-flex items-center bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] font-medium px-1.5 py-0.5 rounded h-[21px] box-border",children:"VISITED"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(vt,{isOnCooldown:l.isOnCooldown,isSaved:l.isSaved,isCollecting:l.isCollecting}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Details"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300",children:t.galaxy_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Solar Systems"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:t.num_systems.toLocaleString()})]})]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-2",children:e.jsx(Nt,{coordinates:t.coordinates,galaxyName:t.name})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-gray-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Cosmic Objects"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-pink-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Black Holes"}),e.jsx("div",{className:"text-xs font-bold text-pink-300",children:t.black_holes.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Pulsars"}),e.jsx("div",{className:"text-xs font-bold text-cyan-300",children:t.pulsars.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Quasars"}),e.jsx("div",{className:"text-xs font-bold text-indigo-300",children:t.quasars.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("div",{className:"text-green-400 font-medium",children:"Visited"})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:g(t.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:t.coordinates.join(", ")})]})]})]})]})},St=({galaxyType:t,numSystems:l,blackHoles:f,pulsars:g,quasars:c,seed:R=12345,imageUrl:p})=>{const d=i.useRef(null),Z=i.useRef(null),P=i.useRef(null),y=i.useRef(null),v=i.useRef(null),j=i.useRef(null),[C,I]=i.useState(!1);class K{seed;constructor(k){this.seed=k}random(){const k=Math.sin(this.seed++)*1e4;return k-Math.floor(k)}uniform(k,u){return k+this.random()*(u-k)}gauss(k,u){let a=0,B=0;for(;a===0;)a=this.random();for(;B===0;)B=this.random();const h=Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*B);return k+u*h}randint(k,u){return Math.floor(this.uniform(k,u+1))}}return i.useEffect(()=>{if(!d.current)return;const x=d.current,k=x.clientWidth,u=x.clientHeight,a=Math.min(k,u),B=new Ge;B.background=new Ce(17),Z.current=B;const h=new Ae(45,1,.1,1e4);h.position.set(0,200,400),h.lookAt(0,0,0);const G=new De({antialias:!0,alpha:!0});G.setSize(a,a),G.setClearColor(17,1),P.current=G,x.appendChild(G.domElement);const z=new bt(h,G.domElement);z.enableDamping=!0,z.dampingFactor=.05,z.minDistance=50,z.maxDistance=800,z.autoRotate=!0,z.autoRotateSpeed=.5,z.enablePan=!0,z.enableZoom=!0,z.target.set(0,0,0),v.current=z;const E=new je;j.current=E,B.add(E);const s=new K(R),O=s.uniform(0,2*Math.PI),Y=new Re,q=[],ae=[],oe=[],w=200;let N=l;if(t==="Spiral"){N=Math.min(l,5e4);const m=4,n=2*Math.PI/m,r=.15,b=.5,V=.1;for(let D=0;D<N*V;D++){const $=s.uniform(0,2*Math.PI),W=s.gauss(w*.1,w*.05),A=s.gauss(0,5),J=W*Math.cos($),re=W*Math.sin($);q.push(J,A,re),ae.push(1,1,1),oe.push(s.uniform(.5,2))}for(let D=0;D<N;D++){const $=b*Math.sqrt(D/N)*2*Math.PI,W=D%m*n,A=w*Math.sqrt(D/N),J=A*Math.cos($+W+O)+s.uniform(-r*A,r*A),re=A*Math.sin($+W+O)+s.uniform(-r*A,r*A),ve=s.gauss(0,3);q.push(J,ve,re),ae.push(1,1,.8),oe.push(s.uniform(.5,1.5))}}else if(t==="Elliptical"){N=Math.min(l,1e5);for(let m=0;m<N;m++){const n=s.uniform(0,2*Math.PI),r=s.uniform(0,Math.PI),b=s.gauss(w/4,w/8),V=b*Math.sin(r)*Math.cos(n),D=b*Math.cos(r)*.6,$=b*Math.sin(r)*Math.sin(n);q.push(V,D,$),ae.push(1,.9,.7),oe.push(s.uniform(.3,1))}}else if(t==="Dwarf"){N=Math.min(l/100,1e4);for(let m=0;m<N;m++){const n=s.uniform(0,2*Math.PI),r=s.uniform(0,Math.PI),b=s.gauss(w/3,w*.3),V=b*Math.sin(r)*Math.cos(n),D=b*Math.cos(r)*.5,$=b*Math.sin(r)*Math.sin(n);q.push(V,D,$),ae.push(.8,.8,1),oe.push(s.uniform(.5,2))}}else if(t==="Singularity Void"){N=1e4;for(let L=0;L<N;L++){const S=L/N,U=S*30*Math.PI,Q=w*(1-S*.8)+s.uniform(-10,10),M=(S-.5)*300+Math.sin(U*.5)*20,ee=Q*Math.cos(U)+Math.sin(S*20)*10,te=Q*Math.sin(U)+Math.cos(S*20)*10;q.push(ee,M,te);const ne=(S+Math.sin(U*.1))%1,ie=new Ce;ie.setHSL(ne,1,.5+Math.sin(S*10)*.3),ae.push(ie.r,ie.g,ie.b),oe.push(s.uniform(.3,2)*(1+Math.sin(S*50)*.5))}const m=(L,S,U=1)=>{const Q=new le(L,64,64),M=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,ee=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;
          
          void main() {
            // Use spherical coordinates for better wrapping
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);
            
            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;
            
            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;
            
            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x + 
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);
            
            // Add depth-based color variation
            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;
            
            // Add purple/violet tint for void effect
            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);
            
            // Edge glow effect
            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;
            
            gl_FragColor = vec4(color, ${S});
          }
        `,te=new Pe({uniforms:{time:{value:0},speed:{value:U}},vertexShader:M,fragmentShader:ee,transparent:!0,blending:Se,side:He,depthWrite:!1}),ne=new X(Q,te);return ne.isSingularityShader=!0,ne.shaderSpeed=U,ne},n=m(250,.3,1);E.add(n);const r=m(180,.4,-.7);E.add(r);const b=m(120,.5,1.5);E.add(b);const V=m(300,.2,.5);V.scale.set(-1,1,1),E.add(V);const D=new le(350,32,32),$=new Pe({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            
            // Distort vertices for gravitational lensing effect
            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          
          void main() {
            // Create a subtle distortion effect
            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;
            
            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Se,side:ut,depthWrite:!1}),W=new X(D,$);W.isSingularityShader=!0,W.shaderSpeed=.3,E.add(W);const A=new Re,J=[],re=[];for(let L=0;L<1e3;L++){const S=s.uniform(-w,w),U=s.uniform(-w/2,w/2),Q=s.uniform(-w,w),M=s.uniform(-50,50),ee=s.uniform(-30,30),te=s.uniform(-50,50);J.push(S,U,Q),J.push(S+M,U+ee,Q+te);const ne=s.random(),ie=new Ce;ie.setHSL(ne,1,.6),re.push(ie.r,ie.g,ie.b),re.push(ie.r*.5,ie.g*.5,ie.b*.5)}A.setAttribute("position",new ze(J,3)),A.setAttribute("color",new ze(re,3));const ve=new Te({vertexColors:!0,transparent:!0,opacity:.4,blending:Se}),me=new Le(A,ve);me.isGlitchLines=!0,E.add(me);const ue=new je,we=new le(20,32,32),be=new se({color:0,transparent:!0,opacity:.95}),ye=new X(we,be);ue.add(ye);const fe=new mt(25,80,64),F=new Pe({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;
          
          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);
            
            // Swirling pattern
            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;
            
            // Colors from hot (inner) to cold (outer)
            vec3 hotColor = vec3(1.0, 0.5, 0.0); // Orange
            vec3 coldColor = vec3(0.0, 0.3, 1.0); // Blue
            vec3 color = mix(coldColor, hotColor, intensity);
            
            // Add swirl variation
            color *= (0.7 + swirl * 0.3);
            
            // Fade out at edges
            float alpha = intensity * 0.8;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Se,side:He}),he=new X(fe,F);he.rotation.x=Math.PI/2,he.isAccretionDisk=!0,ue.add(he);for(let L=0;L<8;L++){const S=30+L*20,U=new We(S,1+L*.5,8,64),Q=new se({color:new Ce().setHSL((.7+L*.05)%1,1,.5),transparent:!0,opacity:.3-L*.03,wireframe:!0}),M=new X(U,Q);M.rotation.x=s.uniform(0,Math.PI),M.rotation.y=s.uniform(0,Math.PI),M.isDistortionRing=!0,M.rotationSpeed=s.uniform(.001,.005)*(L%2===0?1:-1),ue.add(M)}E.add(ue);const ge=new Xe(5,100,8),o=new se({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Se}),H=new X(ge,o);H.position.y=50,E.add(H);const T=new X(ge,o);T.position.y=-50,T.rotation.z=Math.PI,E.add(T)}Y.setAttribute("position",new ze(q,3)),Y.setAttribute("color",new ze(ae,3)),Y.setAttribute("size",new ze(oe,1));const _=new ht({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Se,sizeAttenuation:!0}),ce=new pt(Y,_);E.add(ce);for(let m=0;m<f;m++){const n=new je,r=s.uniform(-30,30),b=s.uniform(-10,10),V=s.uniform(-30,30),D=new le(3,16,16),$=new se({color:0,transparent:!0,opacity:.9}),W=new X(D,$);n.add(W);const A=new We(8,2,8,32),J=new se({color:65535,transparent:!0,opacity:.6,emissive:65535,emissiveIntensity:.5}),re=new X(A,J);re.rotation.x=Math.PI/2,n.add(re),n.position.set(r,b,V),E.add(n)}for(let m=0;m<g;m++){const n=new le(1.5,8,8),r=new se({color:16776960,emissive:16776960,emissiveIntensity:1}),b=new X(n,r);b.position.set(s.uniform(-w,w),s.uniform(-w/4,w/4),s.uniform(-w,w)),b.isPulsar=!0,b.pulseSpeed=s.uniform(1,3),E.add(b)}for(let m=0;m<c;m++){const n=new je,r=new le(2,16,16),b=new se({color:16777215,emissive:16777215,emissiveIntensity:2}),V=new X(r,b);n.add(V);const D=new Xe(1,20,8),$=new se({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),W=new X(D,$);W.position.y=10,n.add(W);const A=new X(D,$);A.position.y=-10,A.rotation.z=Math.PI,n.add(A),n.position.set(s.uniform(-w,w),s.uniform(-w/4,w/4),s.uniform(-w,w)),E.add(n)}const de=new Be(4210752,.5);B.add(de);const pe=new xt(16777215,.5,1e3);pe.position.set(0,100,0),B.add(pe);const Ee=()=>{y.current=requestAnimationFrame(Ee);const m=performance.now()/1e3;j.current&&(j.current.rotation.y+=.001),E.children.forEach(n=>{if(n.isPulsar){const r=n.pulseSpeed||1;n.scale.setScalar(1+Math.sin(Date.now()*.001*r)*.3)}if(n.isSingularityShader&&n instanceof X){const r=n.material;r.uniforms&&r.uniforms.time&&(r.uniforms.time.value=m);const b=n.shaderSpeed||1;n.rotation.y+=.001*b,n.rotation.x+=5e-4*b}if(n.isAccretionDisk&&n instanceof X){const r=n.material;r.uniforms&&r.uniforms.time&&(r.uniforms.time.value=m),n.rotation.z+=.002}if(n.isDistortionRing){const r=n.rotationSpeed||.001;n.rotation.x+=r,n.rotation.y+=r*.7,n.scale.setScalar(1+Math.sin(m*2)*.1)}if(n.isGlitchLines&&n instanceof Le){const r=n.material;r.opacity=.2+Math.sin(m*3)*.2,n.rotation.z+=5e-4}n instanceof je&&n.children.forEach(r=>{if(r.isAccretionDisk&&r instanceof X){const b=r.material;b.uniforms&&b.uniforms.time&&(b.uniforms.time.value=m),r.rotation.z+=.002}if(r.isDistortionRing){const b=r.rotationSpeed||.001;r.rotation.x+=b,r.rotation.y+=b*.7,r.scale.setScalar(1+Math.sin(m*2)*.1)}})}),v.current&&v.current.update(),G.render(B,h)};Ee();const xe=()=>{if(!d.current||!G)return;const m=d.current,n=Math.min(m.clientWidth,m.clientHeight);G.setSize(n,n),h.aspect=1,h.updateProjectionMatrix()};return window.addEventListener("resize",xe),()=>{window.removeEventListener("resize",xe),v.current&&v.current.dispose(),y.current&&cancelAnimationFrame(y.current),x&&G.domElement&&x.removeChild(G.domElement),G.dispose()}},[t,l,f,g,c,R]),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{ref:d,className:"w-full h-full border border-white/20 rounded bg-black/20"}),p&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>I(!C),className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 flex items-center gap-1 backdrop-blur-sm shadow-lg z-10",title:C?"Hide 2D Image":"Show 2D Image",children:[e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),e.jsx("span",{className:"text-xs text-white hidden sm:inline",children:C?"Hide":"2D"})]}),C&&e.jsxs("div",{className:"absolute bottom-2 left-2 w-48 h-48 border-2 border-blue-400/50 rounded-lg overflow-hidden bg-black/80 backdrop-blur-sm z-10",children:[e.jsx("img",{src:p,alt:"2D Galaxy visualization",className:"w-full h-full object-contain"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-1 text-center",children:"2D Reference"})]})]}),e.jsx("div",{className:"absolute top-2 left-2 bg-black/60 backdrop-blur-sm border border-white/30 rounded-lg px-3 py-1 z-10",children:e.jsxs("span",{className:"text-white text-sm font-medium",children:[t," Galaxy"]})}),e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/60 backdrop-blur-sm border border-white/30 rounded-lg px-3 py-2 z-10 text-xs text-white/80",children:[e.jsxs("div",{children:["Systems: ",l.toLocaleString()]}),e.jsxs("div",{children:["Black Holes: ",f]}),e.jsxs("div",{children:["Pulsars: ",g]}),e.jsxs("div",{children:["Quasars: ",c]})]})]})},Ct=({galaxyUrl:t,imageUrl:l,galaxyType:f="Spiral",numSystems:g=1e4,blackHoles:c=5,pulsars:R=10,quasars:p=3})=>{const d=i.useRef(null),Z=i.useRef(null),[P,y]=i.useState("Aligning Stargate..."),[v,j]=i.useState(!1),[C,I]=i.useState(!1),[K,x]=i.useState(!1),[k,u]=i.useState("3d");return i.useEffect(()=>{const a=d.current;if(!a)return;const B=a.getContext("2d");if(!B)return;let h=[];const G=800;let z,E;const s=800;let O,Y=.5;function q(){const N=a?.parentElement;if(!N||!a)return;const _=N.clientWidth,ce=N.clientHeight;a.width=Math.min(_,s),a.height=Math.min(ce,s),z=a.width/2,E=a.height/2}function ae(){q(),h=[];for(let N=0;N<G;N++)h.push({x:Math.random()*(a?.width||800),y:Math.random()*(a?.height||800),z:Math.random()*(a?.width||800),o:Math.random()});oe()}function oe(){!a||!B||(B.clearRect(0,0,a.width,a.height),h.forEach(N=>{N.z-=Y,N.z<=0&&(N.z=a.width,N.x=Math.random()*a.width,N.y=Math.random()*a.height,N.o=Math.random());const _=a.width/N.z,ce=(N.x-z)*_+z,de=(N.y-E)*_+E,pe=2*_;B.beginPath(),B.fillStyle=`rgba(255, 255, 255, ${N.o})`,B.arc(ce,de,pe,0,2*Math.PI),B.fill()}),Y<60&&(Y+=1),O=requestAnimationFrame(oe))}ae();const w=()=>q();return window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w),O&&cancelAnimationFrame(O)}},[]),i.useEffect(()=>{if(l){const a=new Image;a.onload=()=>{Z.current&&(Z.current.src=l,I(!0),x(!0))},a.onerror=()=>{setTimeout(()=>{I(!0),x(!0)},1500)},a.src=l}else setTimeout(()=>{I(!0),x(!0)},1500)},[l]),i.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){y("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),j(!0);const B=(s,O)=>Array.from({length:O},()=>s[Math.floor(Math.random()*s.length)]).join(""),h=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:35},{chars:"0123456789ABCDEF",duration:20,iterations:50},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:'\",.<>?/`~",duration:15,iterations:100}];let G=0,z=0;const E=()=>{if(G>=h.length){const O="Stargate system aligned";let Y=0;y("");const q=()=>{Y<O.length?(y(O.substring(0,Y+1)),Y++,setTimeout(q,30)):j(!1)};q();return}const s=h[G];y(B(s.chars,32)),z++,z>=s.iterations&&(G++,z=0),setTimeout(E,s.duration)};E()},[]),i.useEffect(()=>{const a=document.createElement("style");return a.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(a),()=>{document.head.removeChild(a)}},[]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Galaxy Visualization"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>u("3d"),className:`px-3 py-1 text-xs rounded-l-lg border transition-all ${k==="3d"?"bg-blue-500/30 border-blue-400 text-blue-300":"bg-white/10 border-white/20 text-gray-400 hover:bg-white/20"}`,children:"3D View"}),e.jsx("button",{onClick:()=>u("2d"),className:`px-3 py-1 text-xs rounded-r-lg border transition-all ${k==="2d"?"bg-blue-500/30 border-blue-400 text-blue-300":"bg-white/10 border-white/20 text-gray-400 hover:bg-white/20"}`,children:"2D View"})]})]}),e.jsx("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:k==="3d"?e.jsx(St,{galaxyType:f,numSystems:g,blackHoles:c,pulsars:R,quasars:p,imageUrl:l}):e.jsxs(e.Fragment,{children:[e.jsx("canvas",{ref:d,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${K?"opacity-0":"opacity-100"}`,style:{filter:K?"blur(50px)":"none"}}),e.jsx("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${C?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:C&&l?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(st,{zoomMargin:20,classDialog:"backdrop-blur-3xl",children:e.jsx("img",{ref:Z,className:"max-w-full max-h-full object-contain rounded-xl shadow-2xl shadow-blue-500/20",src:l,alt:"Galaxy visualization",style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:"transparent"}})})}):e.jsx("img",{ref:Z,className:"w-full h-full object-cover",src:"/static/images/placeholder-min.jpg",alt:"Galaxy visualization"})})]})}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:t,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${v?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),P]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]})]})},kt=({systems:t,coordinates:l})=>{const[f,g]=i.useState(new Map);return i.useEffect(()=>{(()=>{try{const R=new Map;t.forEach(p=>{const d=rt(l,p.index,p.num_planets||1);R.set(p.index,d)}),g(R)}catch{}})()},[l,t]),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:t.map(c=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[(()=>{const R=f.get(c.index)||"none";return R==="complete"?e.jsx("div",{className:"absolute top-1 right-1 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}):R==="partial"?e.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500/20 border border-yellow-500/50 text-yellow-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"PARTIAL"}):null})(),e.jsxs("button",{onClick:()=>window.location.href=`/system/${c.index}`,className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["#",c.number]}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:c.name})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},c.index))}),t.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No systems found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This galaxy appears to be empty"})]})]})},Et=({currentGalaxy:t})=>{const[l,f]=i.useState(!1),[g,c]=i.useState(!1),[R,p]=i.useState(!0),d=1e7;i.useEffect(()=>{const[j,C,I]=t.coordinates,K=!(j===0&&C===0&&I===0),x=!(j===d&&C===d&&I===d);f(K),c(x),p(!1)},[t.coordinates]);const Z=()=>{const[j,C,I]=t.coordinates;return I>0?[j,C,I-1]:C>0?[j,C-1,d]:j>0?[j-1,d,d]:[0,0,0]},P=()=>{const[j,C,I]=t.coordinates;return I<d?[j,C,I+1]:C<d?[j,C+1,0]:j<d?[j+1,0,0]:[d,d,d]},y=()=>{if(l){if(!Me.canAffordTravel("galaxy",1)){Me.executeTravel("galaxy",1);return}if(!Me.executeTravel("galaxy",1))return;const[C,I,K]=Z(),x=document.createElement("form");x.method="POST",x.action="/navigate";const k=document.createElement("input");k.type="hidden",k.name="x",k.value=C.toString();const u=document.createElement("input");u.type="hidden",u.name="y",u.value=I.toString();const a=document.createElement("input");a.type="hidden",a.name="z",a.value=K.toString(),x.appendChild(k),x.appendChild(u),x.appendChild(a),document.body.appendChild(x),x.submit()}},v=()=>{if(g){if(!Me.canAffordTravel("galaxy",1)){Me.executeTravel("galaxy",1);return}if(!Me.executeTravel("galaxy",1))return;const[C,I,K]=P(),x=document.createElement("form");x.method="POST",x.action="/navigate";const k=document.createElement("input");k.type="hidden",k.name="x",k.value=C.toString();const u=document.createElement("input");u.type="hidden",u.name="y",u.value=I.toString();const a=document.createElement("input");a.type="hidden",a.name="z",a.value=K.toString(),x.appendChild(k),x.appendChild(u),x.appendChild(a),document.body.appendChild(x),x.submit()}};return R?null:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:y,disabled:!l,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${l?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:v,disabled:!g,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${g?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})},zt=({page:t,prevPage:l,nextPage:f,finish:g})=>{const c="px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105",R="bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg",p="bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white border border-white/20";return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 sm:gap-4 flex-wrap",children:[t!==1&&e.jsxs("button",{onClick:()=>window.location.href="/galaxy/1",className:`${c} ${p}`,title:"First page",children:[e.jsx("span",{className:"hidden sm:inline",children:"First"}),e.jsx("span",{className:"sm:hidden",children:"«"})]}),l&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${l}`,className:`${c} ${p}`,title:"Previous page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"‹"})]}),(()=>{const d=[],P=Math.max(1,t-2),y=Math.min(g,t+2);P>1&&(d.push(e.jsx("button",{onClick:()=>window.location.href="/galaxy/1",className:`${c} ${p}`,children:"1"},1)),P>2&&d.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"start-ellipsis")));for(let v=P;v<=y;v++)v===t?d.push(e.jsx("span",{className:`${c} ${R} cursor-default`,children:v},v)):d.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${v}`,className:`${c} ${p} cursor-pointer`,children:v},v));return y<g&&(y<g-1&&d.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"end-ellipsis")),d.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${g}`,className:`${c} ${p}`,children:g},g))),d})(),f&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${f}`,className:`${c} ${p}`,title:"Next page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"›"})]}),t!==g&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${g}`,className:`${c} ${p}`,title:"Last page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Last"}),e.jsx("span",{className:"sm:hidden",children:"»"})]})]}),e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-400",children:["Page ",t," of ",g]})]})},qe=({galaxy:t,systems:l,galaxy_url:f,version:g,page:c,prev_page:R,next_page:p,finish:d,image_url:Z})=>{const[P]=i.useState(t.coordinates.join(","));i.useEffect(()=>{document.body.setAttribute("data-coordinates",P),it(P)},[P]);const y=v=>v.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsx(lt,{}),e.jsxs("div",{className:"relative z-10 pt-1",children:[e.jsx(ct,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["Galaxy '",y(t.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Coordinates ",t.coordinates.join(", ")]})]}),e.jsx(Et,{currentGalaxy:t}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(Ct,{galaxyUrl:f,imageUrl:Z,galaxyType:t.galaxy_type,numSystems:t.num_systems,blackHoles:t.black_holes,pulsars:t.pulsars,quasars:t.quasars})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(Mt,{galaxy:t})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Systems in '",y(t.name),"'"]}),e.jsx(kt,{systems:l,coordinates:P})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsx("span",{className:"text-base sm:text-lg",children:"← Go Back to Planetary Index"})})}),e.jsx(zt,{page:c,prevPage:R,nextPage:p,finish:d})]}),e.jsx(yt,{version:g})]}),e.jsx(wt,{}),e.jsx(dt,{currentLocation:{type:"galaxy",name:t.name,coordinates:t.coordinates.join(",")}})]})};document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("atlas-react-root");if(!t)return;const l=f=>{const g=document.getElementById(f);if(!g||!g.textContent)return null;try{return JSON.parse(g.textContent.trim())}catch{return null}};try{const f=l("data-galaxy")||{},g=l("data-systems")||[],c=l("data-navigation")||{},R=l("data-common")||{},p={galaxy:{name:f.name||"Unknown Galaxy",coordinates:f.coordinates||[0,0,0],galaxy_type:f.galaxy_type||"Unknown",num_systems:f.num_systems||0,black_holes:f.black_holes||0,pulsars:f.pulsars||0,quasars:f.quasars||0},systems:g,galaxy_url:c.galaxy_url||"#",version:R.version||"1.0.0",page:c.page||1,prev_page:c.prev_page,next_page:c.next_page,finish:c.finish||1,image_url:R.image_url||""};$e.createRoot(t).render(Fe.createElement(qe,p))}catch{const g={galaxy:{name:"Unknown Galaxy",coordinates:[0,0,0],galaxy_type:"Unknown",num_systems:0,black_holes:0,pulsars:0,quasars:0},systems:[],galaxy_url:"#",version:"1.0.0",page:1,finish:1,image_url:""};$e.createRoot(t).render(Fe.createElement(qe,g))}});
