import{r as m,j as e,H as Oe,V as qe,c as Se,R as Le}from"./atlas_DVrnBBsgS-kH5xseABxRO.js";import{r as Ze,U as Ue}from"./atlas_7DKRiMQPznKsckyU1SAMW.js";import{S as ke,C as Ce,P as ze,W as De,G as Re,B as Ge,E as Ie,L as $e,a as Be,b as ge,c as U,M as J,d as K,V as oe,e as _e,f as Te,g as Ae,A as Ye,D as Pe,h as Xe,i as He,j as Fe}from"./atlas_JzQmrLPlfVl9nkKnI5Ba8.js";const Je=({coordinates:s,galaxyName:r})=>{const o=m.useRef(null),c=m.useRef(null),i=m.useRef(null),y=m.useRef(null);return m.useEffect(()=>{if(!o.current)return;const n=o.current,v=n.clientWidth,C=n.clientHeight,g=new ke;g.background=new Ce(657930),c.current=g;const x=new ze(45,v/C,.1,1e3);x.position.set(20,15,20),x.lookAt(0,0,0);const u=new De({antialias:!0,alpha:!0});u.setSize(v,C),u.setClearColor(0,.2),i.current=u,n.appendChild(u.domElement);const a=0,E=1e7,S=5e6,[_,D,I]=s,l=((_-a)/(E-a)-.5)*16,L=((D-a)/(E-a)-.5)*16,R=((I-a)/(E-a)-.5)*16,d=new Re;g.add(d);const G=new Ge(16,16,16),M=new Ie(G),$=new $e({color:16777215,opacity:.4,transparent:!0,linewidth:2}),f=new Be(M,$);d.add(f);const z=new ge(16,16,16777215,16777215);z.material.opacity=.1,z.material.transparent=!0,z.position.y=-8,d.add(z);const B=new ge(16,16,16777215,16777215);B.material.opacity=.05,B.material.transparent=!0,B.rotation.z=Math.PI/2,B.position.x=-8,d.add(B);const Y=new ge(16,16,16777215,16777215);Y.material.opacity=.05,Y.material.transparent=!0,Y.rotation.x=Math.PI/2,Y.position.z=-8,d.add(Y);const Q=new U(.5,32,32),fe=new J({color:16777215,transparent:!0,opacity:.9}),ee=new K(Q,fe);ee.position.set(0,0,0),d.add(ee);const be=new K(new U(.8,32,32),new J({color:16777215,transparent:!0,opacity:.2}));ee.add(be);const j=new U(.4,32,32),we=new J({color:6605055,transparent:!0,opacity:1}),te=new K(j,we);te.position.set(l,L,R),d.add(te);const ve=new K(new U(.7,32,32),new J({color:6605055,transparent:!0,opacity:.3}));if(te.add(ve),Math.sqrt(Math.pow(_-S,2)+Math.pow(D-S,2)+Math.pow(I-S,2))<2e6){const t=[new oe(0,0,0),new oe(l,L,R)],b=new _e().setFromPoints(t),p=new Te({color:16762980,dashSize:.6,gapSize:.6,opacity:.4,transparent:!0,linewidth:2}),k=new Ae(b,p);k.computeLineDistances(),d.add(k)}const ie=new Ye(4210752,.6);g.add(ie);const O=new Pe(16777215,.8);O.position.set(10,10,10),g.add(O);const H=(t,b)=>{const p=document.createElement("canvas"),k=p.getContext("2d");if(!k)return null;p.width=64,p.height=64,k.fillStyle=`#${b.toString(16).padStart(6,"0")}`,k.font="bold 48px Arial",k.textAlign="center",k.textBaseline="middle",k.fillText(t,32,32);const N=new Xe(p),re=new He({map:N,transparent:!0,opacity:.8}),Z=new Fe(re);return Z.scale.set(1.6,1.6,1),Z},le=H("X",16739179);le&&(le.position.set(8.4,-7.6,-7.6),d.add(le));const ce=H("Y",7077739);ce&&(ce.position.set(-7.6,8.4,-7.6),d.add(ce));const q=H("Z",7039999);q&&(q.position.set(-7.6,-7.6,8.4),d.add(q));let P=!1,F=0,V=0,X=!0,se=0;const je=t=>{P=!0,X=!1,F=t.clientX,V=t.clientY},ye=t=>{if(!P)return;const b=t.clientX-F,p=t.clientY-V;d.rotation.y+=b*.01,d.rotation.x+=p*.01,F=t.clientX,V=t.clientY},ae=()=>{P=!1,setTimeout(()=>{P||(X=!0)},3e3)},de=t=>{t.preventDefault();const b=.1,p=x.position.distanceTo(new oe(0,0,0));t.deltaY>0&&p<50?x.position.multiplyScalar(1+b):t.deltaY<0&&p>10&&x.position.multiplyScalar(1-b)},me=t=>{t.key==="Escape"&&document.dispatchEvent(new CustomEvent("universe-close-fullscreen"))},ue=t=>{if(t.preventDefault(),t.touches.length===1)P=!0,X=!1,F=t.touches[0].clientX,V=t.touches[0].clientY;else if(t.touches.length===2){const b=t.touches[0].clientX-t.touches[1].clientX,p=t.touches[0].clientY-t.touches[1].clientY;se=Math.sqrt(b*b+p*p)}},xe=t=>{if(t.preventDefault(),t.touches.length===1&&P){const b=t.touches[0].clientX-F,p=t.touches[0].clientY-V;d.rotation.y+=b*.01,d.rotation.x+=p*.01,F=t.touches[0].clientX,V=t.touches[0].clientY}else if(t.touches.length===2){const b=t.touches[0].clientX-t.touches[1].clientX,p=t.touches[0].clientY-t.touches[1].clientY,k=Math.sqrt(b*b+p*p);if(se>0){const re=k/se,Z=x.position.distanceTo(new oe(0,0,0));re>1&&Z>10?x.position.multiplyScalar(1-.01):re<1&&Z<50&&x.position.multiplyScalar(1+.01)}se=k}},ne=t=>{t.preventDefault(),P=!1,se=0,setTimeout(()=>{P||(X=!0)},3e3)},h=u.domElement;h.style.cursor="grab",h.addEventListener("mousedown",t=>{h.style.cursor="grabbing",je(t)}),h.addEventListener("mousemove",ye),h.addEventListener("mouseup",()=>{h.style.cursor="grab",ae()}),h.addEventListener("mouseleave",()=>{h.style.cursor="grab",ae()}),h.addEventListener("wheel",de),h.addEventListener("touchstart",ue,{passive:!1}),h.addEventListener("touchmove",xe,{passive:!1}),h.addEventListener("touchend",ne,{passive:!1}),document.addEventListener("keydown",me);const he=()=>{y.current=requestAnimationFrame(he),X&&(d.rotation.y+=.002,d.rotation.x+=.001);const t=Date.now()*.005;ee.scale.setScalar(1+Math.sin(t)*.1),te.rotation.y+=.01,u.render(g,x)};he();const pe=()=>{const t=n.clientWidth,b=n.clientHeight;x.aspect=t/b,x.updateProjectionMatrix(),u.setSize(t,b)};return window.addEventListener("resize",pe),()=>{window.removeEventListener("resize",pe),document.removeEventListener("keydown",me),h.removeEventListener("mousedown",je),h.removeEventListener("mousemove",ye),h.removeEventListener("mouseup",ae),h.removeEventListener("mouseleave",ae),h.removeEventListener("wheel",de),h.removeEventListener("touchstart",ue),h.removeEventListener("touchmove",xe),h.removeEventListener("touchend",ne),y.current&&cancelAnimationFrame(y.current),n&&u.domElement&&n.removeChild(u.domElement),u.dispose(),G.dispose(),M.dispose(),$.dispose(),Q.dispose(),fe.dispose(),j.dispose(),we.dispose()}},[s,r]),e.jsx("div",{ref:o,className:"w-full h-full"})},Ke=({coordinates:s,galaxyName:r})=>{const o=m.useRef(null),c=m.useRef(null),i=m.useRef(null),y=m.useRef(null),[n,v]=m.useState(!1),[C,g]=m.useState(!1),[x,u]=m.useState(!1),a=()=>{g(!0),setTimeout(()=>{v(!1),g(!1)},300)};m.useEffect(()=>{const l=L=>{L.key==="Escape"&&n&&a()};return document.addEventListener("universe-close-fullscreen",a),document.addEventListener("keydown",l),()=>{document.removeEventListener("universe-close-fullscreen",a),document.removeEventListener("keydown",l)}},[n]),m.useEffect(()=>{if(n&&x){const l=setTimeout(()=>{u(!1)},50);return()=>clearTimeout(l)}},[n,x]),m.useEffect(()=>{if(!o.current)return;const l=o.current,L=l.clientWidth,R=L<640,d=new ke;d.background=new Ce(657930),c.current=d;const G=new ze(30,L/120,.1,1e3);G.position.set(12,8,12),G.lookAt(0,0,0);const M=new De({antialias:!0,alpha:!0});M.setSize(L,120),M.setClearColor(0,.2),i.current=M,l.appendChild(M.domElement);const $=0,f=1e7,z=5e6,[B,Y,Q]=s,fe=((B-$)/(f-$)-.5)*8,ee=((Y-$)/(f-$)-.5)*8,be=((Q-$)/(f-$)-.5)*8,j=new Re;d.add(j);const we=new Ge(8,8,8),te=new Ie(we),ve=new $e({color:16777215,opacity:.4,transparent:!0}),Ne=new Be(te,ve);j.add(Ne);const ie=new ge(8,8,16777215,16777215);ie.material.opacity=.1,ie.material.transparent=!0,ie.position.y=-4,j.add(ie);const O=new ge(8,8,16777215,16777215);O.material.opacity=.05,O.material.transparent=!0,O.rotation.z=Math.PI/2,O.position.x=-4,j.add(O);const H=new ge(8,8,16777215,16777215);H.material.opacity=.05,H.material.transparent=!0,H.rotation.x=Math.PI/2,H.position.z=-4,j.add(H);const le=new U(.25,16,16),ce=new J({color:16777215,transparent:!0,opacity:.9}),q=new K(le,ce);q.position.set(0,0,0),j.add(q);const P=new K(new U(.45,16,16),new J({color:16777215,transparent:!0,opacity:.2}));q.add(P);const F=new U(.2,16,16),V=new J({color:6605055,transparent:!0,opacity:1}),X=new K(F,V);X.position.set(fe,ee,be),j.add(X);const se=new K(new U(.35,16,16),new J({color:6605055,transparent:!0,opacity:.3}));if(X.add(se),Math.sqrt(Math.pow(B-z,2)+Math.pow(Y-z,2)+Math.pow(Q-z,2))<2e6){const w=[new oe(0,0,0),new oe(fe,ee,be)],T=new _e().setFromPoints(w),A=new Te({color:16762980,dashSize:.3,gapSize:.3,opacity:.4,transparent:!0}),W=new Ae(T,A);W.computeLineDistances(),j.add(W)}const ye=new Ye(4210752,.6);d.add(ye);const ae=new Pe(16777215,.8);ae.position.set(5,5,5),d.add(ae);const de=(w,T)=>{const A=document.createElement("canvas"),W=A.getContext("2d");if(!W)return null;A.width=32,A.height=32,W.fillStyle=`#${T.toString(16).padStart(6,"0")}`,W.font="bold 24px Arial",W.textAlign="center",W.textBaseline="middle",W.fillText(w,16,16);const Ve=new Xe(A),We=new He({map:Ve,transparent:!0,opacity:.8}),Ee=new Fe(We);return Ee.scale.set(.8,.8,1),Ee},me=de("X",16739179);me&&(me.position.set(4.2,-3.8,-3.8),j.add(me));const ue=de("Y",7077739);ue&&(ue.position.set(-3.8,4.2,-3.8),j.add(ue));const xe=de("Z",7039999);xe&&(xe.position.set(-3.8,-3.8,4.2),j.add(xe));let ne=!1,h=0,he=0,pe=!0;const t=w=>{ne=!0,pe=!1,h=w.clientX,he=w.clientY},b=w=>{if(!ne)return;const T=w.clientX-h,A=w.clientY-he;j.rotation.y+=T*.01,j.rotation.x+=A*.01,h=w.clientX,he=w.clientY},p=()=>{ne=!1,setTimeout(()=>{ne||(pe=!0)},3e3)},k=w=>{w.preventDefault();const T=.1,A=G.position.distanceTo(new oe(0,0,0));w.deltaY>0&&A<25?G.position.multiplyScalar(1+T):w.deltaY<0&&A>5&&G.position.multiplyScalar(1-T)},N=M.domElement;N.style.cursor="grab",N.style.borderRadius="8px",N.addEventListener("mousedown",w=>{N.style.cursor="grabbing",t(w)}),N.addEventListener("mousemove",b),N.addEventListener("mouseup",()=>{N.style.cursor="grab",p()}),N.addEventListener("mouseleave",()=>{N.style.cursor="grab",p()}),N.addEventListener("wheel",k);const re=()=>{y.current=requestAnimationFrame(re),pe&&(j.rotation.y+=.002,j.rotation.x+=.001);const w=Date.now()*.005;q.scale.setScalar(1+Math.sin(w)*.1),X.rotation.y+=.01,M.render(d,G)};re();const Z=()=>{const w=l.clientWidth,T=w<640?150:160;G.aspect=w/T,G.updateProjectionMatrix(),M.setSize(w,T)};return window.addEventListener("resize",Z),()=>{window.removeEventListener("resize",Z),N.removeEventListener("mousedown",t),N.removeEventListener("mousemove",b),N.removeEventListener("mouseup",p),N.removeEventListener("mouseleave",p),N.removeEventListener("wheel",k),y.current&&cancelAnimationFrame(y.current),l&&M.domElement&&l.removeChild(M.domElement),M.dispose(),we.dispose(),te.dispose(),ve.dispose(),le.dispose(),ce.dispose(),F.dispose(),V.dispose()}},[s,r]);const E=l=>l.replace(/_/g," "),S=l=>l>=1e6?`${(l/1e6).toFixed(1)}M`:l>=1e3?`${(l/1e3).toFixed(1)}K`:l.toString(),[_,D,I]=s;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Galaxy Location"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:o,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsxs("button",{onClick:()=>{v(!0),u(!0)},className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 flex items-center gap-1 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:[e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),e.jsx("span",{className:"text-xs text-white hidden sm:inline",children:"Expand"})]})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-[10px]",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:E(r)})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:[S(_),", ",S(D),", ",S(I)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom • Drag: Rotate View"})]})]}),n&&Ze.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${C||x?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${C||x?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:E(r)})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[E(r)," - Galaxy Location"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Galaxy"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[S(_),", ",S(D),", ",S(I)]})]})]}),e.jsx("button",{onClick:a,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(Je,{coordinates:s,galaxyName:r})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},Qe=({galaxy:s})=>{const r=o=>o.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3 pr-16",children:"Galaxy Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300",children:s.galaxy_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Solar Systems"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:s.num_systems.toLocaleString()})]})]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-2",children:e.jsx(Ke,{coordinates:s.coordinates,galaxyName:s.name})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-gray-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Cosmic Objects"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-pink-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Black Holes"}),e.jsx("div",{className:"text-xs font-bold text-pink-300",children:s.black_holes.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Pulsars"}),e.jsx("div",{className:"text-xs font-bold text-cyan-300",children:s.pulsars.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Quasars"}),e.jsx("div",{className:"text-xs font-bold text-indigo-300",children:s.quasars.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("div",{className:"text-green-400 font-medium",children:"Visited"})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:r(s.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:s.coordinates.join(", ")})]})]})]})]})},et=({galaxyUrl:s,imageUrl:r})=>{const o=m.useRef(null),c=m.useRef(null),[i,y]=m.useState("Aligning Stargate..."),[n,v]=m.useState(!1),[C,g]=m.useState(!1),[x,u]=m.useState(!1);return m.useEffect(()=>{const a=o.current;if(!a)return;const E=a.getContext("2d");if(!E)return;let S=[];const _=800;let D,I;const l=800;let L,R=.5;function d(){const f=a?.parentElement;if(!f||!a)return;const z=f.clientWidth,B=f.clientHeight;a.width=Math.min(z,l),a.height=Math.min(B,l),D=a.width/2,I=a.height/2}function G(){d(),S=[];for(let f=0;f<_;f++)S.push({x:Math.random()*(a?.width||800),y:Math.random()*(a?.height||800),z:Math.random()*(a?.width||800),o:Math.random()});M()}function M(){!a||!E||(E.clearRect(0,0,a.width,a.height),S.forEach(f=>{f.z-=R,f.z<=0&&(f.z=a.width,f.x=Math.random()*a.width,f.y=Math.random()*a.height,f.o=Math.random());const z=a.width/f.z,B=(f.x-D)*z+D,Y=(f.y-I)*z+I,Q=2*z;E.beginPath(),E.fillStyle=`rgba(255, 255, 255, ${f.o})`,E.arc(B,Y,Q,0,2*Math.PI),E.fill()}),R<60&&(R+=1),L=requestAnimationFrame(M))}G();const $=()=>d();return window.addEventListener("resize",$),()=>{window.removeEventListener("resize",$),L&&cancelAnimationFrame(L)}},[]),m.useEffect(()=>{if(r){console.log("Loading galaxy image:",r);const a=new Image;a.onload=()=>{console.log("Galaxy image loaded successfully"),c.current&&(c.current.src=r,g(!0),u(!0))},a.onerror=()=>{console.error("Failed to load galaxy image:",r),setTimeout(()=>{g(!0),u(!0)},1500)},a.src=r}else console.log("No imageUrl provided, using placeholder"),setTimeout(()=>{g(!0),u(!0)},1500)},[r]),m.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){y("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),v(!0);const E=(l,L)=>Array.from({length:L},()=>l[Math.floor(Math.random()*l.length)]).join(""),S=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:30},{chars:"0123456789ABCDEF",duration:20,iterations:40},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:'\",.<>?/`~",duration:10,iterations:100}];let _=0,D=0;const I=()=>{if(_>=S.length){const L="Stargate system aligned";let R=0;y("");const d=()=>{R<L.length?(y(L.substring(0,R+1)),R++,setTimeout(d,30)):v(!1)};d();return}const l=S[_];y(E(l.chars,32)),D++,D>=l.iterations&&(_++,D=0),setTimeout(I,l.duration)};I()},[]),m.useEffect(()=>{const a=document.createElement("style");return a.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(a),()=>{document.head.removeChild(a)}},[]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3",children:"Galaxy Visualization"}),e.jsxs("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:[e.jsx("canvas",{ref:o,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${x?"opacity-0":"opacity-100"}`,style:{filter:x?"blur(50px)":"none"}}),e.jsx("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${C?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:C&&r?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Ue,{zoomMargin:20,classDialog:"backdrop-blur-3xl",children:e.jsx("img",{ref:c,className:"max-w-full max-h-full object-contain rounded-xl shadow-2xl shadow-blue-500/20",src:r,alt:"Galaxy visualization",style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:"transparent"}})})}):e.jsx("img",{ref:c,className:"w-full h-full object-cover",src:"/static/images/placeholder-min.jpg",alt:"Galaxy visualization"})})]}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:s,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${n?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),i]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]})]})},tt=({systems:s,coordinates:r})=>{const[o,c]=m.useState(new Set);return m.useEffect(()=>{(()=>{try{const v=JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}")[r]||{},C=new Set;Object.keys(v).forEach(g=>{C.add(parseInt(g))}),c(C)}catch(n){console.error("Error loading historical data:",n)}})(),(()=>{try{let n=JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}");n[r]||(n[r]={}),localStorage.setItem("atlasHistoricalData",JSON.stringify(n))}catch(n){console.error("Error saving historical data:",n)}})()},[r]),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:s.map(i=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[o.has(i.index)&&e.jsx("div",{className:"absolute top-1 right-1 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}),e.jsxs("button",{onClick:()=>window.location.href=`/system/${i.index}`,className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["#",i.number]}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:i.name})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},i.index))}),s.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No systems found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This galaxy appears to be empty"})]})]})},st=({page:s,prevPage:r,nextPage:o,finish:c})=>{const i="px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105",y="bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg",n="bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white border border-white/20";return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 sm:gap-4 flex-wrap",children:[s!==1&&e.jsxs("button",{onClick:()=>window.location.href="/galaxy/1",className:`${i} ${n}`,title:"First page",children:[e.jsx("span",{className:"hidden sm:inline",children:"First"}),e.jsx("span",{className:"sm:hidden",children:"«"})]}),r&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${r}`,className:`${i} ${n}`,title:"Previous page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"‹"})]}),(()=>{const v=[],g=Math.max(1,s-2),x=Math.min(c,s+2);g>1&&(v.push(e.jsx("button",{onClick:()=>window.location.href="/galaxy/1",className:`${i} ${n}`,children:"1"},1)),g>2&&v.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"start-ellipsis")));for(let u=g;u<=x;u++)u===s?v.push(e.jsx("span",{className:`${i} ${y} cursor-default`,children:u},u)):v.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${u}`,className:`${i} ${n} cursor-pointer`,children:u},u));return x<c&&(x<c-1&&v.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"end-ellipsis")),v.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${c}`,className:`${i} ${n}`,children:c},c))),v})(),o&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${o}`,className:`${i} ${n}`,title:"Next page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"›"})]}),s!==c&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${c}`,className:`${i} ${n}`,title:"Last page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Last"}),e.jsx("span",{className:"sm:hidden",children:"»"})]})]}),e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-400",children:["Page ",s," of ",c]})]})},Me=({galaxy:s,systems:r,galaxy_url:o,version:c,page:i,prev_page:y,next_page:n,finish:v,image_url:C})=>{const[g]=m.useState(s.coordinates.join(","));m.useEffect(()=>{document.body.setAttribute("data-coordinates",g)},[g]);const x=u=>u.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(Oe,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["Galaxy '",x(s.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Coordinates ",s.coordinates.join(", ")]})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(et,{galaxyUrl:o,imageUrl:C})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(Qe,{galaxy:s})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Systems in '",x(s.name),"'"]}),e.jsx(tt,{systems:r,coordinates:g})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsx("span",{className:"text-base sm:text-lg",children:"← Go Back to Planetary Index"})})}),e.jsx(st,{page:i,prevPage:y,nextPage:n,finish:v})]}),e.jsx(qe,{version:c})]})]})};console.log("Atlas Galaxy React script loading...");document.addEventListener("DOMContentLoaded",()=>{console.log("DOM loaded, mounting Galaxy React component...");const s=document.getElementById("atlas-react-root");if(!s){console.error("Could not find atlas-react-root element");return}const r=o=>{const c=document.getElementById(o);if(!c||!c.textContent)return null;try{return JSON.parse(c.textContent.trim())}catch(i){return console.error(`Error parsing data from script ${o}:`,i),null}};try{const o=r("data-galaxy")||{},c=r("data-systems")||[],i=r("data-navigation")||{},y=r("data-common")||{},n={galaxy:{name:o.name||"Unknown Galaxy",coordinates:o.coordinates||[0,0,0],galaxy_type:o.galaxy_type||"Unknown",num_systems:o.num_systems||0,black_holes:o.black_holes||0,pulsars:o.pulsars||0,quasars:o.quasars||0},systems:c,galaxy_url:i.galaxy_url||"#",version:y.version||"1.0.0",page:i.page||1,prev_page:i.prev_page,next_page:i.next_page,finish:i.finish||1,image_url:y.image_url||""};console.log("Galaxy props loaded from JSON scripts:",n),Se.createRoot(s).render(Le.createElement(Me,n)),console.log("Galaxy React component mounted successfully!")}catch(o){console.error("Error parsing galaxy data:",o);const c={galaxy:{name:"Unknown Galaxy",coordinates:[0,0,0],galaxy_type:"Unknown",num_systems:0,black_holes:0,pulsars:0,quasars:0},systems:[],galaxy_url:"#",version:"1.0.0",page:1,finish:1,image_url:""};Se.createRoot(s).render(Le.createElement(Me,c))}});
