import{S as l,g as A,D as v}from"./atlas_CZFakru7GGKiPV4DHwGyu.js";import{C as n}from"./atlas_BjkcO1_mNssSqp05cLhjd.js";const a={LAVA_WAVE_HEIGHT:{min:.02,max:.06},LAVA_WAVE_FREQUENCY:{min:1,max:2.5},LAVA_WAVE_SPEED:{min:.02,max:.1},EMISSIVE_INTENSITY:{min:3,max:6},GLOW_INTENSITY:{min:2,max:4},TEMPERATURE:{min:.8,max:1},TIME_SPEED:{min:.05,max:.5}};class T{layerMesh;material;params;layerSystem;startTime;constructor(s,e={}){this.layerSystem=s;const i=e.seed||Math.floor(Math.random()*1e6),t=new l(i);this.startTime=e.startTime||i%1e4/1e3;const E=new n(16747520),o={h:0,s:0,l:0};E.getHSL(o);const r=e.moltenColor instanceof n?e.moltenColor:new n().setHSL(o.h,1,.5),S=e.coreColor instanceof n?e.coreColor:new n().setHSL(o.h+.05,.9,.6),c=e.coolingColor instanceof n?e.coolingColor:new n().setHSL(o.h-.05,.8,.3);this.params={moltenColor:r,coreColor:S,coolingColor:c,lavaWaveHeight:e.lavaWaveHeight||t.uniform(a.LAVA_WAVE_HEIGHT.min,a.LAVA_WAVE_HEIGHT.max),lavaWaveFrequency:e.lavaWaveFrequency||t.uniform(a.LAVA_WAVE_FREQUENCY.min,a.LAVA_WAVE_FREQUENCY.max),lavaWaveSpeed:e.lavaWaveSpeed||t.uniform(a.LAVA_WAVE_SPEED.min,a.LAVA_WAVE_SPEED.max),secondaryLavaWaveHeight:e.secondaryLavaWaveHeight||t.uniform(a.LAVA_WAVE_HEIGHT.min*.7,a.LAVA_WAVE_HEIGHT.max*.7),secondaryLavaWaveFrequency:e.secondaryLavaWaveFrequency||t.uniform(a.LAVA_WAVE_FREQUENCY.min*1.3,a.LAVA_WAVE_FREQUENCY.max*1.3),secondaryLavaWaveSpeed:e.secondaryLavaWaveSpeed||t.uniform(a.LAVA_WAVE_SPEED.min*1.2,a.LAVA_WAVE_SPEED.max*1.2),lavaDistortionScale:e.lavaDistortionScale||2,lavaDistortionSpeed:e.lavaDistortionSpeed||.2,emissiveIntensity:e.emissiveIntensity||t.uniform(a.EMISSIVE_INTENSITY.min,a.EMISSIVE_INTENSITY.max),glowIntensity:e.glowIntensity||t.uniform(a.GLOW_INTENSITY.min,a.GLOW_INTENSITY.max),viscosity:e.viscosity||.8,temperature:e.temperature||t.uniform(a.TEMPERATURE.min,a.TEMPERATURE.max),lavaRoughness:e.lavaRoughness||.9,lavaMetalness:e.lavaMetalness||.1,lavaNormalScale:e.lavaNormalScale||.08,lavaNormalSpeed:e.lavaNormalSpeed||.1,seed:i,startTime:this.startTime,timeSpeed:e.timeSpeed||t.uniform(a.TIME_SPEED.min,a.TIME_SPEED.max)},this.material=this.layerSystem.createMoltenLavaLayerMaterial(this.params),this.layerMesh=this.layerSystem.addEffectLayer("moltenLava",this.material,this.layerSystem.getNextScaleFactor(),this)}update(s){const i=A(v,this.params.timeSpeed,this.startTime);this.material.uniforms.time&&(this.material.uniforms.time.value=i)}dispose(){}}function L(m,s,e){const i=e||12345,t=new l(i+8e3),E={emissiveIntensity:t.uniform(a.EMISSIVE_INTENSITY.min,a.EMISSIVE_INTENSITY.max),glowIntensity:t.uniform(a.GLOW_INTENSITY.min,a.GLOW_INTENSITY.max),temperature:t.uniform(a.TEMPERATURE.min,a.TEMPERATURE.max),viscosity:.9,lavaRoughness:.8,lavaMetalness:.1,lavaNormalScale:.06,lavaNormalSpeed:.08,seed:i};return new T(m,E)}export{T as M,L as c};
