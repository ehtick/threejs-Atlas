import{r as w,j as e,a as rt,c as nt,R as ot}from"./atlas_C3xj8MG9oH9uC54MklkAb.js";import{R as St,L as Nt,g as zt,S as Te,m as Rt,F as Ct,H as Et,a as kt}from"./atlas_Dd1oIz2vPimnyjaTh6Eli.js";import{W as Oe}from"./atlas_hV4YbJX4LmBeaYZmYRF0y.js";import{a2 as Ze,C as De,a3 as Ke,G as Ge,q as at,cG as ct,W as qe,cH as _e,cI as Be,b as Ne,z as Pe,M as q,V as He,B as Fe,cJ as lt,n as dt,a8 as Je,a7 as mt,v as ut,cK as ht,cL as pt,S as Ae,c as ft,A as Re,g as Se,x as We,D as Ve,H as xt,t as Xe,m as Ie,P as Ye,X as gt,y as vt}from"./atlas_BOOzg5XYrrU1N4SZySfRd.js";import{R as Pt,S as Lt,M as Gt,a as Qe,b as st,D as It,T as Dt}from"./atlas_B0b__4oaKLmjnmTXuLsj1.js";import{O as wt}from"./atlas_BJLzboHTaSIGvKgNbvLUr.js";import{E as At,a as _t,b as Ft}from"./atlas_D3vjnaxMr6DYzECIvEB9z.js";import{V as Ht}from"./atlas_DwvSdObFEIQcgn4zq5yYd.js";import"./atlas_C0q7_QgoBkw_1ECio0nFC.js";import"./atlas_wcPzamFt5CPpIcmd124GE.js";import"./atlas_DcFWk_8uQW5YiyxJyXm9Z.js";import"./atlas_CE2WK_Y-xuzINP7b3IpS3.js";import"./atlas_B-kptGVZDVdmtnkIZVh1u.js";import"./atlas_Bd8W2S8TCToc_TkfjBSRh.js";import"./atlas_BFuxIgjPmiYBRSaU6AzKX.js";import"./atlas_CH4XVS_nmu8TTUL6-ibC9.js";import"./atlas_XaDvYkrecyxhCh31P9DPo.js";import"./atlas_8smkL2kAlW8VsbqAp0E2n.js";import"./atlas_CjehN3jkco148tZZ8HqMi.js";import"./atlas_Dy-tlkqGLRE2Gl_vKG4xP.js";import"./atlas_D34u812Y6QAdJLe2a36BS.js";import"./atlas_BkcglrC3q9-fMfrzU8uke.js";import"./atlas_BMkCctBHLeH7Oacwp8KHY.js";import"./atlas_C92kSEtvzpygOQttG5_li.js";import"./atlas_B877x597f8C_bbJT6q9cw.js";import"./atlas_DAbZALnNf85bcXe1oVQnz.js";import"./atlas_DQBcmrKCsDOyRg5Jaj7Di.js";import"./atlas_Cm5pcYvuRuae8wLwYAuwz.js";import"./atlas_BRjO3l-9Uk0GXd99tH-yJ.js";import"./atlas_MCqKeA1rPM8tvcWERWIKQ.js";import"./atlas_DUeAOsmuB5IQYdEBY9tsy.js";import"./atlas_dAPGVvdiBoF3N71Jj1_R5.js";import"./atlas_e5uNz0v6NagohqMDG5OXg.js";import"./atlas_BO01S8JSEJPQBe1CeUH90.js";import"./atlas_DoGAVfLGhj19oLHZhptsG.js";import"./atlas_BTW9-VU5aCkr6W1y5CLfB.js";import"./atlas_D0-SfIZytUwPNEpr5qGyx.js";import"./atlas_P538xA28SIauNdsCb0ZYe.js";import"./atlas_CwupL9FClDwMIIJCaIsAX.js";import"./atlas_DY-bkmziKm4gSYWMvPahE.js";import"./atlas_By5tzXmHX4pj8fcpSexic.js";import"./atlas_3VRqq9jdnqdyWEklvEohb.js";import"./atlas_C8ykrCiAzITyq4ruXfKyg.js";import"./atlas_C2xUkmgG06MuKr4w07SbG.js";import"./atlas_DQrR5ctqeBlMvAnkpcJ3X.js";import"./atlas_BoXOdkgAKhVHQJiALu9rF.js";import"./atlas_qb-1r_R3caM5mPfGaf2Rh.js";import"./atlas_BCsVZ7wab0-olf8yw4pX9.js";import"./atlas_DbJYOiCroQ2VkDmDQ_fcP.js";import"./atlas_BTQdOeq3M2jF6mnM2ye_h.js";import"./atlas_B6cOxK1uXF_kRZ-THv-4m.js";import"./atlas_DpmY_YPo_wU0wdo7fOe9u.js";import"./atlas_DXaxYlG2vplsutHz8IC7A.js";import"./atlas_vfnLYY9OxNiRrcaEDklGk.js";import"./atlas_D4yQrit3qgZjHgPDw4i8o.js";import"./atlas_DJbw34qPG7dJ89663B1Zt.js";import"./atlas_QHr9Leq2IshRgis-ZHroK.js";import"./atlas_DnaLGJ954EOeDtbKHVyqk.js";import"./atlas_Ddl-3Pyb4NhSKcZ_QU3d6.js";import"./atlas_CPQnWwOf4six85153COyV.js";import"./atlas_DIajYqgJJlFIdWNB9l9vK.js";import"./atlas_DqkZSA4SKHSRE9_1MZZpu.js";import"./atlas_7nMzc3Dql9nxsSiWM62af.js";import"./atlas_CkL02Wqzuo1RtTjRZ4BLy.js";const Tt=({coordinates:a,galaxyName:_})=>{const F=w.useRef(null),W=w.useRef(null),G=w.useRef(null),k=w.useRef(null);return w.useEffect(()=>{if(!F.current)return;const B=F.current,I=B.clientWidth,ge=B.clientHeight,ne=new Ze;ne.background=new De(657930),W.current=ne;const Y=new Ke(45,I/ge,.1,1e3);Y.position.set(20,15,20),Y.lookAt(0,0,0);const $=new Oe({antialias:!0,alpha:!0});$.setSize(I,ge),$.setClearColor(0,.2),G.current=$,B.appendChild($.domElement);const D=0,O=1e7,J=5e6,[Q,H,ae]=a,j=((Q-D)/(O-D)-.5)*16,te=((H-D)/(O-D)-.5)*16,de=((ae-D)/(O-D)-.5)*16,N=new Ge;ne.add(N);const y=new at(16,16,16),he=new ct(y),pe=new qe({color:16777215,opacity:.4,transparent:!0,linewidth:2}),b=new _e(he,pe);N.add(b);const x=new Be(16,16,16777215,16777215);x.material.opacity=.1,x.material.transparent=!0,x.position.y=-8,N.add(x);const K=new Be(16,16,16777215,16777215);K.material.opacity=.05,K.material.transparent=!0,K.rotation.z=Math.PI/2,K.position.x=-8,N.add(K);const z=new Be(16,16,16777215,16777215);z.material.opacity=.05,z.material.transparent=!0,z.rotation.x=Math.PI/2,z.position.z=-8,N.add(z);const oe=new Ne(.5,32,32),fe=new Pe({color:16777215,transparent:!0,opacity:.9}),ce=new q(oe,fe);ce.position.set(0,0,0),N.add(ce);const xe=new q(new Ne(.8,32,32),new Pe({color:16777215,transparent:!0,opacity:.2}));ce.add(xe);const S=new Ne(.4,32,32),g=new Pe({color:6605055,transparent:!0,opacity:1}),se=new q(S,g);se.position.set(j,te,de),N.add(se);const c=new q(new Ne(.7,32,32),new Pe({color:6605055,transparent:!0,opacity:.3}));if(se.add(c),Math.sqrt(Math.pow(Q-J,2)+Math.pow(H-J,2)+Math.pow(ae-J,2))<2e6){const n=[new He(0,0,0),new He(j,te,de)],u=new Fe().setFromPoints(n),m=new lt({color:16762980,dashSize:.6,gapSize:.6,opacity:.4,transparent:!0,linewidth:2}),M=new dt(u,m);M.computeLineDistances(),N.add(M)}const t=new Je(4210752,.6);ne.add(t);const l=new mt(16777215,.8);l.position.set(10,10,10),ne.add(l);const d=(n,u)=>{const m=document.createElement("canvas"),M=m.getContext("2d");if(!M)return null;m.width=64,m.height=64,M.fillStyle=`#${u.toString(16).padStart(6,"0")}`,M.font="bold 48px Arial",M.textAlign="center",M.textBaseline="middle",M.fillText(n,32,32);const h=new ut(m),ue=new ht({map:h,transparent:!0,opacity:.8}),le=new pt(ue);return le.scale.set(1.6,1.6,1),le},p=d("X",16739179);p&&(p.position.set(8.4,-7.6,-7.6),N.add(p));const ie=d("Y",7077739);ie&&(ie.position.set(-7.6,8.4,-7.6),N.add(ie));const ee=d("Z",7039999);ee&&(ee.position.set(-7.6,-7.6,8.4),N.add(ee));let A=!1,re=0,me=0,i=!0,o=0;const s=n=>{A=!0,i=!1,re=n.clientX,me=n.clientY},v=n=>{if(!A)return;const u=n.clientX-re,m=n.clientY-me;N.rotation.y+=u*.01,N.rotation.x+=m*.01,re=n.clientX,me=n.clientY},T=()=>{A=!1,setTimeout(()=>{A||(i=!0)},3e3)},f=n=>{n.preventDefault();const u=.1,m=Y.position.distanceTo(new He(0,0,0));n.deltaY>0&&m<50?Y.position.multiplyScalar(1+u):n.deltaY<0&&m>10&&Y.position.multiplyScalar(1-u)},P=n=>{n.key==="Escape"&&document.dispatchEvent(new CustomEvent("universe-close-fullscreen"))},U=n=>{if(n.preventDefault(),n.touches.length===1)A=!0,i=!1,re=n.touches[0].clientX,me=n.touches[0].clientY;else if(n.touches.length===2){const u=n.touches[0].clientX-n.touches[1].clientX,m=n.touches[0].clientY-n.touches[1].clientY;o=Math.sqrt(u*u+m*m)}},L=n=>{if(n.preventDefault(),n.touches.length===1&&A){const u=n.touches[0].clientX-re,m=n.touches[0].clientY-me;N.rotation.y+=u*.01,N.rotation.x+=m*.01,re=n.touches[0].clientX,me=n.touches[0].clientY}else if(n.touches.length===2){const u=n.touches[0].clientX-n.touches[1].clientX,m=n.touches[0].clientY-n.touches[1].clientY,M=Math.sqrt(u*u+m*m);if(o>0){const ue=M/o,le=Y.position.distanceTo(new He(0,0,0));ue>1&&le>10?Y.position.multiplyScalar(1-.01):ue<1&&le<50&&Y.position.multiplyScalar(1+.01)}o=M}},Z=n=>{n.preventDefault(),A=!1,o=0,setTimeout(()=>{A||(i=!0)},3e3)},R=$.domElement;R.style.cursor="grab",R.addEventListener("mousedown",n=>{R.style.cursor="grabbing",s(n)}),R.addEventListener("mousemove",v),R.addEventListener("mouseup",()=>{R.style.cursor="grab",T()}),R.addEventListener("mouseleave",()=>{R.style.cursor="grab",T()}),R.addEventListener("wheel",f),R.addEventListener("touchstart",U,{passive:!1}),R.addEventListener("touchmove",L,{passive:!1}),R.addEventListener("touchend",Z,{passive:!1}),document.addEventListener("keydown",P);const C=()=>{k.current=requestAnimationFrame(C),i&&(N.rotation.y+=.002,N.rotation.x+=.001);const n=Date.now()*.005;ce.scale.setScalar(1+Math.sin(n)*.1),se.rotation.y+=.01,$.render(ne,Y)};C();const V=()=>{const n=B.clientWidth,u=B.clientHeight;Y.aspect=n/u,Y.updateProjectionMatrix(),$.setSize(n,u)};return window.addEventListener("resize",V),()=>{window.removeEventListener("resize",V),document.removeEventListener("keydown",P),R.removeEventListener("mousedown",s),R.removeEventListener("mousemove",v),R.removeEventListener("mouseup",T),R.removeEventListener("mouseleave",T),R.removeEventListener("wheel",f),R.removeEventListener("touchstart",U),R.removeEventListener("touchmove",L),R.removeEventListener("touchend",Z),k.current&&cancelAnimationFrame(k.current),B&&$.domElement&&B.removeChild($.domElement),$.dispose(),y.dispose(),he.dispose(),pe.dispose(),oe.dispose(),fe.dispose(),S.dispose(),g.dispose()}},[a,_]),e.jsx("div",{ref:F,className:"w-full h-full"})},Bt=({coordinates:a,galaxyName:_})=>{const F=w.useRef(null),W=w.useRef(null),G=w.useRef(null),k=w.useRef(null),[B,I]=w.useState(!1),[ge,ne]=w.useState(!1),[Y,$]=w.useState(!1),D=()=>{ne(!0),setTimeout(()=>{I(!1),ne(!1)},300)};w.useEffect(()=>{const j=te=>{te.key==="Escape"&&B&&D()};return document.addEventListener("universe-close-fullscreen",D),document.addEventListener("keydown",j),()=>{document.removeEventListener("universe-close-fullscreen",D),document.removeEventListener("keydown",j)}},[B]),w.useEffect(()=>{if(B&&Y){const j=setTimeout(()=>{$(!1)},50);return()=>clearTimeout(j)}},[B,Y]),w.useEffect(()=>{if(!F.current)return;const j=F.current,te=j.clientWidth,de=te<640,N=new Ze;N.background=new De(657930),W.current=N;const y=new Ke(30,te/120,.1,1e3);y.position.set(12,8,12),y.lookAt(0,0,0);const he=new Oe({antialias:!0,alpha:!0});he.setSize(te,120),he.setClearColor(0,.2),G.current=he,j.appendChild(he.domElement);const pe=0,b=1e7,x=5e6,[K,z,oe]=a,fe=((K-pe)/(b-pe)-.5)*8,ce=((z-pe)/(b-pe)-.5)*8,xe=((oe-pe)/(b-pe)-.5)*8,S=new Ge;N.add(S);const g=new at(8,8,8),se=new ct(g),c=new qe({color:16777215,opacity:.4,transparent:!0}),r=new _e(se,c);S.add(r);const t=new Be(8,8,16777215,16777215);t.material.opacity=.1,t.material.transparent=!0,t.position.y=-4,S.add(t);const l=new Be(8,8,16777215,16777215);l.material.opacity=.05,l.material.transparent=!0,l.rotation.z=Math.PI/2,l.position.x=-4,S.add(l);const d=new Be(8,8,16777215,16777215);d.material.opacity=.05,d.material.transparent=!0,d.rotation.x=Math.PI/2,d.position.z=-4,S.add(d);const p=new Ne(.25,16,16),ie=new Pe({color:16777215,transparent:!0,opacity:.9}),ee=new q(p,ie);ee.position.set(0,0,0),S.add(ee);const A=new q(new Ne(.45,16,16),new Pe({color:16777215,transparent:!0,opacity:.2}));ee.add(A);const re=new Ne(.2,16,16),me=new Pe({color:6605055,transparent:!0,opacity:1}),i=new q(re,me);i.position.set(fe,ce,xe),S.add(i);const o=new q(new Ne(.35,16,16),new Pe({color:6605055,transparent:!0,opacity:.3}));if(i.add(o),Math.sqrt(Math.pow(K-x,2)+Math.pow(z-x,2)+Math.pow(oe-x,2))<2e6){const E=[new He(0,0,0),new He(fe,ce,xe)],X=new Fe().setFromPoints(E),be=new lt({color:16762980,dashSize:.3,gapSize:.3,opacity:.4,transparent:!0}),je=new dt(X,be);je.computeLineDistances(),S.add(je)}const v=new Je(4210752,.6);N.add(v);const T=new mt(16777215,.8);T.position.set(5,5,5),N.add(T);const f=(E,X)=>{const be=document.createElement("canvas"),je=be.getContext("2d");if(!je)return null;be.width=32,be.height=32,je.fillStyle=`#${X.toString(16).padStart(6,"0")}`,je.font="bold 24px Arial",je.textAlign="center",je.textBaseline="middle",je.fillText(E,16,16);const ye=new ut(be),ve=new ht({map:ye,transparent:!0,opacity:.8}),Me=new pt(ve);return Me.scale.set(.8,.8,1),Me},P=f("X",16739179);P&&(P.position.set(4.2,-3.8,-3.8),S.add(P));const U=f("Y",7077739);U&&(U.position.set(-3.8,4.2,-3.8),S.add(U));const L=f("Z",7039999);L&&(L.position.set(-3.8,-3.8,4.2),S.add(L));let Z=!1,R=0,C=0,V=!0;const n=E=>{Z=!0,V=!1,R=E.clientX,C=E.clientY},u=E=>{if(!Z)return;const X=E.clientX-R,be=E.clientY-C;S.rotation.y+=X*.01,S.rotation.x+=be*.01,R=E.clientX,C=E.clientY},m=()=>{Z=!1,setTimeout(()=>{Z||(V=!0)},3e3)},M=E=>{E.preventDefault();const X=.1,be=y.position.distanceTo(new He(0,0,0));E.deltaY>0&&be<25?y.position.multiplyScalar(1+X):E.deltaY<0&&be>5&&y.position.multiplyScalar(1-X)},h=he.domElement;h.style.cursor="grab",h.style.borderRadius="8px",h.addEventListener("mousedown",E=>{h.style.cursor="grabbing",n(E)}),h.addEventListener("mousemove",u),h.addEventListener("mouseup",()=>{h.style.cursor="grab",m()}),h.addEventListener("mouseleave",()=>{h.style.cursor="grab",m()}),h.addEventListener("wheel",M);const ue=()=>{k.current=requestAnimationFrame(ue),V&&(S.rotation.y+=.002,S.rotation.x+=.001);const E=Date.now()*.005;ee.scale.setScalar(1+Math.sin(E)*.1),i.rotation.y+=.01,he.render(N,y)};ue();const le=()=>{const E=j.clientWidth,X=E<640?150:160;y.aspect=E/X,y.updateProjectionMatrix(),he.setSize(E,X)};return window.addEventListener("resize",le),()=>{window.removeEventListener("resize",le),h.removeEventListener("mousedown",n),h.removeEventListener("mousemove",u),h.removeEventListener("mouseup",m),h.removeEventListener("mouseleave",m),h.removeEventListener("wheel",M),k.current&&cancelAnimationFrame(k.current),j&&he.domElement&&j.removeChild(he.domElement),he.dispose(),g.dispose(),se.dispose(),c.dispose(),p.dispose(),ie.dispose(),re.dispose(),me.dispose()}},[a,_]);const O=j=>j.replace(/_/g," "),J=j=>j>=1e6?`${(j/1e6).toFixed(1)}M`:j>=1e3?`${(j/1e3).toFixed(1)}K`:j.toString(),[Q,H,ae]=a;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Galaxy Location"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:F,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsx("button",{onClick:()=>{I(!0),$(!0)},className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-[10px]",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:O(_)})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:[J(Q),", ",J(H),", ",J(ae)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom • Drag: Rotate View"})]})]}),B&&rt.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${ge||Y?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${ge||Y?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:O(_)})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[O(_)," - Galaxy Location"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Galaxy"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[J(Q),", ",J(H),", ",J(ae)]})]})]}),e.jsx("button",{onClick:D,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(Tt,{coordinates:a,galaxyName:_})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},Vt=({galaxy:a})=>{const[_,F]=w.useState({isOnCooldown:!1,isSaved:!1,isCollecting:!1,timeUntilNext:0});w.useEffect(()=>{let G;const k=()=>{const ne=Qe.generateLocationId("galaxy",a.coordinates.join(","),void 0,void 0),Y=Qe.canCollectFromLocation(ne),$=Qe.getTimeUntilNextCollection(ne),D=a.coordinates,O=st.generateGalaxyUrl(D,st.getCurrentPage()),Q=Nt.getLocations().some(H=>H.stargateUrl===O);F(H=>({isOnCooldown:!Y&&$>0,isSaved:Q,isCollecting:H.isCollecting,timeUntilNext:$}))},B=()=>{F(ne=>({...ne,isCollecting:!0})),G=setTimeout(()=>{F(ne=>({...ne,isCollecting:!1}))},1e3)};k();const I=setInterval(k,1e3),ge=St.subscribe("mining_completed",B);return()=>{clearInterval(I),G&&clearTimeout(G),ge()}},[a.name,a.coordinates]);const W=G=>G.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex gap-2 z-10",children:[e.jsx(Pt,{locationType:"galaxy",locationId:a.name,coordinates:a.coordinates.join(","),className:"text-xs"}),e.jsx(Lt,{type:"galaxy",name:a.name,coordinates:a.coordinates.join(","),className:"text-xs"}),e.jsx("div",{className:"inline-flex items-center bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] font-medium px-1.5 py-0.5 rounded h-[21px] box-border",children:"VISITED"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Gt,{isOnCooldown:_.isOnCooldown,isSaved:_.isSaved,isCollecting:_.isCollecting}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Details"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300",children:a.galaxy_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Solar Systems"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:a.num_systems.toLocaleString()})]})]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-2",children:e.jsx(Bt,{coordinates:a.coordinates,galaxyName:a.name})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-gray-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Cosmic Objects"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-pink-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Black Holes"}),e.jsx("div",{className:"text-xs font-bold text-pink-300",children:a.black_holes.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Pulsars"}),e.jsx("div",{className:"text-xs font-bold text-cyan-300",children:a.pulsars.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Quasars"}),e.jsx("div",{className:"text-xs font-bold text-indigo-300",children:a.quasars.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("div",{className:"text-green-400 font-medium",children:"Visited"})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:W(a.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:a.coordinates.join(", ")})]})]})]})]})},qt=({galaxyType:a,numSystems:_,blackHoles:F,pulsars:W,quasars:G,seed:k=12345,onExpandClick:B,galaxyName:I})=>{const ge=w.useRef(null),ne=w.useRef(null),Y=w.useRef(null),$=w.useRef(null),D=w.useRef(null),O=w.useRef(null),J=w.useRef(null),Q=w.useRef(!1),[H,ae]=w.useState(!1),[j,te]=w.useState(!1),[de,N]=w.useState(!1),y=w.useRef(null);class he{seed;constructor(x){this.seed=x}random(){const x=Math.sin(this.seed++)*1e4;return x-Math.floor(x)}uniform(x,K){return x+this.random()*(K-x)}gauss(x,K){let z=0,oe=0;for(;z===0;)z=this.random();for(;oe===0;)oe=this.random();const fe=Math.sqrt(-2*Math.log(z))*Math.cos(2*Math.PI*oe);return x+K*fe}randint(x,K){return Math.floor(this.uniform(x,K+1))}}w.useEffect(()=>{const b=J.current;if(!b)return;const x=b.getContext("2d");if(!x)return;let K=[];const z=800;let oe,fe;const ce=800;let xe,S=.5;function g(){const t=b?.parentElement;if(!t||!b)return;const l=t.clientWidth,d=t.clientHeight;b.width=Math.min(l,ce),b.height=Math.min(d,ce),oe=b.width/2,fe=b.height/2}function se(){g(),K=[];for(let t=0;t<z;t++)K.push({x:Math.random()*(b?.width||800),y:Math.random()*(b?.height||800),z:Math.random()*(b?.width||800),o:Math.random()});c()}function c(){!b||!x||(x.clearRect(0,0,b.width,b.height),K.forEach(t=>{t.z-=S,t.z<=0&&(t.z=b.width,t.x=Math.random()*b.width,t.y=Math.random()*b.height,t.o=Math.random());const l=b.width/t.z,d=(t.x-oe)*l+oe,p=(t.y-fe)*l+fe,ie=2*l;x.beginPath(),x.fillStyle=`rgba(255, 255, 255, ${t.o})`,x.arc(d,p,ie,0,2*Math.PI),x.fill()}),!Q.current&&S<60&&(S+=1),Q.current&&S>2&&(S-=2),xe=requestAnimationFrame(c))}se();const r=()=>g();return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r),xe&&cancelAnimationFrame(xe)}},[]),w.useEffect(()=>{if(!ge.current)return;const b=ge.current,x=b.clientWidth,K=b.clientHeight,z=Math.min(x,K),oe=new Ze;oe.background=new De(17),ne.current=oe;const fe=new Ke(45,1,.1,1e4);fe.position.set(0,200,400),fe.lookAt(0,0,0),y.current=fe;const ce=new Oe({antialias:!0,alpha:!0});ce.setSize(z,z),ce.setClearColor(17,1),Y.current=ce,ce.domElement.className="",b.appendChild(ce.domElement);const xe=new wt(fe,ce.domElement);xe.enableDamping=!0,xe.dampingFactor=.05,xe.minDistance=50,xe.maxDistance=800,xe.autoRotate=!0,xe.autoRotateSpeed=.5,xe.enablePan=!0,xe.enableZoom=!0,xe.target.set(0,0,0),D.current=xe;const S=new Ge;O.current=S,oe.add(S);const g=new he(k),se=g.uniform(0,2*Math.PI),c=new Fe,r=[],t=[],l=[],d=200;let p=_;if(a==="Spiral"){p=Math.min(_,5e4);const i=4,o=2*Math.PI/i,s=.15,v=.5,T=.1;for(let f=0;f<p*T;f++){const P=g.uniform(0,2*Math.PI),U=g.gauss(d*.1,d*.05),L=g.gauss(0,5),Z=U*Math.cos(P),R=U*Math.sin(P);r.push(Z,L,R),t.push(1,1,1);const C=k+f*1337,V=new he(C),n=V.gauss(1,.3),u=V.random()<.05,m=V.random()<.3;let M=Math.max(.3,n);u&&(M*=3+V.uniform(0,2)),m&&(M*=.5+V.uniform(0,.3)),U<d*.2&&(M*=1.8+V.uniform(0,.7),t[t.length-3]=1.2,t[t.length-2]=1.1,t[t.length-1]=.9),l.push(Math.min(M*1.5,12))}for(let f=0;f<p;f++){const P=v*Math.sqrt(f/p)*2*Math.PI,U=f%i*o,L=d*Math.sqrt(f/p),Z=L*Math.cos(P+U+se)+g.uniform(-s*L,s*L),R=L*Math.sin(P+U+se)+g.uniform(-s*L,s*L),C=g.gauss(0,3);r.push(Z,C,R),t.push(1,1,.8);const V=k+f*1337,n=new he(V),u=n.gauss(.8,.25),m=n.random()<.03,M=n.random()<.4;let h=Math.max(.2,u);m&&(h*=2.5+n.uniform(0,1.5)),M&&(h*=.4+n.uniform(0,.2)),L>d*.7&&(h*=.8),l.push(Math.min(h*1.3,8))}}else if(a==="Elliptical"){p=Math.min(_,1e5);for(let i=0;i<p;i++){const o=g.uniform(0,2*Math.PI),s=g.uniform(-1,1),v=Math.sqrt(1-s*s),T=g.random(),f=Math.pow(T,.6),P=-Math.log(1-f*.98)*d*.35,U=P*v*Math.cos(o),L=P*s*.6,Z=P*v*Math.sin(o);r.push(U,L,Z),t.push(1,.9,.7);const R=k+i*1337,C=new he(R),V=C.gauss(.6,.2),n=C.random()<.08,u=C.random()<.25;let m=Math.max(.2,V);n&&(m*=2+C.uniform(0,1)),u&&(m*=.6+C.uniform(0,.2)),Math.sqrt(U*U+L*L+Z*Z)<d*.3&&(m*=1.5+C.uniform(0,.5)),l.push(Math.min(m*1.4,7))}}else if(a==="Dwarf"){p=Math.min(_/100,1e4);for(let i=0;i<p;i++){const o=g.uniform(0,2*Math.PI),s=g.uniform(0,Math.PI),v=g.gauss(d/3,d*.3),T=v*Math.sin(s)*Math.cos(o),f=v*Math.cos(s)*.5,P=v*Math.sin(s)*Math.sin(o);r.push(T,f,P),t.push(.8,.8,1);const U=k+i*1337,L=new he(U),Z=L.gauss(.7,.3),R=L.random()<.02,C=L.random()<.6;let V=Math.max(.3,Z);R&&(V*=2.5+L.uniform(0,1)),C&&(V*=.5+L.uniform(0,.3)),l.push(Math.min(V*1.2,5))}}else if(a==="Singularity Void"){p=1e4;for(let ye=0;ye<p;ye++){const ve=ye/p,Me=ve*30*Math.PI,Ce=d*(1-ve*.8)+g.uniform(-10,10),we=(ve-.5)*300+Math.sin(Me*.5)*20,Ee=Ce*Math.cos(Me)+Math.sin(ve*20)*10,Le=Ce*Math.sin(Me)+Math.cos(ve*20)*10;r.push(Ee,we,Le);const ke=(ve+Math.sin(Me*.1))%1,ze=new De;ze.setHSL(ke,1,.5+Math.sin(ve*10)*.3),t.push(ze.r,ze.g,ze.b),l.push(g.uniform(.3,2)*(1+Math.sin(ve*50)*.5))}const i=(ye,ve,Me=1)=>{const Ce=new Ne(ye,64,64),we=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,Ee=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;

          void main() {
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);

            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;

            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;

            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x +
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);

            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;

            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);

            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;

            gl_FragColor = vec4(color, ${ve});
          }
        `,Le=new Ae({uniforms:{time:{value:0},speed:{value:Me}},vertexShader:we,fragmentShader:Ee,transparent:!0,blending:Re,side:Ve,depthWrite:!1}),ke=new q(Ce,Le);return ke.isSingularityShader=!0,ke.shaderSpeed=Me,ke},o=i(250,.3,1);S.add(o);const s=i(180,.4,-.7);S.add(s);const v=i(120,.5,1.5);S.add(v);const T=i(300,.2,.5);T.scale.set(-1,1,1),S.add(T);const f=new Ne(350,32,32),P=new Ae({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);


            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;

            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;

          void main() {

            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;

            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;

            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:ft,depthWrite:!1}),U=new q(f,P);U.isSingularityShader=!0,U.shaderSpeed=.3,S.add(U);const L=new Fe,Z=[],R=[];for(let ye=0;ye<1e3;ye++){const ve=g.uniform(-d,d),Me=g.uniform(-d/2,d/2),Ce=g.uniform(-d,d),we=g.uniform(-50,50),Ee=g.uniform(-30,30),Le=g.uniform(-50,50);Z.push(ve,Me,Ce),Z.push(ve+we,Me+Ee,Ce+Le);const ke=g.random(),ze=new De;ze.setHSL(ke,1,.6),R.push(ze.r,ze.g,ze.b),R.push(ze.r*.5,ze.g*.5,ze.b*.5)}L.setAttribute("position",new Se(Z,3)),L.setAttribute("color",new Se(R,3));const C=new qe({vertexColors:!0,transparent:!0,opacity:.4,blending:Re}),V=new _e(L,C);V.isGlitchLines=!0,S.add(V);const n=new Ge,u=new Ne(20,32,32),m=new Pe({color:0,transparent:!0,opacity:.95}),M=new q(u,m);n.add(M);const h=new We(25,80,64),ue=new Ae({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;

          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);


            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;


            vec3 hotColor = vec3(1.0, 0.5, 0.0);
            vec3 coldColor = vec3(0.0, 0.3, 1.0);
            vec3 color = mix(coldColor, hotColor, intensity);


            color *= (0.7 + swirl * 0.3);


            float alpha = intensity * 0.8;

            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:Ve}),le=new q(h,ue);le.rotation.x=Math.PI/2,le.isAccretionDisk=!0,n.add(le);for(let ye=0;ye<8;ye++){const ve=30+ye*20,Me=new xt(ve,1+ye*.5,8,64),Ce=new Pe({color:new De().setHSL((.7+ye*.05)%1,1,.5),transparent:!0,opacity:.3-ye*.03,wireframe:!0}),we=new q(Me,Ce);we.rotation.x=g.uniform(0,Math.PI),we.rotation.y=g.uniform(0,Math.PI),we.isDistortionRing=!0,we.rotationSpeed=g.uniform(.001,.005)*(ye%2===0?1:-1),n.add(we)}S.add(n);const E=new Xe(5,100,8),X=new Ie({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Re}),be=new q(E,X);be.position.y=50,S.add(be);const je=new q(E,X);je.position.y=-50,je.rotation.z=Math.PI,S.add(je)}if(a!=="Singularity Void"){const i=[],o=new he(k+999);for(let C=0;C<F;C++){const V=o.uniform(-50,50),n=o.uniform(-20,20),u=o.uniform(-50,50);i.push({x:V,y:n,z:u})}const s=[],v=[],T=[],f=[],P=[],U=.4,L=U*25;for(let C=0;C<r.length;C+=3){const V=r[C],n=r[C+1],u=r[C+2];let m=1/0,M=null;for(const h of i){const ue=Math.sqrt(Math.pow(V-h.x,2)+Math.pow(n-h.y,2)+Math.pow(u-h.z,2));ue<m&&(m=ue,M=h)}if(!(m<U))if(m<L&&M){const h=1-(m-U)/(L-U);M.x-V,M.y-n,M.z-u;const ue=Math.atan2(u-M.z,V-M.x),le=h*.8,E=8;for(let we=0;we<E-1;we++){const Ee=we/(E-1),Le=(we+1)/(E-1),ke=m*(1-Ee*le*.7),ze=ue+Ee*le*1.5,$e=M.x+ke*Math.cos(ze),Ue=n+(M.y-n)*Ee*.3,bt=M.z+ke*Math.sin(ze),et=m*(1-Le*le*.7),tt=ue+Le*le*1.5,yt=M.x+et*Math.cos(tt),Mt=n+(M.y-n)*Le*.3,jt=M.z+et*Math.sin(tt);f.push($e,Ue,bt),f.push(yt,Mt,jt)}const X=h*1.5,be=t[C],je=t[C+1],ye=t[C+2],ve=Math.min(be+X,2),Me=Math.max(je*(1-X*.6),.1),Ce=Math.max(ye*(1-X*.8),.1);for(let we=0;we<E-1;we++){const Ee=we/(E-1),Le=(we+1)/(E-1),ke=1-Ee*h*.6,ze=1-Le*h*.6,$e=X*(.5+Ee*.5),Ue=X*(.5+Le*.5);P.push(Math.min(ve+$e*.3,2)*ke,Math.max(Me*(1-$e*.2),.1)*ke,Math.max(Ce*(1-$e*.4),.1)*ke),P.push(Math.min(ve+Ue*.3,2)*ze,Math.max(Me*(1-Ue*.2),.1)*ze,Math.max(Ce*(1-Ue*.4),.1)*ze)}s.push(V,n,u),v.push(ve,Me,Ce),T.push(Math.max(l[C/3]*(1-h*.5),.3))}else s.push(V,n,u),v.push(t[C],t[C+1],t[C+2]),T.push(l[C/3])}c.setAttribute("position",new Se(s,3)),c.setAttribute("color",new Se(v,3)),c.setAttribute("size",new Se(T,1));const Z=new Ae({uniforms:{},vertexShader:`
          attribute float size;
          varying vec3 vColor;
          void main() {
            vColor = color;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * (400.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
          }
        `,fragmentShader:`
          varying vec3 vColor;
          void main() {

            vec2 center = gl_PointCoord - vec2(0.5);
            float distanceFromCenter = length(center);

            if (distanceFromCenter > 0.5) {
              discard;
            }


            float alpha = 1.0 - (distanceFromCenter / 0.5);
            alpha = pow(alpha, 2.0);

            gl_FragColor = vec4(vColor, alpha * 0.8);
          }
        `,transparent:!0,blending:Re,vertexColors:!0,depthWrite:!1}),R=new Ye(c,Z);if(S.add(R),f.length>0){const C=new Fe;C.setAttribute("position",new Se(f,3)),C.setAttribute("color",new Se(P,3));const V=new qe({vertexColors:!0,transparent:!0,opacity:.8,linewidth:2,blending:Re}),n=new _e(C,V);S.add(n)}}else{c.setAttribute("position",new Se(r,3)),c.setAttribute("color",new Se(t,3)),c.setAttribute("size",new Se(l,1));const i=new gt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Re,sizeAttenuation:!0}),o=new Ye(c,i);S.add(o)}const ie=new he(k+999);for(let i=0;i<F;i++){const o=new Ge,s=ie.uniform(-50,50),v=ie.uniform(-20,20),T=ie.uniform(-50,50),f=new Ne(1.5,16,16),P=new Pe({color:0,transparent:!0,opacity:.9}),U=new q(f,P);o.add(U),[{innerRadius:2,outerRadius:2.3,color:16777215,opacity:.8,emissive:16777164},{innerRadius:2.3,outerRadius:2.7,color:16755200,opacity:.7,emissive:16746496},{innerRadius:2.7,outerRadius:3.2,color:16729088,opacity:.6,emissive:16720384},{innerRadius:3.2,outerRadius:4,color:11141120,opacity:.5,emissive:6684672},{innerRadius:4,outerRadius:5,color:4456448,opacity:.3,emissive:2228224}].forEach((Z,R)=>{const C=new We(Z.innerRadius,Z.outerRadius,32),V=new Ie({color:Z.color,transparent:!0,opacity:Z.opacity,emissive:Z.emissive,emissiveIntensity:.3,side:Ve}),n=new q(C,V);n.rotation.x=Math.PI/2,n.rotation.z=g.uniform(0,Math.PI*2),n.isAccretionRing=!0,n.rotationSpeed=.002+R*5e-4,o.add(n)}),o.position.set(s,v,T),S.add(o)}for(let i=0;i<W;i++){const o=new Ne(1.5,8,8),s=new Ie({color:16776960,emissive:16776960,emissiveIntensity:1}),v=new q(o,s);v.position.set(g.uniform(-d,d),g.uniform(-d/4,d/4),g.uniform(-d,d)),v.isPulsar=!0,v.pulseSpeed=g.uniform(1,3),S.add(v)}for(let i=0;i<G;i++){const o=new Ge,s=new Ne(2,16,16),v=new Ie({color:16777215,emissive:16777215,emissiveIntensity:2}),T=new q(s,v);o.add(T);const f=new Xe(1,20,8),P=new Ie({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),U=new q(f,P);U.position.y=10,o.add(U);const L=new q(f,P);L.position.y=-10,L.rotation.z=Math.PI,o.add(L),o.position.set(g.uniform(-d,d),g.uniform(-d/4,d/4),g.uniform(-d,d)),S.add(o)}const ee=new Je(4210752,.5);oe.add(ee);const A=new vt(16777215,.5,1e3);A.position.set(0,100,0),oe.add(A);const re=()=>{$.current=requestAnimationFrame(re);const i=performance.now()/1e3;O.current&&(O.current.rotation.y+=.001),S.children.forEach(o=>{if(o.isPulsar){const s=o.pulseSpeed||1;o.scale.setScalar(1+Math.sin(Date.now()*.001*s)*.3)}if(o.isSingularityShader&&o instanceof q){const s=o.material;s.uniforms&&s.uniforms.time&&(s.uniforms.time.value=i);const v=o.shaderSpeed||1;o.rotation.y+=.001*v,o.rotation.x+=5e-4*v}if(o.isAccretionDisk&&o instanceof q){const s=o.material;s.uniforms&&s.uniforms.time&&(s.uniforms.time.value=i),o.rotation.z+=.002}if(o.isDistortionRing){const s=o.rotationSpeed||.001;o.rotation.x+=s,o.rotation.y+=s*.7,o.scale.setScalar(1+Math.sin(i*2)*.1)}if(o.isGlitchLines&&o instanceof _e){const s=o.material;s.opacity=.2+Math.sin(i*3)*.2,o.rotation.z+=5e-4}o instanceof Ge&&o.children.forEach(s=>{if(s.isAccretionDisk&&s instanceof q){const v=s.material;v.uniforms&&v.uniforms.time&&(v.uniforms.time.value=i),s.rotation.z+=.002}if(s.isAccretionRing&&s instanceof q){const v=s.rotationSpeed||.002;s.rotation.z+=v}if(s.isDistortionRing){const v=s.rotationSpeed||.001;s.rotation.x+=v,s.rotation.y+=v*.7,s.scale.setScalar(1+Math.sin(i*2)*.1)}})}),D.current&&D.current.update(),ce.render(oe,fe)};re(),setTimeout(()=>{ae(!0),te(!0),Q.current=!0},800);const me=()=>{if(!ge.current||!ce)return;const i=ge.current,o=Math.min(i.clientWidth,i.clientHeight);ce.setSize(o,o),fe.aspect=1,fe.updateProjectionMatrix()};return window.addEventListener("resize",me),()=>{window.removeEventListener("resize",me),D.current&&D.current.dispose(),$.current&&cancelAnimationFrame($.current),b&&ce.domElement&&b.removeChild(ce.domElement),ce.dispose()}},[a,_,F,W,G,k]);const pe=()=>{if(!Y.current||!ne.current||!y.current||de)return;N(!0),D.current&&(D.current.enabled=!1);const b=Y.current,x=ne.current,K=y.current,z=b.domElement.width,oe=b.domElement.height,fe=3840/z,ce=[];x.traverse(g=>{if(g.isPoints&&g.material){const se=g.material;if(se.size!==void 0&&(ce.push({material:se,originalSize:se.size}),se.size=se.size*fe*1),se.uniforms&&se.uniforms.scale&&(ce.push({material:se,originalScale:se.uniforms.scale.value}),se.uniforms.scale.value=se.uniforms.scale.value*fe*1),g.geometry&&g.geometry.attributes.size){const c=g.geometry.attributes.size,r=c.array.slice();ce.push({geometry:g.geometry,originalSizeArray:r});for(let t=0;t<c.array.length;t++)c.array[t]*=fe*1;c.needsUpdate=!0}}});const xe=3840,S=3840;b.setSize(xe,S),K.aspect=1,K.updateProjectionMatrix(),b.render(x,K),b.domElement.toBlob(g=>{if(g){const se=document.createElement("canvas"),c=se.getContext("2d");if(se.width=xe,se.height=S,c){const r=new Image;r.onload=async()=>{c.drawImage(r,0,0),_t(c,{imageWidth:xe,imageHeight:S}),await Ft(c,xe,S,window.location.href),se.toBlob(l=>{if(l){const d=URL.createObjectURL(l),p=document.createElement("a");p.href=d,p.download=`galaxy_${I||a}_${Date.now()}.png`,p.click(),URL.revokeObjectURL(d)}},"image/png",1)};const t=URL.createObjectURL(g);r.src=t}}ce.forEach(({material:se,originalSize:c,originalScale:r,geometry:t,originalSizeArray:l})=>{if(c!==void 0&&(se.size=c),r!==void 0&&(se.uniforms.scale.value=r),t&&l){const d=t.attributes.size;for(let p=0;p<l.length;p++)d.array[p]=l[p];d.needsUpdate=!0}}),b.setSize(z,oe),K.aspect=1,K.updateProjectionMatrix(),D.current&&(D.current.enabled=!0),N(!1)},"image/png",1)};return e.jsxs("div",{className:"relative w-full h-full bg-black rounded",children:[e.jsx("canvas",{ref:J,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${j?"opacity-0":"opacity-100"}`,style:{filter:j?"blur(50px)":"none"}}),e.jsxs("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${H?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:[e.jsx("div",{ref:ge,className:"w-full h-full border border-white/20 rounded bg-black/20"}),e.jsx(At,{isVisible:de}),H&&I&&e.jsx("div",{className:"absolute bottom-0 left-0 p-2 text-white bg-black bg-opacity-50 max-w-xs rounded-tr-lg",children:e.jsx("h3",{className:"text-xs font-bold",children:I})}),H&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 z-10",children:[e.jsx("button",{onClick:pe,disabled:de,className:`p-2 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg ${de?"bg-black/40 cursor-not-allowed opacity-50":"bg-black/60 hover:bg-black/80"}`,title:de?"Generating image...":"Download 4K screenshot",children:de?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(It,{className:"w-4 h-4 text-white"})}),B&&e.jsx("button",{onClick:B,disabled:de,className:`p-2 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg ${de?"bg-black/40 cursor-not-allowed opacity-50":"bg-black/60 hover:bg-black/80"}`,title:de?"Please wait...":"Expand to fullscreen",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]})]})},$t=({galaxyType:a,numSystems:_,blackHoles:F,pulsars:W,quasars:G,seed:k=12345,galaxyName:B})=>{const I=w.useRef(null),ge=w.useRef(null),ne=w.useRef(null),Y=w.useRef(null),$=w.useRef(null),D=w.useRef(null);class O{seed;constructor(Q){this.seed=Q}random(){const Q=Math.sin(this.seed++)*1e4;return Q-Math.floor(Q)}uniform(Q,H){return Q+this.random()*(H-Q)}gauss(Q,H){let ae=0,j=0;for(;ae===0;)ae=this.random();for(;j===0;)j=this.random();const te=Math.sqrt(-2*Math.log(ae))*Math.cos(2*Math.PI*j);return Q+H*te}randint(Q,H){return Math.floor(this.uniform(Q,H+1))}}return w.useEffect(()=>{if(!I.current)return;const J=I.current,Q=J.clientWidth,H=J.clientHeight,ae=new Ze;ae.background=new De(17),ge.current=ae;const j=new Ke(45,Q/H,.1,1e4);j.position.set(0,200,400),j.lookAt(0,0,0);const te=new Oe({antialias:!0,alpha:!0});te.setSize(Q,H),te.setClearColor(17,1),ne.current=te,J.appendChild(te.domElement);const de=new wt(j,te.domElement);de.enableDamping=!0,de.dampingFactor=.05,de.minDistance=50,de.maxDistance=1200,de.autoRotate=!0,de.autoRotateSpeed=.5,de.enablePan=!0,de.enableZoom=!0,de.target.set(0,0,0),$.current=de;const N=new Ge;D.current=N,ae.add(N);const y=new O(k),he=y.uniform(0,2*Math.PI),pe=new Fe,b=[],x=[],K=[],z=200;let oe=_;if(a==="Spiral"){oe=Math.min(_,5e4);const c=4,r=2*Math.PI/c,t=.15,l=.5,d=.1;for(let p=0;p<oe*d;p++){const ie=y.uniform(0,2*Math.PI),ee=y.gauss(z*.1,z*.05),A=y.gauss(0,5),re=ee*Math.cos(ie),me=ee*Math.sin(ie);b.push(re,A,me),x.push(1,1,1);const i=k+p*1337,o=new O(i),s=o.gauss(1,.3),v=o.random()<.05,T=o.random()<.3;let f=Math.max(.3,s);v&&(f*=3+o.uniform(0,2)),T&&(f*=.5+o.uniform(0,.3)),ee<z*.2&&(f*=1.8+o.uniform(0,.7),x[x.length-3]=1.2,x[x.length-2]=1.1,x[x.length-1]=.9),K.push(Math.min(f*1.5,12))}for(let p=0;p<oe;p++){const ie=l*Math.sqrt(p/oe)*2*Math.PI,ee=p%c*r,A=z*Math.sqrt(p/oe),re=A*Math.cos(ie+ee+he)+y.uniform(-t*A,t*A),me=A*Math.sin(ie+ee+he)+y.uniform(-t*A,t*A),i=y.gauss(0,3);b.push(re,i,me),x.push(1,1,.8);const o=k+p*1337,s=new O(o),v=s.gauss(.8,.25),T=s.random()<.03,f=s.random()<.4;let P=Math.max(.2,v);T&&(P*=2.5+s.uniform(0,1.5)),f&&(P*=.4+s.uniform(0,.2)),A>z*.7&&(P*=.8),K.push(Math.min(P*1.3,8))}}else if(a==="Elliptical"){oe=Math.min(_,1e5);for(let c=0;c<oe;c++){const r=y.uniform(0,2*Math.PI),t=y.uniform(-1,1),l=Math.sqrt(1-t*t),d=y.random(),p=Math.pow(d,.6),ie=-Math.log(1-p*.98)*z*.35,ee=ie*l*Math.cos(r),A=ie*t*.6,re=ie*l*Math.sin(r);b.push(ee,A,re),x.push(1,.9,.7);const me=k+c*1337,i=new O(me),o=i.gauss(.6,.2),s=i.random()<.08,v=i.random()<.25;let T=Math.max(.2,o);s&&(T*=2+i.uniform(0,1)),v&&(T*=.6+i.uniform(0,.2)),Math.sqrt(ee*ee+A*A+re*re)<z*.3&&(T*=1.5+i.uniform(0,.5)),K.push(Math.min(T*1.4,7))}}else if(a==="Dwarf"){oe=Math.min(_/100,1e4);for(let c=0;c<oe;c++){const r=y.uniform(0,2*Math.PI),t=y.uniform(0,Math.PI),l=y.gauss(z/3,z*.3),d=l*Math.sin(t)*Math.cos(r),p=l*Math.cos(t)*.5,ie=l*Math.sin(t)*Math.sin(r);b.push(d,p,ie),x.push(.8,.8,1);const ee=k+c*1337,A=new O(ee),re=A.gauss(.7,.3),me=A.random()<.02,i=A.random()<.6;let o=Math.max(.3,re);me&&(o*=2.5+A.uniform(0,1)),i&&(o*=.5+A.uniform(0,.3)),K.push(Math.min(o*1.2,5))}}else if(a==="Singularity Void"){oe=1e4;for(let n=0;n<oe;n++){const u=n/oe,m=u*30*Math.PI,M=z*(1-u*.8)+y.uniform(-10,10),h=(u-.5)*300+Math.sin(m*.5)*20,ue=M*Math.cos(m)+Math.sin(u*20)*10,le=M*Math.sin(m)+Math.cos(u*20)*10;b.push(ue,h,le);const E=(u+Math.sin(m*.1))%1,X=new De;X.setHSL(E,1,.5+Math.sin(u*10)*.3),x.push(X.r,X.g,X.b),K.push(y.uniform(.3,2)*(1+Math.sin(u*50)*.5))}const c=(n,u,m=1)=>{const M=new Ne(n,64,64),h=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,ue=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;
          
          void main() {
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);
            
            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;
            
            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;
            
            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x + 
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);
            
            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;
            
            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);
            
            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;
            
            gl_FragColor = vec4(color, ${u});
          }
        `,le=new Ae({uniforms:{time:{value:0},speed:{value:m}},vertexShader:h,fragmentShader:ue,transparent:!0,blending:Re,side:Ve,depthWrite:!1}),E=new q(M,le);return E.isSingularityShader=!0,E.shaderSpeed=m,E},r=c(250,.3,1);N.add(r);const t=c(180,.4,-.7);N.add(t);const l=c(120,.5,1.5);N.add(l);const d=c(300,.2,.5);d.scale.set(-1,1,1),N.add(d);const p=new Ne(350,32,32),ie=new Ae({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            
            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          
          void main() {
            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;
            
            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:ft,depthWrite:!1}),ee=new q(p,ie);ee.isSingularityShader=!0,ee.shaderSpeed=.3,N.add(ee);const A=new Fe,re=[],me=[];for(let n=0;n<1e3;n++){const u=y.uniform(-z,z),m=y.uniform(-z/2,z/2),M=y.uniform(-z,z),h=y.uniform(-50,50),ue=y.uniform(-30,30),le=y.uniform(-50,50);re.push(u,m,M),re.push(u+h,m+ue,M+le);const E=y.random(),X=new De;X.setHSL(E,1,.6),me.push(X.r,X.g,X.b),me.push(X.r*.5,X.g*.5,X.b*.5)}A.setAttribute("position",new Se(re,3)),A.setAttribute("color",new Se(me,3));const i=new qe({vertexColors:!0,transparent:!0,opacity:.4,blending:Re}),o=new _e(A,i);o.isGlitchLines=!0,N.add(o);const s=new Ge,v=new Ne(20,32,32),T=new Pe({color:0,transparent:!0,opacity:.95}),f=new q(v,T);s.add(f);const P=new We(25,80,64),U=new Ae({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;
          
          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);
            
            // Swirling pattern
            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;
            
            // Colors from hot (inner) to cold (outer)
            vec3 hotColor = vec3(1.0, 0.5, 0.0); // Orange
            vec3 coldColor = vec3(0.0, 0.3, 1.0); // Blue
            vec3 color = mix(coldColor, hotColor, intensity);
            
            // Add swirl variation
            color *= (0.7 + swirl * 0.3);
            
            // Fade out at edges
            float alpha = intensity * 0.8;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:Ve}),L=new q(P,U);L.rotation.x=Math.PI/2,L.isAccretionDisk=!0,s.add(L);for(let n=0;n<8;n++){const u=30+n*20,m=new xt(u,1+n*.5,8,64),M=new Pe({color:new De().setHSL((.7+n*.05)%1,1,.5),transparent:!0,opacity:.3-n*.03,wireframe:!0}),h=new q(m,M);h.rotation.x=y.uniform(0,Math.PI),h.rotation.y=y.uniform(0,Math.PI),h.isDistortionRing=!0,h.rotationSpeed=y.uniform(.001,.005)*(n%2===0?1:-1),s.add(h)}N.add(s);const Z=new Xe(5,100,8),R=new Ie({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Re}),C=new q(Z,R);C.position.y=50,N.add(C);const V=new q(Z,R);V.position.y=-50,V.rotation.z=Math.PI,N.add(V)}if(a!=="Singularity Void"){const c=[],r=new O(k+999);for(let i=0;i<F;i++){const o=r.uniform(-50,50),s=r.uniform(-20,20),v=r.uniform(-50,50);c.push({x:o,y:s,z:v})}const t=[],l=[],d=[],p=[],ie=[],ee=.4,A=ee*25;for(let i=0;i<b.length;i+=3){const o=b[i],s=b[i+1],v=b[i+2];let T=1/0,f=null;for(const P of c){const U=Math.sqrt(Math.pow(o-P.x,2)+Math.pow(s-P.y,2)+Math.pow(v-P.z,2));U<T&&(T=U,f=P)}if(!(T<ee))if(T<A&&f){const P=1-(T-ee)/(A-ee);f.x-o,f.y-s,f.z-v;const U=Math.atan2(v-f.z,o-f.x),L=P*.8,Z=8;for(let h=0;h<Z-1;h++){const ue=h/(Z-1),le=(h+1)/(Z-1),E=T*(1-ue*L*.7),X=U+ue*L*1.5,be=f.x+E*Math.cos(X),je=s+(f.y-s)*ue*.3,ye=f.z+E*Math.sin(X),ve=T*(1-le*L*.7),Me=U+le*L*1.5,Ce=f.x+ve*Math.cos(Me),we=s+(f.y-s)*le*.3,Ee=f.z+ve*Math.sin(Me);p.push(be,je,ye),p.push(Ce,we,Ee)}const R=P*1.5,C=x[i],V=x[i+1],n=x[i+2],u=Math.min(C+R,2),m=Math.max(V*(1-R*.6),.1),M=Math.max(n*(1-R*.8),.1);for(let h=0;h<Z-1;h++){const ue=h/(Z-1),le=(h+1)/(Z-1),E=1-ue*P*.6,X=1-le*P*.6,be=R*(.5+ue*.5),je=R*(.5+le*.5);ie.push(Math.min(u+be*.3,2)*E,Math.max(m*(1-be*.2),.1)*E,Math.max(M*(1-be*.4),.1)*E),ie.push(Math.min(u+je*.3,2)*X,Math.max(m*(1-je*.2),.1)*X,Math.max(M*(1-je*.4),.1)*X)}t.push(o,s,v),l.push(u,m,M),d.push(Math.max(K[i/3]*(1-P*.5),.3))}else t.push(o,s,v),l.push(x[i],x[i+1],x[i+2]),d.push(K[i/3])}pe.setAttribute("position",new Se(t,3)),pe.setAttribute("color",new Se(l,3)),pe.setAttribute("size",new Se(d,1));const re=new Ae({uniforms:{},vertexShader:`
          attribute float size;
          varying vec3 vColor;
          void main() {
            vColor = color;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * (400.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
          }
        `,fragmentShader:`
          varying vec3 vColor;
          void main() {
            vec2 center = gl_PointCoord - vec2(0.5);
            float distanceFromCenter = length(center);
            
            if (distanceFromCenter > 0.5) {
              discard;
            }
            
            float alpha = 1.0 - (distanceFromCenter / 0.5);
            alpha = pow(alpha, 2.0);
            
            gl_FragColor = vec4(vColor, alpha * 0.8);
          }
        `,transparent:!0,blending:Re,vertexColors:!0,depthWrite:!1}),me=new Ye(pe,re);if(N.add(me),p.length>0){const i=new Fe;i.setAttribute("position",new Se(p,3)),i.setAttribute("color",new Se(ie,3));const o=new qe({vertexColors:!0,transparent:!0,opacity:.8,linewidth:2,blending:Re}),s=new _e(i,o);N.add(s)}}else{pe.setAttribute("position",new Se(b,3)),pe.setAttribute("color",new Se(x,3)),pe.setAttribute("size",new Se(K,1));const c=new gt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Re,sizeAttenuation:!0}),r=new Ye(pe,c);N.add(r)}const fe=new O(k+999);for(let c=0;c<F;c++){const r=new Ge,t=fe.uniform(-50,50),l=fe.uniform(-20,20),d=fe.uniform(-50,50),p=new Ne(1.5,16,16),ie=new Pe({color:0,transparent:!0,opacity:.9}),ee=new q(p,ie);r.add(ee),[{innerRadius:2,outerRadius:2.3,color:16777215,opacity:.8,emissive:16777164},{innerRadius:2.3,outerRadius:2.7,color:16755200,opacity:.7,emissive:16746496},{innerRadius:2.7,outerRadius:3.2,color:16729088,opacity:.6,emissive:16720384},{innerRadius:3.2,outerRadius:4,color:11141120,opacity:.5,emissive:6684672},{innerRadius:4,outerRadius:5,color:4456448,opacity:.3,emissive:2228224}].forEach((re,me)=>{const i=new We(re.innerRadius,re.outerRadius,32),o=new Ie({color:re.color,transparent:!0,opacity:re.opacity,emissive:re.emissive,emissiveIntensity:.3,side:Ve}),s=new q(i,o);s.rotation.x=Math.PI/2,s.rotation.z=y.uniform(0,Math.PI*2),s.isAccretionRing=!0,s.rotationSpeed=.002+me*5e-4,r.add(s)}),r.position.set(t,l,d),N.add(r)}for(let c=0;c<W;c++){const r=new Ne(1.5,8,8),t=new Ie({color:16776960,emissive:16776960,emissiveIntensity:1}),l=new q(r,t);l.position.set(y.uniform(-z,z),y.uniform(-z/4,z/4),y.uniform(-z,z)),l.isPulsar=!0,l.pulseSpeed=y.uniform(1,3),N.add(l)}for(let c=0;c<G;c++){const r=new Ge,t=new Ne(2,16,16),l=new Ie({color:16777215,emissive:16777215,emissiveIntensity:2}),d=new q(t,l);r.add(d);const p=new Xe(1,20,8),ie=new Ie({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),ee=new q(p,ie);ee.position.y=10,r.add(ee);const A=new q(p,ie);A.position.y=-10,A.rotation.z=Math.PI,r.add(A),r.position.set(y.uniform(-z,z),y.uniform(-z/4,z/4),y.uniform(-z,z)),N.add(r)}const ce=new Je(4210752,.5);ae.add(ce);const xe=new vt(16777215,.5,1e3);xe.position.set(0,100,0),ae.add(xe);const S=c=>{c.key==="Escape"&&document.dispatchEvent(new CustomEvent("galaxy-close-fullscreen"))};document.addEventListener("keydown",S);const g=()=>{Y.current=requestAnimationFrame(g);const c=performance.now()/1e3;D.current&&(D.current.rotation.y+=.001),N.children.forEach(r=>{if(r.isPulsar){const t=r.pulseSpeed||1;r.scale.setScalar(1+Math.sin(Date.now()*.001*t)*.3)}if(r.isSingularityShader&&r instanceof q){const t=r.material;t.uniforms&&t.uniforms.time&&(t.uniforms.time.value=c);const l=r.shaderSpeed||1;r.rotation.y+=.001*l,r.rotation.x+=5e-4*l}if(r.isAccretionDisk&&r instanceof q){const t=r.material;t.uniforms&&t.uniforms.time&&(t.uniforms.time.value=c),r.rotation.z+=.002}if(r.isDistortionRing){const t=r.rotationSpeed||.001;r.rotation.x+=t,r.rotation.y+=t*.7,r.scale.setScalar(1+Math.sin(c*2)*.1)}if(r.isGlitchLines&&r instanceof _e){const t=r.material;t.opacity=.2+Math.sin(c*3)*.2,r.rotation.z+=5e-4}r instanceof Ge&&r.children.forEach(t=>{if(t.isAccretionDisk&&t instanceof q){const l=t.material;l.uniforms&&l.uniforms.time&&(l.uniforms.time.value=c),t.rotation.z+=.002}if(t.isAccretionRing&&t instanceof q){const l=t.rotationSpeed||.002;t.rotation.z+=l}if(t.isDistortionRing){const l=t.rotationSpeed||.001;t.rotation.x+=l,t.rotation.y+=l*.7,t.scale.setScalar(1+Math.sin(c*2)*.1)}})}),$.current&&$.current.update(),te.render(ae,j)};g();const se=()=>{if(!I.current||!te)return;const c=I.current,r=c.clientWidth,t=c.clientHeight;te.setSize(r,t),j.aspect=r/t,j.updateProjectionMatrix()};return window.addEventListener("resize",se),()=>{window.removeEventListener("resize",se),document.removeEventListener("keydown",S),$.current&&$.current.dispose(),Y.current&&cancelAnimationFrame(Y.current),J&&te.domElement&&J.removeChild(te.domElement),te.dispose()}},[a,_,F,W,G,k]),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{ref:I,className:"w-full h-full"}),B&&e.jsx("div",{className:"absolute bottom-0 left-0 p-2 text-white bg-black bg-opacity-50 max-w-xs rounded-tr-lg",children:e.jsx("h3",{className:"text-xs font-bold",children:B})})]})},Ut=({galaxyUrl:a,galaxyType:_="Spiral",numSystems:F=1e4,blackHoles:W=5,pulsars:G=10,quasars:k=3,galaxyName:B})=>{const[I,ge]=w.useState("Aligning Stargate..."),[ne,Y]=w.useState(!1),[$,D]=w.useState(!1),[O,J]=w.useState(!1),[Q,H]=w.useState(!1);w.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){ge("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),Y(!0);const te=(pe,b)=>Array.from({length:b},()=>pe[Math.floor(Math.random()*pe.length)]).join(""),de=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:35},{chars:"0123456789ABCDEF",duration:20,iterations:50},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:'\",.<>?/`~",duration:15,iterations:100}];let N=0,y=0;const he=()=>{if(N>=de.length){const b="Stargate system aligned";let x=0;ge("");const K=()=>{x<b.length?(ge(b.substring(0,x+1)),x++,setTimeout(K,30)):Y(!1)};K();return}const pe=de[N];ge(te(pe.chars,32)),y++,y>=pe.iterations&&(N++,y=0),setTimeout(he,pe.duration)};he()},[]),w.useEffect(()=>{const j=document.createElement("style");return j.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(j),()=>{document.head.removeChild(j)}},[]);const ae=()=>{J(!0),setTimeout(()=>{D(!1),J(!1)},300)};return w.useEffect(()=>(document.addEventListener("galaxy-close-fullscreen",ae),()=>{document.removeEventListener("galaxy-close-fullscreen",ae)}),[]),w.useEffect(()=>{if(Q){const j=setTimeout(()=>H(!1),50);return()=>clearTimeout(j)}},[Q]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Galaxy Visualization"})}),e.jsx("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:e.jsx(qt,{galaxyType:_,numSystems:F,blackHoles:W,pulsars:G,quasars:k,galaxyName:B,onExpandClick:()=>{D(!0),H(!0)}})}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:a,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${ne?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),I]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]}),$&&rt.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${O||Q?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${O||Q?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:"Galaxy View"})}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Galaxy Visualization"}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Type: ",_," • Systems: ",F.toLocaleString()]})]})}),e.jsx("button",{onClick:ae,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx($t,{galaxyType:_,numSystems:F,blackHoles:W,pulsars:G,quasars:k,galaxyName:B})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},Wt=({systems:a,coordinates:_})=>{const[F,W]=w.useState(new Map);return w.useEffect(()=>{(()=>{try{const k=new Map;a.forEach(B=>{const I=zt(_,B.index,B.num_planets||1);k.set(B.index,I)}),W(k)}catch{}})()},[_,a]),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:a.map(G=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[(()=>{const k=F.get(G.index)||"none";return k==="complete"?e.jsx("div",{className:"absolute top-1 right-1 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}):k==="partial"?e.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500/20 border border-yellow-500/50 text-yellow-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"PARTIAL"}):null})(),e.jsxs("button",{onClick:()=>window.location.href=`/system/${G.index}`,className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["#",G.number]}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:G.name})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},G.index))}),a.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No systems found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This galaxy appears to be empty"})]})]})},Xt=({currentGalaxy:a})=>{const[_,F]=w.useState(!1),[W,G]=w.useState(!1),[k,B]=w.useState(!0),I=1e7;w.useEffect(()=>{const[D,O,J]=a.coordinates,Q=!(D===0&&O===0&&J===0),H=!(D===I&&O===I&&J===I);F(Q),G(H),B(!1)},[a.coordinates]);const ge=()=>{const[D,O,J]=a.coordinates;return J>0?[D,O,J-1]:O>0?[D,O-1,I]:D>0?[D-1,I,I]:[0,0,0]},ne=()=>{const[D,O,J]=a.coordinates;return J<I?[D,O,J+1]:O<I?[D,O+1,0]:D<I?[D+1,0,0]:[I,I,I]},Y=()=>{if(_){if(!Te.canAffordTravel("galaxy",1)){Te.executeTravel("galaxy",1);return}if(!Te.executeTravel("galaxy",1))return;const[O,J,Q]=ge(),H=document.createElement("form");H.method="POST",H.action="/navigate";const ae=document.createElement("input");ae.type="hidden",ae.name="x",ae.value=O.toString();const j=document.createElement("input");j.type="hidden",j.name="y",j.value=J.toString();const te=document.createElement("input");te.type="hidden",te.name="z",te.value=Q.toString(),H.appendChild(ae),H.appendChild(j),H.appendChild(te),document.body.appendChild(H),H.submit()}},$=()=>{if(W){if(!Te.canAffordTravel("galaxy",1)){Te.executeTravel("galaxy",1);return}if(!Te.executeTravel("galaxy",1))return;const[O,J,Q]=ne(),H=document.createElement("form");H.method="POST",H.action="/navigate";const ae=document.createElement("input");ae.type="hidden",ae.name="x",ae.value=O.toString();const j=document.createElement("input");j.type="hidden",j.name="y",j.value=J.toString();const te=document.createElement("input");te.type="hidden",te.name="z",te.value=Q.toString(),H.appendChild(ae),H.appendChild(j),H.appendChild(te),document.body.appendChild(H),H.submit()}};return k?null:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:Y,disabled:!_,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${_?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:$,disabled:!W,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${W?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})},Yt=({page:a,prevPage:_,nextPage:F,finish:W})=>{const G="px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105",k="bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg",B="bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white border border-white/20";return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 sm:gap-4 flex-wrap",children:[a!==1&&e.jsxs("button",{onClick:()=>window.location.href="/galaxy/1",className:`${G} ${B}`,title:"First page",children:[e.jsx("span",{className:"hidden sm:inline",children:"First"}),e.jsx("span",{className:"sm:hidden",children:"«"})]}),_&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${_}`,className:`${G} ${B}`,title:"Previous page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"‹"})]}),(()=>{const I=[],ne=Math.max(1,a-2),Y=Math.min(W,a+2);ne>1&&(I.push(e.jsx("button",{onClick:()=>window.location.href="/galaxy/1",className:`${G} ${B}`,children:"1"},1)),ne>2&&I.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"start-ellipsis")));for(let $=ne;$<=Y;$++)$===a?I.push(e.jsx("span",{className:`${G} ${k} cursor-default`,children:$},$)):I.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${$}`,className:`${G} ${B} cursor-pointer`,children:$},$));return Y<W&&(Y<W-1&&I.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"end-ellipsis")),I.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${W}`,className:`${G} ${B}`,children:W},W))),I})(),F&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${F}`,className:`${G} ${B}`,title:"Next page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"›"})]}),a!==W&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${W}`,className:`${G} ${B}`,title:"Last page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Last"}),e.jsx("span",{className:"sm:hidden",children:"»"})]})]}),e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-400",children:["Page ",a," of ",W]})]})},it=({galaxy:a,systems:_,galaxy_url:F,version:W,page:G,prev_page:k,next_page:B,finish:I,image_url:ge})=>{const[ne]=w.useState(a.coordinates.join(","));w.useEffect(()=>{document.body.setAttribute("data-coordinates",ne),Rt(ne)},[ne]);const Y=$=>$.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsx(Ct,{}),e.jsxs("div",{className:"relative z-10 pt-1",children:[e.jsx(Et,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["Galaxy '",Y(a.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Coordinates ",a.coordinates.join(", ")]})]}),e.jsx(Xt,{currentGalaxy:a}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(Ut,{galaxyUrl:F,galaxyType:a.galaxy_type,numSystems:a.num_systems,blackHoles:a.black_holes,pulsars:a.pulsars,quasars:a.quasars,galaxyName:Y(a.name)})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(Vt,{galaxy:a})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Systems in '",Y(a.name),"'"]}),e.jsx(Wt,{systems:_,coordinates:ne})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsx("span",{className:"text-base sm:text-lg",children:"← Go Back to Planetary Index"})})}),e.jsx(Yt,{page:G,prevPage:k,nextPage:B,finish:I})]}),e.jsx(Ht,{version:W})]}),e.jsx(Dt,{}),e.jsx(kt,{currentLocation:{type:"galaxy",name:a.name,coordinates:a.coordinates.join(",")}})]})};document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("atlas-react-root");if(!a)return;const _=F=>{const W=document.getElementById(F);if(!W||!W.textContent)return null;try{return JSON.parse(W.textContent.trim())}catch{return null}};try{const F=_("data-galaxy")||{},W=_("data-systems")||[],G=_("data-navigation")||{},k=_("data-common")||{},B={galaxy:{name:F.name||"Unknown Galaxy",coordinates:F.coordinates||[0,0,0],galaxy_type:F.galaxy_type||"Unknown",num_systems:F.num_systems||0,black_holes:F.black_holes||0,pulsars:F.pulsars||0,quasars:F.quasars||0},systems:W,galaxy_url:G.galaxy_url||"#",version:k.version||"1.0.0",page:G.page||1,prev_page:G.prev_page,next_page:G.next_page,finish:G.finish||1,image_url:k.image_url||""};nt.createRoot(a).render(ot.createElement(it,B))}catch{const W={galaxy:{name:"Unknown Galaxy",coordinates:[0,0,0],galaxy_type:"Unknown",num_systems:0,black_holes:0,pulsars:0,quasars:0},systems:[],galaxy_url:"#",version:"1.0.0",page:1,finish:1,image_url:""};nt.createRoot(a).render(ot.createElement(it,W))}});
