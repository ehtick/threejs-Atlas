import{r as v,j as a}from"./atlas_Bv5zr7cG9joXJ1l7Eo-6s.js";import{L as $,U as p}from"./atlas_D-NpxgqeBOal3kfX7EiNq.js";class y{static encodeUrl(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_")}static generateGalaxyUrl(e,t=1){const r=`coordinates=${e[0]},${e[1]},${e[2]}&page=${t}`,n=this.encodeUrl(r);return`${window.location.origin}/stargate/${n}`}static generateSystemUrl(e,t,r=1){const n=`coordinates=${e[0]},${e[1]},${e[2]}&system=${t}&page=${r}`,d=this.encodeUrl(n);return`${window.location.origin}/stargate/${d}`}static generatePlanetUrl(e,t,r,n=1){const d=`coordinates=${e[0]},${e[1]},${e[2]}&system=${t}&planet=${r.toLowerCase()}&page=${n}`,i=this.encodeUrl(d);return`${window.location.origin}/stargate/${i}`}static getCurrentPage(){try{const t=new URLSearchParams(window.location.search).get("page");if(t)return parseInt(t,10);const r=window.location.pathname.match(/\/galaxy\/(\d+)/);return r?parseInt(r[1],10):1}catch{return 1}}}const U=({type:s,name:e,coordinates:t,systemIndex:r,planetName:n,className:d=""})=>{const[i,l]=v.useState(!1),[m,c]=v.useState(!1),o=()=>{try{const u=t.split(",").map(Number),h=y.getCurrentPage();switch(s){case"galaxy":return y.generateGalaxyUrl(u,h);case"system":if(r!==void 0)return y.generateSystemUrl(u,r,h);break;case"planet":if(r!==void 0&&n)return y.generatePlanetUrl(u,r,n,h);break}return window.location.pathname}catch(u){return console.error("Error generating stargate URL:",u),window.location.pathname}};v.useEffect(()=>{const u=$.getLocations(),h=o(),w=u.some(L=>L.stargateUrl===h);l(w)},[t,r,n,s]);const x=async()=>{c(!0);try{const u=o();$.saveLocation({name:e,type:s,stargateUrl:u}),l(!0),setTimeout(()=>{c(!1)},300)}catch(u){console.error("Error saving location:",u),c(!1)}},C=u=>u.replace(/_/g," ");return a.jsx(a.Fragment,{children:a.jsx("button",{onClick:x,disabled:i||m,className:`inline-flex items-center space-x-1 px-1.5 py-0.5 rounded transition-all duration-200 text-[10px] font-medium h-[21px] box-border ${i?"bg-green-500/20 border border-green-500/50 text-green-400 cursor-default":m?"bg-blue-500/20 border border-blue-500/50 text-blue-400 cursor-wait":"bg-white/10 hover:bg-white/20 border border-white/20 hover:border-white/40 text-white hover:text-blue-300"} ${d}`,title:i?"Location saved":`Save ${C(e)} to bookmarks`,children:m?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a.jsx("span",{className:"text-[10px] uppercase",children:"Saving..."})]}):i?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),a.jsx("span",{className:"text-[10px] uppercase",children:"Saved"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),a.jsx("span",{className:"text-[10px] uppercase",children:"Save"})]})})})},j={"Z-Divinium":{antimatter:100,element115:150,deuterium:80},Oganesson:{antimatter:50,element115:70,deuterium:40},Tennessine:{antimatter:50,element115:70,deuterium:40},Livermorium:{antimatter:50,element115:70,deuterium:40},Moscovium:{antimatter:50,element115:70,deuterium:40},Flerovium:{antimatter:50,element115:70,deuterium:40},Nihonium:{antimatter:50,element115:70,deuterium:40},Copernicium:{antimatter:50,element115:70,deuterium:40},Roentgenium:{antimatter:40,element115:55,deuterium:35},Darmstadtium:{antimatter:40,element115:55,deuterium:35},Meitnerium:{antimatter:40,element115:55,deuterium:35},Hassium:{antimatter:35,element115:45,deuterium:30},Bohrium:{antimatter:35,element115:45,deuterium:30},Seaborgium:{antimatter:35,element115:45,deuterium:30},Dubnium:{antimatter:35,element115:45,deuterium:30},Rutherfordium:{antimatter:35,element115:45,deuterium:30},Lawrencium:{antimatter:30,element115:40,deuterium:25},Nobelium:{antimatter:30,element115:40,deuterium:25},Mendelevium:{antimatter:30,element115:40,deuterium:25},Fermium:{antimatter:30,element115:40,deuterium:25},Einsteinium:{antimatter:30,element115:40,deuterium:25},Californium:{antimatter:30,element115:40,deuterium:25},Berkelium:{antimatter:30,element115:40,deuterium:25},Curium:{antimatter:25,element115:35,deuterium:20},Americium:{antimatter:25,element115:35,deuterium:20},Plutonium:{antimatter:25,element115:35,deuterium:20},Neptunium:{antimatter:25,element115:35,deuterium:20},Uranium:{antimatter:25,element115:35,deuterium:20},Protactinium:{antimatter:25,element115:35,deuterium:20},Thorium:{antimatter:25,element115:35,deuterium:20},Actinium:{antimatter:25,element115:35,deuterium:20},Radium:{antimatter:25,element115:35,deuterium:20},Francium:{antimatter:25,element115:35,deuterium:20},Radon:{antimatter:20,element115:28,deuterium:18},Astatine:{antimatter:20,element115:28,deuterium:18},Polonium:{antimatter:20,element115:28,deuterium:18},Bismuth:{antimatter:18,element115:25,deuterium:15},Lead:{antimatter:18,element115:25,deuterium:15},Thallium:{antimatter:18,element115:25,deuterium:15},Mercury:{antimatter:18,element115:25,deuterium:15},Gold:{antimatter:18,element115:25,deuterium:15},Platinum:{antimatter:16,element115:22,deuterium:14},Iridium:{antimatter:16,element115:22,deuterium:14},Osmium:{antimatter:16,element115:22,deuterium:14},Rhenium:{antimatter:15,element115:20,deuterium:12},Tungsten:{antimatter:15,element115:20,deuterium:12},Tantalum:{antimatter:15,element115:20,deuterium:12},Hafnium:{antimatter:15,element115:20,deuterium:12},Lutetium:{antimatter:12,element115:16,deuterium:10},Ytterbium:{antimatter:12,element115:16,deuterium:10},Thulium:{antimatter:12,element115:16,deuterium:10},Erbium:{antimatter:11,element115:15,deuterium:9},Holmium:{antimatter:11,element115:15,deuterium:9},Dysprosium:{antimatter:11,element115:15,deuterium:9},Terbium:{antimatter:10,element115:14,deuterium:8},Gadolinium:{antimatter:10,element115:14,deuterium:8},Europium:{antimatter:9,element115:12,deuterium:7},Samarium:{antimatter:9,element115:12,deuterium:7},Promethium:{antimatter:9,element115:12,deuterium:7},Neodymium:{antimatter:9,element115:12,deuterium:7},Praseodymium:{antimatter:9,element115:12,deuterium:7},Cerium:{antimatter:8,element115:11,deuterium:6},Lanthanum:{antimatter:8,element115:11,deuterium:6},Barium:{antimatter:7,element115:9,deuterium:5},Cesium:{antimatter:7,element115:9,deuterium:5},Xenon:{antimatter:7,element115:9,deuterium:5},Iodine:{antimatter:7,element115:9,deuterium:5},Tellurium:{antimatter:7,element115:9,deuterium:5},Antimony:{antimatter:6,element115:8,deuterium:4},Tin:{antimatter:6,element115:8,deuterium:4},Indium:{antimatter:6,element115:8,deuterium:4},Cadmium:{antimatter:5,element115:7,deuterium:4},Silver:{antimatter:5,element115:7,deuterium:4},Palladium:{antimatter:5,element115:7,deuterium:4},Rhodium:{antimatter:5,element115:7,deuterium:4},Ruthenium:{antimatter:4,element115:6,deuterium:3},Technetium:{antimatter:4,element115:6,deuterium:3},Molybdenum:{antimatter:4,element115:6,deuterium:3},Niobium:{antimatter:4,element115:6,deuterium:3},Tritium:{antimatter:8,element115:10,deuterium:15},Zirconium:{antimatter:3,element115:4,deuterium:2},Yttrium:{antimatter:3,element115:4,deuterium:2},Strontium:{antimatter:3,element115:4,deuterium:2},Rubidium:{antimatter:3,element115:4,deuterium:2},Krypton:{antimatter:3,element115:4,deuterium:2},Bromine:{antimatter:3,element115:4,deuterium:2},Selenium:{antimatter:3,element115:4,deuterium:2},Arsenic:{antimatter:3,element115:4,deuterium:2},Beryllium:{antimatter:3,element115:4,deuterium:2},Scandium:{antimatter:3,element115:4,deuterium:2},Germanium:{antimatter:2,element115:3,deuterium:2},Gallium:{antimatter:2,element115:3,deuterium:2},Zinc:{antimatter:2,element115:3,deuterium:2},Copper:{antimatter:2,element115:3,deuterium:2},Lithium:{antimatter:2,element115:3,deuterium:2},Fluorine:{antimatter:2,element115:3,deuterium:2},Titanium:{antimatter:2,element115:3,deuterium:2},Vanadium:{antimatter:2,element115:3,deuterium:2},Chromium:{antimatter:2,element115:3,deuterium:2},Cobalt:{antimatter:1,element115:2,deuterium:1},Manganese:{antimatter:1,element115:2,deuterium:1},Nickel:{antimatter:1,element115:2,deuterium:1},Calcium:{antimatter:1,element115:2,deuterium:1},Argon:{antimatter:1,element115:1,deuterium:1},Chlorine:{antimatter:1,element115:1,deuterium:1},Phosphorus:{antimatter:1,element115:1,deuterium:1},Boron:{antimatter:1,element115:1,deuterium:1},Potassium:{antimatter:1,element115:1,deuterium:1},Sodium:{antimatter:1,element115:1,deuterium:1},Aluminum:{antimatter:1,element115:1,deuterium:1},Sulfur:{antimatter:0,element115:1,deuterium:1},Magnesium:{antimatter:0,element115:1,deuterium:1},Silicon:{antimatter:0,element115:1,deuterium:1},Iron:{antimatter:0,element115:1,deuterium:1},Neon:{antimatter:0,element115:1,deuterium:0},Nitrogen:{antimatter:0,element115:0,deuterium:1},Carbon:{antimatter:0,element115:0,deuterium:1},Oxygen:{antimatter:0,element115:0,deuterium:1},Helium:{antimatter:0,element115:0,deuterium:0},Hydrogen:{antimatter:0,element115:0,deuterium:0}};function R(s){let e={antimatter:0,element115:0,deuterium:0};return s.forEach(t=>{const r=t.trim(),n=j[r];n&&(e.antimatter+=n.antimatter,e.element115+=n.element115,e.deuterium+=n.deuterium)}),e.antimatter===0&&e.element115===0&&e.deuterium===0&&(e={antimatter:1,element115:1,deuterium:2}),e}class f{static generateLocationId(e,t,r,n){switch(e){case"galaxy":return`galaxy_${t}`;case"system":return`system_${t}_${r}`;case"planet":return`planet_${t}_${r}_${n?.toLowerCase()}`;default:return`unknown_${t}`}}static canCollectFromLocation(e){return p.canCollectFromLocation(e)}static getTimeUntilNextCollection(e){return p.getTimeUntilNextCollection(e)}static calculateReward(e,t,r=0,n){if(e==="planet"&&n?.elements&&n.elements.length>0){const o=R(n.elements),x=r>3?Math.max(.4,1-(r-3)*.15):1,C=.9+Math.random()*.2,u=Math.floor(o.antimatter*x*C),h=Math.floor(o.element115*x*C),w=Math.floor(o.deuterium*x*C);return{antimatter:o.antimatter>0&&u===0?o.antimatter:u,element115:o.element115>0&&h===0?o.element115:h,deuterium:o.deuterium>0&&w===0?o.deuterium:w}}const i={galaxy:{antimatter:80,element115:60,deuterium:50},system:{antimatter:50,element115:60,deuterium:50},planet:{antimatter:18,element115:22,deuterium:27}}[e];let l=1;e==="planet"&&!n?.elements&&t&&(l=.5+this.hashCoordinates(t)*1.5);const m=r>3?Math.max(.4,1-(r-3)*.15):1,c=.9+Math.random()*.2;return{antimatter:Math.floor(i.antimatter*l*m*c),element115:Math.floor(i.element115*l*m*c),deuterium:Math.floor(i.deuterium*l*m*c)}}static hashCoordinates(e){if(!e||typeof e!="string")return Math.random();let t=0;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);t=(t<<5)-t+n,t=t&t}return Math.abs(t)/2147483647}static getDiscoveryBonus(e){return e<=15?2.5:e<=35?1.8:e<=50?1.3:1}static collectResources(e,t,r,n){if(!this.canCollectFromLocation(e))return null;const d=p.getCollectionCount(e);let i=this.calculateReward(t,r,d,n);const l=p.getCollectionStreakInfo();let m=l.streakMultiplier;const c=this.getDiscoveryBonus(l.dailyCollections);return m*=c,m>1&&(i={antimatter:Math.floor(i.antimatter*m),element115:Math.floor(i.element115*m),deuterium:Math.floor(i.deuterium*m)}),p.markLocationCollected(e),p.addResources(i),i}static getLocationCollection(e){const t=p.getCollectionCount(e);return t>0?{totalCollections:t}:null}static showCollectionSuccess(e,t,r){const n=document.createElement("div");n.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-green-900/90 to-blue-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-green-500/50",n.style.animation="slideInDown 0.3s ease-out";const i={galaxy:"🌌",system:"⭐",planet:"🪐"}[t]||"📦";let l="";if(r?.discoveryBonus>1&&(r.discoveryBonus===2?l+='<div class="text-xs text-yellow-300 mt-1">🎉 Discovery Bonus: 2x Rewards!</div>':r.discoveryBonus===1.5&&(l+='<div class="text-xs text-yellow-300 mt-1">✨ Discovery Bonus: 1.5x Rewards!</div>')),r?.streakBonus&&(l+='<div class="text-xs text-purple-300 mt-1">🔥 Streak Bonus: +25%</div>'),n.innerHTML=`
      <div class="flex items-center space-x-3">
        <span class="text-2xl">${i}</span>
        <div>
          <div class="text-sm font-bold text-green-300">Resources Collected!</div>
          <div class="text-xs text-green-200 mt-1 flex gap-3">
            <span class="text-purple-300">+${e.antimatter} AM</span>
            <span class="text-cyan-300">+${e.element115} E115</span>
            <span class="text-orange-300">+${e.deuterium} D</span>
          </div>
          ${l}
        </div>
      </div>
    `,!document.getElementById("collection-toast-styles")){const m=document.createElement("style");m.id="collection-toast-styles",m.textContent=`
        @keyframes slideInDown {
          from {
            transform: translate(-50%, -100%);
            opacity: 0;
          }
          to {
            transform: translate(-50%, 0);
            opacity: 1;
          }
        }
        @keyframes slideOutUp {
          from {
            transform: translate(-50%, 0);
            opacity: 1;
          }
          to {
            transform: translate(-50%, -100%);
            opacity: 0;
          }
        }
      `,document.head.appendChild(m)}document.body.appendChild(n),setTimeout(()=>{n.style.animation="slideOutUp 0.3s ease-in forwards",setTimeout(()=>{n.remove()},300)},3e3)}static getCollectionStats(){const e=p.getStats();return{totalCollections:e.totalCollections,uniqueLocations:e.totalCollections,totalResourcesGathered:{antimatter:e.totalResourcesCollected.antimatter,element115:e.totalResourcesCollected.element115,deuterium:e.totalResourcesCollected.deuterium}}}}const E=({locationType:s,locationId:e,coordinates:t,systemIndex:r,planetName:n,className:d=""})=>{const[i,l]=v.useState(!1),[m,c]=v.useState(0),[o,x]=v.useState(!1),[C,u]=v.useState(0);v.useEffect(()=>{const g=f.generateLocationId(s,t,r,n),b=()=>{l(f.canCollectFromLocation(g)),c(f.getTimeUntilNextCollection(g));const k=f.getLocationCollection(g);u(k?.totalCollections||0)};b();const M=setInterval(b,3e4);return()=>clearInterval(M)},[s,t,r,n]);const h=async()=>{x(!0);const g=f.generateLocationId(s,t,r,n),b=f.collectResources(g,s,t);b&&(f.showCollectionSuccess(b,s),l(!1),c(1),u(M=>M+1)),setTimeout(()=>x(!1),1e3)},w=()=>o?"Mining...":!i&&m>0?`${Math.ceil(m*60)}m`:"Mine",L=()=>o?a.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):!i&&m>0?a.jsxs("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"}),a.jsx("path",{d:"M13 7h-2v5.414l3.293 3.293 1.414-1.414L13 11.586z"})]}):a.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4"})]}),S=()=>{const g=f.calculateReward(s,C);return`${g.antimatter}AM | ${g.element115}E115 | ${g.deuterium}D`};return a.jsxs("button",{onClick:h,disabled:!i||o,className:`inline-flex items-center space-x-1 px-1.5 py-0.5 rounded transition-all duration-200 text-[10px] font-medium h-[21px] box-border ${o?"bg-blue-500/20 border border-blue-500/50 text-blue-400":i?"bg-white/10 hover:bg-white/20 border border-white/20 hover:border-white/40 text-white hover:text-blue-300":"bg-gray-500/20 border border-gray-500/50 text-gray-400"} ${d}`,title:i?`Mine: ${S()}`:`Cooldown: ${Math.ceil(m*60)} minutes remaining`,children:[L(),a.jsx("span",{className:"text-[10px] uppercase",children:w()})]})};export{E as R,U as S};
