import{r as y,j as e,a as at,c as ot,R as st}from"./atlas_C3xj8MG9oH9uC54MklkAb.js";import{R as Nt,L as zt,g as Rt,S as Be,m as Ct,F as Et,H as kt,a as Pt}from"./atlas_Dd1oIz2vPimnyjaTh6Eli.js";import{W as Ze}from"./atlas_jwQDkDgkbYrDf9CRKibQy.js";import{a4 as Ke,C as De,a5 as Je,G as Ge,r as ct,cH as lt,a2 as $e,cI as Fe,cJ as Ve,b as Se,z as ke,M as V,V as Te,B as He,cK as dt,o as ut,aa as Qe,a9 as mt,v as ht,cL as pt,cM as ft,S as _e,c as xt,A as Re,g as je,x as Ye,D as qe,H as gt,t as Xe,m as Ie,P as Oe,Y as vt,y as wt}from"./atlas_pGQiCQeTD5l6dMUXRRcYJ.js";import{R as Lt,S as Gt,M as It,a as et,D as Dt,T as At}from"./atlas_BJpzWMzCSjQD1vPE6gEgw.js";import{S as it,E as _t,a as Ft,b as Ht}from"./atlas_uJRM88EpPhyLqmS8e1wo1.js";import{O as bt}from"./atlas_D0eA6tgysic-V8oq2dTta.js";import{V as Tt}from"./atlas_DwvSdObFEIQcgn4zq5yYd.js";import"./atlas_C0q7_QgoBkw_1ECio0nFC.js";import"./atlas_BMOTvxb1A3Tqk3tQ4b7kw.js";import"./atlas_CtOhIAiNHzSpXytHIyKwk.js";import"./atlas_DJ7i7UfL_c0UysIQfk_Wq.js";import"./atlas_CwYcokoa2i6NGa8CMcVH-.js";import"./atlas_CDmCjAbKL2BudWSRsmj9N.js";import"./atlas_MjNYrLc1c4EY8hYLeoBxW.js";import"./atlas_BJ_QDdZoUPjYT-9n_I4Gp.js";import"./atlas_HiFslN68N6WR8NcVQRQp7.js";import"./atlas_ChinNMIx15I-x-zfb2cxc.js";import"./atlas_BK5KpVHHDMchlABYedhdJ.js";import"./atlas_D1CR0bARAX433mi1gofoX.js";import"./atlas_k2E4Oa2ZTr-ShzFQV4yGe.js";import"./atlas_C6pdp7ZaYdLNQa3nKe66N.js";import"./atlas_CCCB6wayl60uvstX_VV1b.js";import"./atlas_CuSf8Ux199dN5TQGANNsL.js";import"./atlas_B-7ciEeDInNr7ubvXaM1p.js";import"./atlas_QIlGLcqC1yx-yIj5WPE_2.js";import"./atlas_BrtSY9WI0jnpWr8b8l2p0.js";import"./atlas_DozMyZz-MgtutptlVtnXw.js";import"./atlas_DSMMIt__RfTLlDwy5o46G.js";import"./atlas_FvuaiM6ukQxncYDnO-LRN.js";import"./atlas_AcePMkcyOwGOfjKIaBXr7.js";import"./atlas_qLVe_rIPJrOk-heQF9xYK.js";import"./atlas_CVSIdj3IKNuZh1Tc9MWju.js";import"./atlas_DEVVBRTll3E69js2-hd6f.js";import"./atlas_DJS6mCG7iAKygTFzFyy0q.js";import"./atlas_CXqOkCPqDZlFOooak3r6p.js";import"./atlas_CXGNRo_qmRRLtYwZjj9MN.js";import"./atlas_B-8_xMAZUXFU3ijFjimI-.js";import"./atlas_ZZwvv2NOfM75V8EKAgXHJ.js";import"./atlas_CNSvMCCms-TRWdl5PfLso.js";import"./atlas_DNAC-xK9EjNtVKbqCBrWr.js";import"./atlas_DleynCheRNz9nOtzxamBI.js";import"./atlas_DRk1PRoP8HUsgl6w7XFKV.js";import"./atlas_DuNAKdzbUSGhCUnfjh5BO.js";import"./atlas_D7m96u8GNCAETXWneOccD.js";import"./atlas_DDAIyn7FrSglShWFzRYs6.js";import"./atlas_CUZqEERRQBivhH-lGjb0z.js";import"./atlas_B3jNgK3wg_91IYqexUq2H.js";import"./atlas_M0UXn4YDKB4xcqAMdAR2c.js";import"./atlas_cDvRyMmiFrWDA_rD6LEQ8.js";import"./atlas_CsENJmsgVSKbIkIORp0De.js";import"./atlas_3xd9BqPYYnkrfh-Kzp59J.js";import"./atlas_B55frdK5FY4jYv3eL7WSF.js";import"./atlas_GBC17wBCdVuY879Mt3pV2.js";import"./atlas_EMT4MQkZxhiCjMEXcl8lu.js";import"./atlas_CNSwdXAEZgA__qIDxXEVA.js";import"./atlas_C3o773RrkB_QrrdANyLLX.js";import"./atlas_fEdukK2Ek4bJoqmXZLuoQ.js";import"./atlas_Cle6kZu3ADge2F2XZyyYF.js";import"./atlas_BBGO3sthS_o2yDU3NQGQW.js";import"./atlas_DsAFxLjqd-fdDTXvXH8ER.js";import"./atlas_BUJnV0krBUhxxLpEWQCvw.js";import"./atlas_DHEyh2PRya1CVc9B_tQzq.js";import"./atlas_Cs0We1NVUxzA8UwJU4DMq.js";import"./atlas_4Br5bcXbvuWUmKa_tm5wr.js";const Bt=({coordinates:a,galaxyName:w})=>{const F=y.useRef(null),Y=y.useRef(null),G=y.useRef(null),P=y.useRef(null);return y.useEffect(()=>{if(!F.current)return;const T=F.current,I=T.clientWidth,be=T.clientHeight,te=new Ke;te.background=new De(657930),Y.current=te;const O=new Je(45,I/be,.1,1e3);O.position.set(20,15,20),O.lookAt(0,0,0);const q=new Ze({antialias:!0,alpha:!0});q.setSize(I,be),q.setClearColor(0,.2),G.current=q,T.appendChild(q.domElement);const Z=0,D=1e7,K=5e6,[se,H,ie]=a,S=((se-Z)/(D-Z)-.5)*16,ne=((H-Z)/(D-Z)-.5)*16,ye=((ie-Z)/(D-Z)-.5)*16,g=new Ge;te.add(g);const j=new ct(16,16,16),xe=new lt(j),re=new $e({color:16777215,opacity:.4,transparent:!0,linewidth:2}),ge=new Fe(xe,re);g.add(ge);const m=new Ve(16,16,16777215,16777215);m.material.opacity=.1,m.material.transparent=!0,m.position.y=-8,g.add(m);const A=new Ve(16,16,16777215,16777215);A.material.opacity=.05,A.material.transparent=!0,A.rotation.z=Math.PI/2,A.position.x=-8,g.add(A);const b=new Ve(16,16,16777215,16777215);b.material.opacity=.05,b.material.transparent=!0,b.rotation.x=Math.PI/2,b.position.z=-8,g.add(b);const ae=new Se(.5,32,32),he=new ke({color:16777215,transparent:!0,opacity:.9}),ue=new V(ae,he);ue.position.set(0,0,0),g.add(ue);const le=new V(new Se(.8,32,32),new ke({color:16777215,transparent:!0,opacity:.2}));ue.add(le);const $=new Se(.4,32,32),J=new ke({color:6605055,transparent:!0,opacity:1}),x=new V($,J);x.position.set(S,ne,ye),g.add(x);const l=new V(new Se(.7,32,32),new ke({color:6605055,transparent:!0,opacity:.3}));if(x.add(l),Math.sqrt(Math.pow(se-K,2)+Math.pow(H-K,2)+Math.pow(ie-K,2))<2e6){const n=[new Te(0,0,0),new Te(S,ne,ye)],r=new He().setFromPoints(n),v=new dt({color:16762980,dashSize:.6,gapSize:.6,opacity:.4,transparent:!0,linewidth:2}),k=new ut(r,v);k.computeLineDistances(),g.add(k)}const i=new Qe(4210752,.6);te.add(i);const o=new mt(16777215,.8);o.position.set(10,10,10),te.add(o);const R=(n,r)=>{const v=document.createElement("canvas"),k=v.getContext("2d");if(!k)return null;v.width=64,v.height=64,k.fillStyle=`#${r.toString(16).padStart(6,"0")}`,k.font="bold 48px Arial",k.textAlign="center",k.textBaseline="middle",k.fillText(n,32,32);const h=new ht(v),ee=new pt({map:h,transparent:!0,opacity:.8}),ce=new ft(ee);return ce.scale.set(1.6,1.6,1),ce},u=R("X",16739179);u&&(u.position.set(8.4,-7.6,-7.6),g.add(u));const M=R("Y",7077739);M&&(M.position.set(-7.6,8.4,-7.6),g.add(M));const U=R("Z",7039999);U&&(U.position.set(-7.6,-7.6,8.4),g.add(U));let X=!1,Q=0,de=0,N=!0,c=0;const t=n=>{X=!0,N=!1,Q=n.clientX,de=n.clientY},d=n=>{if(!X)return;const r=n.clientX-Q,v=n.clientY-de;g.rotation.y+=r*.01,g.rotation.x+=v*.01,Q=n.clientX,de=n.clientY},p=()=>{X=!1,setTimeout(()=>{X||(N=!0)},3e3)},E=n=>{n.preventDefault();const r=.1,v=O.position.distanceTo(new Te(0,0,0));n.deltaY>0&&v<50?O.position.multiplyScalar(1+r):n.deltaY<0&&v>10&&O.position.multiplyScalar(1-r)},z=n=>{n.key==="Escape"&&document.dispatchEvent(new CustomEvent("universe-close-fullscreen"))},oe=n=>{if(n.preventDefault(),n.touches.length===1)X=!0,N=!1,Q=n.touches[0].clientX,de=n.touches[0].clientY;else if(n.touches.length===2){const r=n.touches[0].clientX-n.touches[1].clientX,v=n.touches[0].clientY-n.touches[1].clientY;c=Math.sqrt(r*r+v*v)}},B=n=>{if(n.preventDefault(),n.touches.length===1&&X){const r=n.touches[0].clientX-Q,v=n.touches[0].clientY-de;g.rotation.y+=r*.01,g.rotation.x+=v*.01,Q=n.touches[0].clientX,de=n.touches[0].clientY}else if(n.touches.length===2){const r=n.touches[0].clientX-n.touches[1].clientX,v=n.touches[0].clientY-n.touches[1].clientY,k=Math.sqrt(r*r+v*v);if(c>0){const ee=k/c,ce=O.position.distanceTo(new Te(0,0,0));ee>1&&ce>10?O.position.multiplyScalar(1-.01):ee<1&&ce<50&&O.position.multiplyScalar(1+.01)}c=k}},_=n=>{n.preventDefault(),X=!1,c=0,setTimeout(()=>{X||(N=!0)},3e3)},f=q.domElement;f.style.cursor="grab",f.addEventListener("mousedown",n=>{f.style.cursor="grabbing",t(n)}),f.addEventListener("mousemove",d),f.addEventListener("mouseup",()=>{f.style.cursor="grab",p()}),f.addEventListener("mouseleave",()=>{f.style.cursor="grab",p()}),f.addEventListener("wheel",E),f.addEventListener("touchstart",oe,{passive:!1}),f.addEventListener("touchmove",B,{passive:!1}),f.addEventListener("touchend",_,{passive:!1}),document.addEventListener("keydown",z);const me=()=>{P.current=requestAnimationFrame(me),N&&(g.rotation.y+=.002,g.rotation.x+=.001);const n=Date.now()*.005;ue.scale.setScalar(1+Math.sin(n)*.1),x.rotation.y+=.01,q.render(te,O)};me();const C=()=>{const n=T.clientWidth,r=T.clientHeight;O.aspect=n/r,O.updateProjectionMatrix(),q.setSize(n,r)};return window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C),document.removeEventListener("keydown",z),f.removeEventListener("mousedown",t),f.removeEventListener("mousemove",d),f.removeEventListener("mouseup",p),f.removeEventListener("mouseleave",p),f.removeEventListener("wheel",E),f.removeEventListener("touchstart",oe),f.removeEventListener("touchmove",B),f.removeEventListener("touchend",_),P.current&&cancelAnimationFrame(P.current),T&&q.domElement&&T.removeChild(q.domElement),q.dispose(),j.dispose(),xe.dispose(),re.dispose(),ae.dispose(),he.dispose(),$.dispose(),J.dispose()}},[a,w]),e.jsx("div",{ref:F,className:"w-full h-full"})},Vt=({coordinates:a,galaxyName:w})=>{const F=y.useRef(null),Y=y.useRef(null),G=y.useRef(null),P=y.useRef(null),[T,I]=y.useState(!1),[be,te]=y.useState(!1),[O,q]=y.useState(!1),Z=()=>{te(!0),setTimeout(()=>{I(!1),te(!1)},300)};y.useEffect(()=>{const S=ne=>{ne.key==="Escape"&&T&&Z()};return document.addEventListener("universe-close-fullscreen",Z),document.addEventListener("keydown",S),()=>{document.removeEventListener("universe-close-fullscreen",Z),document.removeEventListener("keydown",S)}},[T]),y.useEffect(()=>{if(T&&O){const S=setTimeout(()=>{q(!1)},50);return()=>clearTimeout(S)}},[T,O]),y.useEffect(()=>{if(!F.current)return;const S=F.current,ne=S.clientWidth,ye=ne<640,g=new Ke;g.background=new De(657930),Y.current=g;const j=new Je(30,ne/120,.1,1e3);j.position.set(12,8,12),j.lookAt(0,0,0);const xe=new Ze({antialias:!0,alpha:!0});xe.setSize(ne,120),xe.setClearColor(0,.2),G.current=xe,S.appendChild(xe.domElement);const re=0,ge=1e7,m=5e6,[A,b,ae]=a,he=((A-re)/(ge-re)-.5)*8,ue=((b-re)/(ge-re)-.5)*8,le=((ae-re)/(ge-re)-.5)*8,$=new Ge;g.add($);const J=new ct(8,8,8),x=new lt(J),l=new $e({color:16777215,opacity:.4,transparent:!0}),s=new Fe(x,l);$.add(s);const i=new Ve(8,8,16777215,16777215);i.material.opacity=.1,i.material.transparent=!0,i.position.y=-4,$.add(i);const o=new Ve(8,8,16777215,16777215);o.material.opacity=.05,o.material.transparent=!0,o.rotation.z=Math.PI/2,o.position.x=-4,$.add(o);const R=new Ve(8,8,16777215,16777215);R.material.opacity=.05,R.material.transparent=!0,R.rotation.x=Math.PI/2,R.position.z=-4,$.add(R);const u=new Se(.25,16,16),M=new ke({color:16777215,transparent:!0,opacity:.9}),U=new V(u,M);U.position.set(0,0,0),$.add(U);const X=new V(new Se(.45,16,16),new ke({color:16777215,transparent:!0,opacity:.2}));U.add(X);const Q=new Se(.2,16,16),de=new ke({color:6605055,transparent:!0,opacity:1}),N=new V(Q,de);N.position.set(he,ue,le),$.add(N);const c=new V(new Se(.35,16,16),new ke({color:6605055,transparent:!0,opacity:.3}));if(N.add(c),Math.sqrt(Math.pow(A-m,2)+Math.pow(b-m,2)+Math.pow(ae-m,2))<2e6){const L=[new Te(0,0,0),new Te(he,ue,le)],W=new He().setFromPoints(L),pe=new dt({color:16762980,dashSize:.3,gapSize:.3,opacity:.4,transparent:!0}),Me=new ut(W,pe);Me.computeLineDistances(),$.add(Me)}const d=new Qe(4210752,.6);g.add(d);const p=new mt(16777215,.8);p.position.set(5,5,5),g.add(p);const E=(L,W)=>{const pe=document.createElement("canvas"),Me=pe.getContext("2d");if(!Me)return null;pe.width=32,pe.height=32,Me.fillStyle=`#${W.toString(16).padStart(6,"0")}`,Me.font="bold 24px Arial",Me.textAlign="center",Me.textBaseline="middle",Me.fillText(L,16,16);const Ae=new ht(pe),ve=new pt({map:Ae,transparent:!0,opacity:.8}),fe=new ft(ve);return fe.scale.set(.8,.8,1),fe},z=E("X",16739179);z&&(z.position.set(4.2,-3.8,-3.8),$.add(z));const oe=E("Y",7077739);oe&&(oe.position.set(-3.8,4.2,-3.8),$.add(oe));const B=E("Z",7039999);B&&(B.position.set(-3.8,-3.8,4.2),$.add(B));let _=!1,f=0,me=0,C=!0;const n=L=>{_=!0,C=!1,f=L.clientX,me=L.clientY},r=L=>{if(!_)return;const W=L.clientX-f,pe=L.clientY-me;$.rotation.y+=W*.01,$.rotation.x+=pe*.01,f=L.clientX,me=L.clientY},v=()=>{_=!1,setTimeout(()=>{_||(C=!0)},3e3)},k=L=>{L.preventDefault();const W=.1,pe=j.position.distanceTo(new Te(0,0,0));L.deltaY>0&&pe<25?j.position.multiplyScalar(1+W):L.deltaY<0&&pe>5&&j.position.multiplyScalar(1-W)},h=xe.domElement;h.style.cursor="grab",h.style.borderRadius="8px",h.addEventListener("mousedown",L=>{h.style.cursor="grabbing",n(L)}),h.addEventListener("mousemove",r),h.addEventListener("mouseup",()=>{h.style.cursor="grab",v()}),h.addEventListener("mouseleave",()=>{h.style.cursor="grab",v()}),h.addEventListener("wheel",k);const ee=()=>{P.current=requestAnimationFrame(ee),C&&($.rotation.y+=.002,$.rotation.x+=.001);const L=Date.now()*.005;U.scale.setScalar(1+Math.sin(L)*.1),N.rotation.y+=.01,xe.render(g,j)};ee();const ce=()=>{const L=S.clientWidth,W=L<640?150:160;j.aspect=L/W,j.updateProjectionMatrix(),xe.setSize(L,W)};return window.addEventListener("resize",ce),()=>{window.removeEventListener("resize",ce),h.removeEventListener("mousedown",n),h.removeEventListener("mousemove",r),h.removeEventListener("mouseup",v),h.removeEventListener("mouseleave",v),h.removeEventListener("wheel",k),P.current&&cancelAnimationFrame(P.current),S&&xe.domElement&&S.removeChild(xe.domElement),xe.dispose(),J.dispose(),x.dispose(),l.dispose(),u.dispose(),M.dispose(),Q.dispose(),de.dispose()}},[a,w]);const D=S=>S.replace(/_/g," "),K=S=>S>=1e6?`${(S/1e6).toFixed(1)}M`:S>=1e3?`${(S/1e3).toFixed(1)}K`:S.toString(),[se,H,ie]=a;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Galaxy Location"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:F,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsx("button",{onClick:()=>{I(!0),q(!0)},className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-[10px]",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:D(w)})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:[K(se),", ",K(H),", ",K(ie)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom • Drag: Rotate View"})]})]}),T&&at.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${be||O?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${be||O?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:D(w)})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[D(w)," - Galaxy Location"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Galaxy"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[K(se),", ",K(H),", ",K(ie)]})]})]}),e.jsx("button",{onClick:Z,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(Bt,{coordinates:a,galaxyName:w})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},qt=({galaxy:a})=>{const[w,F]=y.useState({isOnCooldown:!1,isSaved:!1,isCollecting:!1,timeUntilNext:0});y.useEffect(()=>{let G;const P=()=>{const te=et.generateLocationId("galaxy",a.coordinates.join(","),void 0,void 0),O=et.canCollectFromLocation(te),q=et.getTimeUntilNextCollection(te),Z=a.coordinates,D=it.generateGalaxyUrl(Z,it.getCurrentPage()),se=zt.getLocations().some(H=>H.stargateUrl===D);F(H=>({isOnCooldown:!O&&q>0,isSaved:se,isCollecting:H.isCollecting,timeUntilNext:q}))},T=()=>{F(te=>({...te,isCollecting:!0})),G=setTimeout(()=>{F(te=>({...te,isCollecting:!1}))},1e3)};P();const I=setInterval(P,1e3),be=Nt.subscribe("mining_completed",T);return()=>{clearInterval(I),G&&clearTimeout(G),be()}},[a.name,a.coordinates]);const Y=G=>G.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex gap-2 z-10",children:[e.jsx(Lt,{locationType:"galaxy",locationId:a.name,coordinates:a.coordinates.join(","),className:"text-xs"}),e.jsx(Gt,{type:"galaxy",name:a.name,coordinates:a.coordinates.join(","),className:"text-xs"}),e.jsx("div",{className:"inline-flex items-center bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] font-medium px-1.5 py-0.5 rounded h-[21px] box-border",children:"VISITED"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(It,{isOnCooldown:w.isOnCooldown,isSaved:w.isSaved,isCollecting:w.isCollecting}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Details"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300",children:a.galaxy_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Solar Systems"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:a.num_systems.toLocaleString()})]})]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-2",children:e.jsx(Vt,{coordinates:a.coordinates,galaxyName:a.name})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-gray-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Cosmic Objects"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-pink-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Black Holes"}),e.jsx("div",{className:"text-xs font-bold text-pink-300",children:a.black_holes.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Pulsars"}),e.jsx("div",{className:"text-xs font-bold text-cyan-300",children:a.pulsars.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Quasars"}),e.jsx("div",{className:"text-xs font-bold text-indigo-300",children:a.quasars.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("div",{className:"text-green-400 font-medium",children:"Visited"})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:Y(a.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:a.coordinates.join(", ")})]})]})]})]})},$t=({galaxyType:a,numSystems:w,blackHoles:F,pulsars:Y,quasars:G,seed:P=12345,onExpandClick:T,galaxyName:I,galaxyUrl:be})=>{const te=y.useRef(null),O=y.useRef(null),q=y.useRef(null),Z=y.useRef(null),D=y.useRef(null),K=y.useRef(null),se=y.useRef(null),H=y.useRef(!1),[ie,S]=y.useState(!1),[ne,ye]=y.useState(!1),[g,j]=y.useState(!1),xe=y.useRef(null);class re{seed;constructor(A){this.seed=A}random(){const A=Math.sin(this.seed++)*1e4;return A-Math.floor(A)}uniform(A,b){return A+this.random()*(b-A)}gauss(A,b){let ae=0,he=0;for(;ae===0;)ae=this.random();for(;he===0;)he=this.random();const ue=Math.sqrt(-2*Math.log(ae))*Math.cos(2*Math.PI*he);return A+b*ue}randint(A,b){return Math.floor(this.uniform(A,b+1))}}y.useEffect(()=>{const m=se.current;if(!m)return;const A=m.getContext("2d");if(!A)return;let b=[];const ae=800;let he,ue;const le=800;let $,J=.5;function x(){const o=m?.parentElement;if(!o||!m)return;const R=o.clientWidth,u=o.clientHeight;m.width=Math.min(R,le),m.height=Math.min(u,le),he=m.width/2,ue=m.height/2}function l(){x(),b=[];for(let o=0;o<ae;o++)b.push({x:Math.random()*(m?.width||800),y:Math.random()*(m?.height||800),z:Math.random()*(m?.width||800),o:Math.random()});s()}function s(){!m||!A||(A.clearRect(0,0,m.width,m.height),b.forEach(o=>{o.z-=J,o.z<=0&&(o.z=m.width,o.x=Math.random()*m.width,o.y=Math.random()*m.height,o.o=Math.random());const R=m.width/o.z,u=(o.x-he)*R+he,M=(o.y-ue)*R+ue,U=2*R;A.beginPath(),A.fillStyle=`rgba(255, 255, 255, ${o.o})`,A.arc(u,M,U,0,2*Math.PI),A.fill()}),!H.current&&J<60&&(J+=1),H.current&&J>2&&(J-=2),$=requestAnimationFrame(s))}l();const i=()=>x();return window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i),$&&cancelAnimationFrame($)}},[]),y.useEffect(()=>{if(!te.current)return;const m=te.current,A=m.clientWidth,b=m.clientHeight,ae=Math.min(A,b),he=new Ke;he.background=new De(17),O.current=he;const ue=new Je(45,1,.1,1e4);ue.position.set(0,200,400),ue.lookAt(0,0,0),xe.current=ue;const le=new Ze({antialias:!0,alpha:!0});le.setSize(ae,ae),le.setClearColor(17,1),q.current=le,le.domElement.className="",m.appendChild(le.domElement);const $=new bt(ue,le.domElement);$.enableDamping=!0,$.dampingFactor=.05,$.minDistance=50,$.maxDistance=800,$.autoRotate=!0,$.autoRotateSpeed=.5,$.enablePan=!0,$.enableZoom=!0,$.target.set(0,0,0),D.current=$;const J=new Ge;K.current=J,he.add(J);const x=new re(P),l=x.uniform(0,2*Math.PI),s=new He,i=[],o=[],R=[],u=200;let M=w;if(a==="Spiral"){M=Math.min(w,5e4);const c=4,t=2*Math.PI/c,d=.15,p=.5,E=.1;for(let z=0;z<M*E;z++){const oe=x.uniform(0,2*Math.PI),B=x.gauss(u*.1,u*.05),_=x.gauss(0,5),f=B*Math.cos(oe),me=B*Math.sin(oe);i.push(f,_,me),o.push(1,1,1);const C=P+z*1337,n=new re(C),r=n.gauss(1,.3),v=n.random()<.05,k=n.random()<.3;let h=Math.max(.3,r);v&&(h*=3+n.uniform(0,2)),k&&(h*=.5+n.uniform(0,.3)),B<u*.2&&(h*=1.8+n.uniform(0,.7),o[o.length-3]=1.2,o[o.length-2]=1.1,o[o.length-1]=.9),R.push(Math.min(h*1.5,12))}for(let z=0;z<M;z++){const oe=p*Math.sqrt(z/M)*2*Math.PI,B=z%c*t,_=u*Math.sqrt(z/M),f=_*Math.cos(oe+B+l)+x.uniform(-d*_,d*_),me=_*Math.sin(oe+B+l)+x.uniform(-d*_,d*_),C=x.gauss(0,3);i.push(f,C,me),o.push(1,1,.8);const n=P+z*1337,r=new re(n),v=r.gauss(.8,.25),k=r.random()<.03,h=r.random()<.4;let ee=Math.max(.2,v);k&&(ee*=2.5+r.uniform(0,1.5)),h&&(ee*=.4+r.uniform(0,.2)),_>u*.7&&(ee*=.8),R.push(Math.min(ee*1.3,8))}}else if(a==="Elliptical"){M=Math.min(w,1e5);for(let c=0;c<M;c++){const t=x.uniform(0,2*Math.PI),d=x.uniform(-1,1),p=Math.sqrt(1-d*d),E=x.random(),z=Math.pow(E,.6),oe=-Math.log(1-z*.98)*u*.35,B=oe*p*Math.cos(t),_=oe*d*.6,f=oe*p*Math.sin(t);i.push(B,_,f),o.push(1,.9,.7);const me=P+c*1337,C=new re(me),n=C.gauss(.6,.2),r=C.random()<.08,v=C.random()<.25;let k=Math.max(.2,n);r&&(k*=2+C.uniform(0,1)),v&&(k*=.6+C.uniform(0,.2)),Math.sqrt(B*B+_*_+f*f)<u*.3&&(k*=1.5+C.uniform(0,.5)),R.push(Math.min(k*1.4,7))}}else if(a==="Dwarf"){let c;w<=1500?c=1:w<=5e3?c=1+(w-1500)/3500*9:w<=15e3?c=10+(w-5e3)/1e4*40:c=50+Math.min((w-15e3)/35e3,1)*50,M=Math.min(Math.floor(w/c),1e4);for(let t=0;t<M;t++){const d=x.uniform(0,2*Math.PI),p=x.uniform(0,Math.PI),E=x.gauss(u/3,u*.3),z=E*Math.sin(p)*Math.cos(d),oe=E*Math.cos(p)*.5,B=E*Math.sin(p)*Math.sin(d);i.push(z,oe,B),o.push(.8,.8,1);const _=P+t*1337,f=new re(_),me=f.gauss(.7,.3),C=f.random()<.02,n=f.random()<.6;let r=Math.max(.3,me);C&&(r*=2.5+f.uniform(0,1)),n&&(r*=.5+f.uniform(0,.3)),R.push(Math.min(r*1.2,5))}}else if(a==="Singularity Void"){M=1e4;for(let ve=0;ve<M;ve++){const fe=ve/M,ze=fe*30*Math.PI,Ce=u*(1-fe*.8)+x.uniform(-10,10),we=(fe-.5)*300+Math.sin(ze*.5)*20,Pe=Ce*Math.cos(ze)+Math.sin(fe*20)*10,Le=Ce*Math.sin(ze)+Math.cos(fe*20)*10;i.push(Pe,we,Le);const Ee=(fe+Math.sin(ze*.1))%1,Ne=new De;Ne.setHSL(Ee,1,.5+Math.sin(fe*10)*.3),o.push(Ne.r,Ne.g,Ne.b),R.push(x.uniform(.3,2)*(1+Math.sin(fe*50)*.5))}const c=(ve,fe,ze=1)=>{const Ce=new Se(ve,64,64),we=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,Pe=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;

          void main() {
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);

            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;

            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;

            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x +
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);

            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;

            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);

            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;

            gl_FragColor = vec4(color, ${fe});
          }
        `,Le=new _e({uniforms:{time:{value:0},speed:{value:ze}},vertexShader:we,fragmentShader:Pe,transparent:!0,blending:Re,side:qe,depthWrite:!1}),Ee=new V(Ce,Le);return Ee.isSingularityShader=!0,Ee.shaderSpeed=ze,Ee},t=c(250,.3,1);J.add(t);const d=c(180,.4,-.7);J.add(d);const p=c(120,.5,1.5);J.add(p);const E=c(300,.2,.5);E.scale.set(-1,1,1),J.add(E);const z=new Se(350,32,32),oe=new _e({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);


            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;

            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;

          void main() {

            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;

            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;

            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:xt,depthWrite:!1}),B=new V(z,oe);B.isSingularityShader=!0,B.shaderSpeed=.3,J.add(B);const _=new He,f=[],me=[];for(let ve=0;ve<1e3;ve++){const fe=x.uniform(-u,u),ze=x.uniform(-u/2,u/2),Ce=x.uniform(-u,u),we=x.uniform(-50,50),Pe=x.uniform(-30,30),Le=x.uniform(-50,50);f.push(fe,ze,Ce),f.push(fe+we,ze+Pe,Ce+Le);const Ee=x.random(),Ne=new De;Ne.setHSL(Ee,1,.6),me.push(Ne.r,Ne.g,Ne.b),me.push(Ne.r*.5,Ne.g*.5,Ne.b*.5)}_.setAttribute("position",new je(f,3)),_.setAttribute("color",new je(me,3));const C=new $e({vertexColors:!0,transparent:!0,opacity:.4,blending:Re}),n=new Fe(_,C);n.isGlitchLines=!0,J.add(n);const r=new Ge,v=new Se(20,32,32),k=new ke({color:0,transparent:!0,opacity:.95}),h=new V(v,k);r.add(h);const ee=new Ye(25,80,64),ce=new _e({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;

          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);


            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;


            vec3 hotColor = vec3(1.0, 0.5, 0.0);
            vec3 coldColor = vec3(0.0, 0.3, 1.0);
            vec3 color = mix(coldColor, hotColor, intensity);


            color *= (0.7 + swirl * 0.3);


            float alpha = intensity * 0.8;

            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:qe}),L=new V(ee,ce);L.rotation.x=Math.PI/2,L.isAccretionDisk=!0,r.add(L);for(let ve=0;ve<8;ve++){const fe=30+ve*20,ze=new gt(fe,1+ve*.5,8,64),Ce=new ke({color:new De().setHSL((.7+ve*.05)%1,1,.5),transparent:!0,opacity:.3-ve*.03,wireframe:!0}),we=new V(ze,Ce);we.rotation.x=x.uniform(0,Math.PI),we.rotation.y=x.uniform(0,Math.PI),we.isDistortionRing=!0,we.rotationSpeed=x.uniform(.001,.005)*(ve%2===0?1:-1),r.add(we)}J.add(r);const W=new Xe(5,100,8),pe=new Ie({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Re}),Me=new V(W,pe);Me.position.y=50,J.add(Me);const Ae=new V(W,pe);Ae.position.y=-50,Ae.rotation.z=Math.PI,J.add(Ae)}if(a!=="Singularity Void"){const c=[],t=new re(P+999);for(let C=0;C<F;C++){const n=t.uniform(-50,50),r=t.uniform(-20,20),v=t.uniform(-50,50);c.push({x:n,y:r,z:v})}const d=[],p=[],E=[],z=[],oe=[],B=.4,_=B*25;for(let C=0;C<i.length;C+=3){const n=i[C],r=i[C+1],v=i[C+2];let k=1/0,h=null;for(const ee of c){const ce=Math.sqrt(Math.pow(n-ee.x,2)+Math.pow(r-ee.y,2)+Math.pow(v-ee.z,2));ce<k&&(k=ce,h=ee)}if(!(k<B))if(k<_&&h){const ee=1-(k-B)/(_-B);h.x-n,h.y-r,h.z-v;const ce=Math.atan2(v-h.z,n-h.x),L=ee*.8,W=8;for(let we=0;we<W-1;we++){const Pe=we/(W-1),Le=(we+1)/(W-1),Ee=k*(1-Pe*L*.7),Ne=ce+Pe*L*1.5,Ue=h.x+Ee*Math.cos(Ne),We=r+(h.y-r)*Pe*.3,yt=h.z+Ee*Math.sin(Ne),tt=k*(1-Le*L*.7),nt=ce+Le*L*1.5,Mt=h.x+tt*Math.cos(nt),jt=r+(h.y-r)*Le*.3,St=h.z+tt*Math.sin(nt);z.push(Ue,We,yt),z.push(Mt,jt,St)}const pe=ee*1.5,Me=o[C],Ae=o[C+1],ve=o[C+2],fe=Math.min(Me+pe,2),ze=Math.max(Ae*(1-pe*.6),.1),Ce=Math.max(ve*(1-pe*.8),.1);for(let we=0;we<W-1;we++){const Pe=we/(W-1),Le=(we+1)/(W-1),Ee=1-Pe*ee*.6,Ne=1-Le*ee*.6,Ue=pe*(.5+Pe*.5),We=pe*(.5+Le*.5);oe.push(Math.min(fe+Ue*.3,2)*Ee,Math.max(ze*(1-Ue*.2),.1)*Ee,Math.max(Ce*(1-Ue*.4),.1)*Ee),oe.push(Math.min(fe+We*.3,2)*Ne,Math.max(ze*(1-We*.2),.1)*Ne,Math.max(Ce*(1-We*.4),.1)*Ne)}d.push(n,r,v),p.push(fe,ze,Ce),E.push(Math.max(R[C/3]*(1-ee*.5),.3))}else d.push(n,r,v),p.push(o[C],o[C+1],o[C+2]),E.push(R[C/3])}s.setAttribute("position",new je(d,3)),s.setAttribute("color",new je(p,3)),s.setAttribute("size",new je(E,1));const f=new _e({uniforms:{},vertexShader:`
          attribute float size;
          varying vec3 vColor;
          void main() {
            vColor = color;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * (400.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
          }
        `,fragmentShader:`
          varying vec3 vColor;
          void main() {

            vec2 center = gl_PointCoord - vec2(0.5);
            float distanceFromCenter = length(center);

            if (distanceFromCenter > 0.5) {
              discard;
            }


            float alpha = 1.0 - (distanceFromCenter / 0.5);
            alpha = pow(alpha, 2.0);

            gl_FragColor = vec4(vColor, alpha * 0.8);
          }
        `,transparent:!0,blending:Re,vertexColors:!0,depthWrite:!1}),me=new Oe(s,f);if(J.add(me),z.length>0){const C=new He;C.setAttribute("position",new je(z,3)),C.setAttribute("color",new je(oe,3));const n=new $e({vertexColors:!0,transparent:!0,opacity:.8,linewidth:2,blending:Re}),r=new Fe(C,n);J.add(r)}}else{s.setAttribute("position",new je(i,3)),s.setAttribute("color",new je(o,3)),s.setAttribute("size",new je(R,1));const c=new vt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Re,sizeAttenuation:!0}),t=new Oe(s,c);J.add(t)}const U=new re(P+999);for(let c=0;c<F;c++){const t=new Ge,d=U.uniform(-50,50),p=U.uniform(-20,20),E=U.uniform(-50,50),z=new Se(1.5,16,16),oe=new ke({color:0,transparent:!0,opacity:.9}),B=new V(z,oe);t.add(B),[{innerRadius:2,outerRadius:2.3,color:16777215,opacity:.8,emissive:16777164},{innerRadius:2.3,outerRadius:2.7,color:16755200,opacity:.7,emissive:16746496},{innerRadius:2.7,outerRadius:3.2,color:16729088,opacity:.6,emissive:16720384},{innerRadius:3.2,outerRadius:4,color:11141120,opacity:.5,emissive:6684672},{innerRadius:4,outerRadius:5,color:4456448,opacity:.3,emissive:2228224}].forEach((f,me)=>{const C=new Ye(f.innerRadius,f.outerRadius,32),n=new Ie({color:f.color,transparent:!0,opacity:f.opacity,emissive:f.emissive,emissiveIntensity:.3,side:qe}),r=new V(C,n);r.rotation.x=Math.PI/2,r.rotation.z=x.uniform(0,Math.PI*2),r.isAccretionRing=!0,r.rotationSpeed=.002+me*5e-4,t.add(r)}),t.position.set(d,p,E),J.add(t)}for(let c=0;c<Y;c++){const t=new Se(1.5,8,8),d=new Ie({color:16776960,emissive:16776960,emissiveIntensity:1}),p=new V(t,d);p.position.set(x.uniform(-u,u),x.uniform(-u/4,u/4),x.uniform(-u,u)),p.isPulsar=!0,p.pulseSpeed=x.uniform(1,3),J.add(p)}for(let c=0;c<G;c++){const t=new Ge,d=new Se(2,16,16),p=new Ie({color:16777215,emissive:16777215,emissiveIntensity:2}),E=new V(d,p);t.add(E);const z=new Xe(1,20,8),oe=new Ie({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),B=new V(z,oe);B.position.y=10,t.add(B);const _=new V(z,oe);_.position.y=-10,_.rotation.z=Math.PI,t.add(_),t.position.set(x.uniform(-u,u),x.uniform(-u/4,u/4),x.uniform(-u,u)),J.add(t)}const X=new Qe(4210752,.5);he.add(X);const Q=new wt(16777215,.5,1e3);Q.position.set(0,100,0),he.add(Q);const de=()=>{Z.current=requestAnimationFrame(de);const c=performance.now()/1e3;K.current&&(K.current.rotation.y+=.001),J.children.forEach(t=>{if(t.isPulsar){const d=t.pulseSpeed||1;t.scale.setScalar(1+Math.sin(Date.now()*.001*d)*.3)}if(t.isSingularityShader&&t instanceof V){const d=t.material;d.uniforms&&d.uniforms.time&&(d.uniforms.time.value=c);const p=t.shaderSpeed||1;t.rotation.y+=.001*p,t.rotation.x+=5e-4*p}if(t.isAccretionDisk&&t instanceof V){const d=t.material;d.uniforms&&d.uniforms.time&&(d.uniforms.time.value=c),t.rotation.z+=.002}if(t.isDistortionRing){const d=t.rotationSpeed||.001;t.rotation.x+=d,t.rotation.y+=d*.7,t.scale.setScalar(1+Math.sin(c*2)*.1)}if(t.isGlitchLines&&t instanceof Fe){const d=t.material;d.opacity=.2+Math.sin(c*3)*.2,t.rotation.z+=5e-4}t instanceof Ge&&t.children.forEach(d=>{if(d.isAccretionDisk&&d instanceof V){const p=d.material;p.uniforms&&p.uniforms.time&&(p.uniforms.time.value=c),d.rotation.z+=.002}if(d.isAccretionRing&&d instanceof V){const p=d.rotationSpeed||.002;d.rotation.z+=p}if(d.isDistortionRing){const p=d.rotationSpeed||.001;d.rotation.x+=p,d.rotation.y+=p*.7,d.scale.setScalar(1+Math.sin(c*2)*.1)}})}),D.current&&D.current.update(),le.render(he,ue)};de(),setTimeout(()=>{S(!0),ye(!0),H.current=!0},800);const N=()=>{if(!te.current||!le)return;const c=te.current,t=Math.min(c.clientWidth,c.clientHeight);le.setSize(t,t),ue.aspect=1,ue.updateProjectionMatrix()};return window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N),D.current&&D.current.dispose(),Z.current&&cancelAnimationFrame(Z.current),m&&le.domElement&&m.removeChild(le.domElement),le.dispose()}},[a,w,F,Y,G,P]);const ge=()=>{if(!q.current||!O.current||!xe.current||g)return;j(!0),D.current&&(D.current.enabled=!1);const m=q.current,A=O.current,b=xe.current,ae=m.domElement.width,he=m.domElement.height,ue=3840/ae,le=[];A.traverse(x=>{if(x.isPoints&&x.material){const l=x.material;if(l.size!==void 0&&(le.push({material:l,originalSize:l.size}),l.size=l.size*ue*1),l.uniforms&&l.uniforms.scale&&(le.push({material:l,originalScale:l.uniforms.scale.value}),l.uniforms.scale.value=l.uniforms.scale.value*ue*1),x.geometry&&x.geometry.attributes.size){const s=x.geometry.attributes.size,i=s.array.slice();le.push({geometry:x.geometry,originalSizeArray:i});for(let o=0;o<s.array.length;o++)s.array[o]*=ue*1;s.needsUpdate=!0}}});const $=3840,J=3840;m.setSize($,J),b.aspect=1,b.updateProjectionMatrix(),m.render(A,b),m.domElement.toBlob(x=>{if(x){const l=document.createElement("canvas"),s=l.getContext("2d");if(l.width=$,l.height=J,s){const i=new Image;i.onload=async()=>{s.drawImage(i,0,0),Ft(s,{imageWidth:$,imageHeight:J}),be&&await Ht(s,$,J,{type:"galaxy",stargateUrl:be}),l.toBlob(R=>{if(R){const u=URL.createObjectURL(R),M=document.createElement("a");M.href=u,M.download=`galaxy_${I||a}_${Date.now()}.png`,M.click(),URL.revokeObjectURL(u)}},"image/png",1)};const o=URL.createObjectURL(x);i.src=o}}le.forEach(({material:l,originalSize:s,originalScale:i,geometry:o,originalSizeArray:R})=>{if(s!==void 0&&(l.size=s),i!==void 0&&(l.uniforms.scale.value=i),o&&R){const u=o.attributes.size;for(let M=0;M<R.length;M++)u.array[M]=R[M];u.needsUpdate=!0}}),m.setSize(ae,he),b.aspect=1,b.updateProjectionMatrix(),D.current&&(D.current.enabled=!0),j(!1)},"image/png",1)};return e.jsxs("div",{className:"relative w-full h-full bg-black rounded",children:[e.jsx("canvas",{ref:se,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${ne?"opacity-0":"opacity-100"}`,style:{filter:ne?"blur(50px)":"none"}}),e.jsxs("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${ie?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:[e.jsx("div",{ref:te,className:"w-full h-full border border-white/20 rounded bg-black/20"}),e.jsx(_t,{isVisible:g}),ie&&I&&e.jsx("div",{className:"absolute bottom-0 left-0 p-2 text-white bg-black bg-opacity-50 max-w-xs rounded-tr-lg",children:e.jsx("h3",{className:"text-xs font-bold",children:I})}),ie&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 z-10",children:[e.jsx("button",{onClick:ge,disabled:g,className:`p-2 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg ${g?"bg-black/40 cursor-not-allowed opacity-50":"bg-black/60 hover:bg-black/80"}`,title:g?"Generating image...":"Download 4K screenshot",children:g?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(Dt,{className:"w-4 h-4 text-white"})}),T&&e.jsx("button",{onClick:T,disabled:g,className:`p-2 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg ${g?"bg-black/40 cursor-not-allowed opacity-50":"bg-black/60 hover:bg-black/80"}`,title:g?"Please wait...":"Expand to fullscreen",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]})]})},Ut=({galaxyType:a,numSystems:w,blackHoles:F,pulsars:Y,quasars:G,seed:P=12345,galaxyName:T})=>{const I=y.useRef(null),be=y.useRef(null),te=y.useRef(null),O=y.useRef(null),q=y.useRef(null),Z=y.useRef(null);class D{seed;constructor(se){this.seed=se}random(){const se=Math.sin(this.seed++)*1e4;return se-Math.floor(se)}uniform(se,H){return se+this.random()*(H-se)}gauss(se,H){let ie=0,S=0;for(;ie===0;)ie=this.random();for(;S===0;)S=this.random();const ne=Math.sqrt(-2*Math.log(ie))*Math.cos(2*Math.PI*S);return se+H*ne}randint(se,H){return Math.floor(this.uniform(se,H+1))}}return y.useEffect(()=>{if(!I.current)return;const K=I.current,se=K.clientWidth,H=K.clientHeight,ie=new Ke;ie.background=new De(17),be.current=ie;const S=new Je(45,se/H,.1,1e4);S.position.set(0,200,400),S.lookAt(0,0,0);const ne=new Ze({antialias:!0,alpha:!0});ne.setSize(se,H),ne.setClearColor(17,1),te.current=ne,K.appendChild(ne.domElement);const ye=new bt(S,ne.domElement);ye.enableDamping=!0,ye.dampingFactor=.05,ye.minDistance=50,ye.maxDistance=1200,ye.autoRotate=!0,ye.autoRotateSpeed=.5,ye.enablePan=!0,ye.enableZoom=!0,ye.target.set(0,0,0),q.current=ye;const g=new Ge;Z.current=g,ie.add(g);const j=new D(P),xe=j.uniform(0,2*Math.PI),re=new He,ge=[],m=[],A=[],b=200;let ae=w;if(a==="Spiral"){ae=Math.min(w,5e4);const l=4,s=2*Math.PI/l,i=.15,o=.5,R=.1;for(let u=0;u<ae*R;u++){const M=j.uniform(0,2*Math.PI),U=j.gauss(b*.1,b*.05),X=j.gauss(0,5),Q=U*Math.cos(M),de=U*Math.sin(M);ge.push(Q,X,de),m.push(1,1,1);const N=P+u*1337,c=new D(N),t=c.gauss(1,.3),d=c.random()<.05,p=c.random()<.3;let E=Math.max(.3,t);d&&(E*=3+c.uniform(0,2)),p&&(E*=.5+c.uniform(0,.3)),U<b*.2&&(E*=1.8+c.uniform(0,.7),m[m.length-3]=1.2,m[m.length-2]=1.1,m[m.length-1]=.9),A.push(Math.min(E*1.5,12))}for(let u=0;u<ae;u++){const M=o*Math.sqrt(u/ae)*2*Math.PI,U=u%l*s,X=b*Math.sqrt(u/ae),Q=X*Math.cos(M+U+xe)+j.uniform(-i*X,i*X),de=X*Math.sin(M+U+xe)+j.uniform(-i*X,i*X),N=j.gauss(0,3);ge.push(Q,N,de),m.push(1,1,.8);const c=P+u*1337,t=new D(c),d=t.gauss(.8,.25),p=t.random()<.03,E=t.random()<.4;let z=Math.max(.2,d);p&&(z*=2.5+t.uniform(0,1.5)),E&&(z*=.4+t.uniform(0,.2)),X>b*.7&&(z*=.8),A.push(Math.min(z*1.3,8))}}else if(a==="Elliptical"){ae=Math.min(w,1e5);for(let l=0;l<ae;l++){const s=j.uniform(0,2*Math.PI),i=j.uniform(-1,1),o=Math.sqrt(1-i*i),R=j.random(),u=Math.pow(R,.6),M=-Math.log(1-u*.98)*b*.35,U=M*o*Math.cos(s),X=M*i*.6,Q=M*o*Math.sin(s);ge.push(U,X,Q),m.push(1,.9,.7);const de=P+l*1337,N=new D(de),c=N.gauss(.6,.2),t=N.random()<.08,d=N.random()<.25;let p=Math.max(.2,c);t&&(p*=2+N.uniform(0,1)),d&&(p*=.6+N.uniform(0,.2)),Math.sqrt(U*U+X*X+Q*Q)<b*.3&&(p*=1.5+N.uniform(0,.5)),A.push(Math.min(p*1.4,7))}}else if(a==="Dwarf"){let l;w<=1500?l=1:w<=5e3?l=1+(w-1500)/3500*9:w<=15e3?l=10+(w-5e3)/1e4*40:l=50+Math.min((w-15e3)/35e3,1)*50,ae=Math.min(Math.floor(w/l),1e4);for(let s=0;s<ae;s++){const i=j.uniform(0,2*Math.PI),o=j.uniform(0,Math.PI),R=j.gauss(b/3,b*.3),u=R*Math.sin(o)*Math.cos(i),M=R*Math.cos(o)*.5,U=R*Math.sin(o)*Math.sin(i);ge.push(u,M,U),m.push(.8,.8,1);const X=P+s*1337,Q=new D(X),de=Q.gauss(.7,.3),N=Q.random()<.02,c=Q.random()<.6;let t=Math.max(.3,de);N&&(t*=2.5+Q.uniform(0,1)),c&&(t*=.5+Q.uniform(0,.3)),A.push(Math.min(t*1.2,5))}}else if(a==="Singularity Void"){ae=1e4;for(let n=0;n<ae;n++){const r=n/ae,v=r*30*Math.PI,k=b*(1-r*.8)+j.uniform(-10,10),h=(r-.5)*300+Math.sin(v*.5)*20,ee=k*Math.cos(v)+Math.sin(r*20)*10,ce=k*Math.sin(v)+Math.cos(r*20)*10;ge.push(ee,h,ce);const L=(r+Math.sin(v*.1))%1,W=new De;W.setHSL(L,1,.5+Math.sin(r*10)*.3),m.push(W.r,W.g,W.b),A.push(j.uniform(.3,2)*(1+Math.sin(r*50)*.5))}const l=(n,r,v=1)=>{const k=new Se(n,64,64),h=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,ee=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;
          
          void main() {
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);
            
            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;
            
            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;
            
            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x + 
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);
            
            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;
            
            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);
            
            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;
            
            gl_FragColor = vec4(color, ${r});
          }
        `,ce=new _e({uniforms:{time:{value:0},speed:{value:v}},vertexShader:h,fragmentShader:ee,transparent:!0,blending:Re,side:qe,depthWrite:!1}),L=new V(k,ce);return L.isSingularityShader=!0,L.shaderSpeed=v,L},s=l(250,.3,1);g.add(s);const i=l(180,.4,-.7);g.add(i);const o=l(120,.5,1.5);g.add(o);const R=l(300,.2,.5);R.scale.set(-1,1,1),g.add(R);const u=new Se(350,32,32),M=new _e({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            
            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          
          void main() {
            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;
            
            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:xt,depthWrite:!1}),U=new V(u,M);U.isSingularityShader=!0,U.shaderSpeed=.3,g.add(U);const X=new He,Q=[],de=[];for(let n=0;n<1e3;n++){const r=j.uniform(-b,b),v=j.uniform(-b/2,b/2),k=j.uniform(-b,b),h=j.uniform(-50,50),ee=j.uniform(-30,30),ce=j.uniform(-50,50);Q.push(r,v,k),Q.push(r+h,v+ee,k+ce);const L=j.random(),W=new De;W.setHSL(L,1,.6),de.push(W.r,W.g,W.b),de.push(W.r*.5,W.g*.5,W.b*.5)}X.setAttribute("position",new je(Q,3)),X.setAttribute("color",new je(de,3));const N=new $e({vertexColors:!0,transparent:!0,opacity:.4,blending:Re}),c=new Fe(X,N);c.isGlitchLines=!0,g.add(c);const t=new Ge,d=new Se(20,32,32),p=new ke({color:0,transparent:!0,opacity:.95}),E=new V(d,p);t.add(E);const z=new Ye(25,80,64),oe=new _e({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;
          
          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);
            
            // Swirling pattern
            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;
            
            // Colors from hot (inner) to cold (outer)
            vec3 hotColor = vec3(1.0, 0.5, 0.0); // Orange
            vec3 coldColor = vec3(0.0, 0.3, 1.0); // Blue
            vec3 color = mix(coldColor, hotColor, intensity);
            
            // Add swirl variation
            color *= (0.7 + swirl * 0.3);
            
            // Fade out at edges
            float alpha = intensity * 0.8;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:qe}),B=new V(z,oe);B.rotation.x=Math.PI/2,B.isAccretionDisk=!0,t.add(B);for(let n=0;n<8;n++){const r=30+n*20,v=new gt(r,1+n*.5,8,64),k=new ke({color:new De().setHSL((.7+n*.05)%1,1,.5),transparent:!0,opacity:.3-n*.03,wireframe:!0}),h=new V(v,k);h.rotation.x=j.uniform(0,Math.PI),h.rotation.y=j.uniform(0,Math.PI),h.isDistortionRing=!0,h.rotationSpeed=j.uniform(.001,.005)*(n%2===0?1:-1),t.add(h)}g.add(t);const _=new Xe(5,100,8),f=new Ie({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Re}),me=new V(_,f);me.position.y=50,g.add(me);const C=new V(_,f);C.position.y=-50,C.rotation.z=Math.PI,g.add(C)}if(a!=="Singularity Void"){const l=[],s=new D(P+999);for(let N=0;N<F;N++){const c=s.uniform(-50,50),t=s.uniform(-20,20),d=s.uniform(-50,50);l.push({x:c,y:t,z:d})}const i=[],o=[],R=[],u=[],M=[],U=.4,X=U*25;for(let N=0;N<ge.length;N+=3){const c=ge[N],t=ge[N+1],d=ge[N+2];let p=1/0,E=null;for(const z of l){const oe=Math.sqrt(Math.pow(c-z.x,2)+Math.pow(t-z.y,2)+Math.pow(d-z.z,2));oe<p&&(p=oe,E=z)}if(!(p<U))if(p<X&&E){const z=1-(p-U)/(X-U);E.x-c,E.y-t,E.z-d;const oe=Math.atan2(d-E.z,c-E.x),B=z*.8,_=8;for(let h=0;h<_-1;h++){const ee=h/(_-1),ce=(h+1)/(_-1),L=p*(1-ee*B*.7),W=oe+ee*B*1.5,pe=E.x+L*Math.cos(W),Me=t+(E.y-t)*ee*.3,Ae=E.z+L*Math.sin(W),ve=p*(1-ce*B*.7),fe=oe+ce*B*1.5,ze=E.x+ve*Math.cos(fe),Ce=t+(E.y-t)*ce*.3,we=E.z+ve*Math.sin(fe);u.push(pe,Me,Ae),u.push(ze,Ce,we)}const f=z*1.5,me=m[N],C=m[N+1],n=m[N+2],r=Math.min(me+f,2),v=Math.max(C*(1-f*.6),.1),k=Math.max(n*(1-f*.8),.1);for(let h=0;h<_-1;h++){const ee=h/(_-1),ce=(h+1)/(_-1),L=1-ee*z*.6,W=1-ce*z*.6,pe=f*(.5+ee*.5),Me=f*(.5+ce*.5);M.push(Math.min(r+pe*.3,2)*L,Math.max(v*(1-pe*.2),.1)*L,Math.max(k*(1-pe*.4),.1)*L),M.push(Math.min(r+Me*.3,2)*W,Math.max(v*(1-Me*.2),.1)*W,Math.max(k*(1-Me*.4),.1)*W)}i.push(c,t,d),o.push(r,v,k),R.push(Math.max(A[N/3]*(1-z*.5),.3))}else i.push(c,t,d),o.push(m[N],m[N+1],m[N+2]),R.push(A[N/3])}re.setAttribute("position",new je(i,3)),re.setAttribute("color",new je(o,3)),re.setAttribute("size",new je(R,1));const Q=new _e({uniforms:{},vertexShader:`
          attribute float size;
          varying vec3 vColor;
          void main() {
            vColor = color;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * (400.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
          }
        `,fragmentShader:`
          varying vec3 vColor;
          void main() {
            vec2 center = gl_PointCoord - vec2(0.5);
            float distanceFromCenter = length(center);
            
            if (distanceFromCenter > 0.5) {
              discard;
            }
            
            float alpha = 1.0 - (distanceFromCenter / 0.5);
            alpha = pow(alpha, 2.0);
            
            gl_FragColor = vec4(vColor, alpha * 0.8);
          }
        `,transparent:!0,blending:Re,vertexColors:!0,depthWrite:!1}),de=new Oe(re,Q);if(g.add(de),u.length>0){const N=new He;N.setAttribute("position",new je(u,3)),N.setAttribute("color",new je(M,3));const c=new $e({vertexColors:!0,transparent:!0,opacity:.8,linewidth:2,blending:Re}),t=new Fe(N,c);g.add(t)}}else{re.setAttribute("position",new je(ge,3)),re.setAttribute("color",new je(m,3)),re.setAttribute("size",new je(A,1));const l=new vt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Re,sizeAttenuation:!0}),s=new Oe(re,l);g.add(s)}const he=new D(P+999);for(let l=0;l<F;l++){const s=new Ge,i=he.uniform(-50,50),o=he.uniform(-20,20),R=he.uniform(-50,50),u=new Se(1.5,16,16),M=new ke({color:0,transparent:!0,opacity:.9}),U=new V(u,M);s.add(U),[{innerRadius:2,outerRadius:2.3,color:16777215,opacity:.8,emissive:16777164},{innerRadius:2.3,outerRadius:2.7,color:16755200,opacity:.7,emissive:16746496},{innerRadius:2.7,outerRadius:3.2,color:16729088,opacity:.6,emissive:16720384},{innerRadius:3.2,outerRadius:4,color:11141120,opacity:.5,emissive:6684672},{innerRadius:4,outerRadius:5,color:4456448,opacity:.3,emissive:2228224}].forEach((Q,de)=>{const N=new Ye(Q.innerRadius,Q.outerRadius,32),c=new Ie({color:Q.color,transparent:!0,opacity:Q.opacity,emissive:Q.emissive,emissiveIntensity:.3,side:qe}),t=new V(N,c);t.rotation.x=Math.PI/2,t.rotation.z=j.uniform(0,Math.PI*2),t.isAccretionRing=!0,t.rotationSpeed=.002+de*5e-4,s.add(t)}),s.position.set(i,o,R),g.add(s)}for(let l=0;l<Y;l++){const s=new Se(1.5,8,8),i=new Ie({color:16776960,emissive:16776960,emissiveIntensity:1}),o=new V(s,i);o.position.set(j.uniform(-b,b),j.uniform(-b/4,b/4),j.uniform(-b,b)),o.isPulsar=!0,o.pulseSpeed=j.uniform(1,3),g.add(o)}for(let l=0;l<G;l++){const s=new Ge,i=new Se(2,16,16),o=new Ie({color:16777215,emissive:16777215,emissiveIntensity:2}),R=new V(i,o);s.add(R);const u=new Xe(1,20,8),M=new Ie({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),U=new V(u,M);U.position.y=10,s.add(U);const X=new V(u,M);X.position.y=-10,X.rotation.z=Math.PI,s.add(X),s.position.set(j.uniform(-b,b),j.uniform(-b/4,b/4),j.uniform(-b,b)),g.add(s)}const ue=new Qe(4210752,.5);ie.add(ue);const le=new wt(16777215,.5,1e3);le.position.set(0,100,0),ie.add(le);const $=l=>{l.key==="Escape"&&document.dispatchEvent(new CustomEvent("galaxy-close-fullscreen"))};document.addEventListener("keydown",$);const J=()=>{O.current=requestAnimationFrame(J);const l=performance.now()/1e3;Z.current&&(Z.current.rotation.y+=.001),g.children.forEach(s=>{if(s.isPulsar){const i=s.pulseSpeed||1;s.scale.setScalar(1+Math.sin(Date.now()*.001*i)*.3)}if(s.isSingularityShader&&s instanceof V){const i=s.material;i.uniforms&&i.uniforms.time&&(i.uniforms.time.value=l);const o=s.shaderSpeed||1;s.rotation.y+=.001*o,s.rotation.x+=5e-4*o}if(s.isAccretionDisk&&s instanceof V){const i=s.material;i.uniforms&&i.uniforms.time&&(i.uniforms.time.value=l),s.rotation.z+=.002}if(s.isDistortionRing){const i=s.rotationSpeed||.001;s.rotation.x+=i,s.rotation.y+=i*.7,s.scale.setScalar(1+Math.sin(l*2)*.1)}if(s.isGlitchLines&&s instanceof Fe){const i=s.material;i.opacity=.2+Math.sin(l*3)*.2,s.rotation.z+=5e-4}s instanceof Ge&&s.children.forEach(i=>{if(i.isAccretionDisk&&i instanceof V){const o=i.material;o.uniforms&&o.uniforms.time&&(o.uniforms.time.value=l),i.rotation.z+=.002}if(i.isAccretionRing&&i instanceof V){const o=i.rotationSpeed||.002;i.rotation.z+=o}if(i.isDistortionRing){const o=i.rotationSpeed||.001;i.rotation.x+=o,i.rotation.y+=o*.7,i.scale.setScalar(1+Math.sin(l*2)*.1)}})}),q.current&&q.current.update(),ne.render(ie,S)};J();const x=()=>{if(!I.current||!ne)return;const l=I.current,s=l.clientWidth,i=l.clientHeight;ne.setSize(s,i),S.aspect=s/i,S.updateProjectionMatrix()};return window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x),document.removeEventListener("keydown",$),q.current&&q.current.dispose(),O.current&&cancelAnimationFrame(O.current),K&&ne.domElement&&K.removeChild(ne.domElement),ne.dispose()}},[a,w,F,Y,G,P]),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{ref:I,className:"w-full h-full"}),T&&e.jsx("div",{className:"absolute bottom-0 left-0 p-2 text-white bg-black bg-opacity-50 max-w-xs rounded-tr-lg",children:e.jsx("h3",{className:"text-xs font-bold",children:T})})]})},Wt=({galaxyUrl:a,galaxyType:w="Spiral",numSystems:F=1e4,blackHoles:Y=5,pulsars:G=10,quasars:P=3,galaxyName:T})=>{const[I,be]=y.useState("Aligning Stargate..."),[te,O]=y.useState(!1),[q,Z]=y.useState(!1),[D,K]=y.useState(!1),[se,H]=y.useState(!1);y.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){be("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),O(!0);const ne=(re,ge)=>Array.from({length:ge},()=>re[Math.floor(Math.random()*re.length)]).join(""),ye=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:35},{chars:"0123456789ABCDEF",duration:20,iterations:50},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:'\",.<>?/`~",duration:15,iterations:100}];let g=0,j=0;const xe=()=>{if(g>=ye.length){const ge="Stargate system aligned";let m=0;be("");const A=()=>{m<ge.length?(be(ge.substring(0,m+1)),m++,setTimeout(A,30)):O(!1)};A();return}const re=ye[g];be(ne(re.chars,32)),j++,j>=re.iterations&&(g++,j=0),setTimeout(xe,re.duration)};xe()},[]),y.useEffect(()=>{const S=document.createElement("style");return S.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(S),()=>{document.head.removeChild(S)}},[]);const ie=()=>{K(!0),setTimeout(()=>{Z(!1),K(!1)},300)};return y.useEffect(()=>(document.addEventListener("galaxy-close-fullscreen",ie),()=>{document.removeEventListener("galaxy-close-fullscreen",ie)}),[]),y.useEffect(()=>{if(se){const S=setTimeout(()=>H(!1),50);return()=>clearTimeout(S)}},[se]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Galaxy Visualization"})}),e.jsx("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:e.jsx($t,{galaxyType:w,numSystems:F,blackHoles:Y,pulsars:G,quasars:P,galaxyName:T,galaxyUrl:a,onExpandClick:()=>{Z(!0),H(!0)}})}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:a,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${te?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),I]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]}),q&&at.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${D||se?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${D||se?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:"Galaxy View"})}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Galaxy Visualization"}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Type: ",w," • Systems: ",F.toLocaleString()]})]})}),e.jsx("button",{onClick:ie,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(Ut,{galaxyType:w,numSystems:F,blackHoles:Y,pulsars:G,quasars:P,galaxyName:T})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},Yt=({systems:a,coordinates:w})=>{const[F,Y]=y.useState(new Map);return y.useEffect(()=>{(()=>{try{const P=new Map;a.forEach(T=>{const I=Rt(w,T.index,T.num_planets||1);P.set(T.index,I)}),Y(P)}catch{}})()},[w,a]),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:a.map(G=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[(()=>{const P=F.get(G.index)||"none";return P==="complete"?e.jsx("div",{className:"absolute top-1 right-1 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}):P==="partial"?e.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500/20 border border-yellow-500/50 text-yellow-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"PARTIAL"}):null})(),e.jsxs("button",{onClick:()=>window.location.href=`/system/${G.index}`,className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["#",G.number]}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:G.name})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},G.index))}),a.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No systems found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This galaxy appears to be empty"})]})]})},Xt=({currentGalaxy:a})=>{const[w,F]=y.useState(!1),[Y,G]=y.useState(!1),[P,T]=y.useState(!0),I=1e7;y.useEffect(()=>{const[Z,D,K]=a.coordinates,se=!(Z===0&&D===0&&K===0),H=!(Z===I&&D===I&&K===I);F(se),G(H),T(!1)},[a.coordinates]);const be=()=>{const[Z,D,K]=a.coordinates;return K>0?[Z,D,K-1]:D>0?[Z,D-1,I]:Z>0?[Z-1,I,I]:[0,0,0]},te=()=>{const[Z,D,K]=a.coordinates;return K<I?[Z,D,K+1]:D<I?[Z,D+1,0]:Z<I?[Z+1,0,0]:[I,I,I]},O=()=>{if(w){if(!Be.canAffordTravel("galaxy",1)){Be.executeTravel("galaxy",1);return}if(!Be.executeTravel("galaxy",1))return;const[D,K,se]=be(),H=document.createElement("form");H.method="POST",H.action="/navigate";const ie=document.createElement("input");ie.type="hidden",ie.name="x",ie.value=D.toString();const S=document.createElement("input");S.type="hidden",S.name="y",S.value=K.toString();const ne=document.createElement("input");ne.type="hidden",ne.name="z",ne.value=se.toString(),H.appendChild(ie),H.appendChild(S),H.appendChild(ne),document.body.appendChild(H),H.submit()}},q=()=>{if(Y){if(!Be.canAffordTravel("galaxy",1)){Be.executeTravel("galaxy",1);return}if(!Be.executeTravel("galaxy",1))return;const[D,K,se]=te(),H=document.createElement("form");H.method="POST",H.action="/navigate";const ie=document.createElement("input");ie.type="hidden",ie.name="x",ie.value=D.toString();const S=document.createElement("input");S.type="hidden",S.name="y",S.value=K.toString();const ne=document.createElement("input");ne.type="hidden",ne.name="z",ne.value=se.toString(),H.appendChild(ie),H.appendChild(S),H.appendChild(ne),document.body.appendChild(H),H.submit()}};return P?null:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:O,disabled:!w,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${w?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:q,disabled:!Y,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${Y?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})},Ot=({page:a,prevPage:w,nextPage:F,finish:Y})=>{const G="px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105",P="bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg",T="bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white border border-white/20";return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 sm:gap-4 flex-wrap",children:[a!==1&&e.jsxs("button",{onClick:()=>window.location.href="/galaxy/1",className:`${G} ${T}`,title:"First page",children:[e.jsx("span",{className:"hidden sm:inline",children:"First"}),e.jsx("span",{className:"sm:hidden",children:"«"})]}),w&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${w}`,className:`${G} ${T}`,title:"Previous page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"‹"})]}),(()=>{const I=[],te=Math.max(1,a-2),O=Math.min(Y,a+2);te>1&&(I.push(e.jsx("button",{onClick:()=>window.location.href="/galaxy/1",className:`${G} ${T}`,children:"1"},1)),te>2&&I.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"start-ellipsis")));for(let q=te;q<=O;q++)q===a?I.push(e.jsx("span",{className:`${G} ${P} cursor-default`,children:q},q)):I.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${q}`,className:`${G} ${T} cursor-pointer`,children:q},q));return O<Y&&(O<Y-1&&I.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"end-ellipsis")),I.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${Y}`,className:`${G} ${T}`,children:Y},Y))),I})(),F&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${F}`,className:`${G} ${T}`,title:"Next page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"›"})]}),a!==Y&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${Y}`,className:`${G} ${T}`,title:"Last page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Last"}),e.jsx("span",{className:"sm:hidden",children:"»"})]})]}),e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-400",children:["Page ",a," of ",Y]})]})},rt=({galaxy:a,systems:w,galaxy_url:F,version:Y,page:G,prev_page:P,next_page:T,finish:I,image_url:be})=>{const[te]=y.useState(a.coordinates.join(","));y.useEffect(()=>{document.body.setAttribute("data-coordinates",te),Ct(te)},[te]);const O=q=>q.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsx(Et,{}),e.jsxs("div",{className:"relative z-10 pt-1",children:[e.jsx(kt,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["Galaxy '",O(a.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Coordinates ",a.coordinates.join(", ")]})]}),e.jsx(Xt,{currentGalaxy:a}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(Wt,{galaxyUrl:F,galaxyType:a.galaxy_type,numSystems:a.num_systems,blackHoles:a.black_holes,pulsars:a.pulsars,quasars:a.quasars,galaxyName:O(a.name)})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(qt,{galaxy:a})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Systems in '",O(a.name),"'"]}),e.jsx(Yt,{systems:w,coordinates:te})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsx("span",{className:"text-base sm:text-lg",children:"← Go Back to Planetary Index"})})}),e.jsx(Ot,{page:G,prevPage:P,nextPage:T,finish:I})]}),e.jsx(Tt,{version:Y})]}),e.jsx(At,{}),e.jsx(Pt,{currentLocation:{type:"galaxy",name:a.name,coordinates:a.coordinates.join(",")}})]})};document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("atlas-react-root");if(!a)return;const w=F=>{const Y=document.getElementById(F);if(!Y||!Y.textContent)return null;try{return JSON.parse(Y.textContent.trim())}catch{return null}};try{const F=w("data-galaxy")||{},Y=w("data-systems")||[],G=w("data-navigation")||{},P=w("data-common")||{},T={galaxy:{name:F.name||"Unknown Galaxy",coordinates:F.coordinates||[0,0,0],galaxy_type:F.galaxy_type||"Unknown",num_systems:F.num_systems||0,black_holes:F.black_holes||0,pulsars:F.pulsars||0,quasars:F.quasars||0},systems:Y,galaxy_url:G.galaxy_url||"#",version:P.version||"1.0.0",page:G.page||1,prev_page:G.prev_page,next_page:G.next_page,finish:G.finish||1,image_url:P.image_url||""};ot.createRoot(a).render(st.createElement(rt,T))}catch{const Y={galaxy:{name:"Unknown Galaxy",coordinates:[0,0,0],galaxy_type:"Unknown",num_systems:0,black_holes:0,pulsars:0,quasars:0},systems:[],galaxy_url:"#",version:"1.0.0",page:1,finish:1,image_url:""};ot.createRoot(a).render(st.createElement(rt,Y))}});
