const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["atlas_BNttTq4Iw8zF0fCEEJ3BU.js","atlas_Bv5zr7cG9joXJ1l7Eo-6s.js","atlas_SPyfQU6Spv1u19LNdvRDW.js","atlas_CvF2r7w63uLZ7dJvHaR2x.css"])))=>i.map(i=>d[i]);
import{r as y,j as m}from"./atlas_Bv5zr7cG9joXJ1l7Eo-6s.js";import{L as N,U as C,R}from"./atlas_BNttTq4Iw8zF0fCEEJ3BU.js";class k{static encodeUrl(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_")}static generateGalaxyUrl(e,t=1){const n=`coordinates=${e[0]},${e[1]},${e[2]}&page=${t}`,r=this.encodeUrl(n);return`${window.location.origin}/stargate/${r}`}static generateSystemUrl(e,t,n=1){const r=`coordinates=${e[0]},${e[1]},${e[2]}&system=${t}&page=${n}`,l=this.encodeUrl(r);return`${window.location.origin}/stargate/${l}`}static generatePlanetUrl(e,t,n,r=1){const l=`coordinates=${e[0]},${e[1]},${e[2]}&system=${t}&planet=${n.toLowerCase()}&page=${r}`,s=this.encodeUrl(l);return`${window.location.origin}/stargate/${s}`}static getCurrentPage(){try{const t=new URLSearchParams(window.location.search).get("page");if(t)return parseInt(t,10);const n=window.location.pathname.match(/\/galaxy\/(\d+)/);return n?parseInt(n[1],10):1}catch{return 1}}}const G=({type:f,name:e,coordinates:t,systemIndex:n,planetName:r,className:l=""})=>{const[s,c]=y.useState(!1),[p,o]=y.useState(!1),u=()=>{try{const a=t.split(",").map(Number),g=k.getCurrentPage();switch(f){case"galaxy":return k.generateGalaxyUrl(a,g);case"system":if(n!==void 0)return k.generateSystemUrl(a,n,g);break;case"planet":if(n!==void 0&&r)return k.generatePlanetUrl(a,n,r,g);break}return window.location.pathname}catch(a){return console.error("Error generating stargate URL:",a),window.location.pathname}};y.useEffect(()=>{const a=N.getLocations(),g=u(),v=a.some(h=>h.stargateUrl===g);c(v)},[t,n,r,f]);const d=async()=>{try{const a=u();await N.saveLocation({name:e,type:f,stargateUrl:a})?(o(!0),setTimeout(()=>{c(!0),o(!1)},300)):console.log("User cancelled save operation")}catch(a){console.error("Error saving location:",a),o(!1)}},i=a=>a.replace(/_/g," ");return m.jsx(m.Fragment,{children:m.jsx("button",{onClick:d,disabled:s||p,className:`inline-flex items-center space-x-1 px-1.5 py-0.5 rounded transition-all duration-200 text-[10px] font-medium h-[21px] box-border ${s?"bg-green-500/20 border border-green-500/50 text-green-400 cursor-default":p?"bg-blue-500/20 border border-blue-500/50 text-blue-400 cursor-wait":"bg-white/10 hover:bg-white/20 border border-white/20 hover:border-white/40 text-white hover:text-blue-300"} ${l}`,title:s?"Location saved":`Save ${i(e)} to bookmarks`,children:p?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m.jsx("span",{className:"text-[10px] uppercase",children:"Saving..."})]}):s?m.jsxs(m.Fragment,{children:[m.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),m.jsx("span",{className:"text-[10px] uppercase",children:"Saved"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),m.jsx("span",{className:"text-[10px] uppercase",children:"Save"})]})})})},T="modulepreload",F=function(f){return"/atlas-ui/react/dist/"+f},j={},_=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let p=function(o){return Promise.all(o.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=s?.nonce||s?.getAttribute("nonce");r=p(t.map(o=>{if(o=F(o),o in j)return;j[o]=!0;const u=o.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const i=document.createElement("link");if(i.rel=u?"stylesheet":T,u||(i.as="script"),i.crossOrigin="",i.href=o,c&&i.setAttribute("nonce",c),document.head.appendChild(i),u)return new Promise((a,g)=>{i.addEventListener("load",a),i.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${o}`)))})}))}function l(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return r.then(s=>{for(const c of s||[])c.status==="rejected"&&l(c.reason);return e().catch(l)})},A={"Z-Divinium":{antimatter:100,element115:150,deuterium:80},Oganesson:{antimatter:50,element115:70,deuterium:40},Tennessine:{antimatter:50,element115:70,deuterium:40},Livermorium:{antimatter:50,element115:70,deuterium:40},Moscovium:{antimatter:50,element115:70,deuterium:40},Flerovium:{antimatter:50,element115:70,deuterium:40},Nihonium:{antimatter:50,element115:70,deuterium:40},Copernicium:{antimatter:50,element115:70,deuterium:40},Roentgenium:{antimatter:40,element115:55,deuterium:35},Darmstadtium:{antimatter:40,element115:55,deuterium:35},Meitnerium:{antimatter:40,element115:55,deuterium:35},Hassium:{antimatter:35,element115:45,deuterium:30},Bohrium:{antimatter:35,element115:45,deuterium:30},Seaborgium:{antimatter:35,element115:45,deuterium:30},Dubnium:{antimatter:35,element115:45,deuterium:30},Rutherfordium:{antimatter:35,element115:45,deuterium:30},Lawrencium:{antimatter:30,element115:40,deuterium:25},Nobelium:{antimatter:30,element115:40,deuterium:25},Mendelevium:{antimatter:30,element115:40,deuterium:25},Fermium:{antimatter:30,element115:40,deuterium:25},Einsteinium:{antimatter:30,element115:40,deuterium:25},Californium:{antimatter:30,element115:40,deuterium:25},Berkelium:{antimatter:30,element115:40,deuterium:25},Curium:{antimatter:25,element115:35,deuterium:20},Americium:{antimatter:25,element115:35,deuterium:20},Plutonium:{antimatter:25,element115:35,deuterium:20},Neptunium:{antimatter:25,element115:35,deuterium:20},Uranium:{antimatter:25,element115:35,deuterium:20},Protactinium:{antimatter:25,element115:35,deuterium:20},Thorium:{antimatter:25,element115:35,deuterium:20},Actinium:{antimatter:25,element115:35,deuterium:20},Radium:{antimatter:25,element115:35,deuterium:20},Francium:{antimatter:25,element115:35,deuterium:20},Radon:{antimatter:20,element115:28,deuterium:18},Astatine:{antimatter:20,element115:28,deuterium:18},Polonium:{antimatter:20,element115:28,deuterium:18},Bismuth:{antimatter:18,element115:25,deuterium:15},Lead:{antimatter:18,element115:25,deuterium:15},Thallium:{antimatter:18,element115:25,deuterium:15},Mercury:{antimatter:18,element115:25,deuterium:15},Gold:{antimatter:18,element115:25,deuterium:15},Platinum:{antimatter:16,element115:22,deuterium:14},Iridium:{antimatter:16,element115:22,deuterium:14},Osmium:{antimatter:16,element115:22,deuterium:14},Rhenium:{antimatter:15,element115:20,deuterium:12},Tungsten:{antimatter:15,element115:20,deuterium:12},Tantalum:{antimatter:15,element115:20,deuterium:12},Hafnium:{antimatter:15,element115:20,deuterium:12},Lutetium:{antimatter:12,element115:16,deuterium:10},Ytterbium:{antimatter:12,element115:16,deuterium:10},Thulium:{antimatter:12,element115:16,deuterium:10},Erbium:{antimatter:11,element115:15,deuterium:9},Holmium:{antimatter:11,element115:15,deuterium:9},Dysprosium:{antimatter:11,element115:15,deuterium:9},Terbium:{antimatter:10,element115:14,deuterium:8},Gadolinium:{antimatter:10,element115:14,deuterium:8},Europium:{antimatter:9,element115:12,deuterium:7},Samarium:{antimatter:9,element115:12,deuterium:7},Promethium:{antimatter:9,element115:12,deuterium:7},Neodymium:{antimatter:9,element115:12,deuterium:7},Praseodymium:{antimatter:9,element115:12,deuterium:7},Cerium:{antimatter:8,element115:11,deuterium:6},Lanthanum:{antimatter:8,element115:11,deuterium:6},Barium:{antimatter:7,element115:9,deuterium:5},Cesium:{antimatter:7,element115:9,deuterium:5},Xenon:{antimatter:7,element115:9,deuterium:5},Iodine:{antimatter:7,element115:9,deuterium:5},Tellurium:{antimatter:7,element115:9,deuterium:5},Antimony:{antimatter:6,element115:8,deuterium:4},Tin:{antimatter:6,element115:8,deuterium:4},Indium:{antimatter:6,element115:8,deuterium:4},Cadmium:{antimatter:5,element115:7,deuterium:4},Silver:{antimatter:5,element115:7,deuterium:4},Palladium:{antimatter:5,element115:7,deuterium:4},Rhodium:{antimatter:5,element115:7,deuterium:4},Ruthenium:{antimatter:4,element115:6,deuterium:3},Technetium:{antimatter:4,element115:6,deuterium:3},Molybdenum:{antimatter:4,element115:6,deuterium:3},Niobium:{antimatter:4,element115:6,deuterium:3},Tritium:{antimatter:8,element115:10,deuterium:15},Zirconium:{antimatter:3,element115:4,deuterium:2},Yttrium:{antimatter:3,element115:4,deuterium:2},Strontium:{antimatter:3,element115:4,deuterium:2},Rubidium:{antimatter:3,element115:4,deuterium:2},Krypton:{antimatter:3,element115:4,deuterium:2},Bromine:{antimatter:3,element115:4,deuterium:2},Selenium:{antimatter:3,element115:4,deuterium:2},Arsenic:{antimatter:3,element115:4,deuterium:2},Beryllium:{antimatter:3,element115:4,deuterium:2},Scandium:{antimatter:3,element115:4,deuterium:2},Germanium:{antimatter:2,element115:3,deuterium:2},Gallium:{antimatter:2,element115:3,deuterium:2},Zinc:{antimatter:2,element115:3,deuterium:2},Copper:{antimatter:2,element115:3,deuterium:2},Lithium:{antimatter:2,element115:3,deuterium:2},Fluorine:{antimatter:2,element115:3,deuterium:2},Titanium:{antimatter:2,element115:3,deuterium:2},Vanadium:{antimatter:2,element115:3,deuterium:2},Chromium:{antimatter:2,element115:3,deuterium:2},Cobalt:{antimatter:1,element115:2,deuterium:1},Manganese:{antimatter:1,element115:2,deuterium:1},Nickel:{antimatter:1,element115:2,deuterium:1},Calcium:{antimatter:1,element115:2,deuterium:1},Argon:{antimatter:1,element115:1,deuterium:1},Chlorine:{antimatter:1,element115:1,deuterium:1},Phosphorus:{antimatter:1,element115:1,deuterium:1},Boron:{antimatter:1,element115:1,deuterium:1},Potassium:{antimatter:1,element115:1,deuterium:1},Sodium:{antimatter:1,element115:1,deuterium:1},Aluminum:{antimatter:1,element115:1,deuterium:1},Sulfur:{antimatter:0,element115:1,deuterium:1},Magnesium:{antimatter:0,element115:1,deuterium:1},Silicon:{antimatter:0,element115:1,deuterium:1},Iron:{antimatter:0,element115:1,deuterium:1},Neon:{antimatter:0,element115:1,deuterium:0},Nitrogen:{antimatter:0,element115:0,deuterium:1},Carbon:{antimatter:0,element115:0,deuterium:1},Oxygen:{antimatter:0,element115:0,deuterium:1},Helium:{antimatter:0,element115:0,deuterium:0},Hydrogen:{antimatter:0,element115:0,deuterium:0}};function I(f){let e={antimatter:0,element115:0,deuterium:0};return f.forEach(t=>{const n=t.trim(),r=A[n];r&&(e.antimatter+=r.antimatter,e.element115+=r.element115,e.deuterium+=r.deuterium)}),e.antimatter===0&&e.element115===0&&e.deuterium===0&&(e={antimatter:1,element115:1,deuterium:2}),e}class b{static generateLocationId(e,t,n,r){switch(e){case"galaxy":return`galaxy_${t}`;case"system":return`system_${t}_${n}`;case"planet":return`planet_${t}_${n}_${r?.toLowerCase()}`;default:return`unknown_${t}`}}static canCollectFromLocation(e){return C.canCollectFromLocation(e)}static getTimeUntilNextCollection(e){return C.getTimeUntilNextCollection(e)}static calculateReward(e,t,n=0,r,l=!1){if(e==="planet"&&r?.elements&&r.elements.length>0){const i=I(r.elements),a=n>3?Math.max(.4,1-(n-3)*.15):1,g=.9+Math.random()*.2,v=Math.floor(i.antimatter*a*g),h=Math.floor(i.element115*a*g),L=Math.floor(i.deuterium*a*g);let S={antimatter:i.antimatter>0&&v===0?i.antimatter:v,element115:i.element115>0&&h===0?i.element115:h,deuterium:i.deuterium>0&&L===0?i.deuterium:L};if(l){const x=C.getUpgrade().multiplier;S={antimatter:Math.floor(S.antimatter*x),element115:Math.floor(S.element115*x),deuterium:Math.floor(S.deuterium*x)}}return S}const c={galaxy:{antimatter:80,element115:60,deuterium:50},system:{antimatter:50,element115:60,deuterium:50},planet:{antimatter:18,element115:22,deuterium:27}}[e];let p=1;e==="planet"&&!r?.elements&&t&&(p=.5+this.hashCoordinates(t)*1.5);const o=n>3?Math.max(.4,1-(n-3)*.15):1,u=.9+Math.random()*.2;let d={antimatter:Math.floor(c.antimatter*p*o*u),element115:Math.floor(c.element115*p*o*u),deuterium:Math.floor(c.deuterium*p*o*u)};if(l){const a=C.getUpgrade().multiplier;d={antimatter:Math.floor(d.antimatter*a),element115:Math.floor(d.element115*a),deuterium:Math.floor(d.deuterium*a)}}return d}static hashCoordinates(e){if(!e||typeof e!="string")return Math.random();let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t=t&t}return Math.abs(t)/2147483647}static getDiscoveryBonus(e){return e<=15?2.5:e<=35?1.8:e<=50?1.3:1}static collectResources(e,t,n,r){if(!this.canCollectFromLocation(e))return null;const l=C.getCollectionCount(e);let s=this.calculateReward(t,n,l,r);const p=C.getUpgrade().multiplier,o=C.getCollectionStreakInfo();let u=o.streakMultiplier;const d=this.getDiscoveryBonus(o.dailyCollections);return u*=d,u*=p,u>1&&(s={antimatter:Math.floor(s.antimatter*u),element115:Math.floor(s.element115*u),deuterium:Math.floor(s.deuterium*u)}),C.markLocationCollected(e),C.addResources(s),s}static getLocationCollection(e){const t=C.getCollectionCount(e);return t>0?{totalCollections:t}:null}static showCollectionSuccess(e,t,n,r){const l=document.createElement("div");l.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-green-900/90 to-blue-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-green-500/50",l.style.animation="slideInDown 0.3s ease-out";const c={galaxy:"🌌",system:"⭐",planet:"🪐"}[t]||"📦",p=document.createElement("div");p.className="flex items-center space-x-3";const o=document.createElement("span");o.className="text-2xl",o.textContent=c;const u=document.createElement("div"),d=document.createElement("div");d.className="text-sm font-bold text-green-300",r?d.textContent="🎉 First Time Mining - Bonus Applied!":d.textContent="Resources Collected!";const i=document.createElement("div");i.className="text-xs text-green-200 mt-1 flex gap-3";const a=document.createElement("span");a.className="text-purple-300",a.textContent=`+${e.antimatter} AM`;const g=document.createElement("span");g.className="text-cyan-300",g.textContent=`+${e.element115} E115`;const v=document.createElement("span");if(v.className="text-orange-300",v.textContent=`+${e.deuterium} D`,i.appendChild(a),i.appendChild(g),i.appendChild(v),u.appendChild(d),u.appendChild(i),r){const h=document.createElement("div");h.className="text-xs text-yellow-300 mt-1 font-bold",h.textContent="⭐ First time on this planet!",u.appendChild(h)}if(n?.discoveryBonus>1){const h=document.createElement("div");h.className="text-xs text-yellow-300 mt-1",n.discoveryBonus>=2.5?h.textContent="🎉 Daily Bonus: 2.5x (First 15 discoveries today)":n.discoveryBonus>=1.8?h.textContent="✨ Daily Bonus: 1.8x (Discoveries 16-35 today)":n.discoveryBonus>=1.3&&(h.textContent="🌟 Daily Bonus: 1.3x (Discoveries 36-50 today)"),u.appendChild(h)}if(n?.streakBonus){const h=document.createElement("div");h.className="text-xs text-purple-300 mt-1",h.textContent="🔥 Streak Bonus: +25%",u.appendChild(h)}if(p.appendChild(o),p.appendChild(u),l.appendChild(p),!document.getElementById("collection-toast-styles")){const h=document.createElement("style");h.id="collection-toast-styles",h.textContent=`
        @keyframes slideInDown {
          from {
            transform: translate(-50%, -100%);
            opacity: 0;
          }
          to {
            transform: translate(-50%, 0);
            opacity: 1;
          }
        }
        @keyframes slideOutUp {
          from {
            transform: translate(-50%, 0);
            opacity: 1;
          }
          to {
            transform: translate(-50%, -100%);
            opacity: 0;
          }
        }
      `,document.head.appendChild(h)}document.body.appendChild(l),setTimeout(()=>{l.style.animation="slideOutUp 0.3s ease-in forwards",setTimeout(()=>{l.remove()},300)},3e3)}static getCollectionStats(){const e=C.getStats();return{totalCollections:e.totalCollections,uniqueLocations:e.totalCollections,totalResourcesGathered:{antimatter:e.totalResourcesCollected.antimatter,element115:e.totalResourcesCollected.element115,deuterium:e.totalResourcesCollected.deuterium}}}}const O=({locationType:f,locationId:e,coordinates:t,systemIndex:n,planetName:r,planetElements:l,className:s=""})=>{const[c,p]=y.useState(!1),[o,u]=y.useState(0),[d,i]=y.useState(!1),[a,g]=y.useState(0);y.useEffect(()=>{const w=b.generateLocationId(f,t,n,r),x=()=>{p(b.canCollectFromLocation(w)),u(b.getTimeUntilNextCollection(w));const M=b.getLocationCollection(w);g(M?.totalCollections||0)};x();const $=setInterval(x,3e4);return()=>clearInterval($)},[f,t,n,r]);const v=async()=>{i(!0);const w=b.generateLocationId(f,t,n,r),x=a===0,$=l?{elements:l}:void 0,M=b.collectResources(w,f,t,$);if(M){const{UnifiedSpaceshipStorage:B}=await _(async()=>{const{UnifiedSpaceshipStorage:E}=await import("./atlas_BNttTq4Iw8zF0fCEEJ3BU.js").then(D=>D.e);return{UnifiedSpaceshipStorage:E}},__vite__mapDeps([0,1,2,3])),U=B.getCollectionStreakInfo(),P=a<=15?2.5:a<=35?1.8:a<=50?1.3:1;b.showCollectionSuccess(M,f,{streakBonus:U.streakMultiplier>1,discoveryBonus:P},x),p(!1),u(1),g(E=>E+1),R.emit("resources_updated"),R.emit("mining_completed",M)}setTimeout(()=>i(!1),1e3)},h=()=>d?"Mining...":!c&&o>0?`${Math.ceil(o*60)}m`:"Mine",L=()=>d?m.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):!c&&o>0?m.jsxs("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"}),m.jsx("path",{d:"M13 7h-2v5.414l3.293 3.293 1.414-1.414L13 11.586z"})]}):m.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4"})]}),S=()=>{const w=l?{elements:l}:void 0,x=b.calculateReward(f,t,a,w,!0);return`${x.antimatter}AM | ${x.element115}E115 | ${x.deuterium}D`};return m.jsxs("button",{onClick:v,disabled:!c||d,className:`inline-flex items-center space-x-1 px-1.5 py-0.5 rounded transition-all duration-200 text-[10px] font-medium h-[21px] box-border ${d?"bg-blue-500/20 border border-blue-500/50 text-blue-400":c?"bg-white/10 hover:bg-white/20 border border-white/20 hover:border-white/40 text-white hover:text-blue-300":"bg-gray-500/20 border border-gray-500/50 text-gray-400"} ${s}`,title:c?`Mine: ${S()}`:`Cooldown: ${Math.ceil(o*60)} minutes remaining`,children:[L(),m.jsx("span",{className:"text-[10px] uppercase",children:h()})]})};export{O as R,G as S};
