import{r as w,j as e,a as tt,c as Ke,R as Je}from"./atlas_BiACxVxc6cO5okV5F68Rd.js";import{R as wt,L as yt,g as bt,S as Ae,m as Mt,F as jt,H as St,a as Nt}from"./atlas_DV2TxjXVLZiB7z8gZlLyQ.js";import{W as $e}from"./atlas_CpfeS5VhE5H57rIqo09CI.js";import{W as We,C as Pe,X as Xe,G as Ce,q as nt,cz as st,x as Te,cA as Le,cB as Fe,b as ye,z as ze,M as W,V as De,B as Ge,cC as ot,n as it,a0 as Ye,$ as at,v as rt,cD as ct,cE as lt,S as ke,c as dt,A as Ne,g as we,cF as He,D as _e,cG as ut,t as qe,m as Ee,P as Ve,y as mt,cH as ht}from"./atlas_Bng76Ipsc6y2pOae0EuhP.js";import{R as zt,S as Rt,M as Ct,a as Ue,b as Qe,T as Et}from"./atlas_CucbVO37Kcy0bEJq4UQQ7.js";import{O as pt}from"./atlas_sLbA9m1UOHQtiV0wkxe1n.js";import{V as Pt}from"./atlas_c-mX1IzYsquxm9YzhFAN0.js";import"./atlas_5StMBQg7EZ_DcUhMgqODi.js";const kt=({coordinates:a,galaxyName:A})=>{const B=w.useRef(null),Y=w.useRef(null),E=w.useRef(null),C=w.useRef(null);return w.useEffect(()=>{if(!B.current)return;const F=B.current,P=F.clientWidth,Me=F.clientHeight,te=new We;te.background=new Pe(657930),Y.current=te;const K=new Xe(45,P/Me,.1,1e3);K.position.set(20,15,20),K.lookAt(0,0,0);const V=new $e({antialias:!0,alpha:!0});V.setSize(P,Me),V.setClearColor(0,.2),E.current=V,F.appendChild(V.domElement);const H=0,ee=1e7,S=5e6,[me,_,ne]=a,j=((me-H)/(ee-H)-.5)*16,U=((_-H)/(ee-H)-.5)*16,g=((ne-H)/(ee-H)-.5)*16,s=new Ce;te.add(s);const ue=new nt(16,16,16),Q=new st(ue),O=new Te({color:16777215,opacity:.4,transparent:!0,linewidth:2}),X=new Le(Q,O);s.add(X);const ie=new Fe(16,16,16777215,16777215);ie.material.opacity=.1,ie.material.transparent=!0,ie.position.y=-8,s.add(ie);const y=new Fe(16,16,16777215,16777215);y.material.opacity=.05,y.material.transparent=!0,y.rotation.z=Math.PI/2,y.position.x=-8,s.add(y);const k=new Fe(16,16,16777215,16777215);k.material.opacity=.05,k.material.transparent=!0,k.rotation.x=Math.PI/2,k.position.z=-8,s.add(k);const L=new ye(.5,32,32),Re=new ze({color:16777215,transparent:!0,opacity:.9}),xe=new W(L,Re);xe.position.set(0,0,0),s.add(xe);const ge=new W(new ye(.8,32,32),new ze({color:16777215,transparent:!0,opacity:.2}));xe.add(ge);const f=new ye(.4,32,32),fe=new ze({color:6605055,transparent:!0,opacity:1}),o=new W(f,fe);o.position.set(j,U,g),s.add(o);const r=new W(new ye(.7,32,32),new ze({color:6605055,transparent:!0,opacity:.3}));if(o.add(r),Math.sqrt(Math.pow(me-S,2)+Math.pow(_-S,2)+Math.pow(ne-S,2))<2e6){const i=[new De(0,0,0),new De(j,U,g)],z=new Ge().setFromPoints(i),R=new ot({color:16762980,dashSize:.6,gapSize:.6,opacity:.4,transparent:!0,linewidth:2}),I=new it(z,R);I.computeLineDistances(),s.add(I)}const T=new Ye(4210752,.6);te.add(T);const he=new at(16777215,.8);he.position.set(10,10,10),te.add(he);const J=(i,z)=>{const R=document.createElement("canvas"),I=R.getContext("2d");if(!I)return null;R.width=64,R.height=64,I.fillStyle=`#${z.toString(16).padStart(6,"0")}`,I.font="bold 48px Arial",I.textAlign="center",I.textBaseline="middle",I.fillText(i,32,32);const oe=new rt(R),pe=new ct({map:oe,transparent:!0,opacity:.8}),$=new lt(pe);return $.scale.set(1.6,1.6,1),$},ce=J("X",16739179);ce&&(ce.position.set(8.4,-7.6,-7.6),s.add(ce));const c=J("Y",7077739);c&&(c.position.set(-7.6,8.4,-7.6),s.add(c));const t=J("Z",7039999);t&&(t.position.set(-7.6,-7.6,8.4),s.add(t));let n=!1,p=0,u=0,l=!0,m=0;const G=i=>{n=!0,l=!1,p=i.clientX,u=i.clientY},x=i=>{if(!n)return;const z=i.clientX-p,R=i.clientY-u;s.rotation.y+=z*.01,s.rotation.x+=R*.01,p=i.clientX,u=i.clientY},v=()=>{n=!1,setTimeout(()=>{n||(l=!0)},3e3)},Z=i=>{i.preventDefault();const z=.1,R=K.position.distanceTo(new De(0,0,0));i.deltaY>0&&R<50?K.position.multiplyScalar(1+z):i.deltaY<0&&R>10&&K.position.multiplyScalar(1-z)},b=i=>{i.key==="Escape"&&document.dispatchEvent(new CustomEvent("universe-close-fullscreen"))},D=i=>{if(i.preventDefault(),i.touches.length===1)n=!0,l=!1,p=i.touches[0].clientX,u=i.touches[0].clientY;else if(i.touches.length===2){const z=i.touches[0].clientX-i.touches[1].clientX,R=i.touches[0].clientY-i.touches[1].clientY;m=Math.sqrt(z*z+R*R)}},M=i=>{if(i.preventDefault(),i.touches.length===1&&n){const z=i.touches[0].clientX-p,R=i.touches[0].clientY-u;s.rotation.y+=z*.01,s.rotation.x+=R*.01,p=i.touches[0].clientX,u=i.touches[0].clientY}else if(i.touches.length===2){const z=i.touches[0].clientX-i.touches[1].clientX,R=i.touches[0].clientY-i.touches[1].clientY,I=Math.sqrt(z*z+R*R);if(m>0){const pe=I/m,$=K.position.distanceTo(new De(0,0,0));pe>1&&$>10?K.position.multiplyScalar(1-.01):pe<1&&$<50&&K.position.multiplyScalar(1+.01)}m=I}},le=i=>{i.preventDefault(),n=!1,m=0,setTimeout(()=>{n||(l=!0)},3e3)},N=V.domElement;N.style.cursor="grab",N.addEventListener("mousedown",i=>{N.style.cursor="grabbing",G(i)}),N.addEventListener("mousemove",x),N.addEventListener("mouseup",()=>{N.style.cursor="grab",v()}),N.addEventListener("mouseleave",()=>{N.style.cursor="grab",v()}),N.addEventListener("wheel",Z),N.addEventListener("touchstart",D,{passive:!1}),N.addEventListener("touchmove",M,{passive:!1}),N.addEventListener("touchend",le,{passive:!1}),document.addEventListener("keydown",b);const se=()=>{C.current=requestAnimationFrame(se),l&&(s.rotation.y+=.002,s.rotation.x+=.001);const i=Date.now()*.005;xe.scale.setScalar(1+Math.sin(i)*.1),o.rotation.y+=.01,V.render(te,K)};se();const q=()=>{const i=F.clientWidth,z=F.clientHeight;K.aspect=i/z,K.updateProjectionMatrix(),V.setSize(i,z)};return window.addEventListener("resize",q),()=>{window.removeEventListener("resize",q),document.removeEventListener("keydown",b),N.removeEventListener("mousedown",G),N.removeEventListener("mousemove",x),N.removeEventListener("mouseup",v),N.removeEventListener("mouseleave",v),N.removeEventListener("wheel",Z),N.removeEventListener("touchstart",D),N.removeEventListener("touchmove",M),N.removeEventListener("touchend",le),C.current&&cancelAnimationFrame(C.current),F&&V.domElement&&F.removeChild(V.domElement),V.dispose(),ue.dispose(),Q.dispose(),O.dispose(),L.dispose(),Re.dispose(),f.dispose(),fe.dispose()}},[a,A]),e.jsx("div",{ref:B,className:"w-full h-full"})},Lt=({coordinates:a,galaxyName:A})=>{const B=w.useRef(null),Y=w.useRef(null),E=w.useRef(null),C=w.useRef(null),[F,P]=w.useState(!1),[Me,te]=w.useState(!1),[K,V]=w.useState(!1),H=()=>{te(!0),setTimeout(()=>{P(!1),te(!1)},300)};w.useEffect(()=>{const j=U=>{U.key==="Escape"&&F&&H()};return document.addEventListener("universe-close-fullscreen",H),document.addEventListener("keydown",j),()=>{document.removeEventListener("universe-close-fullscreen",H),document.removeEventListener("keydown",j)}},[F]),w.useEffect(()=>{if(F&&K){const j=setTimeout(()=>{V(!1)},50);return()=>clearTimeout(j)}},[F,K]),w.useEffect(()=>{if(!B.current)return;const j=B.current,U=j.clientWidth,g=U<640,s=new We;s.background=new Pe(657930),Y.current=s;const ue=new Xe(30,U/120,.1,1e3);ue.position.set(12,8,12),ue.lookAt(0,0,0);const Q=new $e({antialias:!0,alpha:!0});Q.setSize(U,120),Q.setClearColor(0,.2),E.current=Q,j.appendChild(Q.domElement);const O=0,X=1e7,ie=5e6,[y,k,L]=a,Re=((y-O)/(X-O)-.5)*8,xe=((k-O)/(X-O)-.5)*8,ge=((L-O)/(X-O)-.5)*8,f=new Ce;s.add(f);const fe=new nt(8,8,8),o=new st(fe),r=new Te({color:16777215,opacity:.4,transparent:!0}),d=new Le(o,r);f.add(d);const T=new Fe(8,8,16777215,16777215);T.material.opacity=.1,T.material.transparent=!0,T.position.y=-4,f.add(T);const he=new Fe(8,8,16777215,16777215);he.material.opacity=.05,he.material.transparent=!0,he.rotation.z=Math.PI/2,he.position.x=-4,f.add(he);const J=new Fe(8,8,16777215,16777215);J.material.opacity=.05,J.material.transparent=!0,J.rotation.x=Math.PI/2,J.position.z=-4,f.add(J);const ce=new ye(.25,16,16),c=new ze({color:16777215,transparent:!0,opacity:.9}),t=new W(ce,c);t.position.set(0,0,0),f.add(t);const n=new W(new ye(.45,16,16),new ze({color:16777215,transparent:!0,opacity:.2}));t.add(n);const p=new ye(.2,16,16),u=new ze({color:6605055,transparent:!0,opacity:1}),l=new W(p,u);l.position.set(Re,xe,ge),f.add(l);const m=new W(new ye(.35,16,16),new ze({color:6605055,transparent:!0,opacity:.3}));if(l.add(m),Math.sqrt(Math.pow(y-ie,2)+Math.pow(k-ie,2)+Math.pow(L-ie,2))<2e6){const h=[new De(0,0,0),new De(Re,xe,ge)],ae=new Ge().setFromPoints(h),de=new ot({color:16762980,dashSize:.3,gapSize:.3,opacity:.4,transparent:!0}),re=new it(ae,de);re.computeLineDistances(),f.add(re)}const x=new Ye(4210752,.6);s.add(x);const v=new at(16777215,.8);v.position.set(5,5,5),s.add(v);const Z=(h,ae)=>{const de=document.createElement("canvas"),re=de.getContext("2d");if(!re)return null;de.width=32,de.height=32,re.fillStyle=`#${ae.toString(16).padStart(6,"0")}`,re.font="bold 24px Arial",re.textAlign="center",re.textBaseline="middle",re.fillText(h,16,16);const je=new rt(de),Se=new ct({map:je,transparent:!0,opacity:.8}),be=new lt(Se);return be.scale.set(.8,.8,1),be},b=Z("X",16739179);b&&(b.position.set(4.2,-3.8,-3.8),f.add(b));const D=Z("Y",7077739);D&&(D.position.set(-3.8,4.2,-3.8),f.add(D));const M=Z("Z",7039999);M&&(M.position.set(-3.8,-3.8,4.2),f.add(M));let le=!1,N=0,se=0,q=!0;const i=h=>{le=!0,q=!1,N=h.clientX,se=h.clientY},z=h=>{if(!le)return;const ae=h.clientX-N,de=h.clientY-se;f.rotation.y+=ae*.01,f.rotation.x+=de*.01,N=h.clientX,se=h.clientY},R=()=>{le=!1,setTimeout(()=>{le||(q=!0)},3e3)},I=h=>{h.preventDefault();const ae=.1,de=ue.position.distanceTo(new De(0,0,0));h.deltaY>0&&de<25?ue.position.multiplyScalar(1+ae):h.deltaY<0&&de>5&&ue.position.multiplyScalar(1-ae)},oe=Q.domElement;oe.style.cursor="grab",oe.style.borderRadius="8px",oe.addEventListener("mousedown",h=>{oe.style.cursor="grabbing",i(h)}),oe.addEventListener("mousemove",z),oe.addEventListener("mouseup",()=>{oe.style.cursor="grab",R()}),oe.addEventListener("mouseleave",()=>{oe.style.cursor="grab",R()}),oe.addEventListener("wheel",I);const pe=()=>{C.current=requestAnimationFrame(pe),q&&(f.rotation.y+=.002,f.rotation.x+=.001);const h=Date.now()*.005;t.scale.setScalar(1+Math.sin(h)*.1),l.rotation.y+=.01,Q.render(s,ue)};pe();const $=()=>{const h=j.clientWidth,ae=h<640?150:160;ue.aspect=h/ae,ue.updateProjectionMatrix(),Q.setSize(h,ae)};return window.addEventListener("resize",$),()=>{window.removeEventListener("resize",$),oe.removeEventListener("mousedown",i),oe.removeEventListener("mousemove",z),oe.removeEventListener("mouseup",R),oe.removeEventListener("mouseleave",R),oe.removeEventListener("wheel",I),C.current&&cancelAnimationFrame(C.current),j&&Q.domElement&&j.removeChild(Q.domElement),Q.dispose(),fe.dispose(),o.dispose(),r.dispose(),ce.dispose(),c.dispose(),p.dispose(),u.dispose()}},[a,A]);const ee=j=>j.replace(/_/g," "),S=j=>j>=1e6?`${(j/1e6).toFixed(1)}M`:j>=1e3?`${(j/1e3).toFixed(1)}K`:j.toString(),[me,_,ne]=a;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Galaxy Location"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:B,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsx("button",{onClick:()=>{P(!0),V(!0)},className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-[10px]",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:ee(A)})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:[S(me),", ",S(_),", ",S(ne)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom • Drag: Rotate View"})]})]}),F&&tt.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${Me||K?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${Me||K?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:ee(A)})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[ee(A)," - Galaxy Location"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Galaxy"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[S(me),", ",S(_),", ",S(ne)]})]})]}),e.jsx("button",{onClick:H,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(kt,{coordinates:a,galaxyName:A})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},Gt=({galaxy:a})=>{const[A,B]=w.useState({isOnCooldown:!1,isSaved:!1,isCollecting:!1,timeUntilNext:0});w.useEffect(()=>{let E;const C=()=>{const te=Ue.generateLocationId("galaxy",a.coordinates.join(","),void 0,void 0),K=Ue.canCollectFromLocation(te),V=Ue.getTimeUntilNextCollection(te),H=a.coordinates,ee=Qe.generateGalaxyUrl(H,Qe.getCurrentPage()),me=yt.getLocations().some(_=>_.stargateUrl===ee);B(_=>({isOnCooldown:!K&&V>0,isSaved:me,isCollecting:_.isCollecting,timeUntilNext:V}))},F=()=>{B(te=>({...te,isCollecting:!0})),E=setTimeout(()=>{B(te=>({...te,isCollecting:!1}))},1e3)};C();const P=setInterval(C,1e3),Me=wt.subscribe("mining_completed",F);return()=>{clearInterval(P),E&&clearTimeout(E),Me()}},[a.name,a.coordinates]);const Y=E=>E.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex gap-2 z-10",children:[e.jsx(zt,{locationType:"galaxy",locationId:a.name,coordinates:a.coordinates.join(","),className:"text-xs"}),e.jsx(Rt,{type:"galaxy",name:a.name,coordinates:a.coordinates.join(","),className:"text-xs"}),e.jsx("div",{className:"inline-flex items-center bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] font-medium px-1.5 py-0.5 rounded h-[21px] box-border",children:"VISITED"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ct,{isOnCooldown:A.isOnCooldown,isSaved:A.isSaved,isCollecting:A.isCollecting}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Details"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300",children:a.galaxy_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Solar Systems"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:a.num_systems.toLocaleString()})]})]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-2",children:e.jsx(Lt,{coordinates:a.coordinates,galaxyName:a.name})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-gray-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Cosmic Objects"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-pink-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Black Holes"}),e.jsx("div",{className:"text-xs font-bold text-pink-300",children:a.black_holes.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Pulsars"}),e.jsx("div",{className:"text-xs font-bold text-cyan-300",children:a.pulsars.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Quasars"}),e.jsx("div",{className:"text-xs font-bold text-indigo-300",children:a.quasars.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("div",{className:"text-green-400 font-medium",children:"Visited"})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:Y(a.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:a.coordinates.join(", ")})]})]})]})]})},It=({galaxyType:a,numSystems:A,blackHoles:B,pulsars:Y,quasars:E,seed:C=12345,onExpandClick:F})=>{const P=w.useRef(null),Me=w.useRef(null),te=w.useRef(null),K=w.useRef(null),V=w.useRef(null),H=w.useRef(null),ee=w.useRef(null),S=w.useRef(!1),[me,_]=w.useState(!1),[ne,j]=w.useState(!1);class U{seed;constructor(s){this.seed=s}random(){const s=Math.sin(this.seed++)*1e4;return s-Math.floor(s)}uniform(s,ue){return s+this.random()*(ue-s)}gauss(s,ue){let Q=0,O=0;for(;Q===0;)Q=this.random();for(;O===0;)O=this.random();const X=Math.sqrt(-2*Math.log(Q))*Math.cos(2*Math.PI*O);return s+ue*X}randint(s,ue){return Math.floor(this.uniform(s,ue+1))}}return w.useEffect(()=>{const g=ee.current;if(!g)return;const s=g.getContext("2d");if(!s)return;let ue=[];const Q=800;let O,X;const ie=800;let y,k=.5;function L(){const f=g?.parentElement;if(!f||!g)return;const fe=f.clientWidth,o=f.clientHeight;g.width=Math.min(fe,ie),g.height=Math.min(o,ie),O=g.width/2,X=g.height/2}function Re(){L(),ue=[];for(let f=0;f<Q;f++)ue.push({x:Math.random()*(g?.width||800),y:Math.random()*(g?.height||800),z:Math.random()*(g?.width||800),o:Math.random()});xe()}function xe(){!g||!s||(s.clearRect(0,0,g.width,g.height),ue.forEach(f=>{f.z-=k,f.z<=0&&(f.z=g.width,f.x=Math.random()*g.width,f.y=Math.random()*g.height,f.o=Math.random());const fe=g.width/f.z,o=(f.x-O)*fe+O,r=(f.y-X)*fe+X,d=2*fe;s.beginPath(),s.fillStyle=`rgba(255, 255, 255, ${f.o})`,s.arc(o,r,d,0,2*Math.PI),s.fill()}),!S.current&&k<60&&(k+=1),S.current&&k>2&&(k-=2),y=requestAnimationFrame(xe))}Re();const ge=()=>L();return window.addEventListener("resize",ge),()=>{window.removeEventListener("resize",ge),y&&cancelAnimationFrame(y)}},[]),w.useEffect(()=>{if(!P.current)return;const g=P.current,s=g.clientWidth,ue=g.clientHeight,Q=Math.min(s,ue),O=new We;O.background=new Pe(17),Me.current=O;const X=new Xe(45,1,.1,1e4);X.position.set(0,200,400),X.lookAt(0,0,0);const ie=new $e({antialias:!0,alpha:!0});ie.setSize(Q,Q),ie.setClearColor(17,1),te.current=ie,g.appendChild(ie.domElement);const y=new pt(X,ie.domElement);y.enableDamping=!0,y.dampingFactor=.05,y.minDistance=50,y.maxDistance=800,y.autoRotate=!0,y.autoRotateSpeed=.5,y.enablePan=!0,y.enableZoom=!0,y.target.set(0,0,0),V.current=y;const k=new Ce;H.current=k,O.add(k);const L=new U(C),Re=L.uniform(0,2*Math.PI),xe=new Ge,ge=[],f=[],fe=[],o=200;let r=A;if(a==="Spiral"){r=Math.min(A,5e4);const c=4,t=2*Math.PI/c,n=.15,p=.5,u=.1;for(let l=0;l<r*u;l++){const m=L.uniform(0,2*Math.PI),G=L.gauss(o*.1,o*.05),x=L.gauss(0,5),v=G*Math.cos(m),Z=G*Math.sin(m);ge.push(v,x,Z),f.push(1,1,1);const b=C+l*1337,D=new U(b),M=D.gauss(1,.3),le=D.random()<.05,N=D.random()<.3;let se=Math.max(.3,M);le&&(se*=3+D.uniform(0,2)),N&&(se*=.5+D.uniform(0,.3)),G<o*.2&&(se*=1.8+D.uniform(0,.7),f[f.length-3]=1.2,f[f.length-2]=1.1,f[f.length-1]=.9),fe.push(Math.min(se*1.5,12))}for(let l=0;l<r;l++){const m=p*Math.sqrt(l/r)*2*Math.PI,G=l%c*t,x=o*Math.sqrt(l/r),v=x*Math.cos(m+G+Re)+L.uniform(-n*x,n*x),Z=x*Math.sin(m+G+Re)+L.uniform(-n*x,n*x),b=L.gauss(0,3);ge.push(v,b,Z),f.push(1,1,.8);const D=C+l*1337,M=new U(D),le=M.gauss(.8,.25),N=M.random()<.03,se=M.random()<.4;let q=Math.max(.2,le);N&&(q*=2.5+M.uniform(0,1.5)),se&&(q*=.4+M.uniform(0,.2)),x>o*.7&&(q*=.8),fe.push(Math.min(q*1.3,8))}}else if(a==="Elliptical"){r=Math.min(A,1e5);for(let c=0;c<r;c++){const t=L.uniform(0,2*Math.PI),n=L.uniform(-1,1),p=Math.sqrt(1-n*n),u=L.random(),l=Math.pow(u,.6),m=-Math.log(1-l*.98)*o*.35,G=m*p*Math.cos(t),x=m*n*.6,v=m*p*Math.sin(t);ge.push(G,x,v),f.push(1,.9,.7);const Z=C+c*1337,b=new U(Z),D=b.gauss(.6,.2),M=b.random()<.08,le=b.random()<.25;let N=Math.max(.2,D);M&&(N*=2+b.uniform(0,1)),le&&(N*=.6+b.uniform(0,.2)),Math.sqrt(G*G+x*x+v*v)<o*.3&&(N*=1.5+b.uniform(0,.5)),fe.push(Math.min(N*1.4,7))}}else if(a==="Dwarf"){r=Math.min(A/100,1e4);for(let c=0;c<r;c++){const t=L.uniform(0,2*Math.PI),n=L.uniform(0,Math.PI),p=L.gauss(o/3,o*.3),u=p*Math.sin(n)*Math.cos(t),l=p*Math.cos(n)*.5,m=p*Math.sin(n)*Math.sin(t);ge.push(u,l,m),f.push(.8,.8,1);const G=C+c*1337,x=new U(G),v=x.gauss(.7,.3),Z=x.random()<.02,b=x.random()<.6;let D=Math.max(.3,v);Z&&(D*=2.5+x.uniform(0,1)),b&&(D*=.5+x.uniform(0,.3)),fe.push(Math.min(D*1.2,5))}}else if(a==="Singularity Void"){r=1e4;for(let $=0;$<r;$++){const h=$/r,ae=h*30*Math.PI,de=o*(1-h*.8)+L.uniform(-10,10),re=(h-.5)*300+Math.sin(ae*.5)*20,je=de*Math.cos(ae)+Math.sin(h*20)*10,Se=de*Math.sin(ae)+Math.cos(h*20)*10;ge.push(je,re,Se);const be=(h+Math.sin(ae*.1))%1,ve=new Pe;ve.setHSL(be,1,.5+Math.sin(h*10)*.3),f.push(ve.r,ve.g,ve.b),fe.push(L.uniform(.3,2)*(1+Math.sin(h*50)*.5))}const c=($,h,ae=1)=>{const de=new ye($,64,64),re=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,je=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;

          void main() {
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);

            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;

            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;

            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x +
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);

            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;

            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);

            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;

            gl_FragColor = vec4(color, ${h});
          }
        `,Se=new ke({uniforms:{time:{value:0},speed:{value:ae}},vertexShader:re,fragmentShader:je,transparent:!0,blending:Ne,side:_e,depthWrite:!1}),be=new W(de,Se);return be.isSingularityShader=!0,be.shaderSpeed=ae,be},t=c(250,.3,1);k.add(t);const n=c(180,.4,-.7);k.add(n);const p=c(120,.5,1.5);k.add(p);const u=c(300,.2,.5);u.scale.set(-1,1,1),k.add(u);const l=new ye(350,32,32),m=new ke({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);


            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;

            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;

          void main() {

            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;

            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;

            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Ne,side:dt,depthWrite:!1}),G=new W(l,m);G.isSingularityShader=!0,G.shaderSpeed=.3,k.add(G);const x=new Ge,v=[],Z=[];for(let $=0;$<1e3;$++){const h=L.uniform(-o,o),ae=L.uniform(-o/2,o/2),de=L.uniform(-o,o),re=L.uniform(-50,50),je=L.uniform(-30,30),Se=L.uniform(-50,50);v.push(h,ae,de),v.push(h+re,ae+je,de+Se);const be=L.random(),ve=new Pe;ve.setHSL(be,1,.6),Z.push(ve.r,ve.g,ve.b),Z.push(ve.r*.5,ve.g*.5,ve.b*.5)}x.setAttribute("position",new we(v,3)),x.setAttribute("color",new we(Z,3));const b=new Te({vertexColors:!0,transparent:!0,opacity:.4,blending:Ne}),D=new Le(x,b);D.isGlitchLines=!0,k.add(D);const M=new Ce,le=new ye(20,32,32),N=new ze({color:0,transparent:!0,opacity:.95}),se=new W(le,N);M.add(se);const q=new He(25,80,64),i=new ke({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;

          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);


            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;


            vec3 hotColor = vec3(1.0, 0.5, 0.0);
            vec3 coldColor = vec3(0.0, 0.3, 1.0);
            vec3 color = mix(coldColor, hotColor, intensity);


            color *= (0.7 + swirl * 0.3);


            float alpha = intensity * 0.8;

            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Ne,side:_e}),z=new W(q,i);z.rotation.x=Math.PI/2,z.isAccretionDisk=!0,M.add(z);for(let $=0;$<8;$++){const h=30+$*20,ae=new ut(h,1+$*.5,8,64),de=new ze({color:new Pe().setHSL((.7+$*.05)%1,1,.5),transparent:!0,opacity:.3-$*.03,wireframe:!0}),re=new W(ae,de);re.rotation.x=L.uniform(0,Math.PI),re.rotation.y=L.uniform(0,Math.PI),re.isDistortionRing=!0,re.rotationSpeed=L.uniform(.001,.005)*($%2===0?1:-1),M.add(re)}k.add(M);const R=new qe(5,100,8),I=new Ee({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Ne}),oe=new W(R,I);oe.position.y=50,k.add(oe);const pe=new W(R,I);pe.position.y=-50,pe.rotation.z=Math.PI,k.add(pe)}if(a!=="Singularity Void"){const c=[],t=new U(C+999);for(let b=0;b<B;b++){const D=t.uniform(-50,50),M=t.uniform(-20,20),le=t.uniform(-50,50);c.push({x:D,y:M,z:le})}const n=[],p=[],u=[],l=[],m=[],G=.4,x=G*25;for(let b=0;b<ge.length;b+=3){const D=ge[b],M=ge[b+1],le=ge[b+2];let N=1/0,se=null;for(const q of c){const i=Math.sqrt(Math.pow(D-q.x,2)+Math.pow(M-q.y,2)+Math.pow(le-q.z,2));i<N&&(N=i,se=q)}if(!(N<G))if(N<x&&se){const q=1-(N-G)/(x-G);se.x-D,se.y-M,se.z-le;const i=Math.atan2(le-se.z,D-se.x),z=q*.8,R=8;for(let re=0;re<R-1;re++){const je=re/(R-1),Se=(re+1)/(R-1),be=N*(1-je*z*.7),ve=i+je*z*1.5,Ie=se.x+be*Math.cos(ve),Be=M+(se.y-M)*je*.3,ft=se.z+be*Math.sin(ve),Oe=N*(1-Se*z*.7),Ze=i+Se*z*1.5,xt=se.x+Oe*Math.cos(Ze),gt=M+(se.y-M)*Se*.3,vt=se.z+Oe*Math.sin(Ze);l.push(Ie,Be,ft),l.push(xt,gt,vt)}const I=q*1.5,oe=f[b],pe=f[b+1],$=f[b+2],h=Math.min(oe+I,2),ae=Math.max(pe*(1-I*.6),.1),de=Math.max($*(1-I*.8),.1);for(let re=0;re<R-1;re++){const je=re/(R-1),Se=(re+1)/(R-1),be=1-je*q*.6,ve=1-Se*q*.6,Ie=I*(.5+je*.5),Be=I*(.5+Se*.5);m.push(Math.min(h+Ie*.3,2)*be,Math.max(ae*(1-Ie*.2),.1)*be,Math.max(de*(1-Ie*.4),.1)*be),m.push(Math.min(h+Be*.3,2)*ve,Math.max(ae*(1-Be*.2),.1)*ve,Math.max(de*(1-Be*.4),.1)*ve)}n.push(D,M,le),p.push(h,ae,de),u.push(Math.max(fe[b/3]*(1-q*.5),.3))}else n.push(D,M,le),p.push(f[b],f[b+1],f[b+2]),u.push(fe[b/3])}xe.setAttribute("position",new we(n,3)),xe.setAttribute("color",new we(p,3)),xe.setAttribute("size",new we(u,1));const v=new ke({uniforms:{},vertexShader:`
          attribute float size;
          varying vec3 vColor;
          void main() {
            vColor = color;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * (400.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
          }
        `,fragmentShader:`
          varying vec3 vColor;
          void main() {

            vec2 center = gl_PointCoord - vec2(0.5);
            float distanceFromCenter = length(center);

            if (distanceFromCenter > 0.5) {
              discard;
            }


            float alpha = 1.0 - (distanceFromCenter / 0.5);
            alpha = pow(alpha, 2.0);

            gl_FragColor = vec4(vColor, alpha * 0.8);
          }
        `,transparent:!0,blending:Ne,vertexColors:!0,depthWrite:!1}),Z=new Ve(xe,v);if(k.add(Z),l.length>0){const b=new Ge;b.setAttribute("position",new we(l,3)),b.setAttribute("color",new we(m,3));const D=new Te({vertexColors:!0,transparent:!0,opacity:.8,linewidth:2,blending:Ne}),M=new Le(b,D);k.add(M)}}else{xe.setAttribute("position",new we(ge,3)),xe.setAttribute("color",new we(f,3)),xe.setAttribute("size",new we(fe,1));const c=new mt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Ne,sizeAttenuation:!0}),t=new Ve(xe,c);k.add(t)}const d=new U(C+999);for(let c=0;c<B;c++){const t=new Ce,n=d.uniform(-50,50),p=d.uniform(-20,20),u=d.uniform(-50,50),l=new ye(1.5,16,16),m=new ze({color:0,transparent:!0,opacity:.9}),G=new W(l,m);t.add(G),[{innerRadius:2,outerRadius:2.3,color:16777215,opacity:.8,emissive:16777164},{innerRadius:2.3,outerRadius:2.7,color:16755200,opacity:.7,emissive:16746496},{innerRadius:2.7,outerRadius:3.2,color:16729088,opacity:.6,emissive:16720384},{innerRadius:3.2,outerRadius:4,color:11141120,opacity:.5,emissive:6684672},{innerRadius:4,outerRadius:5,color:4456448,opacity:.3,emissive:2228224}].forEach((v,Z)=>{const b=new He(v.innerRadius,v.outerRadius,32),D=new Ee({color:v.color,transparent:!0,opacity:v.opacity,emissive:v.emissive,emissiveIntensity:.3,side:_e}),M=new W(b,D);M.rotation.x=Math.PI/2,M.rotation.z=L.uniform(0,Math.PI*2),M.isAccretionRing=!0,M.rotationSpeed=.002+Z*5e-4,t.add(M)}),t.position.set(n,p,u),k.add(t)}for(let c=0;c<Y;c++){const t=new ye(1.5,8,8),n=new Ee({color:16776960,emissive:16776960,emissiveIntensity:1}),p=new W(t,n);p.position.set(L.uniform(-o,o),L.uniform(-o/4,o/4),L.uniform(-o,o)),p.isPulsar=!0,p.pulseSpeed=L.uniform(1,3),k.add(p)}for(let c=0;c<E;c++){const t=new Ce,n=new ye(2,16,16),p=new Ee({color:16777215,emissive:16777215,emissiveIntensity:2}),u=new W(n,p);t.add(u);const l=new qe(1,20,8),m=new Ee({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),G=new W(l,m);G.position.y=10,t.add(G);const x=new W(l,m);x.position.y=-10,x.rotation.z=Math.PI,t.add(x),t.position.set(L.uniform(-o,o),L.uniform(-o/4,o/4),L.uniform(-o,o)),k.add(t)}const T=new Ye(4210752,.5);O.add(T);const he=new ht(16777215,.5,1e3);he.position.set(0,100,0),O.add(he);const J=()=>{K.current=requestAnimationFrame(J);const c=performance.now()/1e3;H.current&&(H.current.rotation.y+=.001),k.children.forEach(t=>{if(t.isPulsar){const n=t.pulseSpeed||1;t.scale.setScalar(1+Math.sin(Date.now()*.001*n)*.3)}if(t.isSingularityShader&&t instanceof W){const n=t.material;n.uniforms&&n.uniforms.time&&(n.uniforms.time.value=c);const p=t.shaderSpeed||1;t.rotation.y+=.001*p,t.rotation.x+=5e-4*p}if(t.isAccretionDisk&&t instanceof W){const n=t.material;n.uniforms&&n.uniforms.time&&(n.uniforms.time.value=c),t.rotation.z+=.002}if(t.isDistortionRing){const n=t.rotationSpeed||.001;t.rotation.x+=n,t.rotation.y+=n*.7,t.scale.setScalar(1+Math.sin(c*2)*.1)}if(t.isGlitchLines&&t instanceof Le){const n=t.material;n.opacity=.2+Math.sin(c*3)*.2,t.rotation.z+=5e-4}t instanceof Ce&&t.children.forEach(n=>{if(n.isAccretionDisk&&n instanceof W){const p=n.material;p.uniforms&&p.uniforms.time&&(p.uniforms.time.value=c),n.rotation.z+=.002}if(n.isAccretionRing&&n instanceof W){const p=n.rotationSpeed||.002;n.rotation.z+=p}if(n.isDistortionRing){const p=n.rotationSpeed||.001;n.rotation.x+=p,n.rotation.y+=p*.7,n.scale.setScalar(1+Math.sin(c*2)*.1)}})}),V.current&&V.current.update(),ie.render(O,X)};J(),setTimeout(()=>{_(!0),j(!0),S.current=!0},800);const ce=()=>{if(!P.current||!ie)return;const c=P.current,t=Math.min(c.clientWidth,c.clientHeight);ie.setSize(t,t),X.aspect=1,X.updateProjectionMatrix()};return window.addEventListener("resize",ce),()=>{window.removeEventListener("resize",ce),V.current&&V.current.dispose(),K.current&&cancelAnimationFrame(K.current),g&&ie.domElement&&g.removeChild(ie.domElement),ie.dispose()}},[a,A,B,Y,E,C]),e.jsxs("div",{className:"relative w-full h-full bg-black rounded",children:[e.jsx("canvas",{ref:ee,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${ne?"opacity-0":"opacity-100"}`,style:{filter:ne?"blur(50px)":"none"}}),e.jsxs("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${me?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:[e.jsx("div",{ref:P,className:"w-full h-full border border-white/20 rounded bg-black/20"}),me&&F&&e.jsx("button",{onClick:F,className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]})},Dt=({galaxyType:a,numSystems:A,blackHoles:B,pulsars:Y,quasars:E,seed:C=12345})=>{const F=w.useRef(null),P=w.useRef(null),Me=w.useRef(null),te=w.useRef(null),K=w.useRef(null),V=w.useRef(null);class H{seed;constructor(S){this.seed=S}random(){const S=Math.sin(this.seed++)*1e4;return S-Math.floor(S)}uniform(S,me){return S+this.random()*(me-S)}gauss(S,me){let _=0,ne=0;for(;_===0;)_=this.random();for(;ne===0;)ne=this.random();const j=Math.sqrt(-2*Math.log(_))*Math.cos(2*Math.PI*ne);return S+me*j}randint(S,me){return Math.floor(this.uniform(S,me+1))}}return w.useEffect(()=>{if(!F.current)return;const ee=F.current,S=ee.clientWidth,me=ee.clientHeight,_=new We;_.background=new Pe(17),P.current=_;const ne=new Xe(45,S/me,.1,1e4);ne.position.set(0,200,400),ne.lookAt(0,0,0);const j=new $e({antialias:!0,alpha:!0});j.setSize(S,me),j.setClearColor(17,1),Me.current=j,ee.appendChild(j.domElement);const U=new pt(ne,j.domElement);U.enableDamping=!0,U.dampingFactor=.05,U.minDistance=50,U.maxDistance=1200,U.autoRotate=!0,U.autoRotateSpeed=.5,U.enablePan=!0,U.enableZoom=!0,U.target.set(0,0,0),K.current=U;const g=new Ce;V.current=g,_.add(g);const s=new H(C),ue=s.uniform(0,2*Math.PI),Q=new Ge,O=[],X=[],ie=[],y=200;let k=A;if(a==="Spiral"){k=Math.min(A,5e4);const o=4,r=2*Math.PI/o,d=.15,T=.5,he=.1;for(let J=0;J<k*he;J++){const ce=s.uniform(0,2*Math.PI),c=s.gauss(y*.1,y*.05),t=s.gauss(0,5),n=c*Math.cos(ce),p=c*Math.sin(ce);O.push(n,t,p),X.push(1,1,1);const u=C+J*1337,l=new H(u),m=l.gauss(1,.3),G=l.random()<.05,x=l.random()<.3;let v=Math.max(.3,m);G&&(v*=3+l.uniform(0,2)),x&&(v*=.5+l.uniform(0,.3)),c<y*.2&&(v*=1.8+l.uniform(0,.7),X[X.length-3]=1.2,X[X.length-2]=1.1,X[X.length-1]=.9),ie.push(Math.min(v*1.5,12))}for(let J=0;J<k;J++){const ce=T*Math.sqrt(J/k)*2*Math.PI,c=J%o*r,t=y*Math.sqrt(J/k),n=t*Math.cos(ce+c+ue)+s.uniform(-d*t,d*t),p=t*Math.sin(ce+c+ue)+s.uniform(-d*t,d*t),u=s.gauss(0,3);O.push(n,u,p),X.push(1,1,.8);const l=C+J*1337,m=new H(l),G=m.gauss(.8,.25),x=m.random()<.03,v=m.random()<.4;let Z=Math.max(.2,G);x&&(Z*=2.5+m.uniform(0,1.5)),v&&(Z*=.4+m.uniform(0,.2)),t>y*.7&&(Z*=.8),ie.push(Math.min(Z*1.3,8))}}else if(a==="Elliptical"){k=Math.min(A,1e5);for(let o=0;o<k;o++){const r=s.uniform(0,2*Math.PI),d=s.uniform(-1,1),T=Math.sqrt(1-d*d),he=s.random(),J=Math.pow(he,.6),ce=-Math.log(1-J*.98)*y*.35,c=ce*T*Math.cos(r),t=ce*d*.6,n=ce*T*Math.sin(r);O.push(c,t,n),X.push(1,.9,.7);const p=C+o*1337,u=new H(p),l=u.gauss(.6,.2),m=u.random()<.08,G=u.random()<.25;let x=Math.max(.2,l);m&&(x*=2+u.uniform(0,1)),G&&(x*=.6+u.uniform(0,.2)),Math.sqrt(c*c+t*t+n*n)<y*.3&&(x*=1.5+u.uniform(0,.5)),ie.push(Math.min(x*1.4,7))}}else if(a==="Dwarf"){k=Math.min(A/100,1e4);for(let o=0;o<k;o++){const r=s.uniform(0,2*Math.PI),d=s.uniform(0,Math.PI),T=s.gauss(y/3,y*.3),he=T*Math.sin(d)*Math.cos(r),J=T*Math.cos(d)*.5,ce=T*Math.sin(d)*Math.sin(r);O.push(he,J,ce),X.push(.8,.8,1);const c=C+o*1337,t=new H(c),n=t.gauss(.7,.3),p=t.random()<.02,u=t.random()<.6;let l=Math.max(.3,n);p&&(l*=2.5+t.uniform(0,1)),u&&(l*=.5+t.uniform(0,.3)),ie.push(Math.min(l*1.2,5))}}else if(a==="Singularity Void"){k=1e4;for(let q=0;q<k;q++){const i=q/k,z=i*30*Math.PI,R=y*(1-i*.8)+s.uniform(-10,10),I=(i-.5)*300+Math.sin(z*.5)*20,oe=R*Math.cos(z)+Math.sin(i*20)*10,pe=R*Math.sin(z)+Math.cos(i*20)*10;O.push(oe,I,pe);const $=(i+Math.sin(z*.1))%1,h=new Pe;h.setHSL($,1,.5+Math.sin(i*10)*.3),X.push(h.r,h.g,h.b),ie.push(s.uniform(.3,2)*(1+Math.sin(i*50)*.5))}const o=(q,i,z=1)=>{const R=new ye(q,64,64),I=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,oe=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;
          
          void main() {
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);
            
            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;
            
            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;
            
            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x + 
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);
            
            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;
            
            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);
            
            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;
            
            gl_FragColor = vec4(color, ${i});
          }
        `,pe=new ke({uniforms:{time:{value:0},speed:{value:z}},vertexShader:I,fragmentShader:oe,transparent:!0,blending:Ne,side:_e,depthWrite:!1}),$=new W(R,pe);return $.isSingularityShader=!0,$.shaderSpeed=z,$},r=o(250,.3,1);g.add(r);const d=o(180,.4,-.7);g.add(d);const T=o(120,.5,1.5);g.add(T);const he=o(300,.2,.5);he.scale.set(-1,1,1),g.add(he);const J=new ye(350,32,32),ce=new ke({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            
            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          
          void main() {
            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;
            
            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Ne,side:dt,depthWrite:!1}),c=new W(J,ce);c.isSingularityShader=!0,c.shaderSpeed=.3,g.add(c);const t=new Ge,n=[],p=[];for(let q=0;q<1e3;q++){const i=s.uniform(-y,y),z=s.uniform(-y/2,y/2),R=s.uniform(-y,y),I=s.uniform(-50,50),oe=s.uniform(-30,30),pe=s.uniform(-50,50);n.push(i,z,R),n.push(i+I,z+oe,R+pe);const $=s.random(),h=new Pe;h.setHSL($,1,.6),p.push(h.r,h.g,h.b),p.push(h.r*.5,h.g*.5,h.b*.5)}t.setAttribute("position",new we(n,3)),t.setAttribute("color",new we(p,3));const u=new Te({vertexColors:!0,transparent:!0,opacity:.4,blending:Ne}),l=new Le(t,u);l.isGlitchLines=!0,g.add(l);const m=new Ce,G=new ye(20,32,32),x=new ze({color:0,transparent:!0,opacity:.95}),v=new W(G,x);m.add(v);const Z=new He(25,80,64),b=new ke({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;
          
          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);
            
            // Swirling pattern
            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;
            
            // Colors from hot (inner) to cold (outer)
            vec3 hotColor = vec3(1.0, 0.5, 0.0); // Orange
            vec3 coldColor = vec3(0.0, 0.3, 1.0); // Blue
            vec3 color = mix(coldColor, hotColor, intensity);
            
            // Add swirl variation
            color *= (0.7 + swirl * 0.3);
            
            // Fade out at edges
            float alpha = intensity * 0.8;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Ne,side:_e}),D=new W(Z,b);D.rotation.x=Math.PI/2,D.isAccretionDisk=!0,m.add(D);for(let q=0;q<8;q++){const i=30+q*20,z=new ut(i,1+q*.5,8,64),R=new ze({color:new Pe().setHSL((.7+q*.05)%1,1,.5),transparent:!0,opacity:.3-q*.03,wireframe:!0}),I=new W(z,R);I.rotation.x=s.uniform(0,Math.PI),I.rotation.y=s.uniform(0,Math.PI),I.isDistortionRing=!0,I.rotationSpeed=s.uniform(.001,.005)*(q%2===0?1:-1),m.add(I)}g.add(m);const M=new qe(5,100,8),le=new Ee({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Ne}),N=new W(M,le);N.position.y=50,g.add(N);const se=new W(M,le);se.position.y=-50,se.rotation.z=Math.PI,g.add(se)}if(a!=="Singularity Void"){const o=[],r=new H(C+999);for(let u=0;u<B;u++){const l=r.uniform(-50,50),m=r.uniform(-20,20),G=r.uniform(-50,50);o.push({x:l,y:m,z:G})}const d=[],T=[],he=[],J=[],ce=[],c=.4,t=c*25;for(let u=0;u<O.length;u+=3){const l=O[u],m=O[u+1],G=O[u+2];let x=1/0,v=null;for(const Z of o){const b=Math.sqrt(Math.pow(l-Z.x,2)+Math.pow(m-Z.y,2)+Math.pow(G-Z.z,2));b<x&&(x=b,v=Z)}if(!(x<c))if(x<t&&v){const Z=1-(x-c)/(t-c);v.x-l,v.y-m,v.z-G;const b=Math.atan2(G-v.z,l-v.x),D=Z*.8,M=8;for(let I=0;I<M-1;I++){const oe=I/(M-1),pe=(I+1)/(M-1),$=x*(1-oe*D*.7),h=b+oe*D*1.5,ae=v.x+$*Math.cos(h),de=m+(v.y-m)*oe*.3,re=v.z+$*Math.sin(h),je=x*(1-pe*D*.7),Se=b+pe*D*1.5,be=v.x+je*Math.cos(Se),ve=m+(v.y-m)*pe*.3,Ie=v.z+je*Math.sin(Se);J.push(ae,de,re),J.push(be,ve,Ie)}const le=Z*1.5,N=X[u],se=X[u+1],q=X[u+2],i=Math.min(N+le,2),z=Math.max(se*(1-le*.6),.1),R=Math.max(q*(1-le*.8),.1);for(let I=0;I<M-1;I++){const oe=I/(M-1),pe=(I+1)/(M-1),$=1-oe*Z*.6,h=1-pe*Z*.6,ae=le*(.5+oe*.5),de=le*(.5+pe*.5);ce.push(Math.min(i+ae*.3,2)*$,Math.max(z*(1-ae*.2),.1)*$,Math.max(R*(1-ae*.4),.1)*$),ce.push(Math.min(i+de*.3,2)*h,Math.max(z*(1-de*.2),.1)*h,Math.max(R*(1-de*.4),.1)*h)}d.push(l,m,G),T.push(i,z,R),he.push(Math.max(ie[u/3]*(1-Z*.5),.3))}else d.push(l,m,G),T.push(X[u],X[u+1],X[u+2]),he.push(ie[u/3])}Q.setAttribute("position",new we(d,3)),Q.setAttribute("color",new we(T,3)),Q.setAttribute("size",new we(he,1));const n=new ke({uniforms:{},vertexShader:`
          attribute float size;
          varying vec3 vColor;
          void main() {
            vColor = color;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * (400.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
          }
        `,fragmentShader:`
          varying vec3 vColor;
          void main() {
            vec2 center = gl_PointCoord - vec2(0.5);
            float distanceFromCenter = length(center);
            
            if (distanceFromCenter > 0.5) {
              discard;
            }
            
            float alpha = 1.0 - (distanceFromCenter / 0.5);
            alpha = pow(alpha, 2.0);
            
            gl_FragColor = vec4(vColor, alpha * 0.8);
          }
        `,transparent:!0,blending:Ne,vertexColors:!0,depthWrite:!1}),p=new Ve(Q,n);if(g.add(p),J.length>0){const u=new Ge;u.setAttribute("position",new we(J,3)),u.setAttribute("color",new we(ce,3));const l=new Te({vertexColors:!0,transparent:!0,opacity:.8,linewidth:2,blending:Ne}),m=new Le(u,l);g.add(m)}}else{Q.setAttribute("position",new we(O,3)),Q.setAttribute("color",new we(X,3)),Q.setAttribute("size",new we(ie,1));const o=new mt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Ne,sizeAttenuation:!0}),r=new Ve(Q,o);g.add(r)}const L=new H(C+999);for(let o=0;o<B;o++){const r=new Ce,d=L.uniform(-50,50),T=L.uniform(-20,20),he=L.uniform(-50,50),J=new ye(1.5,16,16),ce=new ze({color:0,transparent:!0,opacity:.9}),c=new W(J,ce);r.add(c),[{innerRadius:2,outerRadius:2.3,color:16777215,opacity:.8,emissive:16777164},{innerRadius:2.3,outerRadius:2.7,color:16755200,opacity:.7,emissive:16746496},{innerRadius:2.7,outerRadius:3.2,color:16729088,opacity:.6,emissive:16720384},{innerRadius:3.2,outerRadius:4,color:11141120,opacity:.5,emissive:6684672},{innerRadius:4,outerRadius:5,color:4456448,opacity:.3,emissive:2228224}].forEach((n,p)=>{const u=new He(n.innerRadius,n.outerRadius,32),l=new Ee({color:n.color,transparent:!0,opacity:n.opacity,emissive:n.emissive,emissiveIntensity:.3,side:_e}),m=new W(u,l);m.rotation.x=Math.PI/2,m.rotation.z=s.uniform(0,Math.PI*2),m.isAccretionRing=!0,m.rotationSpeed=.002+p*5e-4,r.add(m)}),r.position.set(d,T,he),g.add(r)}for(let o=0;o<Y;o++){const r=new ye(1.5,8,8),d=new Ee({color:16776960,emissive:16776960,emissiveIntensity:1}),T=new W(r,d);T.position.set(s.uniform(-y,y),s.uniform(-y/4,y/4),s.uniform(-y,y)),T.isPulsar=!0,T.pulseSpeed=s.uniform(1,3),g.add(T)}for(let o=0;o<E;o++){const r=new Ce,d=new ye(2,16,16),T=new Ee({color:16777215,emissive:16777215,emissiveIntensity:2}),he=new W(d,T);r.add(he);const J=new qe(1,20,8),ce=new Ee({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),c=new W(J,ce);c.position.y=10,r.add(c);const t=new W(J,ce);t.position.y=-10,t.rotation.z=Math.PI,r.add(t),r.position.set(s.uniform(-y,y),s.uniform(-y/4,y/4),s.uniform(-y,y)),g.add(r)}const Re=new Ye(4210752,.5);_.add(Re);const xe=new ht(16777215,.5,1e3);xe.position.set(0,100,0),_.add(xe);const ge=o=>{o.key==="Escape"&&document.dispatchEvent(new CustomEvent("galaxy-close-fullscreen"))};document.addEventListener("keydown",ge);const f=()=>{te.current=requestAnimationFrame(f);const o=performance.now()/1e3;V.current&&(V.current.rotation.y+=.001),g.children.forEach(r=>{if(r.isPulsar){const d=r.pulseSpeed||1;r.scale.setScalar(1+Math.sin(Date.now()*.001*d)*.3)}if(r.isSingularityShader&&r instanceof W){const d=r.material;d.uniforms&&d.uniforms.time&&(d.uniforms.time.value=o);const T=r.shaderSpeed||1;r.rotation.y+=.001*T,r.rotation.x+=5e-4*T}if(r.isAccretionDisk&&r instanceof W){const d=r.material;d.uniforms&&d.uniforms.time&&(d.uniforms.time.value=o),r.rotation.z+=.002}if(r.isDistortionRing){const d=r.rotationSpeed||.001;r.rotation.x+=d,r.rotation.y+=d*.7,r.scale.setScalar(1+Math.sin(o*2)*.1)}if(r.isGlitchLines&&r instanceof Le){const d=r.material;d.opacity=.2+Math.sin(o*3)*.2,r.rotation.z+=5e-4}r instanceof Ce&&r.children.forEach(d=>{if(d.isAccretionDisk&&d instanceof W){const T=d.material;T.uniforms&&T.uniforms.time&&(T.uniforms.time.value=o),d.rotation.z+=.002}if(d.isAccretionRing&&d instanceof W){const T=d.rotationSpeed||.002;d.rotation.z+=T}if(d.isDistortionRing){const T=d.rotationSpeed||.001;d.rotation.x+=T,d.rotation.y+=T*.7,d.scale.setScalar(1+Math.sin(o*2)*.1)}})}),K.current&&K.current.update(),j.render(_,ne)};f();const fe=()=>{if(!F.current||!j)return;const o=F.current,r=o.clientWidth,d=o.clientHeight;j.setSize(r,d),ne.aspect=r/d,ne.updateProjectionMatrix()};return window.addEventListener("resize",fe),()=>{window.removeEventListener("resize",fe),document.removeEventListener("keydown",ge),K.current&&K.current.dispose(),te.current&&cancelAnimationFrame(te.current),ee&&j.domElement&&ee.removeChild(j.domElement),j.dispose()}},[a,A,B,Y,E,C]),e.jsx("div",{ref:F,className:"w-full h-full"})},At=({galaxyUrl:a,galaxyType:A="Spiral",numSystems:B=1e4,blackHoles:Y=5,pulsars:E=10,quasars:C=3})=>{const[F,P]=w.useState("Aligning Stargate..."),[Me,te]=w.useState(!1),[K,V]=w.useState(!1),[H,ee]=w.useState(!1),[S,me]=w.useState(!1);w.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){P("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),te(!0);const j=(Q,O)=>Array.from({length:O},()=>Q[Math.floor(Math.random()*Q.length)]).join(""),U=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:35},{chars:"0123456789ABCDEF",duration:20,iterations:50},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:'\",.<>?/`~",duration:15,iterations:100}];let g=0,s=0;const ue=()=>{if(g>=U.length){const O="Stargate system aligned";let X=0;P("");const ie=()=>{X<O.length?(P(O.substring(0,X+1)),X++,setTimeout(ie,30)):te(!1)};ie();return}const Q=U[g];P(j(Q.chars,32)),s++,s>=Q.iterations&&(g++,s=0),setTimeout(ue,Q.duration)};ue()},[]),w.useEffect(()=>{const ne=document.createElement("style");return ne.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(ne),()=>{document.head.removeChild(ne)}},[]);const _=()=>{ee(!0),setTimeout(()=>{V(!1),ee(!1)},300)};return w.useEffect(()=>(document.addEventListener("galaxy-close-fullscreen",_),()=>{document.removeEventListener("galaxy-close-fullscreen",_)}),[]),w.useEffect(()=>{if(S){const ne=setTimeout(()=>me(!1),50);return()=>clearTimeout(ne)}},[S]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Galaxy Visualization"})}),e.jsx("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:e.jsx(It,{galaxyType:A,numSystems:B,blackHoles:Y,pulsars:E,quasars:C,onExpandClick:()=>{V(!0),me(!0)}})}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:a,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${Me?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),F]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]}),K&&tt.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${H||S?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${H||S?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:"Galaxy View"})}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Galaxy Visualization"}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Type: ",A," • Systems: ",B.toLocaleString()]})]})}),e.jsx("button",{onClick:_,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(Dt,{galaxyType:A,numSystems:B,blackHoles:Y,pulsars:E,quasars:C})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},Ft=({systems:a,coordinates:A})=>{const[B,Y]=w.useState(new Map);return w.useEffect(()=>{(()=>{try{const C=new Map;a.forEach(F=>{const P=bt(A,F.index,F.num_planets||1);C.set(F.index,P)}),Y(C)}catch{}})()},[A,a]),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:a.map(E=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[(()=>{const C=B.get(E.index)||"none";return C==="complete"?e.jsx("div",{className:"absolute top-1 right-1 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}):C==="partial"?e.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500/20 border border-yellow-500/50 text-yellow-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"PARTIAL"}):null})(),e.jsxs("button",{onClick:()=>window.location.href=`/system/${E.index}`,className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["#",E.number]}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:E.name})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},E.index))}),a.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No systems found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This galaxy appears to be empty"})]})]})},_t=({currentGalaxy:a})=>{const[A,B]=w.useState(!1),[Y,E]=w.useState(!1),[C,F]=w.useState(!0),P=1e7;w.useEffect(()=>{const[H,ee,S]=a.coordinates,me=!(H===0&&ee===0&&S===0),_=!(H===P&&ee===P&&S===P);B(me),E(_),F(!1)},[a.coordinates]);const Me=()=>{const[H,ee,S]=a.coordinates;return S>0?[H,ee,S-1]:ee>0?[H,ee-1,P]:H>0?[H-1,P,P]:[0,0,0]},te=()=>{const[H,ee,S]=a.coordinates;return S<P?[H,ee,S+1]:ee<P?[H,ee+1,0]:H<P?[H+1,0,0]:[P,P,P]},K=()=>{if(A){if(!Ae.canAffordTravel("galaxy",1)){Ae.executeTravel("galaxy",1);return}if(!Ae.executeTravel("galaxy",1))return;const[ee,S,me]=Me(),_=document.createElement("form");_.method="POST",_.action="/navigate";const ne=document.createElement("input");ne.type="hidden",ne.name="x",ne.value=ee.toString();const j=document.createElement("input");j.type="hidden",j.name="y",j.value=S.toString();const U=document.createElement("input");U.type="hidden",U.name="z",U.value=me.toString(),_.appendChild(ne),_.appendChild(j),_.appendChild(U),document.body.appendChild(_),_.submit()}},V=()=>{if(Y){if(!Ae.canAffordTravel("galaxy",1)){Ae.executeTravel("galaxy",1);return}if(!Ae.executeTravel("galaxy",1))return;const[ee,S,me]=te(),_=document.createElement("form");_.method="POST",_.action="/navigate";const ne=document.createElement("input");ne.type="hidden",ne.name="x",ne.value=ee.toString();const j=document.createElement("input");j.type="hidden",j.name="y",j.value=S.toString();const U=document.createElement("input");U.type="hidden",U.name="z",U.value=me.toString(),_.appendChild(ne),_.appendChild(j),_.appendChild(U),document.body.appendChild(_),_.submit()}};return C?null:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:K,disabled:!A,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${A?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:V,disabled:!Y,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${Y?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})},Tt=({page:a,prevPage:A,nextPage:B,finish:Y})=>{const E="px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105",C="bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg",F="bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white border border-white/20";return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 sm:gap-4 flex-wrap",children:[a!==1&&e.jsxs("button",{onClick:()=>window.location.href="/galaxy/1",className:`${E} ${F}`,title:"First page",children:[e.jsx("span",{className:"hidden sm:inline",children:"First"}),e.jsx("span",{className:"sm:hidden",children:"«"})]}),A&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${A}`,className:`${E} ${F}`,title:"Previous page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"‹"})]}),(()=>{const P=[],te=Math.max(1,a-2),K=Math.min(Y,a+2);te>1&&(P.push(e.jsx("button",{onClick:()=>window.location.href="/galaxy/1",className:`${E} ${F}`,children:"1"},1)),te>2&&P.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"start-ellipsis")));for(let V=te;V<=K;V++)V===a?P.push(e.jsx("span",{className:`${E} ${C} cursor-default`,children:V},V)):P.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${V}`,className:`${E} ${F} cursor-pointer`,children:V},V));return K<Y&&(K<Y-1&&P.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"end-ellipsis")),P.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${Y}`,className:`${E} ${F}`,children:Y},Y))),P})(),B&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${B}`,className:`${E} ${F}`,title:"Next page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"›"})]}),a!==Y&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${Y}`,className:`${E} ${F}`,title:"Last page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Last"}),e.jsx("span",{className:"sm:hidden",children:"»"})]})]}),e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-400",children:["Page ",a," of ",Y]})]})},et=({galaxy:a,systems:A,galaxy_url:B,version:Y,page:E,prev_page:C,next_page:F,finish:P,image_url:Me})=>{const[te]=w.useState(a.coordinates.join(","));w.useEffect(()=>{document.body.setAttribute("data-coordinates",te),Mt(te)},[te]);const K=V=>V.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsx(jt,{}),e.jsxs("div",{className:"relative z-10 pt-1",children:[e.jsx(St,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["Galaxy '",K(a.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Coordinates ",a.coordinates.join(", ")]})]}),e.jsx(_t,{currentGalaxy:a}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(At,{galaxyUrl:B,imageUrl:Me,galaxyType:a.galaxy_type,numSystems:a.num_systems,blackHoles:a.black_holes,pulsars:a.pulsars,quasars:a.quasars})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(Gt,{galaxy:a})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Systems in '",K(a.name),"'"]}),e.jsx(Ft,{systems:A,coordinates:te})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsx("span",{className:"text-base sm:text-lg",children:"← Go Back to Planetary Index"})})}),e.jsx(Tt,{page:E,prevPage:C,nextPage:F,finish:P})]}),e.jsx(Pt,{version:Y})]}),e.jsx(Et,{}),e.jsx(Nt,{currentLocation:{type:"galaxy",name:a.name,coordinates:a.coordinates.join(",")}})]})};document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("atlas-react-root");if(!a)return;const A=B=>{const Y=document.getElementById(B);if(!Y||!Y.textContent)return null;try{return JSON.parse(Y.textContent.trim())}catch{return null}};try{const B=A("data-galaxy")||{},Y=A("data-systems")||[],E=A("data-navigation")||{},C=A("data-common")||{},F={galaxy:{name:B.name||"Unknown Galaxy",coordinates:B.coordinates||[0,0,0],galaxy_type:B.galaxy_type||"Unknown",num_systems:B.num_systems||0,black_holes:B.black_holes||0,pulsars:B.pulsars||0,quasars:B.quasars||0},systems:Y,galaxy_url:E.galaxy_url||"#",version:C.version||"1.0.0",page:E.page||1,prev_page:E.prev_page,next_page:E.next_page,finish:E.finish||1,image_url:C.image_url||""};Ke.createRoot(a).render(Je.createElement(et,F))}catch{const Y={galaxy:{name:"Unknown Galaxy",coordinates:[0,0,0],galaxy_type:"Unknown",num_systems:0,black_holes:0,pulsars:0,quasars:0},systems:[],galaxy_url:"#",version:"1.0.0",page:1,finish:1,image_url:""};Ke.createRoot(a).render(Je.createElement(et,Y))}});
