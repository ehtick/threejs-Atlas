import{j as a,r as p}from"./atlas_Bv5zr7cG9joXJ1l7Eo-6s.js";const V=()=>a.jsx("header",{className:"bg-black/20 backdrop-blur-md border-b border-white/10 px-4 sm:px-6 py-4",children:a.jsxs("div",{className:"w-full flex items-center justify-between",children:[a.jsxs("a",{href:"/",className:"flex items-center space-x-3 sm:space-x-4",children:[a.jsx("img",{src:"/static/atlas-logo.jpg",alt:"Atlas Logo",className:"h-10 w-10 sm:h-12 sm:w-12 rounded-full border-2 border-blue-400 shadow-lg"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"The Atlas"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 hidden sm:block",children:"Universal Navigation System"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"ONLINE"})]}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400 hidden lg:block",children:"Quantum Navigation Ready"})]})]})});class _{static STORAGE_KEY="_atlasDailyChallenges";static BASE_GOALS={galaxies:4,systems:10,planets:30};static getTodaysChallenges(){const e=new Date().toISOString().split("T")[0],t=this.getStoredChallenges();return!t||t.date!==e?this.createNewDayChallenges(e,t):t}static getStoredChallenges(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):null}catch(e){return console.error("Error reading daily challenges:",e),null}}static createNewDayChallenges(e,t){const s=t?t.dayNumber+1:1,r=Math.min(1+(s-1)*.1,2),n=this.getCurrentStats(),o=[{type:"galaxies",current:n.galaxies,target:Math.ceil(this.BASE_GOALS.galaxies*r),dayNumber:s,completed:!1},{type:"systems",current:n.systems,target:Math.ceil(this.BASE_GOALS.systems*r),dayNumber:s,completed:!1},{type:"planets",current:n.planets,target:Math.ceil(this.BASE_GOALS.planets*r),dayNumber:s,completed:!1}],i={date:e,dayNumber:s,challenges:o,lastReset:Date.now()};return this.saveChallenges(i),i}static getCurrentStats(){try{const e=localStorage.getItem("__atlasArchive");if(!e)return{galaxies:0,systems:0,planets:0};const t=JSON.parse(e);let s=0,r=0;return Object.values(t.g||{}).forEach(n=>{s+=Object.keys(n).length,Object.values(n).forEach(o=>{typeof o=="string"&&(r+=(o.match(/1/g)||[]).length)})}),{galaxies:Object.keys(t.g||{}).length,systems:s,planets:r}}catch(e){return console.error("Error getting current stats:",e),{galaxies:0,systems:0,planets:0}}}static updateProgress(){const e=this.getTodaysChallenges(),t=this.getCurrentStats(),s=e.challenges.every(n=>n.completed);e.challenges.forEach(n=>{const o=t[n.type];n.current=o,n.completed=o>=n.target});const r=e.challenges.every(n=>n.completed);return!s&&r&&this.recordCompletedDay(e.date),this.saveChallenges(e),e}static recordCompletedDay(e){try{const t="_atlasCompletionHistory",s=localStorage.getItem(t),r=s?JSON.parse(s):[];r.includes(e)||(r.push(e),localStorage.setItem(t,JSON.stringify(r)))}catch(t){console.error("Error recording completed day:",t)}}static saveChallenges(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving daily challenges:",t)}}static getCompletionStatus(){const e=this.getTodaysChallenges(),t=e.challenges.filter(r=>r.completed).length,s=e.challenges.length;return{completed:t,total:s,allCompleted:t===s}}static getDayInfo(){const e=this.getTodaysChallenges();return{dayNumber:e.dayNumber,multiplier:Math.min(1+(e.dayNumber-1)*.1,2)}}}class C{static STORAGE_KEY="_atlasLocations";static BASE_MAX_LOCATIONS=50;static BONUS_PER_COMPLETION=10;static ABSOLUTE_MAX_LOCATIONS=1e3;static getLocations(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Error reading saved locations:",e),[]}}static saveLocation(e){try{const t=this.getLocations(),s=t.findIndex(o=>o.stargateUrl===e.stargateUrl),r={...e,id:this.generateId(),timestamp:Date.now()};s!==-1?t[s]=r:t.push(r);const n=this.getCurrentMaxLocations();t.length>n&&(t.sort((o,i)=>i.timestamp-o.timestamp),t.splice(n)),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(t){console.error("Error saving location:",t)}}static removeLocation(e){try{const s=this.getLocations().filter(r=>r.id!==e);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(s))}catch(t){console.error("Error removing location:",t)}}static clearAllLocations(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(e){console.error("Error clearing locations:",e)}}static generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static getCurrentMaxLocations(){try{const e=this.getCompletedDaysCount(),t=_.getCompletionStatus().allCompleted?1:0,s=this.BASE_MAX_LOCATIONS+(e+t)*this.BONUS_PER_COMPLETION;return Math.min(s,this.ABSOLUTE_MAX_LOCATIONS)}catch(e){return console.error("Error calculating max locations:",e),this.BASE_MAX_LOCATIONS}}static getCompletedDaysCount(){try{const t=localStorage.getItem("_atlasCompletionHistory");if(t){const s=JSON.parse(t);return Array.isArray(s)?s.length:0}return 0}catch(e){return console.error("Error getting completion history:",e),0}}static getLocationStats(){const e=this.getLocations(),t=this.getCurrentMaxLocations();return console.log("Location debug:",{completedDays:this.getCompletedDaysCount(),todayCompleted:_.getCompletionStatus().allCompleted,maxAllowed:t}),{total:e.length,galaxies:e.filter(s=>s.type==="galaxy").length,systems:e.filter(s=>s.type==="system").length,planets:e.filter(s=>s.type==="planet").length,maxAllowed:t}}}const A="atlas_ship_resources",O="atlas_ship_upgrades";class m{static DEFAULT_RESOURCES={antimatter:100,element115:50,deuterium:75};static DEFAULT_UPGRADE={level:1,efficiency:1,range:200,storage:200};static getResources(){const e=localStorage.getItem(A);return e?JSON.parse(e):(this.setResources(this.DEFAULT_RESOURCES),this.DEFAULT_RESOURCES)}static setResources(e){localStorage.setItem(A,JSON.stringify(e))}static addResources(e){const t=this.getResources(),s=this.getUpgrade();t.antimatter=Math.min((t.antimatter||0)+(e.antimatter||0),s.storage),t.element115=Math.min((t.element115||0)+(e.element115||0),s.storage),t.deuterium=Math.min((t.deuterium||0)+(e.deuterium||0),s.storage),this.setResources(t)}static consumeResources(e){const t=this.getResources(),s=this.getUpgrade(),r={antimatter:Math.floor(e.antimatter/s.efficiency),element115:Math.floor(e.element115/s.efficiency),deuterium:Math.floor(e.deuterium/s.efficiency)};return t.antimatter>=r.antimatter&&t.element115>=r.element115&&t.deuterium>=r.deuterium?(t.antimatter-=r.antimatter,t.element115-=r.element115,t.deuterium-=r.deuterium,this.setResources(t),!0):!1}static calculateTravelCost(e,t){const r={galaxy:{antimatter:.5,element115:.3,deuterium:.2},system:{antimatter:.2,element115:.4,deuterium:.4},planet:{antimatter:.1,element115:.2,deuterium:.7}}[t],n=Math.min(e,1e3);return{antimatter:Math.floor(n*r.antimatter),element115:Math.floor(n*r.element115),deuterium:Math.floor(n*r.deuterium)}}static canAffordTravel(e,t){const s=this.calculateTravelCost(e,t),r=this.getResources(),n=this.getUpgrade(),o={antimatter:Math.floor(s.antimatter/n.efficiency),element115:Math.floor(s.element115/n.efficiency),deuterium:Math.floor(s.deuterium/n.efficiency)};return r.antimatter>=o.antimatter&&r.element115>=o.element115&&r.deuterium>=o.deuterium&&e<=n.range}static getUpgrade(){const e=localStorage.getItem(O);return e?JSON.parse(e):(this.setUpgrade(this.DEFAULT_UPGRADE),this.DEFAULT_UPGRADE)}static setUpgrade(e){localStorage.setItem(O,JSON.stringify(e))}static getUpgradeCost(e){const s=Math.pow(1.5,e);return{antimatter:Math.floor(50*s),element115:Math.floor(50*s*.8),deuterium:Math.floor(50*s*.6)}}static upgradeShip(){const e=this.getUpgrade(),t=this.getUpgradeCost(e.level);return this.consumeResources(t)?(e.level+=1,e.efficiency=1+(e.level-1)*.2,e.range=200+(e.level-1)*100,e.storage=200+(e.level-1)*100,this.setUpgrade(e),!0):!1}static reset(){localStorage.removeItem(A),localStorage.removeItem(O)}static generateDailyResources(){const e=localStorage.getItem("atlas_last_resource_generation"),t=new Date().toDateString();e!==t&&(this.addResources({antimatter:30,element115:20,deuterium:25}),localStorage.setItem("atlas_last_resource_generation",t))}static generatePassiveResourcesFromSavedLocations(){const e=localStorage.getItem("atlas_last_passive_generation"),t=Date.now(),s=e?(t-parseInt(e))/(1e3*60*60):24;if(s>=1){const r=C.getLocations();let n={antimatter:0,element115:0,deuterium:0};r.forEach(o=>{const i={galaxy:{antimatter:2,element115:1.5,deuterium:1},system:{antimatter:1.5,element115:2,deuterium:1.5},planet:{antimatter:1,element115:1,deuterium:2.5}},c=i[o.type]||i.galaxy;n.antimatter+=Math.floor(c.antimatter*Math.floor(s)),n.element115+=Math.floor(c.element115*Math.floor(s)),n.deuterium+=Math.floor(c.deuterium*Math.floor(s))}),r.length>0&&(this.addResources(n),this.showPassiveResourcesNotification(n,r.length,Math.floor(s))),localStorage.setItem("atlas_last_passive_generation",t.toString())}}static showPassiveResourcesNotification(e,t,s){if(e.antimatter+e.element115+e.deuterium===0)return;const r=document.createElement("div");r.className="fixed top-4 left-4 z-50 bg-blue-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-blue-500/50",r.style.animation="slideInLeft 0.3s ease-out",r.innerHTML=`
      <div class="flex items-center space-x-3">
        <span class="text-2xl">üìç</span>
        <div>
          <div class="text-sm font-bold text-blue-300">Passive Mining Complete!</div>
          <div class="text-xs text-blue-200 mt-1">
            ${t} locations ‚Ä¢ ${s}h mining
          </div>
          <div class="text-xs text-blue-200 flex gap-3 mt-1">
            <span class="text-purple-300">+${e.antimatter} AM</span>
            <span class="text-cyan-300">+${e.element115} E115</span>
            <span class="text-orange-300">+${e.deuterium} D</span>
          </div>
        </div>
      </div>
    `,document.body.appendChild(r),setTimeout(()=>{r.style.animation="slideOutLeft 0.3s ease-in forwards",setTimeout(()=>{r.remove()},300)},5e3)}}class N{static calculateDistance(e,t){const s=Math.abs(t[0]-e[0]),r=Math.abs(t[1]-e[1]),n=Math.abs(t[2]-e[2]),o=Math.sqrt(s*s+r*r+n*n);return Math.floor(o/1e5)}static checkNavigationResources(e,t,s){const r=this.calculateDistance(e,t),n=m.calculateTravelCost(r,s),o=m.getResources(),i=m.getUpgrade(),c={antimatter:Math.floor(n.antimatter/i.efficiency),element115:Math.floor(n.element115/i.efficiency),deuterium:Math.floor(n.deuterium/i.efficiency)},d=o.antimatter>=c.antimatter&&o.element115>=c.element115&&o.deuterium>=c.deuterium,u=r<=i.range,h={canTravel:d&&u,cost:n,actualCost:c};return d||(h.missingResources={antimatter:Math.max(0,c.antimatter-o.antimatter),element115:Math.max(0,c.element115-o.element115),deuterium:Math.max(0,c.deuterium-o.deuterium)}),u||(h.exceedsRange=!0),h}static performNavigation(e,t,s){const r=[e.x,e.y,e.z],n=this.checkNavigationResources(t,r,s);if(n.canTravel&&m.consumeResources(n.cost)){const i=document.createElement("form");return i.method="POST",i.action="/navigate",Object.entries(e).forEach(([c,d])=>{const u=document.createElement("input");u.type="hidden",u.name=c,u.value=d.toString(),i.appendChild(u)}),document.body.appendChild(i),i.submit(),!0}return!1}static showNavigationError(e){let t="Cannot travel: ";if(e.exceedsRange)t+="Destination exceeds ship range. Upgrade your ship to travel further.";else if(e.missingResources){const r=[];e.missingResources.antimatter>0&&r.push(`${e.missingResources.antimatter} Antimatter`),e.missingResources.element115>0&&r.push(`${e.missingResources.element115} Element 115`),e.missingResources.deuterium>0&&r.push(`${e.missingResources.deuterium} Deuterium`),t+=`Insufficient resources. Need: ${r.join(", ")}`}const s=document.createElement("div");if(s.className="fixed top-4 right-4 z-50 bg-red-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-red-500/50",s.style.animation="slideInRight 0.3s ease-out",s.innerHTML=`
      <div class="flex items-center space-x-2">
        <span class="text-red-300">‚ö†Ô∏è</span>
        <span class="text-sm">${t}</span>
      </div>
    `,!document.getElementById("navigation-toast-styles")){const r=document.createElement("style");r.id="navigation-toast-styles",r.textContent=`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        @keyframes slideOutRight {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(100%);
            opacity: 0;
          }
        }
      `,document.head.appendChild(r)}document.body.appendChild(s),setTimeout(()=>{s.style.animation="slideOutRight 0.3s ease-in forwards",setTimeout(()=>{s.remove()},300)},5e3)}}const S=g=>{const[e,t,s]=g.split(",").map(Number);return`${e.toString(36)}_${t.toString(36)}_${s.toString(36)}`};class w{static STORAGE_KEY="__atlasArchive";static MAX_ENTRIES_PER_GALAXY=1e3;static getData(){try{this.cleanupLegacyStorage();const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):{g:{}}}catch(e){return console.error("Error reading Atlas archive:",e),{g:{}}}}static cleanupLegacyStorage(){try{const e="atlasHistoricalData";localStorage.getItem(e)&&localStorage.removeItem(e)}catch(e){console.error("Error cleaning up legacy storage:",e)}}static saveData(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving Atlas archive:",t)}}static performCleanup(e){const t=Object.keys(e.g);t.length>100&&t.slice(0,t.length-100).forEach(r=>delete e.g[r]),Object.keys(e.g).forEach(s=>{const r=e.g[s],n=Object.keys(r);n.length>this.MAX_ENTRIES_PER_GALAXY&&n.slice(0,n.length-this.MAX_ENTRIES_PER_GALAXY).forEach(i=>delete r[i])})}static performEmergencyCleanup(){const e=document.body.getAttribute("data-coordinates");if(e){const t=S(e),s=this.getData(),r=s.g[t];s.g={},r&&(s.g[t]=r),this.saveData(s)}}static markPlanetVisited(e,t,s,r){const n=this.getData(),o=S(e),i=t.toString(16),c=r.findIndex(u=>u.name.toLowerCase()===s.toLowerCase());if(c===-1){console.warn(`Planet ${s} not found in system planets list`);return}n.g[o]||(n.g[o]={}),n.g[o][i]||(n.g[o][i]="");const d=this.bitmapToIndices(n.g[o][i]);d.includes(c)||(d.push(c),n.g[o][i]=this.indicesToBitmap(d),this.saveData(n))}static markSystemVisited(e,t){const s=this.getData(),r=S(e),n=t.toString(16);s.g[r]||(s.g[r]={}),s.g[r][n]||(s.g[r][n]="",this.saveData(s))}static bitmapToIndices(e){return e?e.split("").map((t,s)=>t==="1"?s:-1).filter(t=>t!==-1):[]}static indicesToBitmap(e){if(e.length===0)return"";const t=Math.max(...e),s=Array(t+1).fill("0");return e.forEach(r=>{r>=0&&(s[r]="1")}),s.join("")}static isSystemVisited(e,t){const s=this.getData(),r=S(e),n=t.toString(16);return!!(s.g[r]&&n in s.g[r])}static getVisitedPlanets(e,t,s){const r=this.getData(),n=S(e),o=t.toString(16),i=r.g[n]?.[o]||"";return this.bitmapToIndices(i).map(d=>{const u=s[d];return u?u.name.toLowerCase():null}).filter(d=>d!==null)}static getVisitedPlanetCount(e,t){const s=this.getData(),r=S(e),n=t.toString(16),o=s.g[r]?.[n]||"";return this.bitmapToIndices(o).length}static getStorageStats(){const e=this.getData(),t=JSON.stringify(e);let s=0,r=0;return Object.values(e.g).forEach(n=>{s+=Object.keys(n).length,Object.values(n).forEach(o=>{r+=o.length})}),{size:t.length,galaxies:Object.keys(e.g).length,systems:s,planets:r}}}const W=(g,e,t,s)=>{w.markPlanetVisited(g,e,t,s)},q=(g,e)=>{w.markSystemVisited(g,e)},Q=(g,e,t)=>w.getVisitedPlanets(g,e,t),H=(g,e)=>w.isSystemVisited(g,e),Z=(g,e,t,s)=>{if(!H(g,e))return"none";{const r=w.getVisitedPlanetCount(g,e);return r>=t&&t>0?"complete":(r>0,"partial")}},J=()=>w.getStorageStats(),U="atlas_resource_collections",$=1;class X{static getCollections(){const e=localStorage.getItem(U);return e?JSON.parse(e):{}}static setCollections(e){localStorage.setItem(U,JSON.stringify(e))}static generateLocationId(e,t,s,r){switch(e){case"galaxy":return`galaxy_${t}`;case"system":return`system_${t}_${s}`;case"planet":return`planet_${t}_${s}_${r?.toLowerCase()}`;default:return`unknown_${t}`}}static getLocationCollection(e){return this.getCollections()[e]||null}static canCollectFromLocation(e){const t=this.getLocationCollection(e);return t?(Date.now()-t.lastCollected)/(1e3*60*60)>=$:!0}static getTimeUntilNextCollection(e){const t=this.getLocationCollection(e);if(!t)return 0;const r=(Date.now()-t.lastCollected)/(1e3*60*60),n=$-r;return n>0?n:0}static calculateReward(e,t=0){const r={galaxy:{antimatter:20,element115:15,deuterium:10},system:{antimatter:15,element115:20,deuterium:15},planet:{antimatter:10,element115:10,deuterium:25}}[e],n=t>5?Math.max(.3,1-(t-5)*.1):1,o=.8+Math.random()*.4;return{antimatter:Math.floor(r.antimatter*n*o),element115:Math.floor(r.element115*n*o),deuterium:Math.floor(r.deuterium*n*o)}}static collectResources(e,t){if(!this.canCollectFromLocation(e))return null;const s=this.getCollections(),r=s[e],n=r?r.totalCollections:0,o=this.calculateReward(t,n);return s[e]={id:e,lastCollected:Date.now(),totalCollections:n+1},this.setCollections(s),m.addResources(o),o}static getCollectionStats(){const e=this.getCollections(),t=Object.keys(e);let s=0;const r={antimatter:0,element115:0,deuterium:0};return t.forEach(n=>{const o=e[n];s+=o.totalCollections;const i=n.match(/^(galaxy|system|planet)_/);if(i){const c=i[1];for(let d=0;d<o.totalCollections;d++){const u=this.calculateReward(c,d);r.antimatter+=u.antimatter,r.element115+=u.element115,r.deuterium+=u.deuterium}}}),{totalCollections:s,uniqueLocations:t.length,totalResourcesGathered:r}}static showCollectionSuccess(e,t){const s=document.createElement("div");s.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-green-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-green-500/50",s.style.animation="slideInDown 0.3s ease-out";const r={galaxy:"üåå",system:"‚≠ê",planet:"ü™ê"}[t]||"üì¶";if(s.innerHTML=`
      <div class="flex items-center space-x-3">
        <span class="text-2xl">${r}</span>
        <div>
          <div class="text-sm font-bold text-green-300">Resources Collected!</div>
          <div class="text-xs text-green-200 mt-1 flex gap-3">
            <span class="text-purple-300">+${e.antimatter} AM</span>
            <span class="text-cyan-300">+${e.element115} E115</span>
            <span class="text-orange-300">+${e.deuterium} D</span>
          </div>
        </div>
      </div>
    `,!document.getElementById("collection-toast-styles")){const n=document.createElement("style");n.id="collection-toast-styles",n.textContent=`
        @keyframes slideInDown {
          from {
            transform: translate(-50%, -100%);
            opacity: 0;
          }
          to {
            transform: translate(-50%, 0);
            opacity: 1;
          }
        }
        @keyframes slideOutUp {
          from {
            transform: translate(-50%, 0);
            opacity: 1;
          }
          to {
            transform: translate(-50%, -100%);
            opacity: 0;
          }
        }
      `,document.head.appendChild(n)}document.body.appendChild(s),setTimeout(()=>{s.style.animation="slideOutUp 0.3s ease-in forwards",setTimeout(()=>{s.remove()},300)},3e3)}}const P=({value:g,max:e,label:t,color:s="indigo",size:r="xs",showPercentage:n=!1})=>{const o=e>0?Math.min(g/e*100,100):0,i={indigo:{bg:"bg-indigo-500/20",fill:"bg-gradient-to-r from-indigo-500 to-indigo-400",text:"text-indigo-400"},blue:{bg:"bg-blue-500/20",fill:"bg-gradient-to-r from-blue-500 to-blue-400",text:"text-blue-400"},purple:{bg:"bg-purple-500/20",fill:"bg-gradient-to-r from-purple-500 to-purple-400",text:"text-purple-400"},cyan:{bg:"bg-cyan-500/20",fill:"bg-gradient-to-r from-cyan-500 to-cyan-400",text:"text-cyan-400"},green:{bg:"bg-green-500/20",fill:"bg-gradient-to-r from-green-500 to-green-400",text:"text-green-400"}},c={xs:"h-1.5",sm:"h-2"},d=i[s],u=c[r];return a.jsxs("div",{className:"w-full",children:[t&&a.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-400",children:t}),n&&a.jsxs("span",{className:`${d.text} font-medium`,children:[o.toFixed(0),"%"]})]}),a.jsx("div",{className:`w-full ${d.bg} rounded-full overflow-hidden ${u}`,children:a.jsx("div",{className:`${d.fill} ${u} rounded-full transition-all duration-700 ease-out shadow-sm`,style:{width:`${o}%`},children:a.jsx("div",{className:`w-full h-full ${d.fill} opacity-50 animate-pulse`})})})]})},ee=({currentLocation:g})=>{const[e,t]=p.useState(!1),[s,r]=p.useState(!1),[n,o]=p.useState("stats"),[i,c]=p.useState(null),[d,u]=p.useState([]),[h,E]=p.useState(null),[v,G]=p.useState(null),[y,D]=p.useState(null),[x,I]=p.useState(null),[b,B]=p.useState(null),R=p.useRef(null);p.useEffect(()=>{if(e){c(J()),u(C.getLocations()),E(C.getLocationStats());const l=_.updateProgress();G(l),m.generateDailyResources(),m.generatePassiveResourcesFromSavedLocations(),D(m.getResources()),I(m.getUpgrade()),B(X.getCollectionStats())}},[e]);const L=()=>{r(!0),setTimeout(()=>{t(!1),r(!1)},300)},K=()=>{e?L():t(!0)};p.useEffect(()=>{const l=f=>{e&&!s&&R.current&&!R.current.contains(f.target)&&L()};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[e,s]);const z=l=>{if(l===0)return"0 B";const f=1024,M=["B","KB","MB"],k=Math.floor(Math.log(l)/Math.log(f));return parseFloat((l/Math.pow(f,k)).toFixed(2))+" "+M[k]},T=l=>l.replace(/_/g," "),F=(l,f)=>{l.stopPropagation(),C.removeLocation(f),u(C.getLocations()),E(C.getLocationStats())};return a.jsx(a.Fragment,{children:a.jsxs("div",{ref:R,className:"fixed bottom-4 sm:bottom-6 right-4 sm:right-6 z-50",children:[a.jsxs("button",{onClick:K,className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-600 via-purple-600 to-blue-800 hover:from-blue-500 hover:via-purple-500 hover:to-blue-700 text-white rounded-full shadow-2xl border-2 border-blue-400/30 transition-all duration-300 transform hover:scale-105 backdrop-blur-sm",title:"Spaceship Control Panel",children:[a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("svg",{className:"flex items-center justify-center",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",children:a.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[a.jsx("path",{d:"M12 3a6.02 6.02 0 0 0-5.923 4.9c-.086.466-.13.699.032 1.005c.161.307.39.409.847.613c1.38.614 3.134.982 5.044.982s3.665-.368 5.044-.982c.457-.204.686-.306.847-.613c.162-.306.118-.54.032-1.005A6.02 6.02 0 0 0 12 3"}),a.jsx("path",{d:"M17 5.5c2.989.788 5 2.26 5 3.945C22 11.961 17.523 14 12 14S2 11.96 2 9.445C2 7.76 4.011 6.288 7 5.5M12 18v3m5-4l1 4M7 17l-1 4"})]})})}),a.jsx("div",{className:"absolute inset-0 rounded-full bg-blue-400/20 animate-ping"})]}),e&&a.jsxs("div",{className:"fixed bottom-20 sm:bottom-24 right-2 sm:right-6 w-[calc(100vw-1rem)] sm:w-96 max-w-md max-h-[70vh] sm:max-h-96 bg-black/90 backdrop-blur-xl rounded-2xl border border-blue-400/30 shadow-2xl z-40 overflow-hidden transition-all duration-300 ease-out",style:{animation:s?"slideDownFadeOut 0.3s ease-out forwards":"slideUpFadeIn 0.3s ease-out forwards"},children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 p-4 border-b border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),a.jsx("h3",{className:"text-white font-bold text-lg",children:"üöÄ Spaceship Control"})]}),a.jsx("button",{onClick:L,className:"text-gray-400 hover:text-white transition-colors duration-200",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex mt-3 space-x-1",children:[a.jsx("button",{onClick:()=>o("stats"),className:`px-2 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 ${n==="stats"?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:"üìä Stats"}),a.jsx("button",{onClick:()=>o("ship"),className:`px-2 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 ${n==="ship"?"bg-green-500/30 text-green-300 border border-green-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:"üöÄ Ship"}),a.jsxs("button",{onClick:()=>o("locations"),className:`px-2 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 ${n==="locations"?"bg-purple-500/30 text-purple-300 border border-purple-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:["üìç Saved (",h?.total||0,")"]})]})]}),a.jsxs("div",{className:"p-4 max-h-64 overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[n==="stats"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"text-white font-semibold text-sm",children:"üåü Daily Challenges"}),v&&a.jsxs("div",{className:"text-xs text-indigo-400 font-medium",children:["Day ",v.dayNumber," ‚Ä¢ x",Math.min(1+(v.dayNumber-1)*.1,2).toFixed(1)]})]}),v&&a.jsx("div",{className:"space-y-3 mb-4",children:v.challenges.map(l=>{const f={galaxies:"indigo",systems:"blue",planets:"purple"},M={galaxies:"Galaxies Explored",systems:"Systems Visited",planets:"Planets Discovered"};return a.jsxs("div",{className:"relative",children:[a.jsx(P,{value:l.current,max:l.target,label:`${M[l.type]}: ${l.current}/${l.target}`,color:f[l.type],showPercentage:!0}),l.completed&&a.jsx("div",{className:"absolute -right-3 top-0 text-white bg-green-500 px-0.5 rounded-full text-[8px]",children:"‚úì"})]},l.type)})}),v&&a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-4",children:[a.jsxs("div",{className:"bg-white/5 rounded-lg p-2 border border-indigo-500/20",children:[a.jsx("div",{className:"text-gray-400",children:"Completed"}),a.jsxs("div",{className:"text-indigo-400 font-bold",children:[v.challenges.filter(l=>l.completed).length,"/",v.challenges.length]})]}),a.jsxs("div",{className:"bg-white/5 rounded-lg p-2 border border-green-500/20",children:[a.jsx("div",{className:"text-gray-400",children:"Archive Size"}),a.jsx("div",{className:"text-green-400 font-bold",children:i?z(i.size):"0 B"})]})]}),b&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"text-white font-semibold mb-3 text-sm",children:"üì¶ Resource Collection"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[a.jsxs("div",{className:"bg-white/5 rounded-lg p-2 border border-yellow-500/20",children:[a.jsx("div",{className:"text-gray-400",children:"Locations Mined"}),a.jsx("div",{className:"text-yellow-400 font-bold",children:b.uniqueLocations})]}),a.jsxs("div",{className:"bg-white/5 rounded-lg p-2 border border-orange-500/20",children:[a.jsx("div",{className:"text-gray-400",children:"Total Collections"}),a.jsx("div",{className:"text-orange-400 font-bold",children:b.totalCollections})]})]}),a.jsxs("div",{className:"bg-white/5 rounded-lg p-2 border border-cyan-500/20",children:[a.jsx("div",{className:"text-gray-400 text-[10px] mb-1",children:"Total Resources Gathered"}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsxs("span",{className:"text-purple-400",children:[b.totalResourcesGathered.antimatter," AM"]}),a.jsxs("span",{className:"text-cyan-400",children:[b.totalResourcesGathered.element115," E115"]}),a.jsxs("span",{className:"text-orange-400",children:[b.totalResourcesGathered.deuterium," D"]})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold mb-3 text-sm",children:"üìç Saved Locations"}),a.jsx("div",{className:"mb-3",children:a.jsx(P,{value:h?.total||0,max:h?.maxAllowed||50,label:`Saved Locations: ${h?.total||0}/${h?.maxAllowed||50}`,color:"cyan",showPercentage:!0})}),a.jsxs("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[a.jsxs("div",{className:"bg-white/5 rounded p-1.5 text-center",children:[a.jsx("div",{className:"text-gray-400 text-[10px]",children:"Galaxies"}),a.jsx("div",{className:"text-indigo-400 font-bold text-xs",children:h?.galaxies||0})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1.5 text-center",children:[a.jsx("div",{className:"text-gray-400 text-[10px]",children:"Systems"}),a.jsx("div",{className:"text-blue-400 font-bold text-xs",children:h?.systems||0})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1.5 text-center",children:[a.jsx("div",{className:"text-gray-400 text-[10px]",children:"Planets"}),a.jsx("div",{className:"text-purple-400 font-bold text-xs",children:h?.planets||0})]})]}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-2",children:"*Complete your daily tasks to be able to save more Atlas locations"})]})]}),n==="ship"&&y&&x&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsxs("h4",{className:"text-white font-semibold mb-3 text-sm flex items-center justify-between",children:[a.jsx("span",{children:"‚ö° Resources"}),a.jsxs("span",{className:"text-xs text-gray-400",children:["Level ",x.level]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[a.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-700/20 rounded-lg p-2 border border-purple-500/30",children:[a.jsx("div",{className:"text-[10px] text-purple-300 mb-1",children:"Antimatter"}),a.jsx("div",{className:"text-purple-400 font-bold text-sm",children:y.antimatter}),a.jsxs("div",{className:"text-[9px] text-purple-300/60",children:["/",x.storage]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-cyan-900/30 to-cyan-700/20 rounded-lg p-2 border border-cyan-500/30",children:[a.jsx("div",{className:"text-[10px] text-cyan-300 mb-1",children:"Element 115"}),a.jsx("div",{className:"text-cyan-400 font-bold text-sm",children:y.element115}),a.jsxs("div",{className:"text-[9px] text-cyan-300/60",children:["/",x.storage]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 to-orange-700/20 rounded-lg p-2 border border-orange-500/30",children:[a.jsx("div",{className:"text-[10px] text-orange-300 mb-1",children:"Deuterium"}),a.jsx("div",{className:"text-orange-400 font-bold text-sm",children:y.deuterium}),a.jsxs("div",{className:"text-[9px] text-orange-300/60",children:["/",x.storage]})]})]}),a.jsxs("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10",children:[a.jsx("h5",{className:"text-xs text-gray-300 mb-2 font-semibold",children:"Ship Stats"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400",children:"Efficiency"}),a.jsxs("span",{className:"text-green-400",children:["x",x.efficiency.toFixed(1)]})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400",children:"Max Range"}),a.jsxs("span",{className:"text-blue-400",children:[x.range," LY"]})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400",children:"Storage"}),a.jsx("span",{className:"text-purple-400",children:x.storage})]})]})]}),a.jsxs("button",{onClick:()=>{const l=m.getUpgradeCost(x.level);y.antimatter>=l.antimatter&&y.element115>=l.element115&&y.deuterium>=l.deuterium&&m.upgradeShip()&&(D(m.getResources()),I(m.getUpgrade()))},disabled:(()=>{const l=m.getUpgradeCost(x.level);return!(y.antimatter>=l.antimatter&&y.element115>=l.element115&&y.deuterium>=l.deuterium)})(),className:"w-full mt-3 py-2 bg-gradient-to-r from-green-600/30 to-blue-600/30 hover:from-green-600/40 hover:to-blue-600/40 disabled:from-gray-700/30 disabled:to-gray-600/30 text-white disabled:text-gray-500 rounded-lg border border-green-500/30 disabled:border-gray-600/30 transition-all duration-200 text-xs font-semibold",children:[a.jsx("div",{children:"üöÄ Upgrade Ship"}),a.jsxs("div",{className:"text-[10px] mt-1 opacity-75",children:["Cost: ",m.getUpgradeCost(x.level).antimatter," AM |",m.getUpgradeCost(x.level).element115," E115 |",m.getUpgradeCost(x.level).deuterium," D"]})]}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-2",children:"*Resources regenerate daily. Saved locations generate passive resources hourly!"})]})}),n==="locations"&&a.jsx("div",{className:"space-y-2",children:d.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"No saved locations"}),a.jsx("div",{className:"text-gray-500 text-xs",children:"Use the üìç button to save locations"})]}):d.map(l=>a.jsx("div",{className:"bg-white/5 hover:bg-white/10 rounded-lg p-2 border border-white/10 hover:border-white/20 transition-all duration-200 group",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("a",{href:l.stargateUrl,className:"flex-1 min-w-0 hover:text-blue-300 transition-colors duration-200",title:`Navigate to ${T(l.name)}`,children:a.jsxs("div",{className:"flex items-center space-x-1.5",children:[a.jsxs("div",{className:"text-[10px]",children:[l.type==="galaxy"&&"üåå",l.type==="system"&&"‚≠ê",l.type==="planet"&&"ü™ê"]}),a.jsx("div",{className:"text-white text-xs font-medium truncate",children:T(l.name)}),a.jsx("div",{className:"text-gray-500 text-[10px] shrink-0",children:new Date(l.timestamp).toLocaleDateString()})]})}),a.jsx("button",{onClick:f=>F(f,l.id),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-400 transition-all duration-200 ml-1",title:"Remove location",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},l.id))})]})]})]})})};class j{static instance;isInitialized=!1;static getInstance(){return j.instance||(j.instance=new j),j.instance}initialize(){this.isInitialized||(this.isInitialized=!0,document.addEventListener("click",this.handleClick.bind(this),!0),m.generateDailyResources(),m.generatePassiveResourcesFromSavedLocations())}checkAndConsume(e,t,s){const r=[e.x,e.y,e.z],n=N.calculateDistance(t,r),o=m.calculateTravelCost(n,s),i=m.getResources(),c=m.getUpgrade(),d={antimatter:Math.floor(o.antimatter/c.efficiency),element115:Math.floor(o.element115/c.efficiency),deuterium:Math.floor(o.deuterium/c.efficiency)},u=i.antimatter>=d.antimatter&&i.element115>=d.element115&&i.deuterium>=d.deuterium,h=n<=c.range;if(u&&h&&m.consumeResources(o))return this.showNavigationSuccess(d,s),!0;const E=N.checkNavigationResources(t,r,s);return N.showNavigationError(E),!1}handleClick(e){const s=e.target.closest("a");if(!s||!s.href)return;const r=new URL(s.href);if(r.origin!==window.location.origin)return;const n=this.parseNavigation(r);if(!n)return;this.checkAndConsumeResources(n)||(e.preventDefault(),e.stopPropagation())}parseNavigation(e){const t=e.pathname;if(t.includes("/stargate/")){const s=t.split("/stargate/")[1];try{const r=atob(s),n=JSON.parse(r);return{type:n.type||"galaxy",destination:n.coordinates||[0,0,0],url:e.href}}catch{return null}}if(t.match(/^\/galaxy\/\d+$/)){const s=parseInt(t.split("/")[2]);return{type:"galaxy",destination:[s*1e3,s*1e3,s*1e3],url:e.href}}return t.match(/^\/system\/\d+$/)?{type:"system",destination:this.estimateSystemCoordinates(),url:e.href}:t.match(/^\/planet\//)?{type:"planet",destination:this.estimatePlanetCoordinates(),url:e.href}:null}getCurrentCoordinates(){const e=window.location.pathname.match(/\/galaxy\/(\d+)/);if(e){const t=parseInt(e[1]);return[t*1e3,t*1e3,t*1e3]}return[0,0,0]}estimateSystemCoordinates(){const e=this.getCurrentCoordinates();return[e[0]+100,e[1]+100,e[2]+100]}estimatePlanetCoordinates(){const e=this.getCurrentCoordinates();return[e[0]+10,e[1]+10,e[2]+10]}checkAndConsumeResources(e){const t=this.getCurrentCoordinates(),s=N.calculateDistance(t,e.destination),r=m.calculateTravelCost(s,e.type),n=m.getResources(),o=m.getUpgrade(),i={antimatter:Math.floor(r.antimatter/o.efficiency),element115:Math.floor(r.element115/o.efficiency),deuterium:Math.floor(r.deuterium/o.efficiency)},c=n.antimatter>=i.antimatter&&n.element115>=i.element115&&n.deuterium>=i.deuterium,d=s<=o.range;if(c&&d&&m.consumeResources(r))return this.showNavigationSuccess(i,e.type),!0;const u=N.checkNavigationResources(t,e.destination,e.type);return N.showNavigationError(u),!1}showNavigationSuccess(e,t){const s=document.createElement("div");s.className="fixed bottom-4 left-4 z-50 bg-green-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-green-500/50",s.style.animation="slideInLeft 0.3s ease-out";const r={galaxy:"üåå",system:"‚≠ê",planet:"ü™ê"}[t]||"üöÄ";if(s.innerHTML=`
      <div class="flex items-center space-x-2">
        <span class="text-green-300">${r}</span>
        <div>
          <div class="text-sm font-semibold">Navigation Engaged!</div>
          <div class="text-xs text-green-200">
            Consumed: ${e.antimatter} AM | ${e.element115} E115 | ${e.deuterium} D
          </div>
        </div>
      </div>
    `,!document.getElementById("navigation-success-styles")){const n=document.createElement("style");n.id="navigation-success-styles",n.textContent=`
        @keyframes slideInLeft {
          from {
            transform: translateX(-100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        @keyframes slideOutLeft {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(-100%);
            opacity: 0;
          }
        }
      `,document.head.appendChild(n)}document.body.appendChild(s),setTimeout(()=>{s.style.animation="slideOutLeft 0.3s ease-in forwards",setTimeout(()=>{s.remove()},300)},3e3)}}typeof window<"u"&&j.getInstance().initialize();export{V as H,C as L,N,X as R,m as S,j as a,ee as b,Q as c,q as d,Z as g,W as m};
