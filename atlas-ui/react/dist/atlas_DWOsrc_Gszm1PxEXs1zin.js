import{r as a,j as e,V as Oe,c as We,R as $e}from"./atlas_bDOTfl6YifhEgi64OZoGp.js";import{H as Xe}from"./atlas_DAPSgiEQDbHKEp53GoVrV.js";import{r as He,S as qe,U as Ke,b as Je,m as Ze,c as Ee,a as Qe}from"./atlas_HOF5V4Y7Q3DW-IYNsZLlc.js";import{S as Ce,C as ke,P as Re,W as Le,G as De,c as re,M as oe,d as ie,V as ge,e as _e,L as Ae,g as ze,A as Pe,k as Te,h as Ie,i as Ge,j as Ve,l as Me}from"./atlas_ZgUbUwm-J4U4iRNwqY-vk.js";const Ue=({planets:n,stars:r,systemName:F,cosmicOriginTime:w,currentTime:v,onTimeOffsetChange:o})=>{const L=a.useRef(null),p=a.useRef(null),N=a.useRef(null),_=a.useRef(null),M=a.useRef([]),G=a.useRef([]),i=a.useRef([]),T=a.useRef(0),W=(S,V="#ffffff")=>{const C=document.createElement("canvas"),l=C.getContext("2d");if(!l)return null;C.width=768,C.height=192,l.fillStyle="rgba(0, 0, 0, 0.8)",l.fillRect(0,0,C.width,C.height),l.strokeStyle="#ffffff",l.lineWidth=3,l.strokeRect(3,3,C.width-6,C.height-6),l.fillStyle=V,l.font="bold 48px Arial",l.textAlign="center",l.textBaseline="middle",l.fillText(S,384,96);const c=new Ie(C),y=new Ge({map:c,transparent:!0,alphaTest:.1}),A=new Ve(y);return A.scale.set(30,7.5,1),A};return T.current=v,a.useEffect(()=>{if(!L.current)return;const S=L.current,V=S.clientWidth,C=S.clientHeight,l=new Ce;l.background=new ke(17),p.current=l;const c=new Re(60,V/C,.1,1e4);c.position.set(0,120,180),c.lookAt(0,0,0);const y=new Le({antialias:!0,alpha:!0});y.setSize(V,C),y.setClearColor(17,1),N.current=y,S.appendChild(y.domElement);const A={"Gas Giant":"#FFA500",Anomaly:"#FFFFFF",Rocky:"#808080",Icy:"#ADD8E6",Oceanic:"#0000FF",Desert:"#FFD700",Lava:"#FF0000",Arid:"#800000",Swamp:"#008000",Tundra:"#F0F8FF",Forest:"#006400",Savannah:"#F4A460",Cave:"#D1D1D1",Crystalline:"#00FFFF",Metallic:"#C0C0C0",Toxic:"#800080",Radioactive:"#00FF00",Magma:"#FF4500","Molten Core":"#FF8C00",Carbon:"#090909",Diamond:"#87CEFA","Super Earth":"#90EE90","Sub Earth":"#006400","Frozen Gas Giant":"#ADD8E6",Nebulous:"#FFC0CB",Aquifer:"#00FFFF",Exotic:"#FF00FF"},ee={red:"#FF4444",orange:"#FF8844",yellow:"#FFFF44",white:"#FFFFFF",blue:"#4488FF",purple:"#8844FF"},te=new De;r.forEach((t,x)=>{const u=parseFloat(t.Size)*4,h=new re(u,32,32),$=ee[t.Color]||"#FFFF44",f=new oe({color:$,transparent:!0,opacity:.9}),z=new ie(h,f);r.length===1?z.position.set(0,0,0):r.length===2?z.position.set(x===0?-u*2:u*2,0,0):x===0?z.position.set(-u*2,0,0):x===1?z.position.set(u*2,0,0):z.position.set(0,u*2,0);const X=new re(u*1.5,32,32),s=new oe({color:$,transparent:!0,opacity:.3}),g=new ie(X,s);z.add(g),te.add(z)}),l.add(te);const J=Math.max(...n.map(t=>t.orbital_radius)),k=150;n.forEach((t,x)=>{const h=30+t.orbital_radius/J*k,$=t.eccentricity_factor,f=h,z=f*Math.sqrt(1-$*$),X=360,s=2,g=4;for(let ne=0;ne<X;ne+=s+g){const pe=[];for(let ae=ne;ae<Math.min(ne+s,X-1);ae++){const me=ae/X*2*Math.PI,O=f*Math.cos(me),Ne=z*Math.sin(me);pe.push(new ge(O,0,Ne))}if(pe.length>1){const ae=new _e().setFromPoints(pe),me=new Ae({color:7372944,transparent:!0,opacity:.8,linewidth:2}),O=new ze(ae,me);l.add(O),G.current.push(O)}}const b=t.diameter/8e3,P=Math.max(Math.min(b,8),2.5),U=new re(P,32,32),q=A[t.planet_type]||"#FFFFFF",B=new oe({color:q,transparent:!0,opacity:.9}),D=new ie(U,B),se=new ie(new re(P*1.5,32,32),new oe({color:q,transparent:!0,opacity:.2}));D.add(se),l.add(D),M.current.push(D),D.planetData=t,D.orbitRadius=h,D.semiMajorAxis=f,D.semiMinorAxis=z;const le=t.name.replace(/_/g," "),K=W(le,"#ffffff");K&&(K.position.copy(D.position),K.position.y+=P+10,K.planetData=t,l.add(K),i.current.push(K))});const H=new Pe(4210752,.4);l.add(H);const Z=new Te(16777215,1,2e3);Z.position.set(0,0,0),l.add(Z);let d=!1,R=0,E=0,m=0;const I=t=>{d=!0,R=t.clientX,E=t.clientY},Y=t=>{if(!d)return;const x=t.clientX-R,u=t.clientY-E,h=new Me;h.setFromVector3(c.position),h.theta-=x*.01,h.phi+=u*.01,h.phi=Math.max(.1,Math.min(Math.PI-.1,h.phi)),c.position.setFromSpherical(h),c.lookAt(0,0,0),R=t.clientX,E=t.clientY},Q=()=>{d=!1,setTimeout(()=>{},3e3)},be=t=>{if(t.ctrlKey)t.preventDefault(),t.deltaY>0?o(604800):o(-604800);else{t.preventDefault();const x=.1,u=c.position.distanceTo(new ge(0,0,0));t.deltaY>0&&u<800?c.position.multiplyScalar(1+x):t.deltaY<0&&u>50&&c.position.multiplyScalar(1-x)}},he=t=>{t.key==="Escape"&&document.dispatchEvent(new CustomEvent("solar-system-close-fullscreen"))},xe=t=>{if(t.preventDefault(),t.touches.length===1)d=!0,R=t.touches[0].clientX,E=t.touches[0].clientY;else if(t.touches.length===2){const x=t.touches[0].clientX-t.touches[1].clientX,u=t.touches[0].clientY-t.touches[1].clientY;m=Math.sqrt(x*x+u*u)}},we=t=>{if(t.preventDefault(),t.touches.length===1&&d){const x=t.touches[0].clientX-R,u=t.touches[0].clientY-E,h=new Me;h.setFromVector3(c.position),h.theta-=x*.01,h.phi+=u*.01,h.phi=Math.max(.1,Math.min(Math.PI-.1,h.phi)),c.position.setFromSpherical(h),c.lookAt(0,0,0),R=t.touches[0].clientX,E=t.touches[0].clientY}else if(t.touches.length===2){const x=t.touches[0].clientX-t.touches[1].clientX,u=t.touches[0].clientY-t.touches[1].clientY,h=Math.sqrt(x*x+u*u);if(m>0){const f=h/m,z=c.position.distanceTo(new ge(0,0,0));f>1&&z>50?c.position.multiplyScalar(1-.01):f<1&&z<800&&c.position.multiplyScalar(1+.01)}m=h}},ve=t=>{t.preventDefault(),d=!1,m=0,setTimeout(()=>{},3e3)},j=y.domElement;j.style.cursor="grab",j.addEventListener("mousedown",t=>{j.style.cursor="grabbing",I(t)}),j.addEventListener("mousemove",Y),j.addEventListener("mouseup",()=>{j.style.cursor="grab",Q()}),j.addEventListener("mouseleave",()=>{j.style.cursor="grab",Q()}),j.addEventListener("wheel",be),j.addEventListener("touchstart",xe,{passive:!1}),j.addEventListener("touchmove",we,{passive:!1}),j.addEventListener("touchend",ve,{passive:!1}),document.addEventListener("keydown",he);const ce=()=>{_.current=requestAnimationFrame(ce),M.current.forEach((t,x)=>{const u=t.planetData,h=t.semiMajorAxis,$=t.semiMinorAxis,f=u.orbital_period_seconds,z=2*Math.PI/f,X=(u.initial_orbital_angle+T.current*z)%(2*Math.PI);t.position.x=h*Math.cos(X),t.position.z=$*Math.sin(X),t.position.y=0;const s=u.rotation_period_seconds,g=2*Math.PI/s;if(t.rotation.y=T.current*g%(2*Math.PI),i.current[x]){const b=t.geometry.parameters?.radius||2;i.current[x].position.copy(t.position),i.current[x].position.y+=b+10}}),y.render(l,c)};ce();const de=()=>{const t=S.clientWidth,x=S.clientHeight;c.aspect=t/x,c.updateProjectionMatrix(),y.setSize(t,x)};return window.addEventListener("resize",de),()=>{window.removeEventListener("resize",de),document.removeEventListener("keydown",he),j.removeEventListener("mousedown",I),j.removeEventListener("mousemove",Y),j.removeEventListener("mouseup",Q),j.removeEventListener("mouseleave",Q),j.removeEventListener("wheel",be),j.removeEventListener("touchstart",xe),j.removeEventListener("touchmove",we),j.removeEventListener("touchend",ve),_.current&&cancelAnimationFrame(_.current),S&&y.domElement&&S.removeChild(y.domElement),y.dispose(),M.current=[],G.current=[],i.current=[]}},[n,r,w]),e.jsx("div",{ref:L,className:"w-full h-full"})},et=({planets:n,stars:r,systemName:F,cosmicOriginTime:w})=>{const v=a.useRef(null),o=a.useRef(null),L=a.useRef(null),p=a.useRef(null),N=a.useRef([]),_=a.useRef([]),M=a.useRef([]),G=a.useRef(0),i=Math.floor(Date.now()/1e3),[T,W]=a.useState(0),[S,V]=a.useState(!1),[C,l]=a.useState(!1),[c,y]=a.useState(!1),[A,ee]=a.useState(0),te=i-w+T;G.current=te;const J=()=>{l(!0),setTimeout(()=>{V(!1),l(!1)},300)},k=(d,R="#ffffff")=>{const E=document.createElement("canvas"),m=E.getContext("2d");if(!m)return null;E.width=512,E.height=128,m.fillStyle="rgba(0, 0, 0, 0.7)",m.fillRect(0,0,E.width,E.height),m.strokeStyle="#ffffff",m.lineWidth=2,m.strokeRect(2,2,E.width-4,E.height-4),m.fillStyle=R,m.font="bold 32px Arial",m.textAlign="center",m.textBaseline="middle",m.fillText(d,256,64);const I=new Ie(E),Y=new Ge({map:I,transparent:!0,alphaTest:.1}),Q=new Ve(Y);return Q.scale.set(20,5,1),Q};a.useEffect(()=>{const d=R=>{R.key==="Escape"&&S&&J()};return S&&ee(T),document.addEventListener("solar-system-close-fullscreen",J),document.addEventListener("keydown",d),()=>{document.removeEventListener("solar-system-close-fullscreen",J),document.removeEventListener("keydown",d)}},[S,T]),a.useEffect(()=>{if(S&&c){const d=setTimeout(()=>{y(!1)},50);return()=>clearTimeout(d)}},[S,c]),a.useEffect(()=>{if(window.tonnirLoggedInSystem=!1,!v.current)return;const d=v.current,R=d.clientWidth,E=R<640,m=new Ce;m.background=new ke(17),o.current=m;const I=new Re(45,R/(E?120:140),.1,1e4);I.position.set(0,80,120),I.lookAt(0,0,0);const Y=new Le({antialias:!0,alpha:!0});Y.setSize(R,E?120:140),Y.setClearColor(17,1),L.current=Y,d.appendChild(Y.domElement);const Q={"Gas Giant":"#FFA500",Anomaly:"#FFFFFF",Rocky:"#808080",Icy:"#ADD8E6",Oceanic:"#0000FF",Desert:"#FFD700",Lava:"#FF0000",Arid:"#800000",Swamp:"#008000",Tundra:"#F0F8FF",Forest:"#006400",Savannah:"#F4A460",Cave:"#D1D1D1",Crystalline:"#00FFFF",Metallic:"#C0C0C0",Toxic:"#800080",Radioactive:"#00FF00",Magma:"#FF4500","Molten Core":"#FF8C00",Carbon:"#090909",Diamond:"#87CEFA","Super Earth":"#90EE90","Sub Earth":"#006400","Frozen Gas Giant":"#ADD8E6",Nebulous:"#FFC0CB",Aquifer:"#00FFFF",Exotic:"#FF00FF"},be={red:"#FF4444",orange:"#FF8844",yellow:"#FFFF44",white:"#FFFFFF",blue:"#4488FF",purple:"#8844FF"},he=new De;r.forEach((s,g)=>{const b=parseFloat(s.Size)*3,P=new re(b,16,16),U=be[s.Color]||"#FFFF44",q=new oe({color:U,transparent:!0,opacity:.9}),B=new ie(P,q);r.length===1?B.position.set(0,0,0):r.length===2?B.position.set(g===0?-b*2:b*2,0,0):g===0?B.position.set(-b*2,0,0):g===1?B.position.set(b*2,0,0):B.position.set(0,b*2,0);const D=new re(b*1.5,16,16),se=new oe({color:U,transparent:!0,opacity:.3}),le=new ie(D,se);B.add(le),he.add(B)}),m.add(he);const xe=Math.max(...n.map(s=>s.orbital_radius)),we=80;window.systemMaxOrbitalRadius=xe,n.forEach((s,g)=>{const P=20+s.orbital_radius/xe*we,U=s.eccentricity_factor,q=P,B=q*Math.sqrt(1-U*U),D=360,se=2,le=4;for(let ye=0;ye<D;ye+=se+le){const Se=[];for(let fe=ye;fe<Math.min(ye+se,D-1);fe++){const je=fe/D*2*Math.PI,Fe=q*Math.cos(je),Be=B*Math.sin(je);Se.push(new ge(Fe,0,Be))}if(Se.length>1){const fe=new _e().setFromPoints(Se),je=new Ae({color:7372944,transparent:!0,opacity:.8,linewidth:2}),Fe=new ze(fe,je);m.add(Fe),_.current.push(Fe)}}const K=s.diameter/15e3,ne=Math.max(Math.min(K,4),1.5),pe=new re(ne,16,16),ae=Q[s.planet_type]||"#FFFFFF",me=new oe({color:ae,transparent:!0,opacity:.9}),O=new ie(pe,me),Ne=new ie(new re(ne*1.5,16,16),new oe({color:ae,transparent:!0,opacity:.2}));O.add(Ne),m.add(O),N.current.push(O),O.planetData=s,O.orbitRadius=P,O.semiMajorAxis=q,O.semiMinorAxis=B;const Ye=s.name.replace(/_/g," "),ue=k(Ye,"#ffffff");ue&&(ue.position.copy(O.position),ue.position.y+=ne+6,ue.planetData=s,m.add(ue),M.current.push(ue))});const ve=new Pe(4210752,.4);m.add(ve);const j=new Te(16777215,1,1e3);j.position.set(0,0,0),m.add(j);let ce=!1,de=0,t=0;const x=s=>{ce=!0,de=s.clientX,t=s.clientY},u=s=>{if(!ce)return;const g=s.clientX-de,b=s.clientY-t,P=new Me;P.setFromVector3(I.position),P.theta-=g*.01,P.phi+=b*.01,P.phi=Math.max(.1,Math.min(Math.PI-.1,P.phi)),I.position.setFromSpherical(P),I.lookAt(0,0,0),de=s.clientX,t=s.clientY},h=()=>{ce=!1,setTimeout(()=>{},3e3)},$=s=>{if(s.ctrlKey)s.preventDefault(),s.deltaY>0?W(g=>g+604800):W(g=>g-604800);else{s.preventDefault();const g=.1,b=I.position.distanceTo(new ge(0,0,0));s.deltaY>0&&b<500?I.position.multiplyScalar(1+g):s.deltaY<0&&b>20&&I.position.multiplyScalar(1-g)}},f=Y.domElement;f.style.cursor="grab",f.style.borderRadius="8px",f.addEventListener("mousedown",s=>{f.style.cursor="grabbing",x(s)}),f.addEventListener("mousemove",u),f.addEventListener("mouseup",()=>{f.style.cursor="grab",h()}),f.addEventListener("mouseleave",()=>{f.style.cursor="grab",h()}),f.addEventListener("wheel",$);const z=()=>{p.current=requestAnimationFrame(z),N.current.forEach((s,g)=>{const b=s.planetData,P=s.semiMajorAxis,U=s.semiMinorAxis,q=b.orbital_period_seconds,B=2*Math.PI/q,D=(b.initial_orbital_angle+G.current*B)%(2*Math.PI);s.position.x=P*Math.cos(D),s.position.z=U*Math.sin(D),s.position.y=0,b.name.toLowerCase().includes("tonnir_md-1420")&&(window.tonnirLoggedInSystem||(console.log("ðŸŒ SYSTEM - Tonnir_MD-1420:",{name:b.name,orbital_radius:b.orbital_radius,maxOrbitalRadius:window.systemMaxOrbitalRadius,orbitRadius:P,currentTime:G.current,initial_orbital_angle:b.initial_orbital_angle,angleOrbit:D,angleOrbitDegrees:(D*180/Math.PI).toFixed(2),position:{x:s.position.x.toFixed(2),z:s.position.z.toFixed(2)},cosmicOriginTime:w,realTime:Math.floor(Date.now()/1e3)}),window.tonnirLoggedInSystem=!0));const se=b.rotation_period_seconds,le=2*Math.PI/se;if(s.rotation.y=G.current*le%(2*Math.PI),M.current[g]){const K=s.geometry.parameters?.radius||2;M.current[g].position.copy(s.position),M.current[g].position.y+=K+6}}),Y.render(m,I)};z();const X=()=>{const s=d.clientWidth,g=s<640?120:140;I.aspect=s/g,I.updateProjectionMatrix(),Y.setSize(s,g)};return window.addEventListener("resize",X),()=>{window.removeEventListener("resize",X),f.removeEventListener("mousedown",x),f.removeEventListener("mousemove",u),f.removeEventListener("mouseup",h),f.removeEventListener("mouseleave",h),f.removeEventListener("wheel",$),p.current&&cancelAnimationFrame(p.current),d&&Y.domElement&&d.removeChild(Y.domElement),Y.dispose(),N.current=[],_.current=[],M.current=[]}},[n,r,w]);const H=d=>{const R=Math.floor(d/31557600),E=Math.floor(d%(365.25*24*3600)/(24*3600)),m=Math.floor(d%(24*3600)/3600);return R>0?`${R}y ${E}d ${m}h`:E>0?`${E}d ${m}h`:`${m}h`},Z=d=>d.replace(/_/g," ");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Solar System Simulation"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:v,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsxs("button",{onClick:()=>{V(!0),y(!0)},className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 flex items-center gap-1 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:[e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),e.jsx("span",{className:"text-xs text-white hidden sm:inline",children:"Expand"})]})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:"Star(s)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsxs("span",{className:"text-[10px]",children:[n.length," Planets"]})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:["Time: ",H(te)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom â€¢ Ctrl+Scroll: +1week/-1week â€¢ Drag: Rotate View"})]})]}),S&&He.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${C||c?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${C||c?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:Z(F)})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-1",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:Z(F)}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Star(s)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-300",children:[n.length," Planets"]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Time: ",H(i-w+A)]})]})]}),e.jsx("button",{onClick:J,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-2 sm:mb-4 px-2 sm:px-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-400 min-w-fit",children:"-15y"}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"range",min:-15*365.25*24*3600,max:15*365.25*24*3600,step:604800,value:A,onChange:d=>ee(Number(d.target.value)),className:`w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer 
                               [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 
                               [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-blue-400 
                               [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-blue-600
                               [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-lg`}),e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-0.5 h-2 bg-yellow-400 rounded"})]}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-400 min-w-fit",children:"+15y"}),e.jsx("button",{onClick:()=>ee(0),className:"px-2 py-1 text-xs bg-gray-600 hover:bg-gray-500 text-white rounded transition-colors duration-200",title:"Reset to current time",children:"Now"})]}),e.jsxs("div",{className:"text-center text-xs text-gray-500 mt-1",children:["Time Travel: ",A===0?"Present":A>0?`+${Math.abs(A/(365.25*24*3600)).toFixed(1)} years`:`-${Math.abs(A/(365.25*24*3600)).toFixed(1)} years`," â€¢ Range: 30 years"]})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(Ue,{planets:n,stars:r,systemName:F,cosmicOriginTime:w,currentTime:i-w+A,onTimeOffsetChange:d=>ee(R=>R+d)})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom â€¢ Ctrl+Scroll: +1week/-1week â€¢ Drag: Rotate View â€¢ ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom â€¢ Drag: Rotate â€¢ ESC: Close"})]})]})}),document.body)]})},tt=({system:n,galaxy:r,systemIndex:F,cosmicOriginTime:w})=>{const v=o=>o.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsx("div",{className:"absolute top-0 right-0 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}),e.jsxs("div",{className:"flex items-center justify-between mb-3 pr-16",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"System Information"}),e.jsx(qe,{type:"system",name:n.name,coordinates:r.coordinates.join(","),systemIndex:F,className:"text-xs"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"System Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300 capitalize",children:n.star_system_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Planets"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:n.num_planets})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-orange-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Stars"}),e.jsx("div",{className:"text-sm font-bold text-orange-300",children:n.stars.length})]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-3",children:[(()=>{if(!window.domDataLogged){const o=n.planets.find(L=>L.name.toLowerCase().includes("tonnir"));o&&console.log("ðŸ“„ DOM DATA - Tonnir_MD-1420:",{name:o.name,planet_type:o.planet_type,orbital_radius:o.orbital_radius,initial_orbital_angle:o.initial_orbital_angle,orbital_period_seconds:o.orbital_period_seconds,rotation_period_seconds:o.rotation_period_seconds,eccentricity_factor:o.eccentricity_factor,axial_tilt:o.axial_tilt,cosmicOriginTime:w}),window.domDataLogged=!0}return null})(),e.jsx(et,{planets:n.planets,stars:n.stars,systemName:n.name,cosmicOriginTime:w})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-yellow-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Stellar Composition"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-1",children:n.stars.map((o,L)=>e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-yellow-500/20",children:[e.jsxs("div",{className:"text-xs text-gray-300",children:["Star ",L+1]}),e.jsx("div",{className:"text-xs font-bold text-yellow-300",children:o.Type}),e.jsxs("div",{className:"text-xs text-gray-300",children:[o.Color," â€¢ ",o.Size]})]},L))})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("div",{className:"text-green-400 font-medium",children:"Visited"})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"System:"}),e.jsx("div",{className:"text-white truncate font-medium",children:v(n.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"System ID:"}),e.jsxs("div",{className:"text-white font-medium",children:["#",F+1]})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:v(r.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:r.coordinates.join(", ")})]})]})]})]})},st=({systemUrl:n,imageUrl:r})=>{const F=a.useRef(null),w=a.useRef(null),[v,o]=a.useState("Aligning Stargate..."),[L,p]=a.useState(!1),[N,_]=a.useState(!1),[M,G]=a.useState(!1);return a.useEffect(()=>{const i=document.createElement("style");return i.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(i),()=>{document.head.removeChild(i)}},[]),a.useEffect(()=>{const i=F.current;if(!i)return;const T=i.getContext("2d");if(!T)return;let W=[];const S=800;let V,C;const l=800;let c,y=.5;function A(){const k=i?.parentElement;if(!k||!i)return;const H=k.clientWidth,Z=k.clientHeight;i.width=Math.min(H,l),i.height=Math.min(Z,l),V=i.width/2,C=i.height/2}function ee(){A(),W=[];for(let k=0;k<S;k++)W.push({x:Math.random()*(i?.width||800),y:Math.random()*(i?.height||800),z:Math.random()*(i?.width||800),o:Math.random()});te()}function te(){!i||!T||(T.clearRect(0,0,i.width,i.height),W.forEach(k=>{k.z-=y,k.z<=0&&(k.z=i.width,k.x=Math.random()*i.width,k.y=Math.random()*i.height,k.o=Math.random());const H=i.width/k.z,Z=(k.x-V)*H+V,d=(k.y-C)*H+C,R=2*H;T.beginPath(),T.fillStyle=`rgba(255, 255, 255, ${k.o})`,T.arc(Z,d,R,0,2*Math.PI),T.fill()}),y<60&&(y+=1),c=requestAnimationFrame(te))}ee();const J=()=>A();return window.addEventListener("resize",J),()=>{window.removeEventListener("resize",J),c&&cancelAnimationFrame(c)}},[]),a.useEffect(()=>{if(r){const i=new Image;i.onload=()=>{w.current&&(w.current.src=r,_(!0),G(!0))},i.onerror=()=>{console.error("Failed to load system image:",r),setTimeout(()=>{_(!0),G(!0)},1500)},i.src=r}else setTimeout(()=>{_(!0),G(!0)},1500)},[r]),a.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){o("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),p(!0);const T=(l,c)=>Array.from({length:c},()=>l[Math.floor(Math.random()*l.length)]).join(""),W=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:30},{chars:"0123456789ABCDEF",duration:20,iterations:40},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:\\'\",.<>?/`~",duration:10,iterations:100}];let S=0,V=0;const C=()=>{if(S>=W.length){const c="Stargate system aligned";let y=0;o("");const A=()=>{y<c.length?(o(c.substring(0,y+1)),y++,setTimeout(A,30)):p(!1)};A();return}const l=W[S];o(T(l.chars,32)),V++,V>=l.iterations&&(S++,V=0),setTimeout(C,l.duration)};C()},[]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3",children:"System Visualization"}),e.jsxs("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:[e.jsx("canvas",{ref:F,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${M?"opacity-0":"opacity-100"}`,style:{filter:M?"blur(50px)":"none"}}),e.jsx("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${N?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:N&&r?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Ke,{zoomMargin:20,classDialog:"backdrop-blur-3xl",children:e.jsx("img",{ref:w,className:"max-w-full max-h-full object-contain rounded-xl shadow-2xl shadow-blue-500/20",src:r,alt:"System visualization",style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:"transparent"}})})}):e.jsx("img",{ref:w,className:"w-full h-full object-cover",src:"/static/images/placeholder-min.jpg",alt:"System visualization"})})]}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:n,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${L?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),v]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]})]})},nt=({planets:n,coordinates:r,systemIndex:F})=>{const[w,v]=a.useState(new Set);a.useEffect(()=>{(()=>{try{const N=Je(r,F,n),_=new Set;N.forEach(M=>{_.add(M.toLowerCase())}),v(_)}catch(N){console.error("Error loading historical data:",N)}})()},[r,F,n]);const o=p=>p.replace(/_/g," "),L=p=>{try{Ze(r,F,p,n)}catch(N){console.error("Error marking planet as visited:",N)}window.location.href=`/planet/${p.toLowerCase()}`};return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:n.map(p=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[w.has(p.name.toLowerCase())&&e.jsx("div",{className:"absolute top-1 right-1 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}),e.jsxs("button",{onClick:()=>L(p.name),className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Planet"}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:o(p.name)})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},p.name))}),n.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No planets found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This system appears to be empty"})]})]})},at=({currentSystem:n,galaxy:r})=>{const[F,w]=a.useState(!1),[v,o]=a.useState(!1),[L,p]=a.useState(!0);a.useEffect(()=>{w(n.index>0),o(!0),p(!1)},[n.index]);const N=async()=>{if(n.index>0){const M=r.coordinates.join(",");Ee(M,n.index-1),window.location.href=`/system/${n.index-1}`}},_=async()=>{const M=r.coordinates.join(",");Ee(M,n.index+1),window.location.href=`/system/${n.index+1}`};return L?null:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:N,disabled:!F,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${F?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:_,disabled:!v,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${v?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},rt=({system:n,galaxy:r,system_url:F,version:w,system_index:v,image_url:o,page:L,cosmic_origin_time:p})=>{const[N]=a.useState(r.coordinates.join(","));a.useEffect(()=>{document.body.setAttribute("data-coordinates",N),document.body.setAttribute("data-system-index",v.toString()),Ee(N,v)},[N,v]);const _=G=>G.replace(/_/g," "),M=G=>G.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(Xe,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["System '",_(n.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Galaxy '",M(r.name),"' - Coordinates ",r.coordinates.join(", ")]})]}),e.jsx(at,{currentSystem:{name:n.name,index:v},galaxy:r}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(st,{systemUrl:F,imageUrl:o})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(tt,{system:n,galaxy:r,systemIndex:v,cosmicOriginTime:p})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Planets in '",_(n.name),"'"]}),e.jsx(nt,{planets:n.planets,coordinates:N,systemIndex:v})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${L}`,className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsxs("span",{className:"text-base sm:text-lg",children:["â† Back to Galaxy '",M(r.name),"'"]})})})]}),e.jsx(Oe,{version:w})]}),e.jsx(Qe,{currentLocation:{type:"system",name:n.name,coordinates:r.coordinates.join(","),systemIndex:n.index}})]})};document.addEventListener("DOMContentLoaded",async()=>{try{const n=document.getElementById("system-data"),r=document.getElementById("galaxy-data"),F=document.getElementById("meta-data");if(!n||!r||!F){console.error("Missing required data elements");return}const w=JSON.parse(n.textContent||"{}"),v=JSON.parse(r.textContent||"{}"),o=JSON.parse(F.textContent||"{}"),L={system:w,galaxy:v,system_url:o.system_url,version:o.version,system_index:o.system_index,image_url:o.image_url,page:o.page||1,cosmic_origin_time:o.cosmic_origin_time},p=document.getElementById("atlas-react-root");p&&We.createRoot(p).render($e.createElement(rt,L))}catch(n){console.error("Error initializing System React app:",n)}});
