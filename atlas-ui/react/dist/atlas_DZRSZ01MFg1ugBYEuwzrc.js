import{r as o,j as s,R as Oe}from"./atlas_BiACxVxc6cO5okV5F68Rd.js";import{W as Be}from"./atlas_hV4YbJX4LmBeaYZmYRF0y.js";import{O as Ne}from"./atlas_BJLzboHTaSIGvKgNbvLUr.js";import{e as M}from"./atlas_wcPzamFt5CPpIcmd124GE.js";import{E as T,c as Ue}from"./atlas_DIajYqgJJlFIdWNB9l9vK.js";import{g as Ge}from"./atlas_BkcglrC3q9-fMfrzU8uke.js";import{P as He}from"./atlas_BMkCctBHLeH7Oacwp8KHY.js";import{c as We}from"./atlas_DqkZSA4SKHSRE9_1MZZpu.js";import{a1 as $e,a2 as Ve,C as ye,a3 as Ye,a4 as Ze,a5 as Xe,a6 as qe,a7 as we,a8 as Je,b as Ke,z as Qe,M as et,m as tt}from"./atlas_BOOzg5XYrrU1N4SZySfRd.js";const rt=({planetData:d,showInConsole:x=!0,showInPage:Y=!1})=>{const[te,re]=o.useState([]),[L,Z]=o.useState({});o.useEffect(()=>{if(!d)return;const u=I(d);Z(u),re(z(d)),typeof window<"u"&&(window.__DEBUG_PLANET_DATA=d,window.__DEBUG_PLANET_ANALYSIS=u)},[d,x]);function I(u){const f={hasValidStructure:!1,missingFields:[],dataIntegrity:"unknown",renderingIssues:[],colorConsistency:"unknown"};if(u.planet_info&&u.surface_elements?f.hasValidStructure=!0:(u.planet_info||f.missingFields.push("planet_info"),u.surface_elements||f.missingFields.push("surface_elements")),u.surface_elements?.type==="oceanic"&&(f.oceanicData={hasAbstractLands:!!u.surface_elements.abstract_lands?.length,numGreenPatches:u.surface_elements.green_patches?.length||0,numClouds:u.surface_elements.clouds?.length||0,hasDepths:u.surface_elements.depths?.enabled||!1,baseColorIsBlue:u.planet_info?.base_color==="#0000FF",greenPatchColor:u.surface_elements.green_patches?.[0]?.color,issues:[]},f.oceanicData.numGreenPatches>15&&f.oceanicData.issues.push("Muchos parches verdes pueden ocultar el ocÃ©ano azul"),f.oceanicData.baseColorIsBlue||f.oceanicData.issues.push(`Color base no es azul puro: ${u.planet_info?.base_color}`),f.renderingIssues=f.oceanicData.issues),u.planet_info?.base_color&&u.planet_info?.type){const j={Oceanic:"#0000FF",Rocky:"#808080",Icy:"#ADD8E6",Desert:"#FFD700",Lava:"#FF0000"}[u.planet_info.type];j&&u.planet_info.base_color!==j?f.colorConsistency=`Inconsistente: esperado ${j}, recibido ${u.planet_info.base_color}`:f.colorConsistency="Correcto"}return f}function z(u){const f=[];if(!u.surface_elements?.type)return["No surface type defined"];const F=u.surface_elements.type.toLowerCase();switch(F){case"oceanic":f.push("OceanWavesEffect (PROBLEMA: ignora green_patches de Python)");break;case"rocky":f.push("RockyTerrainEffect");break;case"icy":f.push("IcyTerrainEffect");break;case"gas giant":f.push("GasGiantBandsEffect");break;default:f.push(`Generic effect for type: ${F}`)}return u.atmosphere?.density>0&&f.push("AtmosphericEffect"),u.rings&&f.push("RingSystemEffect"),f}return Y?s.jsxs("div",{style:{position:"fixed",top:10,right:10,background:"rgba(0, 0, 0, 0.9)",color:"#00ff00",padding:"10px",borderRadius:"5px",fontFamily:"monospace",fontSize:"12px",maxWidth:"400px",maxHeight:"600px",overflow:"auto",zIndex:1e4,border:"1px solid #00ff00"},children:[s.jsxs("h3",{style:{margin:"0 0 10px 0",color:"#00ff00"},children:["ðŸ” Planet Debug: ",d.planet_info?.name]}),s.jsxs("div",{style:{marginBottom:"10px"},children:[s.jsx("strong",{children:"Type:"})," ",d.planet_info?.type,s.jsx("br",{}),s.jsx("strong",{children:"Base Color:"})," ",d.planet_info?.base_color,s.jsx("br",{}),s.jsx("strong",{children:"Radius:"})," ",d.planet_info?.radius]}),d.surface_elements?.type==="oceanic"&&s.jsxs("div",{style:{marginBottom:"10px",borderTop:"1px solid #00ff00",paddingTop:"10px"},children:[s.jsx("strong",{children:"ðŸŒŠ Oceanic Data:"}),s.jsx("br",{}),s.jsxs("span",{style:{color:L.oceanicData?.baseColorIsBlue?"#00ff00":"#ff0000"},children:["Base Color: ",L.oceanicData?.baseColorIsBlue?"âœ“ Blue":"âœ— Not Blue"]}),s.jsx("br",{}),"Green Patches: ",L.oceanicData?.numGreenPatches,s.jsx("br",{}),"Clouds: ",L.oceanicData?.numClouds,s.jsx("br",{}),"Has Depths: ",L.oceanicData?.hasDepths?"Yes":"No",s.jsx("br",{}),L.oceanicData?.issues?.length>0&&s.jsxs("div",{style:{color:"#ffaa00",marginTop:"5px"},children:["âš ï¸ Issues:",s.jsx("br",{}),L.oceanicData.issues.map((u,f)=>s.jsxs("div",{children:["- ",u]},f))]})]}),s.jsxs("div",{style:{borderTop:"1px solid #00ff00",paddingTop:"10px"},children:[s.jsx("strong",{children:"ðŸŽ¨ Effects Applied:"}),s.jsx("br",{}),te.map((u,f)=>s.jsxs("div",{style:{color:u.includes("PROBLEMA")?"#ff0000":"#00ff00"},children:["- ",u]},f))]}),s.jsx("button",{style:{marginTop:"10px",background:"#00ff00",color:"#000",border:"none",padding:"5px 10px",cursor:"pointer",borderRadius:"3px"},children:"Log to Console"})]}):null};function nt(d){o.useEffect(()=>{if(d&&d.surface_elements?.type==="oceanic"){d.surface_elements.green_patches?.length>0;const x=d.planet_info?.base_color;x!=="#0000FF"&&console.warn("âš ï¸ Planeta oceÃ¡nico sin color azul base!",x)}},[d])}const V=2.5,Re=()=>{const d=45*Math.PI/180;return V/(Math.tan(d/2)*.5)},st=o.forwardRef(({planetName:d,containerClassName:x="",width:Y=800,height:te=600,autoRotate:re=!0,enableControls:L=!0,showDebugInfo:Z=!1,planetData:I,cosmicOriginTime:z,initialAngleRotation:u,onDataLoaded:f,onEffectsCreated:F,onError:j},Pe)=>{const y=o.useRef(null),p=o.useRef(null),w=o.useRef(null),v=o.useRef(null),m=o.useRef(null),U=o.useRef(null),ve=o.useRef(new $e),ne=o.useRef(null),se=o.useRef(0),A=o.useRef(null),[pe,X]=o.useState(!0),[me,O]=o.useState(null),[_,ge]=o.useState(null),[Ee,ae]=o.useState([]),[q,ie]=o.useState({activeEffects:0,enabledEffects:0,frameRate:0,renderTime:0}),G=o.useRef([]),oe=o.useRef(0),J=o.useRef(null),E=o.useRef(null),R=o.useRef(null);o.useImperativeHandle(Pe,()=>({captureScreenshot:()=>{if(!w.current||!p.current||!v.current)return;const e=w.current,r=p.current,t=v.current,n=e.domElement.width,a=e.domElement.height,c=3840/n,i=[];r.traverse(g=>{if(g.isPoints&&g.material){const l=g.material;if(l.size!==void 0&&(i.push({material:l,originalSize:l.size}),l.size=l.size*c*1),l.uniforms&&(l.uniforms.size&&(i.push({material:l,uniform:"size",originalValue:l.uniforms.size.value}),l.uniforms.size.value=l.uniforms.size.value*c*1),l.uniforms.scale&&(i.push({material:l,uniform:"scale",originalValue:l.uniforms.scale.value}),l.uniforms.scale.value=l.uniforms.scale.value*c*1)),g.geometry&&g.geometry.attributes.size){const h=g.geometry.attributes.size,C=h.array.slice();i.push({geometry:g.geometry,originalSizeArray:C});for(let D=0;D<h.array.length;D++)h.array[D]*=c*1;h.needsUpdate=!0}}if(g.isSprite&&(i.push({object:g,originalScale:g.scale.clone()}),g.scale.multiplyScalar(c*1)),g.isLine&&g.material){const l=g.material;l.linewidth!==void 0&&(i.push({material:l,originalLinewidth:l.linewidth}),l.linewidth=l.linewidth*c*1)}});const P=3840,k=3840;e.setSize(P,k),t.aspect=1,t.updateProjectionMatrix(),e.render(r,t),e.domElement.toBlob(g=>{if(g){const l=document.createElement("canvas"),h=l.getContext("2d");if(l.width=P,l.height=k,h){const C=new Image;C.onload=()=>{h.drawImage(C,0,0);const Q=`Copyright Banshee - 2023-${new Date().getFullYear()}`;h.fillStyle="rgba(255, 255, 255, 0.5)",h.font=`${Math.floor(P/80)}px Arial`,h.textAlign="left",h.textBaseline="bottom";const W=Math.floor(P/100);h.fillText(Q,W,k-W),l.toBlob($=>{if($){const B=URL.createObjectURL($),N=document.createElement("a");N.href=B,N.download=`planet_${d}_${Date.now()}.png`,N.click(),URL.revokeObjectURL(B)}},"image/png",1)};const D=URL.createObjectURL(g);C.src=D}}i.forEach(({material:l,object:h,originalSize:C,originalScale:D,originalLinewidth:de,uniform:Q,originalValue:W,geometry:$,originalSizeArray:B})=>{if(C!==void 0&&(l.size=C),D!==void 0&&h.scale.copy(D),de!==void 0&&(l.linewidth=de),Q&&W!==void 0&&(l.uniforms[Q].value=W),$&&B){const N=$.attributes.size;for(let ee=0;ee<B.length;ee++)N.array[ee]=B[ee];N.needsUpdate=!0}}),e.setSize(n,a),t.aspect=n/a,t.updateProjectionMatrix()},"image/png",1)}}));const Se=Math.floor(Date.now()/1e3),[Ce,it]=o.useState(0),Ae=z||_?.timing?.cosmic_origin_time||Date.now()/1e3-3600,De=Se-Ae+Ce;se.current=De;const ce=o.useCallback(()=>{if(!y.current||!w.current||!v.current)return;const e=y.current,r=e.clientWidth||400,t=e.clientHeight||400;w.current.setSize(r,t),R.current&&R.current.setSize(r,t),v.current.aspect=r/t,v.current.updateProjectionMatrix()},[]),he=async e=>{if(!(!m.current||!p.current||!E.current)){T.log("Applying modular effects from API data",{planet:e.planet_info.name,type:e.planet_info.type});try{ue();const r=Ge(e);E.current.updateBaseColor(r);const t=M.createEffectsFromPythonPlanetData(e,V,m.current,p.current,E.current),n=e.planet_info?.type||e.surface_elements?.planet_type||e.planet_type;if((n==="toxic"||n==="Toxic")&&p.current&&v.current&&w.current)try{const a=We(p.current,v.current,w.current,V,{planet_type:"toxic",toxic_intensity:.8,atmosphere_thickness:.6},e.seeds?.planet_seed);if(a){R.current=a;const c={id:`effect_toxic_postprocessing_${Date.now()}`,type:"toxic_post_processing",effect:{dispose:()=>a.dispose(),update:i=>a.update(i),updateUniforms:i=>a.update(i),addToScene:()=>{},apply:()=>{}},priority:100,enabled:!0,name:"Toxic Post-Processing (Bloom + Godrays + Chromatic Aberration)"};M.effects.set(c.id,c),t.push(c),T.log("Created toxic post-processing effects")}}catch(a){T.error("Error creating toxic post-processing",a)}else R.current&&(R.current.dispose(),R.current=null);ae(t),G.current=t,F&&F(t),T.log(`Successfully applied ${t.length} modular effects`),fe()}catch{K()}}},Me=o.useCallback(()=>{if(!y.current)return!1;try{for(;y.current.firstChild;)y.current.removeChild(y.current.firstChild);p.current=null,v.current=null,w.current=null,m.current=null,b.current=null;const e=y.current,r=e.clientWidth||Y||400,t=e.clientHeight||te||400,n=new Ve;n.background=new ye(1297),p.current=n;const a=new Ye(45,r/t,.1,1e4),c=Re();a.position.set(0,0,c),a.lookAt(0,0,0),v.current=a;const i=new Be({antialias:!0,alpha:!0,powerPreference:"high-performance"});return i.setSize(r,t),i.setPixelRatio(Math.min(window.devicePixelRatio,2)),i.shadowMap.enabled=!0,i.shadowMap.type=Ze,i.toneMapping=Xe,i.toneMappingExposure=1.2,i.outputColorSpace=qe,y.current.appendChild(i.domElement),w.current=i,Te(n,null),ze(n),L&&Ie(a,i.domElement),!0}catch{return!1}},[_,I,z]),Le=e=>{if(!e)return 0;const r=e.sun_angle||e.lighting?.sun_angle;if(r!==void 0)return r;const t=e.timing?.current_orbital_angle||e.timing?.orbital_angle;return t??0},S=o.useRef(null),le=o.useRef(null),H=o.useRef(null),b=o.useRef(null),je=e=>{e.castShadow=!0,e.shadow.mapSize.width=2048,e.shadow.mapSize.height=2048,e.shadow.camera.near=.5,e.shadow.camera.far=50,e.shadow.camera.left=-10,e.shadow.camera.right=10,e.shadow.camera.top=10,e.shadow.camera.bottom=-10},_e=e=>{if(!S.current||!p.current)return;const r=Le(e),t=10,n=r+Math.PI,a=Math.sin(r)*5,c=t*Math.cos(n),i=a,P=t*Math.sin(n);S.current.position.set(c,i,P),S.current.target.position.set(0,0,0),p.current.children.includes(S.current.target)||p.current.add(S.current.target),le.current&&le.current.position.set(-c*.5,0,-P*.5),E.current&&S.current&&E.current.updateFromThreeLight(S.current),S.current&&M.updateLightForAllEffects(S.current)},Te=(e,r)=>{{const t=new we(16777215,2);t.position.set(-10,5,10),t.target.position.set(0,0,0),t.castShadow=!0,je(t),e.add(t),e.add(t.target),S.current=t;const n=new we(16777215,.05);n.position.set(8,-3,-5),e.add(n),le.current=n;const a=new Je(2236996,.1);e.add(a),setTimeout(()=>{E.current&&t&&E.current.updateFromThreeLight(t),t&&M.updateLightForAllEffects(t)},50);return}},ze=e=>{const r=new Ke(V,128,64),t=new Qe({color:8421504}),n=new et(r,t);n.castShadow=!0,n.receiveShadow=!0,n.position.set(0,0,0),e.add(n),m.current=n;const a=new ye(8421504);E.current=new He(n,a),E.current.addToScene(e)},Ie=(e,r)=>{const t=new Ne(e,r);t.enableDamping=!0,t.dampingFactor=.05;const n=Re();t.minDistance=n*.5,t.maxDistance=n*2,t.autoRotate=re,t.autoRotateSpeed=.5,t.enablePan=!0,t.enableZoom=!0,t.target.set(0,0,0),U.current=t},ke=o.useCallback(async()=>{if(!window.isLoadingPlanetData){window.isLoadingPlanetData=!0;try{X(!0),O(null),T.log("Loading planet data from API",{planetName:d});const r=await fetch("/api/planet/rendering-data");if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const t=await r.json();if(!t.success)throw new Error(t.error||"Failed to fetch planet data");const n=t.planet_data,a=t.timing,c=t.rendering_data,i={planet_info:c?.planet_info||{name:n.name,type:n.planet_type,base_color:"#808080",radius:n.diameter/15e3,orbital_radius:n.orbital_radius},surface_elements:c?.surface_elements,atmosphere:c?.atmosphere,rings:c?.rings,effects_3d:c?.effects_3d,shader_uniforms:c?.shader_uniforms,universal_actions:c?.universal_actions,timing:{cosmic_origin_time:a.cosmic_origin_time,current_time_seconds:a.current_time_seconds,elapsed_time:a.elapsed_time,initial_orbital_angle:n.initial_orbital_angle,current_orbital_angle:n.current_orbital_angle,max_orbital_radius:a.max_orbital_radius,system_max_orbital_radius:n.system_max_orbital_radius},original_planet_data:n,seeds:c?.seeds};return ge(i),A.current=i,T.log("API data loaded successfully",{planet:i.planet_info.name,type:i.planet_info.type,hasEffects:!!i.surface_elements,fullRenderingData:c}),f&&f(i),i}catch(e){const r=e instanceof Error?e.message:"Unknown error";return O(r),j&&j(r),null}finally{X(!1),window.isLoadingPlanetData=!1}}},[d,f,j]);o.useCallback(async()=>{if(!window.isLoadingPlanetData){window.isLoadingPlanetData=!0;try{X(!0),O(null),T.log("Loading planet data from API",{planetName:d});const r=await fetch("/api/planet/rendering-data");if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const t=await r.json();if(!t.success)throw new Error(t.error||"Failed to fetch planet data");const n=t.planet_data,a=t.timing,c=t.rendering_data,i={planet_info:c?.planet_info||{name:n.name,type:n.planet_type,base_color:"#808080",radius:n.diameter/15e3,orbital_radius:n.orbital_radius},surface_elements:c?.surface_elements,atmosphere:c?.atmosphere,rings:c?.rings,effects_3d:c?.effects_3d,shader_uniforms:c?.shader_uniforms,universal_actions:c?.universal_actions,timing:{cosmic_origin_time:a.cosmic_origin_time,current_time_seconds:a.current_time_seconds,elapsed_time:a.elapsed_time,initial_orbital_angle:n.initial_orbital_angle,current_orbital_angle:n.current_orbital_angle,max_orbital_radius:a.max_orbital_radius,system_max_orbital_radius:n.system_max_orbital_radius},original_planet_data:n,seeds:c?.seeds};ge(i),A.current=i,T.log("API data loaded successfully",{planet:i.planet_info.name,type:i.planet_info.type,hasEffects:!!i.surface_elements,fullRenderingData:c}),_e(i),b.current&&p.current&&(p.current.remove(b.current),b.current.geometry.dispose(),b.current.material.dispose(),b.current=null),await he(i),f&&f(i)}catch(e){const r=e instanceof Error?e.message:"Unknown error";O(r),j&&j(r),K()}finally{X(!1),window.isLoadingPlanetData=!1}}},[d,I,z,u]);const be=o.useCallback(()=>{if(!_||!m.current)return;const e=I?.orbital_period_seconds||365.25*24*3600,r=2*Math.PI/e,t=_.timing?.initial_orbital_angle||0,n=Date.now()/1e3,a=0,c=z||_.timing?.cosmic_origin_time||Date.now()/1e3-3600,i=n-c+a,P=(t+i*r)%(2*Math.PI),k=_.timing?.max_orbital_radius||100,l=20+_.planet_info?.orbital_radius/k*80,h=l,C=l*Math.cos(P),D=h*Math.sin(P);m.current.position.x=C,m.current.position.z=D,m.current.position.y=0},[_,I,z]),Fe=o.useCallback(async e=>{const r=e||_;if(r&&p.current)try{_e(r),b.current&&p.current&&(p.current.remove(b.current),b.current.geometry.dispose(),b.current.material.dispose(),b.current=null),await he(r)}catch{K()}},[_]),K=()=>{if(!(!p.current||!m.current)){T.warn("Applying fallback effects for planet type:",I?.planet_type);try{ue(),m.current.material instanceof tt&&m.current.material.color.setHex(6710886);try{const e=Ue("generic"),r=M.createEffectsFromList(e,V,m.current);r.forEach(t=>{t.effect.addToScene&&p.current&&m.current&&t.effect.addToScene(p.current,m.current.position)}),G.current=r,ae(r)}catch{}fe()}catch{}}},ue=()=>{G.current.forEach(e=>{try{M.removeEffect(e.id),e.effect.dispose&&e.effect.dispose()}catch{}}),R.current&&(R.current.dispose(),R.current=null),G.current=[],ae([])},xe=o.useCallback(()=>{ne.current=requestAnimationFrame(xe);const e=performance.now(),r=ve.current.getDelta();U.current&&U.current.update();try{M.updateAllEffects(r,m.current?.rotation.y,v.current||void 0)}catch{}if(m.current&&A.current){A.current.planet_info?.name;const a=A.current.original_planet_data,c=a?.orbital_period_seconds||365.25*24*3600,i=A.current.timing?.initial_orbital_angle||0;z||A.current.timing?.cosmic_origin_time||Date.now()/1e3-3600;const P=a?.axial_tilt||0,k=2*Math.PI/c;(i+se.current*k)%(2*Math.PI);const g=A.current.timing?.max_orbital_radius||A.current.timing?.system_max_orbital_radius,l=a?.orbital_radius;if(!g||!l)return;a?.eccentricity_factor,m.current.position.set(0,0,0);const h=a?.rotation_period_seconds||86400,C=2*Math.PI/h;m.current.rotation.y=se.current*C%(2*Math.PI),m.current.rotation.z=P*(Math.PI/180)}G.current.forEach(a=>{a.effect.updateUniforms&&a.effect.updateUniforms(r)});const n=Array.from(M.effects.values()).find(a=>a.type==="toxic_post_processing")?.enabled||!1;if(R.current&&n&&(R.current.update(r),S.current&&R.current.updateLightPosition(S.current.position,v.current)),w.current&&p.current&&v.current){const a=performance.now();R.current&&n?R.current.render():w.current.render(p.current,v.current);const c=performance.now()-a;if(e-oe.current>5e3){const i=1e3/(e-oe.current);fe(),ie(P=>({...P,frameRate:Math.round(i),renderTime:Math.round(c*100)/100})),oe.current=e}}},[]),fe=o.useCallback(()=>{const e=M.getStats();ie(r=>({...r,activeEffects:e.activeEffects,enabledEffects:e.enabledEffects}))},[]);return o.useEffect(()=>{let e=!0;return window.tonnirLoggedInPlanet=!1,window.orbitChecked=!1,window.debugOrbitRadius=null,window.debugSystemMaxRadius=null,window.planetNameLogged=!1,window.timingDataLogged=!1,window.isLoadingPlanetData=!1,window.orbitalAngleSourceLogged=!1,window.orbitalAngleDebugged=!1,window.positionDebugged=!1,window.animationLoopDebugged=!1,(async()=>{try{if(!e)return;const t=await ke();if(!e)return;if(!Me()){e&&O("Failed to initialize 3D renderer");return}if(!e||(xe(),y.current&&"ResizeObserver"in window&&(J.current=new ResizeObserver(ce),J.current.observe(y.current)),window.addEventListener("resize",ce),!e))return;t?await Fe(t):K()}catch(t){e&&O(t instanceof Error?t.message:"Unknown initialization error")}})(),()=>{if(e=!1,A.current=null,ne.current&&cancelAnimationFrame(ne.current),J.current&&J.current.disconnect(),window.removeEventListener("resize",ce),ue(),E.current&&(E.current.dispose(),E.current=null),U.current&&U.current.dispose(),H.current&&p.current&&(p.current.remove(H.current),H.current.geometry.dispose(),H.current.material.dispose(),H.current=null),b.current&&p.current&&(p.current.remove(b.current),b.current.geometry.dispose(),b.current.material.dispose(),b.current=null),w.current&&y.current)try{y.current.contains(w.current.domElement)&&y.current.removeChild(w.current.domElement),w.current.dispose()}catch{}}},[]),o.useEffect(()=>{const e=setInterval(()=>{const r=M.getStats();ie(t=>({...t,activeEffects:r.activeEffects,enabledEffects:r.enabledEffects}))},1e4);return()=>clearInterval(e)},[]),o.useEffect(()=>{_&&p.current&&m.current&&be()},[_,be]),nt(_),s.jsxs("div",{className:`relative ${x}`,children:[Z&&_&&s.jsx(rt,{planetData:_,showInPage:!0,showInConsole:!0}),s.jsx("div",{ref:y,className:"w-full h-full",style:{minHeight:"300px",aspectRatio:"1"}}),pe&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:s.jsxs("div",{className:"text-white text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),s.jsx("div",{children:"Loading planet..."})]})}),me&&s.jsxs("div",{className:"absolute top-0 left-0 right-0 p-2 bg-red-500 text-white text-sm",children:[s.jsx("strong",{children:"Error:"})," ",me]}),_&&!pe&&s.jsx("div",{className:"absolute bottom-0 left-0 p-2 text-white bg-black bg-opacity-50 max-w-xs rounded-tr-lg",children:s.jsx("h3",{className:"text-xs font-bold",children:_.planet_info.name})}),Z&&s.jsxs("div",{className:"absolute top-0 right-0 p-4 text-white bg-black bg-opacity-70 text-xs font-mono",children:[s.jsx("h4",{className:"font-bold mb-2",children:"Debug Info"}),s.jsxs("div",{children:["Frame Rate: ",q.frameRate," FPS"]}),s.jsxs("div",{children:["Render Time: ",q.renderTime,"ms"]}),s.jsxs("div",{children:["Active Effects: ",q.activeEffects]}),s.jsxs("div",{children:["Enabled Effects: ",q.enabledEffects]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"font-semibold",children:"Effects:"}),Ee.map(e=>s.jsxs("div",{className:"ml-2",children:[e.type," (",e.enabled?"ON":"OFF",")"]},e.id))]})]})]})});class at extends Oe.Component{constructor(x){super(x),this.state={hasError:!1,error:null}}static getDerivedStateFromError(x){return{hasError:!0,error:x.message}}componentDidCatch(x,Y){}render(){return this.state.hasError?s.jsx("div",{className:"flex items-center justify-center w-full h-full bg-gray-900/50 rounded",children:s.jsxs("div",{className:"text-center p-4",children:[s.jsx("div",{className:"text-red-400 text-sm mb-2",children:"3D Renderer Error"}),s.jsx("div",{className:"text-xs text-gray-400",children:this.state.error})]})}):this.props.children}}const ht=o.forwardRef((d,x)=>s.jsx(at,{children:s.jsx(st,{ref:x,...d})}));export{ht as M};
