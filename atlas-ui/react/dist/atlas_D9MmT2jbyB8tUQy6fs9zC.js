import{r as o,j as e,a as Je,U as et,c as Te,R as Be}from"./atlas_BGo7KNTC_D9rNHeIOnwpB.js";import{R as tt,L as st,g as nt,S as je,m as at,F as ot,H as rt,a as it}from"./atlas_CUYkglEYtrK-j5RaIV74A.js";import{W as ze}from"./atlas_CF1gEPauJ2rcIZPCU6Lor.js";import{W as Re,C as Ce,X as Ie,G as Ee,q as Xe,cz as Ye,x as Ge,cA as De,cB as Ne,b as ae,z as se,M as J,V as we,B as ke,cC as We,n as Ve,a0 as Pe,$ as Oe,v as qe,cD as Ue,cE as Ze,g as Se,A as _e,cF as $e,y as lt,P as ct,t as dt,cG as ut}from"./atlas_femPEYSfNFJNF9zhhzs2t.js";import{R as mt,S as ht,M as xt,a as Le,b as Fe,T as pt}from"./atlas_tWwhs3uxVw9kyauFo4waU.js";import{O as gt}from"./atlas_BVyqcYp9LNnnVGf87yeog.js";import{V as ft}from"./atlas_BC--f3teBajIZvYzpPvMJ.js";import"./atlas_5StMBQg7EZ_DcUhMgqODi.js";const bt=({coordinates:t,galaxyName:r})=>{const x=o.useRef(null),p=o.useRef(null),i=o.useRef(null),C=o.useRef(null);return o.useEffect(()=>{if(!x.current)return;const m=x.current,l=m.clientWidth,O=m.clientHeight,E=new Re;E.background=new Ce(657930),p.current=E;const v=new Ie(45,l/O,.1,1e3);v.position.set(20,15,20),v.lookAt(0,0,0);const g=new ze({antialias:!0,alpha:!0});g.setSize(l,O),g.setClearColor(0,.2),i.current=g,m.appendChild(g.domElement);const y=0,N=1e7,k=5e6,[q,h,M]=t,c=((q-y)/(N-y)-.5)*16,n=((h-y)/(N-y)-.5)*16,D=((M-y)/(N-y)-.5)*16,d=new Ee;E.add(d);const z=new Xe(16,16,16),S=new Ye(z),I=new Ge({color:16777215,opacity:.4,transparent:!0,linewidth:2}),s=new De(S,I);d.add(s);const W=new Ne(16,16,16777215,16777215);W.material.opacity=.1,W.material.transparent=!0,W.position.y=-8,d.add(W);const X=new Ne(16,16,16777215,16777215);X.material.opacity=.05,X.material.transparent=!0,X.rotation.z=Math.PI/2,X.position.x=-8,d.add(X);const Y=new Ne(16,16,16777215,16777215);Y.material.opacity=.05,Y.material.transparent=!0,Y.rotation.x=Math.PI/2,Y.position.z=-8,d.add(Y);const ne=new ae(.5,32,32),ee=new se({color:16777215,transparent:!0,opacity:.9}),f=new J(ne,ee);f.position.set(0,0,0),d.add(f);const j=new J(new ae(.8,32,32),new se({color:16777215,transparent:!0,opacity:.2}));f.add(j);const P=new ae(.4,32,32),oe=new se({color:6605055,transparent:!0,opacity:1}),re=new J(P,oe);re.position.set(c,n,D),d.add(re);const ce=new J(new ae(.7,32,32),new se({color:6605055,transparent:!0,opacity:.3}));if(re.add(ce),Math.sqrt(Math.pow(q-k,2)+Math.pow(h-k,2)+Math.pow(M-k,2))<2e6){const a=[new we(0,0,0),new we(c,n,D)],H=new ke().setFromPoints(a),B=new We({color:16762980,dashSize:.6,gapSize:.6,opacity:.4,transparent:!0,linewidth:2}),te=new Ve(H,B);te.computeLineDistances(),d.add(te)}const de=new Pe(4210752,.6);E.add(de);const b=new Oe(16777215,.8);b.position.set(10,10,10),E.add(b);const u=(a,H)=>{const B=document.createElement("canvas"),te=B.getContext("2d");if(!te)return null;B.width=64,B.height=64,te.fillStyle=`#${H.toString(16).padStart(6,"0")}`,te.font="bold 48px Arial",te.textAlign="center",te.textBaseline="middle",te.fillText(a,32,32);const Z=new qe(B),be=new Ue({map:Z,transparent:!0,opacity:.8}),fe=new Ze(be);return fe.scale.set(1.6,1.6,1),fe},R=u("X",16739179);R&&(R.position.set(8.4,-7.6,-7.6),d.add(R));const G=u("Y",7077739);G&&(G.position.set(-7.6,8.4,-7.6),d.add(G));const V=u("Z",7039999);V&&(V.position.set(-7.6,-7.6,8.4),d.add(V));let L=!1,A=0,$=0,w=!0,F=0;const U=a=>{L=!0,w=!1,A=a.clientX,$=a.clientY},Q=a=>{if(!L)return;const H=a.clientX-A,B=a.clientY-$;d.rotation.y+=H*.01,d.rotation.x+=B*.01,A=a.clientX,$=a.clientY},K=()=>{L=!1,setTimeout(()=>{L||(w=!0)},3e3)},he=a=>{a.preventDefault();const H=.1,B=v.position.distanceTo(new we(0,0,0));a.deltaY>0&&B<50?v.position.multiplyScalar(1+H):a.deltaY<0&&B>10&&v.position.multiplyScalar(1-H)},xe=a=>{a.key==="Escape"&&document.dispatchEvent(new CustomEvent("universe-close-fullscreen"))},pe=a=>{if(a.preventDefault(),a.touches.length===1)L=!0,w=!1,A=a.touches[0].clientX,$=a.touches[0].clientY;else if(a.touches.length===2){const H=a.touches[0].clientX-a.touches[1].clientX,B=a.touches[0].clientY-a.touches[1].clientY;F=Math.sqrt(H*H+B*B)}},ge=a=>{if(a.preventDefault(),a.touches.length===1&&L){const H=a.touches[0].clientX-A,B=a.touches[0].clientY-$;d.rotation.y+=H*.01,d.rotation.x+=B*.01,A=a.touches[0].clientX,$=a.touches[0].clientY}else if(a.touches.length===2){const H=a.touches[0].clientX-a.touches[1].clientX,B=a.touches[0].clientY-a.touches[1].clientY,te=Math.sqrt(H*H+B*B);if(F>0){const be=te/F,fe=v.position.distanceTo(new we(0,0,0));be>1&&fe>10?v.position.multiplyScalar(1-.01):be<1&&fe<50&&v.position.multiplyScalar(1+.01)}F=te}},ue=a=>{a.preventDefault(),L=!1,F=0,setTimeout(()=>{L||(w=!0)},3e3)},T=g.domElement;T.style.cursor="grab",T.addEventListener("mousedown",a=>{T.style.cursor="grabbing",U(a)}),T.addEventListener("mousemove",Q),T.addEventListener("mouseup",()=>{T.style.cursor="grab",K()}),T.addEventListener("mouseleave",()=>{T.style.cursor="grab",K()}),T.addEventListener("wheel",he),T.addEventListener("touchstart",pe,{passive:!1}),T.addEventListener("touchmove",ge,{passive:!1}),T.addEventListener("touchend",ue,{passive:!1}),document.addEventListener("keydown",xe);const ve=()=>{C.current=requestAnimationFrame(ve),w&&(d.rotation.y+=.002,d.rotation.x+=.001);const a=Date.now()*.005;f.scale.setScalar(1+Math.sin(a)*.1),re.rotation.y+=.01,g.render(E,v)};ve();const ye=()=>{const a=m.clientWidth,H=m.clientHeight;v.aspect=a/H,v.updateProjectionMatrix(),g.setSize(a,H)};return window.addEventListener("resize",ye),()=>{window.removeEventListener("resize",ye),document.removeEventListener("keydown",xe),T.removeEventListener("mousedown",U),T.removeEventListener("mousemove",Q),T.removeEventListener("mouseup",K),T.removeEventListener("mouseleave",K),T.removeEventListener("wheel",he),T.removeEventListener("touchstart",pe),T.removeEventListener("touchmove",ge),T.removeEventListener("touchend",ue),C.current&&cancelAnimationFrame(C.current),m&&g.domElement&&m.removeChild(g.domElement),g.dispose(),z.dispose(),S.dispose(),I.dispose(),ne.dispose(),ee.dispose(),P.dispose(),oe.dispose()}},[t,r]),e.jsx("div",{ref:x,className:"w-full h-full"})},wt=({coordinates:t,galaxyName:r})=>{const x=o.useRef(null),p=o.useRef(null),i=o.useRef(null),C=o.useRef(null),[m,l]=o.useState(!1),[O,E]=o.useState(!1),[v,g]=o.useState(!1),y=()=>{E(!0),setTimeout(()=>{l(!1),E(!1)},300)};o.useEffect(()=>{const c=n=>{n.key==="Escape"&&m&&y()};return document.addEventListener("universe-close-fullscreen",y),document.addEventListener("keydown",c),()=>{document.removeEventListener("universe-close-fullscreen",y),document.removeEventListener("keydown",c)}},[m]),o.useEffect(()=>{if(m&&v){const c=setTimeout(()=>{g(!1)},50);return()=>clearTimeout(c)}},[m,v]),o.useEffect(()=>{if(!x.current)return;const c=x.current,n=c.clientWidth,D=n<640,d=new Re;d.background=new Ce(657930),p.current=d;const z=new Ie(30,n/120,.1,1e3);z.position.set(12,8,12),z.lookAt(0,0,0);const S=new ze({antialias:!0,alpha:!0});S.setSize(n,120),S.setClearColor(0,.2),i.current=S,c.appendChild(S.domElement);const I=0,s=1e7,W=5e6,[X,Y,ne]=t,ee=((X-I)/(s-I)-.5)*8,f=((Y-I)/(s-I)-.5)*8,j=((ne-I)/(s-I)-.5)*8,P=new Ee;d.add(P);const oe=new Xe(8,8,8),re=new Ye(oe),ce=new Ge({color:16777215,opacity:.4,transparent:!0}),Me=new De(re,ce);P.add(Me);const de=new Ne(8,8,16777215,16777215);de.material.opacity=.1,de.material.transparent=!0,de.position.y=-4,P.add(de);const b=new Ne(8,8,16777215,16777215);b.material.opacity=.05,b.material.transparent=!0,b.rotation.z=Math.PI/2,b.position.x=-4,P.add(b);const u=new Ne(8,8,16777215,16777215);u.material.opacity=.05,u.material.transparent=!0,u.rotation.x=Math.PI/2,u.position.z=-4,P.add(u);const R=new ae(.25,16,16),G=new se({color:16777215,transparent:!0,opacity:.9}),V=new J(R,G);V.position.set(0,0,0),P.add(V);const L=new J(new ae(.45,16,16),new se({color:16777215,transparent:!0,opacity:.2}));V.add(L);const A=new ae(.2,16,16),$=new se({color:6605055,transparent:!0,opacity:1}),w=new J(A,$);w.position.set(ee,f,j),P.add(w);const F=new J(new ae(.35,16,16),new se({color:6605055,transparent:!0,opacity:.3}));if(w.add(F),Math.sqrt(Math.pow(X-W,2)+Math.pow(Y-W,2)+Math.pow(ne-W,2))<2e6){const _=[new we(0,0,0),new we(ee,f,j)],ie=new ke().setFromPoints(_),le=new We({color:16762980,dashSize:.3,gapSize:.3,opacity:.4,transparent:!0}),me=new Ve(ie,le);me.computeLineDistances(),P.add(me)}const Q=new Pe(4210752,.6);d.add(Q);const K=new Oe(16777215,.8);K.position.set(5,5,5),d.add(K);const he=(_,ie)=>{const le=document.createElement("canvas"),me=le.getContext("2d");if(!me)return null;le.width=32,le.height=32,me.fillStyle=`#${ie.toString(16).padStart(6,"0")}`,me.font="bold 24px Arial",me.textAlign="center",me.textBaseline="middle",me.fillText(_,16,16);const Ke=new qe(le),Qe=new Ue({map:Ke,transparent:!0,opacity:.8}),Ae=new Ze(Qe);return Ae.scale.set(.8,.8,1),Ae},xe=he("X",16739179);xe&&(xe.position.set(4.2,-3.8,-3.8),P.add(xe));const pe=he("Y",7077739);pe&&(pe.position.set(-3.8,4.2,-3.8),P.add(pe));const ge=he("Z",7039999);ge&&(ge.position.set(-3.8,-3.8,4.2),P.add(ge));let ue=!1,T=0,ve=0,ye=!0;const a=_=>{ue=!0,ye=!1,T=_.clientX,ve=_.clientY},H=_=>{if(!ue)return;const ie=_.clientX-T,le=_.clientY-ve;P.rotation.y+=ie*.01,P.rotation.x+=le*.01,T=_.clientX,ve=_.clientY},B=()=>{ue=!1,setTimeout(()=>{ue||(ye=!0)},3e3)},te=_=>{_.preventDefault();const ie=.1,le=z.position.distanceTo(new we(0,0,0));_.deltaY>0&&le<25?z.position.multiplyScalar(1+ie):_.deltaY<0&&le>5&&z.position.multiplyScalar(1-ie)},Z=S.domElement;Z.style.cursor="grab",Z.style.borderRadius="8px",Z.addEventListener("mousedown",_=>{Z.style.cursor="grabbing",a(_)}),Z.addEventListener("mousemove",H),Z.addEventListener("mouseup",()=>{Z.style.cursor="grab",B()}),Z.addEventListener("mouseleave",()=>{Z.style.cursor="grab",B()}),Z.addEventListener("wheel",te);const be=()=>{C.current=requestAnimationFrame(be),ye&&(P.rotation.y+=.002,P.rotation.x+=.001);const _=Date.now()*.005;V.scale.setScalar(1+Math.sin(_)*.1),w.rotation.y+=.01,S.render(d,z)};be();const fe=()=>{const _=c.clientWidth,ie=_<640?150:160;z.aspect=_/ie,z.updateProjectionMatrix(),S.setSize(_,ie)};return window.addEventListener("resize",fe),()=>{window.removeEventListener("resize",fe),Z.removeEventListener("mousedown",a),Z.removeEventListener("mousemove",H),Z.removeEventListener("mouseup",B),Z.removeEventListener("mouseleave",B),Z.removeEventListener("wheel",te),C.current&&cancelAnimationFrame(C.current),c&&S.domElement&&c.removeChild(S.domElement),S.dispose(),oe.dispose(),re.dispose(),ce.dispose(),R.dispose(),G.dispose(),A.dispose(),$.dispose()}},[t,r]);const N=c=>c.replace(/_/g," "),k=c=>c>=1e6?`${(c/1e6).toFixed(1)}M`:c>=1e3?`${(c/1e3).toFixed(1)}K`:c.toString(),[q,h,M]=t;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Galaxy Location"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:x,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsxs("button",{onClick:()=>{l(!0),g(!0)},className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 flex items-center gap-1 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:[e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),e.jsx("span",{className:"text-xs text-white hidden sm:inline",children:"Expand"})]})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-[10px]",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:N(r)})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:[k(q),", ",k(h),", ",k(M)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom • Drag: Rotate View"})]})]}),m&&Je.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${O||v?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${O||v?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:N(r)})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[N(r)," - Galaxy Location"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Galaxy"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[k(q),", ",k(h),", ",k(M)]})]})]}),e.jsx("button",{onClick:y,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(bt,{coordinates:t,galaxyName:r})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},vt=({galaxy:t})=>{const[r,x]=o.useState({isOnCooldown:!1,isSaved:!1,isCollecting:!1,timeUntilNext:0});o.useEffect(()=>{let i;const C=()=>{const E=Le.generateLocationId("galaxy",t.coordinates.join(","),void 0,void 0),v=Le.canCollectFromLocation(E),g=Le.getTimeUntilNextCollection(E),y=t.coordinates,N=Fe.generateGalaxyUrl(y,Fe.getCurrentPage()),q=st.getLocations().some(h=>h.stargateUrl===N);x(h=>({isOnCooldown:!v&&g>0,isSaved:q,isCollecting:h.isCollecting,timeUntilNext:g}))},m=()=>{x(E=>({...E,isCollecting:!0})),i=setTimeout(()=>{x(E=>({...E,isCollecting:!1}))},1e3)};C();const l=setInterval(C,1e3),O=tt.subscribe("mining_completed",m);return()=>{clearInterval(l),i&&clearTimeout(i),O()}},[t.name,t.coordinates]);const p=i=>i.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex gap-2 z-10",children:[e.jsx(mt,{locationType:"galaxy",locationId:t.name,coordinates:t.coordinates.join(","),className:"text-xs"}),e.jsx(ht,{type:"galaxy",name:t.name,coordinates:t.coordinates.join(","),className:"text-xs"}),e.jsx("div",{className:"inline-flex items-center bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] font-medium px-1.5 py-0.5 rounded h-[21px] box-border",children:"VISITED"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(xt,{isOnCooldown:r.isOnCooldown,isSaved:r.isSaved,isCollecting:r.isCollecting}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Details"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300",children:t.galaxy_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Solar Systems"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:t.num_systems.toLocaleString()})]})]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-2",children:e.jsx(wt,{coordinates:t.coordinates,galaxyName:t.name})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-gray-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Cosmic Objects"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-pink-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Black Holes"}),e.jsx("div",{className:"text-xs font-bold text-pink-300",children:t.black_holes.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Pulsars"}),e.jsx("div",{className:"text-xs font-bold text-cyan-300",children:t.pulsars.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Quasars"}),e.jsx("div",{className:"text-xs font-bold text-indigo-300",children:t.quasars.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("div",{className:"text-green-400 font-medium",children:"Visited"})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:p(t.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:t.coordinates.join(", ")})]})]})]})]})},yt=({galaxyType:t,numSystems:r,blackHoles:x,pulsars:p,quasars:i,seed:C=12345,imageUrl:m})=>{const l=o.useRef(null),O=o.useRef(null),E=o.useRef(null),v=o.useRef(null),g=o.useRef(null),y=o.useRef(null),[N,k]=o.useState(!1);class q{seed;constructor(M){this.seed=M}random(){const M=Math.sin(this.seed++)*1e4;return M-Math.floor(M)}uniform(M,c){return M+this.random()*(c-M)}gauss(M,c){let n=0,D=0;for(;n===0;)n=this.random();for(;D===0;)D=this.random();const d=Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*D);return M+c*d}randint(M,c){return Math.floor(this.uniform(M,c+1))}}return o.useEffect(()=>{if(!l.current)return;const h=l.current,M=h.clientWidth,c=h.clientHeight,n=Math.min(M,c),D=new Re;D.background=new Ce(17),O.current=D;const d=new Ie(45,1,.1,1e4);d.position.set(0,200,400),d.lookAt(0,0,0);const z=new ze({antialias:!0,alpha:!0});z.setSize(n,n),z.setClearColor(17,1),E.current=z,h.appendChild(z.domElement);const S=new gt(d,z.domElement);S.enableDamping=!0,S.dampingFactor=.05,S.minDistance=50,S.maxDistance=800,S.autoRotate=!0,S.autoRotateSpeed=.5,S.enablePan=!0,S.enableZoom=!0,S.target.set(0,0,0),g.current=S;const I=new Ee;y.current=I,D.add(I);const s=new q(C),W=s.uniform(0,2*Math.PI),X=new ke,Y=[],ne=[],ee=[],f=200;let j=r;if(t==="Spiral"){j=Math.min(r,5e4);const b=4,u=2*Math.PI/b,R=.15,G=.5,V=.1;for(let L=0;L<j*V;L++){const A=s.uniform(0,2*Math.PI),$=s.gauss(f*.1,f*.05),w=s.gauss(0,5),F=$*Math.cos(A),U=$*Math.sin(A);Y.push(F,w,U),ne.push(1,1,1),ee.push(s.uniform(.5,2))}for(let L=0;L<j;L++){const A=G*Math.sqrt(L/j)*2*Math.PI,$=L%b*u,w=f*Math.sqrt(L/j),F=w*Math.cos(A+$+W)+s.uniform(-R*w,R*w),U=w*Math.sin(A+$+W)+s.uniform(-R*w,R*w),Q=s.gauss(0,3);Y.push(F,Q,U),ne.push(1,1,.8),ee.push(s.uniform(.5,1.5))}}else if(t==="Elliptical"){j=Math.min(r,1e5);for(let b=0;b<j;b++){const u=s.uniform(0,2*Math.PI),R=s.uniform(0,Math.PI),G=s.gauss(f/4,f/8),V=G*Math.sin(R)*Math.cos(u),L=G*Math.cos(R)*.6,A=G*Math.sin(R)*Math.sin(u);Y.push(V,L,A),ne.push(1,.9,.7),ee.push(s.uniform(.3,1))}}else if(t==="Dwarf"){j=Math.min(r/100,1e4);for(let b=0;b<j;b++){const u=s.uniform(0,2*Math.PI),R=s.uniform(0,Math.PI),G=s.gauss(f/3,f*.3),V=G*Math.sin(R)*Math.cos(u),L=G*Math.cos(R)*.5,A=G*Math.sin(R)*Math.sin(u);Y.push(V,L,A),ne.push(.8,.8,1),ee.push(s.uniform(.5,2))}}else if(t==="Singularity Void"){j=5e3;for(let w=0;w<j;w++){const F=w/j,U=F*20*Math.PI,Q=f*(1-F)+s.uniform(-20,20),K=(F-.5)*200+s.uniform(-10,10),he=Q*Math.cos(U),xe=Q*Math.sin(U);Y.push(he,K,xe);const pe=s.uniform(.5,1),ge=s.uniform(0,.5),ue=s.uniform(.5,1);ne.push(pe,ge,ue),ee.push(s.uniform(.5,3))}const b=new ke,u=[],R=[];for(let w=0;w<500;w++){const F=s.uniform(-f,f),U=s.uniform(-f/2,f/2),Q=s.uniform(-f,f);u.push(F,U,Q),u.push(F+s.uniform(-30,30),U+s.uniform(-10,10),Q+s.uniform(-30,30));const K=new Ce;K.setHSL(s.random(),1,.5),R.push(K.r,K.g,K.b),R.push(K.r,K.g,K.b)}b.setAttribute("position",new Se(u,3)),b.setAttribute("color",new Se(R,3));const G=new Ge({vertexColors:!0,transparent:!0,opacity:.3,blending:_e}),V=new De(b,G);I.add(V);const L=new ae(30,32,32),A=new se({color:0,transparent:!0,opacity:.9}),$=new J(L,A);I.add($);for(let w=0;w<5;w++){const F=new $e(40+w*15,2,8,64),U=new se({color:new Ce().setHSL(.8,1,.5),transparent:!0,opacity:.3-w*.05,wireframe:!0}),Q=new J(F,U);Q.rotation.x=s.uniform(0,Math.PI),Q.rotation.y=s.uniform(0,Math.PI),I.add(Q)}}X.setAttribute("position",new Se(Y,3)),X.setAttribute("color",new Se(ne,3)),X.setAttribute("size",new Se(ee,1));const P=new lt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:_e,sizeAttenuation:!0}),oe=new ct(X,P);I.add(oe);for(let b=0;b<x;b++){const u=new Ee,R=s.uniform(-30,30),G=s.uniform(-10,10),V=s.uniform(-30,30),L=new ae(3,16,16),A=new se({color:0,transparent:!0,opacity:.9}),$=new J(L,A);u.add($);const w=new $e(8,2,8,32),F=new se({color:65535,transparent:!0,opacity:.6,emissive:65535,emissiveIntensity:.5}),U=new J(w,F);U.rotation.x=Math.PI/2,u.add(U),u.position.set(R,G,V),I.add(u)}for(let b=0;b<p;b++){const u=new ae(1.5,8,8),R=new se({color:16776960,emissive:16776960,emissiveIntensity:1}),G=new J(u,R);G.position.set(s.uniform(-f,f),s.uniform(-f/4,f/4),s.uniform(-f,f)),G.isPulsar=!0,G.pulseSpeed=s.uniform(1,3),I.add(G)}for(let b=0;b<i;b++){const u=new Ee,R=new ae(2,16,16),G=new se({color:16777215,emissive:16777215,emissiveIntensity:2}),V=new J(R,G);u.add(V);const L=new dt(1,20,8),A=new se({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),$=new J(L,A);$.position.y=10,u.add($);const w=new J(L,A);w.position.y=-10,w.rotation.z=Math.PI,u.add(w),u.position.set(s.uniform(-f,f),s.uniform(-f/4,f/4),s.uniform(-f,f)),I.add(u)}const re=new Pe(4210752,.5);D.add(re);const ce=new ut(16777215,.5,1e3);ce.position.set(0,100,0),D.add(ce);const Me=()=>{v.current=requestAnimationFrame(Me),y.current&&(y.current.rotation.y+=.001),I.children.forEach(b=>{if(b.isPulsar){const u=b.pulseSpeed||1;b.scale.setScalar(1+Math.sin(Date.now()*.001*u)*.3)}}),g.current&&g.current.update(),z.render(D,d)};Me();const de=()=>{if(!l.current||!z)return;const b=l.current,u=Math.min(b.clientWidth,b.clientHeight);z.setSize(u,u),d.aspect=1,d.updateProjectionMatrix()};return window.addEventListener("resize",de),()=>{window.removeEventListener("resize",de),g.current&&g.current.dispose(),v.current&&cancelAnimationFrame(v.current),h&&z.domElement&&h.removeChild(z.domElement),z.dispose()}},[t,r,x,p,i,C]),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{ref:l,className:"w-full h-full border border-white/20 rounded bg-black/20"}),m&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>k(!N),className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 flex items-center gap-1 backdrop-blur-sm shadow-lg z-10",title:N?"Hide 2D Image":"Show 2D Image",children:[e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:N?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),e.jsx("span",{className:"text-xs text-white hidden sm:inline",children:N?"Hide":"2D"})]}),N&&e.jsxs("div",{className:"absolute bottom-2 left-2 w-48 h-48 border-2 border-blue-400/50 rounded-lg overflow-hidden bg-black/80 backdrop-blur-sm z-10",children:[e.jsx("img",{src:m,alt:"2D Galaxy visualization",className:"w-full h-full object-contain"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-1 text-center",children:"2D Reference"})]})]}),e.jsx("div",{className:"absolute top-2 left-2 bg-black/60 backdrop-blur-sm border border-white/30 rounded-lg px-3 py-1 z-10",children:e.jsxs("span",{className:"text-white text-sm font-medium",children:[t," Galaxy"]})}),e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/60 backdrop-blur-sm border border-white/30 rounded-lg px-3 py-2 z-10 text-xs text-white/80",children:[e.jsxs("div",{children:["Systems: ",r.toLocaleString()]}),e.jsxs("div",{children:["Black Holes: ",x]}),e.jsxs("div",{children:["Pulsars: ",p]}),e.jsxs("div",{children:["Quasars: ",i]})]})]})},jt=({galaxyUrl:t,imageUrl:r,galaxyType:x="Spiral",numSystems:p=1e4,blackHoles:i=5,pulsars:C=10,quasars:m=3})=>{const l=o.useRef(null),O=o.useRef(null),[E,v]=o.useState("Aligning Stargate..."),[g,y]=o.useState(!1),[N,k]=o.useState(!1),[q,h]=o.useState(!1),[M,c]=o.useState("3d");return o.useEffect(()=>{const n=l.current;if(!n)return;const D=n.getContext("2d");if(!D)return;let d=[];const z=800;let S,I;const s=800;let W,X=.5;function Y(){const j=n?.parentElement;if(!j||!n)return;const P=j.clientWidth,oe=j.clientHeight;n.width=Math.min(P,s),n.height=Math.min(oe,s),S=n.width/2,I=n.height/2}function ne(){Y(),d=[];for(let j=0;j<z;j++)d.push({x:Math.random()*(n?.width||800),y:Math.random()*(n?.height||800),z:Math.random()*(n?.width||800),o:Math.random()});ee()}function ee(){!n||!D||(D.clearRect(0,0,n.width,n.height),d.forEach(j=>{j.z-=X,j.z<=0&&(j.z=n.width,j.x=Math.random()*n.width,j.y=Math.random()*n.height,j.o=Math.random());const P=n.width/j.z,oe=(j.x-S)*P+S,re=(j.y-I)*P+I,ce=2*P;D.beginPath(),D.fillStyle=`rgba(255, 255, 255, ${j.o})`,D.arc(oe,re,ce,0,2*Math.PI),D.fill()}),X<60&&(X+=1),W=requestAnimationFrame(ee))}ne();const f=()=>Y();return window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f),W&&cancelAnimationFrame(W)}},[]),o.useEffect(()=>{if(r){const n=new Image;n.onload=()=>{O.current&&(O.current.src=r,k(!0),h(!0))},n.onerror=()=>{setTimeout(()=>{k(!0),h(!0)},1500)},n.src=r}else setTimeout(()=>{k(!0),h(!0)},1500)},[r]),o.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){v("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),y(!0);const D=(s,W)=>Array.from({length:W},()=>s[Math.floor(Math.random()*s.length)]).join(""),d=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:35},{chars:"0123456789ABCDEF",duration:20,iterations:50},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:'\",.<>?/`~",duration:15,iterations:100}];let z=0,S=0;const I=()=>{if(z>=d.length){const W="Stargate system aligned";let X=0;v("");const Y=()=>{X<W.length?(v(W.substring(0,X+1)),X++,setTimeout(Y,30)):y(!1)};Y();return}const s=d[z];v(D(s.chars,32)),S++,S>=s.iterations&&(z++,S=0),setTimeout(I,s.duration)};I()},[]),o.useEffect(()=>{const n=document.createElement("style");return n.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(n),()=>{document.head.removeChild(n)}},[]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Galaxy Visualization"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>c("3d"),className:`px-3 py-1 text-xs rounded-l-lg border transition-all ${M==="3d"?"bg-blue-500/30 border-blue-400 text-blue-300":"bg-white/10 border-white/20 text-gray-400 hover:bg-white/20"}`,children:"3D View"}),e.jsx("button",{onClick:()=>c("2d"),className:`px-3 py-1 text-xs rounded-r-lg border transition-all ${M==="2d"?"bg-blue-500/30 border-blue-400 text-blue-300":"bg-white/10 border-white/20 text-gray-400 hover:bg-white/20"}`,children:"2D View"})]})]}),e.jsx("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:M==="3d"?e.jsx(yt,{galaxyType:x,numSystems:p,blackHoles:i,pulsars:C,quasars:m,imageUrl:r}):e.jsxs(e.Fragment,{children:[e.jsx("canvas",{ref:l,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${q?"opacity-0":"opacity-100"}`,style:{filter:q?"blur(50px)":"none"}}),e.jsx("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${N?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:N&&r?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(et,{zoomMargin:20,classDialog:"backdrop-blur-3xl",children:e.jsx("img",{ref:O,className:"max-w-full max-h-full object-contain rounded-xl shadow-2xl shadow-blue-500/20",src:r,alt:"Galaxy visualization",style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:"transparent"}})})}):e.jsx("img",{ref:O,className:"w-full h-full object-cover",src:"/static/images/placeholder-min.jpg",alt:"Galaxy visualization"})})]})}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:t,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${g?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),E]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]})]})},Nt=({systems:t,coordinates:r})=>{const[x,p]=o.useState(new Map);return o.useEffect(()=>{(()=>{try{const C=new Map;t.forEach(m=>{const l=nt(r,m.index,m.num_planets||1);C.set(m.index,l)}),p(C)}catch{}})()},[r,t]),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:t.map(i=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[(()=>{const C=x.get(i.index)||"none";return C==="complete"?e.jsx("div",{className:"absolute top-1 right-1 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}):C==="partial"?e.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500/20 border border-yellow-500/50 text-yellow-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"PARTIAL"}):null})(),e.jsxs("button",{onClick:()=>window.location.href=`/system/${i.index}`,className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["#",i.number]}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:i.name})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},i.index))}),t.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No systems found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This galaxy appears to be empty"})]})]})},Mt=({currentGalaxy:t})=>{const[r,x]=o.useState(!1),[p,i]=o.useState(!1),[C,m]=o.useState(!0),l=1e7;o.useEffect(()=>{const[y,N,k]=t.coordinates,q=!(y===0&&N===0&&k===0),h=!(y===l&&N===l&&k===l);x(q),i(h),m(!1)},[t.coordinates]);const O=()=>{const[y,N,k]=t.coordinates;return k>0?[y,N,k-1]:N>0?[y,N-1,l]:y>0?[y-1,l,l]:[0,0,0]},E=()=>{const[y,N,k]=t.coordinates;return k<l?[y,N,k+1]:N<l?[y,N+1,0]:y<l?[y+1,0,0]:[l,l,l]},v=()=>{if(r){if(!je.canAffordTravel("galaxy",1)){je.executeTravel("galaxy",1);return}if(!je.executeTravel("galaxy",1))return;const[N,k,q]=O(),h=document.createElement("form");h.method="POST",h.action="/navigate";const M=document.createElement("input");M.type="hidden",M.name="x",M.value=N.toString();const c=document.createElement("input");c.type="hidden",c.name="y",c.value=k.toString();const n=document.createElement("input");n.type="hidden",n.name="z",n.value=q.toString(),h.appendChild(M),h.appendChild(c),h.appendChild(n),document.body.appendChild(h),h.submit()}},g=()=>{if(p){if(!je.canAffordTravel("galaxy",1)){je.executeTravel("galaxy",1);return}if(!je.executeTravel("galaxy",1))return;const[N,k,q]=E(),h=document.createElement("form");h.method="POST",h.action="/navigate";const M=document.createElement("input");M.type="hidden",M.name="x",M.value=N.toString();const c=document.createElement("input");c.type="hidden",c.name="y",c.value=k.toString();const n=document.createElement("input");n.type="hidden",n.name="z",n.value=q.toString(),h.appendChild(M),h.appendChild(c),h.appendChild(n),document.body.appendChild(h),h.submit()}};return C?null:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:v,disabled:!r,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${r?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:g,disabled:!p,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${p?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})},St=({page:t,prevPage:r,nextPage:x,finish:p})=>{const i="px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105",C="bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg",m="bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white border border-white/20";return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 sm:gap-4 flex-wrap",children:[t!==1&&e.jsxs("button",{onClick:()=>window.location.href="/galaxy/1",className:`${i} ${m}`,title:"First page",children:[e.jsx("span",{className:"hidden sm:inline",children:"First"}),e.jsx("span",{className:"sm:hidden",children:"«"})]}),r&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${r}`,className:`${i} ${m}`,title:"Previous page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"‹"})]}),(()=>{const l=[],E=Math.max(1,t-2),v=Math.min(p,t+2);E>1&&(l.push(e.jsx("button",{onClick:()=>window.location.href="/galaxy/1",className:`${i} ${m}`,children:"1"},1)),E>2&&l.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"start-ellipsis")));for(let g=E;g<=v;g++)g===t?l.push(e.jsx("span",{className:`${i} ${C} cursor-default`,children:g},g)):l.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${g}`,className:`${i} ${m} cursor-pointer`,children:g},g));return v<p&&(v<p-1&&l.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"end-ellipsis")),l.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${p}`,className:`${i} ${m}`,children:p},p))),l})(),x&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${x}`,className:`${i} ${m}`,title:"Next page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"›"})]}),t!==p&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${p}`,className:`${i} ${m}`,title:"Last page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Last"}),e.jsx("span",{className:"sm:hidden",children:"»"})]})]}),e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-400",children:["Page ",t," of ",p]})]})},He=({galaxy:t,systems:r,galaxy_url:x,version:p,page:i,prev_page:C,next_page:m,finish:l,image_url:O})=>{const[E]=o.useState(t.coordinates.join(","));o.useEffect(()=>{document.body.setAttribute("data-coordinates",E),at(E)},[E]);const v=g=>g.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsx(ot,{}),e.jsxs("div",{className:"relative z-10 pt-1",children:[e.jsx(rt,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["Galaxy '",v(t.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Coordinates ",t.coordinates.join(", ")]})]}),e.jsx(Mt,{currentGalaxy:t}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(jt,{galaxyUrl:x,imageUrl:O,galaxyType:t.galaxy_type,numSystems:t.num_systems,blackHoles:t.black_holes,pulsars:t.pulsars,quasars:t.quasars})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(vt,{galaxy:t})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Systems in '",v(t.name),"'"]}),e.jsx(Nt,{systems:r,coordinates:E})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsx("span",{className:"text-base sm:text-lg",children:"← Go Back to Planetary Index"})})}),e.jsx(St,{page:i,prevPage:C,nextPage:m,finish:l})]}),e.jsx(ft,{version:p})]}),e.jsx(pt,{}),e.jsx(it,{currentLocation:{type:"galaxy",name:t.name,coordinates:t.coordinates.join(",")}})]})};document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("atlas-react-root");if(!t)return;const r=x=>{const p=document.getElementById(x);if(!p||!p.textContent)return null;try{return JSON.parse(p.textContent.trim())}catch{return null}};try{const x=r("data-galaxy")||{},p=r("data-systems")||[],i=r("data-navigation")||{},C=r("data-common")||{},m={galaxy:{name:x.name||"Unknown Galaxy",coordinates:x.coordinates||[0,0,0],galaxy_type:x.galaxy_type||"Unknown",num_systems:x.num_systems||0,black_holes:x.black_holes||0,pulsars:x.pulsars||0,quasars:x.quasars||0},systems:p,galaxy_url:i.galaxy_url||"#",version:C.version||"1.0.0",page:i.page||1,prev_page:i.prev_page,next_page:i.next_page,finish:i.finish||1,image_url:C.image_url||""};Te.createRoot(t).render(Be.createElement(He,m))}catch{const p={galaxy:{name:"Unknown Galaxy",coordinates:[0,0,0],galaxy_type:"Unknown",num_systems:0,black_holes:0,pulsars:0,quasars:0},systems:[],galaxy_url:"#",version:"1.0.0",page:1,finish:1,image_url:""};Te.createRoot(t).render(Be.createElement(He,p))}});
