import{r as b,j as e,a as at,c as ot,R as st}from"./atlas_C3xj8MG9oH9uC54MklkAb.js";import{R as Nt,L as zt,g as Rt,S as Be,m as Ct,F as Et,H as kt,a as Pt}from"./atlas_Dd1oIz2vPimnyjaTh6Eli.js";import{W as Ze}from"./atlas_DZM9FmPthL9IAVyCLrEWU.js";import{a2 as Ke,C as De,a3 as Je,G as Ge,r as ct,cG as lt,I as $e,cH as Fe,cI as Ve,b as Se,z as ke,M as q,V as Te,B as He,cJ as dt,o as mt,a8 as Qe,a7 as ut,v as ht,cK as pt,cL as ft,S as _e,c as xt,A as Re,g as je,x as Xe,D as qe,H as gt,t as Ye,m as Ie,P as Oe,X as vt,y as wt}from"./atlas_BptVXGp7hwWSDe7IbaYgj.js";import{R as Lt,S as Gt,M as It,a as et,D as Dt,T as At}from"./atlas_Cztxbo2MpicnqZSt97dkV.js";import{S as it,E as _t,a as Ft,b as Ht}from"./atlas_C5iAbWRvFQ5kkuE3--zmJ.js";import{O as bt}from"./atlas_CyxJnurXlVDWbOBgEYZ47.js";import{V as Tt}from"./atlas_DwvSdObFEIQcgn4zq5yYd.js";import"./atlas_C0q7_QgoBkw_1ECio0nFC.js";import"./atlas_CN2P8foxSAWepRmkWi2pd.js";import"./atlas_CGrAwTYnSDNTtni2msvpu.js";import"./atlas_COhKkjaVCht2lTr5ykJ9Q.js";import"./atlas_BO0NGAIpmRvhNdf9sFCTW.js";import"./atlas_Dmq_DwccsrpvzuxK0Qu9C.js";import"./atlas_zp430lCf5Z5Cfrr0w2IRg.js";import"./atlas_CI63Nm-pKNjWzrTqPf03l.js";import"./atlas_DyKKmR6s3KAE_kn0gZSmB.js";import"./atlas_CSIB_Qi1SGF27MNNCFqdL.js";import"./atlas_UN7VVJwZn5qFKaQ4vgmAt.js";import"./atlas_D6X6MoI8Ll71S_rGTRPUK.js";import"./atlas_DoZma0ipJNiwmdKMnnWUH.js";import"./atlas_D8Sk6PbDRqOSEGMc8d1CU.js";import"./atlas_BmyVsCDHB7iU5E6YE6FRM.js";import"./atlas_BfXNZYvWSoNf1_CP4QADO.js";import"./atlas_BzCMGT-AO8qLPQ7kaqjTV.js";import"./atlas_BzttV_2KxmQJt5iL0sEFi.js";import"./atlas_CG0imu3AejL3Nw4o1msju.js";import"./atlas_Un0AYFf76i8rF9SVGM9qV.js";import"./atlas_CCPNWwhG3YvQydew-WBgA.js";import"./atlas_Cru4jL9G8GtfKcMjAuk2t.js";import"./atlas_Dy79uj_7hzRkdXmL5cFRP.js";import"./atlas_DWOfmw5x8E2ytUYpvLo8c.js";import"./atlas_DXNL7Hg3E_lYGP88qvK_q.js";import"./atlas_nAvMyYqCg45tJXwFUNHl3.js";import"./atlas_SrNDoP8xf-c6rx-2JFPhE.js";import"./atlas_DMhRkCqy0G-oHQTL1W3VF.js";import"./atlas_DJ4HbENfdVfAuenUxT_a8.js";import"./atlas_DMHNQDI3fU45oofrfrEfZ.js";import"./atlas_DlCRB-rxYMEv_2u5vMaXw.js";import"./atlas_DcmZw95JwxQKBi9NElBiR.js";import"./atlas_BS6KthUBX1j64absZddU_.js";import"./atlas_DHxR5kojhAa6W9kaBHYQG.js";import"./atlas_B1vXkz4L0raflaNTtrwVR.js";import"./atlas_w62vV-kqkevYbFUTjiAzy.js";import"./atlas_CqKPC_dklZRtcn5BEmsmy.js";import"./atlas_DixaMxwUSBc0VYMxNI5TX.js";import"./atlas_BlhWmAs0FR5Rb9lKPyukT.js";import"./atlas_pYiUdtuAUGmdThN5LSuv9.js";import"./atlas_Bcn1lzTtGPr7x4WT7PHzl.js";import"./atlas_CugNH6aJ48vF2le8eBYmT.js";import"./atlas_B4x0fRIYyQYvmAOLNoHp6.js";import"./atlas_D4KZp_BT-gUu2A2r3lL5X.js";import"./atlas_Cy2SfdljUdLg5B9fs_4KN.js";import"./atlas_B_XvPwnTDWYIiCQghZHnE.js";import"./atlas_DusxQVaLwmthdCg3I_E1k.js";import"./atlas_DT8N_niT45LiC-EF1l_hH.js";import"./atlas_DRE22xqrFc42e0_kRPNPl.js";import"./atlas_dRsnpj5j7G7_ikytzWvdq.js";import"./atlas_CD6B8W-nnlbJAcujUB-hA.js";import"./atlas_h6e3aQ_LF3bXJ9uGRJnym.js";import"./atlas_oMHFjiYa_LxCgszKuGd-s.js";import"./atlas_bYrLhk8mRzAb9WUD7AvHB.js";import"./atlas_B64SPRFuCRHOUm15PlgxF.js";import"./atlas_D2jxfvYe5pQCKOPY3Du2k.js";const Bt=({coordinates:r,galaxyName:_})=>{const H=b.useRef(null),Y=b.useRef(null),G=b.useRef(null),k=b.useRef(null);return b.useEffect(()=>{if(!H.current)return;const B=H.current,I=B.clientWidth,be=B.clientHeight,ee=new Ke;ee.background=new De(657930),Y.current=ee;const O=new Je(45,I/be,.1,1e3);O.position.set(20,15,20),O.lookAt(0,0,0);const $=new Ze({antialias:!0,alpha:!0});$.setSize(I,be),$.setClearColor(0,.2),G.current=$,B.appendChild($.domElement);const Z=0,D=1e7,K=5e6,[oe,T,se]=r,j=((oe-Z)/(D-Z)-.5)*16,te=((T-Z)/(D-Z)-.5)*16,ye=((se-Z)/(D-Z)-.5)*16,x=new Ge;ee.add(x);const M=new ct(16,16,16),xe=new lt(M),re=new $e({color:16777215,opacity:.4,transparent:!0,linewidth:2}),ge=new Fe(xe,re);x.add(ge);const u=new Ve(16,16,16777215,16777215);u.material.opacity=.1,u.material.transparent=!0,u.position.y=-8,x.add(u);const A=new Ve(16,16,16777215,16777215);A.material.opacity=.05,A.material.transparent=!0,A.rotation.z=Math.PI/2,A.position.x=-8,x.add(A);const v=new Ve(16,16,16777215,16777215);v.material.opacity=.05,v.material.transparent=!0,v.rotation.x=Math.PI/2,v.position.z=-8,x.add(v);const ae=new Se(.5,32,32),he=new ke({color:16777215,transparent:!0,opacity:.9}),me=new q(ae,he);me.position.set(0,0,0),x.add(me);const le=new q(new Se(.8,32,32),new ke({color:16777215,transparent:!0,opacity:.2}));me.add(le);const U=new Se(.4,32,32),J=new ke({color:6605055,transparent:!0,opacity:1}),f=new q(U,J);f.position.set(j,te,ye),x.add(f);const m=new q(new Se(.7,32,32),new ke({color:6605055,transparent:!0,opacity:.3}));if(f.add(m),Math.sqrt(Math.pow(oe-K,2)+Math.pow(T-K,2)+Math.pow(se-K,2))<2e6){const t=[new Te(0,0,0),new Te(j,te,ye)],c=new He().setFromPoints(t),g=new dt({color:16762980,dashSize:.6,gapSize:.6,opacity:.4,transparent:!0,linewidth:2}),E=new mt(c,g);E.computeLineDistances(),x.add(E)}const s=new Qe(4210752,.6);ee.add(s);const o=new ut(16777215,.8);o.position.set(10,10,10),ee.add(o);const C=(t,c)=>{const g=document.createElement("canvas"),E=g.getContext("2d");if(!E)return null;g.width=64,g.height=64,E.fillStyle=`#${c.toString(16).padStart(6,"0")}`,E.font="bold 48px Arial",E.textAlign="center",E.textBaseline="middle",E.fillText(t,32,32);const h=new ht(g),Q=new pt({map:h,transparent:!0,opacity:.8}),ce=new ft(Q);return ce.scale.set(1.6,1.6,1),ce},d=C("X",16739179);d&&(d.position.set(8.4,-7.6,-7.6),x.add(d));const y=C("Y",7077739);y&&(y.position.set(-7.6,8.4,-7.6),x.add(y));const W=C("Z",7039999);W&&(W.position.set(-7.6,-7.6,8.4),x.add(W));let F=!1,ie=0,de=0,S=!0,a=0;const n=t=>{F=!0,S=!1,ie=t.clientX,de=t.clientY},l=t=>{if(!F)return;const c=t.clientX-ie,g=t.clientY-de;x.rotation.y+=c*.01,x.rotation.x+=g*.01,ie=t.clientX,de=t.clientY},p=()=>{F=!1,setTimeout(()=>{F||(S=!0)},3e3)},P=t=>{t.preventDefault();const c=.1,g=O.position.distanceTo(new Te(0,0,0));t.deltaY>0&&g<50?O.position.multiplyScalar(1+c):t.deltaY<0&&g>10&&O.position.multiplyScalar(1-c)},N=t=>{t.key==="Escape"&&document.dispatchEvent(new CustomEvent("universe-close-fullscreen"))},ne=t=>{if(t.preventDefault(),t.touches.length===1)F=!0,S=!1,ie=t.touches[0].clientX,de=t.touches[0].clientY;else if(t.touches.length===2){const c=t.touches[0].clientX-t.touches[1].clientX,g=t.touches[0].clientY-t.touches[1].clientY;a=Math.sqrt(c*c+g*g)}},V=t=>{if(t.preventDefault(),t.touches.length===1&&F){const c=t.touches[0].clientX-ie,g=t.touches[0].clientY-de;x.rotation.y+=c*.01,x.rotation.x+=g*.01,ie=t.touches[0].clientX,de=t.touches[0].clientY}else if(t.touches.length===2){const c=t.touches[0].clientX-t.touches[1].clientX,g=t.touches[0].clientY-t.touches[1].clientY,E=Math.sqrt(c*c+g*g);if(a>0){const Q=E/a,ce=O.position.distanceTo(new Te(0,0,0));Q>1&&ce>10?O.position.multiplyScalar(1-.01):Q<1&&ce<50&&O.position.multiplyScalar(1+.01)}a=E}},R=t=>{t.preventDefault(),F=!1,a=0,setTimeout(()=>{F||(S=!0)},3e3)},w=$.domElement;w.style.cursor="grab",w.addEventListener("mousedown",t=>{w.style.cursor="grabbing",n(t)}),w.addEventListener("mousemove",l),w.addEventListener("mouseup",()=>{w.style.cursor="grab",p()}),w.addEventListener("mouseleave",()=>{w.style.cursor="grab",p()}),w.addEventListener("wheel",P),w.addEventListener("touchstart",ne,{passive:!1}),w.addEventListener("touchmove",V,{passive:!1}),w.addEventListener("touchend",R,{passive:!1}),document.addEventListener("keydown",N);const ue=()=>{k.current=requestAnimationFrame(ue),S&&(x.rotation.y+=.002,x.rotation.x+=.001);const t=Date.now()*.005;me.scale.setScalar(1+Math.sin(t)*.1),f.rotation.y+=.01,$.render(ee,O)};ue();const z=()=>{const t=B.clientWidth,c=B.clientHeight;O.aspect=t/c,O.updateProjectionMatrix(),$.setSize(t,c)};return window.addEventListener("resize",z),()=>{window.removeEventListener("resize",z),document.removeEventListener("keydown",N),w.removeEventListener("mousedown",n),w.removeEventListener("mousemove",l),w.removeEventListener("mouseup",p),w.removeEventListener("mouseleave",p),w.removeEventListener("wheel",P),w.removeEventListener("touchstart",ne),w.removeEventListener("touchmove",V),w.removeEventListener("touchend",R),k.current&&cancelAnimationFrame(k.current),B&&$.domElement&&B.removeChild($.domElement),$.dispose(),M.dispose(),xe.dispose(),re.dispose(),ae.dispose(),he.dispose(),U.dispose(),J.dispose()}},[r,_]),e.jsx("div",{ref:H,className:"w-full h-full"})},Vt=({coordinates:r,galaxyName:_})=>{const H=b.useRef(null),Y=b.useRef(null),G=b.useRef(null),k=b.useRef(null),[B,I]=b.useState(!1),[be,ee]=b.useState(!1),[O,$]=b.useState(!1),Z=()=>{ee(!0),setTimeout(()=>{I(!1),ee(!1)},300)};b.useEffect(()=>{const j=te=>{te.key==="Escape"&&B&&Z()};return document.addEventListener("universe-close-fullscreen",Z),document.addEventListener("keydown",j),()=>{document.removeEventListener("universe-close-fullscreen",Z),document.removeEventListener("keydown",j)}},[B]),b.useEffect(()=>{if(B&&O){const j=setTimeout(()=>{$(!1)},50);return()=>clearTimeout(j)}},[B,O]),b.useEffect(()=>{if(!H.current)return;const j=H.current,te=j.clientWidth,ye=te<640,x=new Ke;x.background=new De(657930),Y.current=x;const M=new Je(30,te/120,.1,1e3);M.position.set(12,8,12),M.lookAt(0,0,0);const xe=new Ze({antialias:!0,alpha:!0});xe.setSize(te,120),xe.setClearColor(0,.2),G.current=xe,j.appendChild(xe.domElement);const re=0,ge=1e7,u=5e6,[A,v,ae]=r,he=((A-re)/(ge-re)-.5)*8,me=((v-re)/(ge-re)-.5)*8,le=((ae-re)/(ge-re)-.5)*8,U=new Ge;x.add(U);const J=new ct(8,8,8),f=new lt(J),m=new $e({color:16777215,opacity:.4,transparent:!0}),i=new Fe(f,m);U.add(i);const s=new Ve(8,8,16777215,16777215);s.material.opacity=.1,s.material.transparent=!0,s.position.y=-4,U.add(s);const o=new Ve(8,8,16777215,16777215);o.material.opacity=.05,o.material.transparent=!0,o.rotation.z=Math.PI/2,o.position.x=-4,U.add(o);const C=new Ve(8,8,16777215,16777215);C.material.opacity=.05,C.material.transparent=!0,C.rotation.x=Math.PI/2,C.position.z=-4,U.add(C);const d=new Se(.25,16,16),y=new ke({color:16777215,transparent:!0,opacity:.9}),W=new q(d,y);W.position.set(0,0,0),U.add(W);const F=new q(new Se(.45,16,16),new ke({color:16777215,transparent:!0,opacity:.2}));W.add(F);const ie=new Se(.2,16,16),de=new ke({color:6605055,transparent:!0,opacity:1}),S=new q(ie,de);S.position.set(he,me,le),U.add(S);const a=new q(new Se(.35,16,16),new ke({color:6605055,transparent:!0,opacity:.3}));if(S.add(a),Math.sqrt(Math.pow(A-u,2)+Math.pow(v-u,2)+Math.pow(ae-u,2))<2e6){const L=[new Te(0,0,0),new Te(he,me,le)],X=new He().setFromPoints(L),pe=new dt({color:16762980,dashSize:.3,gapSize:.3,opacity:.4,transparent:!0}),Me=new mt(X,pe);Me.computeLineDistances(),U.add(Me)}const l=new Qe(4210752,.6);x.add(l);const p=new ut(16777215,.8);p.position.set(5,5,5),x.add(p);const P=(L,X)=>{const pe=document.createElement("canvas"),Me=pe.getContext("2d");if(!Me)return null;pe.width=32,pe.height=32,Me.fillStyle=`#${X.toString(16).padStart(6,"0")}`,Me.font="bold 24px Arial",Me.textAlign="center",Me.textBaseline="middle",Me.fillText(L,16,16);const Ae=new ht(pe),ve=new pt({map:Ae,transparent:!0,opacity:.8}),fe=new ft(ve);return fe.scale.set(.8,.8,1),fe},N=P("X",16739179);N&&(N.position.set(4.2,-3.8,-3.8),U.add(N));const ne=P("Y",7077739);ne&&(ne.position.set(-3.8,4.2,-3.8),U.add(ne));const V=P("Z",7039999);V&&(V.position.set(-3.8,-3.8,4.2),U.add(V));let R=!1,w=0,ue=0,z=!0;const t=L=>{R=!0,z=!1,w=L.clientX,ue=L.clientY},c=L=>{if(!R)return;const X=L.clientX-w,pe=L.clientY-ue;U.rotation.y+=X*.01,U.rotation.x+=pe*.01,w=L.clientX,ue=L.clientY},g=()=>{R=!1,setTimeout(()=>{R||(z=!0)},3e3)},E=L=>{L.preventDefault();const X=.1,pe=M.position.distanceTo(new Te(0,0,0));L.deltaY>0&&pe<25?M.position.multiplyScalar(1+X):L.deltaY<0&&pe>5&&M.position.multiplyScalar(1-X)},h=xe.domElement;h.style.cursor="grab",h.style.borderRadius="8px",h.addEventListener("mousedown",L=>{h.style.cursor="grabbing",t(L)}),h.addEventListener("mousemove",c),h.addEventListener("mouseup",()=>{h.style.cursor="grab",g()}),h.addEventListener("mouseleave",()=>{h.style.cursor="grab",g()}),h.addEventListener("wheel",E);const Q=()=>{k.current=requestAnimationFrame(Q),z&&(U.rotation.y+=.002,U.rotation.x+=.001);const L=Date.now()*.005;W.scale.setScalar(1+Math.sin(L)*.1),S.rotation.y+=.01,xe.render(x,M)};Q();const ce=()=>{const L=j.clientWidth,X=L<640?150:160;M.aspect=L/X,M.updateProjectionMatrix(),xe.setSize(L,X)};return window.addEventListener("resize",ce),()=>{window.removeEventListener("resize",ce),h.removeEventListener("mousedown",t),h.removeEventListener("mousemove",c),h.removeEventListener("mouseup",g),h.removeEventListener("mouseleave",g),h.removeEventListener("wheel",E),k.current&&cancelAnimationFrame(k.current),j&&xe.domElement&&j.removeChild(xe.domElement),xe.dispose(),J.dispose(),f.dispose(),m.dispose(),d.dispose(),y.dispose(),ie.dispose(),de.dispose()}},[r,_]);const D=j=>j.replace(/_/g," "),K=j=>j>=1e6?`${(j/1e6).toFixed(1)}M`:j>=1e3?`${(j/1e3).toFixed(1)}K`:j.toString(),[oe,T,se]=r;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Galaxy Location"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:H,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsx("button",{onClick:()=>{I(!0),$(!0)},className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-[10px]",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:D(_)})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:[K(oe),", ",K(T),", ",K(se)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom • Drag: Rotate View"})]})]}),B&&at.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${be||O?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${be||O?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:D(_)})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[D(_)," - Galaxy Location"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Galaxy"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[K(oe),", ",K(T),", ",K(se)]})]})]}),e.jsx("button",{onClick:Z,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(Bt,{coordinates:r,galaxyName:_})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},qt=({galaxy:r})=>{const[_,H]=b.useState({isOnCooldown:!1,isSaved:!1,isCollecting:!1,timeUntilNext:0});b.useEffect(()=>{let G;const k=()=>{const ee=et.generateLocationId("galaxy",r.coordinates.join(","),void 0,void 0),O=et.canCollectFromLocation(ee),$=et.getTimeUntilNextCollection(ee),Z=r.coordinates,D=it.generateGalaxyUrl(Z,it.getCurrentPage()),oe=zt.getLocations().some(T=>T.stargateUrl===D);H(T=>({isOnCooldown:!O&&$>0,isSaved:oe,isCollecting:T.isCollecting,timeUntilNext:$}))},B=()=>{H(ee=>({...ee,isCollecting:!0})),G=setTimeout(()=>{H(ee=>({...ee,isCollecting:!1}))},1e3)};k();const I=setInterval(k,1e3),be=Nt.subscribe("mining_completed",B);return()=>{clearInterval(I),G&&clearTimeout(G),be()}},[r.name,r.coordinates]);const Y=G=>G.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex gap-2 z-10",children:[e.jsx(Lt,{locationType:"galaxy",locationId:r.name,coordinates:r.coordinates.join(","),className:"text-xs"}),e.jsx(Gt,{type:"galaxy",name:r.name,coordinates:r.coordinates.join(","),className:"text-xs"}),e.jsx("div",{className:"inline-flex items-center bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] font-medium px-1.5 py-0.5 rounded h-[21px] box-border",children:"VISITED"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(It,{isOnCooldown:_.isOnCooldown,isSaved:_.isSaved,isCollecting:_.isCollecting}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Details"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300",children:r.galaxy_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Solar Systems"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:r.num_systems.toLocaleString()})]})]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-2",children:e.jsx(Vt,{coordinates:r.coordinates,galaxyName:r.name})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-gray-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Cosmic Objects"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-pink-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Black Holes"}),e.jsx("div",{className:"text-xs font-bold text-pink-300",children:r.black_holes.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Pulsars"}),e.jsx("div",{className:"text-xs font-bold text-cyan-300",children:r.pulsars.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Quasars"}),e.jsx("div",{className:"text-xs font-bold text-indigo-300",children:r.quasars.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("div",{className:"text-green-400 font-medium",children:"Visited"})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:Y(r.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:r.coordinates.join(", ")})]})]})]})]})},$t=({galaxyType:r,numSystems:_,blackHoles:H,pulsars:Y,quasars:G,seed:k=12345,onExpandClick:B,galaxyName:I,galaxyUrl:be})=>{const ee=b.useRef(null),O=b.useRef(null),$=b.useRef(null),Z=b.useRef(null),D=b.useRef(null),K=b.useRef(null),oe=b.useRef(null),T=b.useRef(!1),[se,j]=b.useState(!1),[te,ye]=b.useState(!1),[x,M]=b.useState(!1),xe=b.useRef(null);class re{seed;constructor(A){this.seed=A}random(){const A=Math.sin(this.seed++)*1e4;return A-Math.floor(A)}uniform(A,v){return A+this.random()*(v-A)}gauss(A,v){let ae=0,he=0;for(;ae===0;)ae=this.random();for(;he===0;)he=this.random();const me=Math.sqrt(-2*Math.log(ae))*Math.cos(2*Math.PI*he);return A+v*me}randint(A,v){return Math.floor(this.uniform(A,v+1))}}b.useEffect(()=>{const u=oe.current;if(!u)return;const A=u.getContext("2d");if(!A)return;let v=[];const ae=800;let he,me;const le=800;let U,J=.5;function f(){const o=u?.parentElement;if(!o||!u)return;const C=o.clientWidth,d=o.clientHeight;u.width=Math.min(C,le),u.height=Math.min(d,le),he=u.width/2,me=u.height/2}function m(){f(),v=[];for(let o=0;o<ae;o++)v.push({x:Math.random()*(u?.width||800),y:Math.random()*(u?.height||800),z:Math.random()*(u?.width||800),o:Math.random()});i()}function i(){!u||!A||(A.clearRect(0,0,u.width,u.height),v.forEach(o=>{o.z-=J,o.z<=0&&(o.z=u.width,o.x=Math.random()*u.width,o.y=Math.random()*u.height,o.o=Math.random());const C=u.width/o.z,d=(o.x-he)*C+he,y=(o.y-me)*C+me,W=2*C;A.beginPath(),A.fillStyle=`rgba(255, 255, 255, ${o.o})`,A.arc(d,y,W,0,2*Math.PI),A.fill()}),!T.current&&J<60&&(J+=1),T.current&&J>2&&(J-=2),U=requestAnimationFrame(i))}m();const s=()=>f();return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s),U&&cancelAnimationFrame(U)}},[]),b.useEffect(()=>{if(!ee.current)return;const u=ee.current,A=u.clientWidth,v=u.clientHeight,ae=Math.min(A,v),he=new Ke;he.background=new De(17),O.current=he;const me=new Je(45,1,.1,1e4);me.position.set(0,200,400),me.lookAt(0,0,0),xe.current=me;const le=new Ze({antialias:!0,alpha:!0});le.setSize(ae,ae),le.setClearColor(17,1),$.current=le,le.domElement.className="",u.appendChild(le.domElement);const U=new bt(me,le.domElement);U.enableDamping=!0,U.dampingFactor=.05,U.minDistance=50,U.maxDistance=800,U.autoRotate=!0,U.autoRotateSpeed=.5,U.enablePan=!0,U.enableZoom=!0,U.target.set(0,0,0),D.current=U;const J=new Ge;K.current=J,he.add(J);const f=new re(k),m=f.uniform(0,2*Math.PI),i=new He,s=[],o=[],C=[],d=200;let y=_;if(r==="Spiral"){y=Math.min(_,5e4);const a=4,n=2*Math.PI/a,l=.15,p=.5,P=.1;for(let N=0;N<y*P;N++){const ne=f.uniform(0,2*Math.PI),V=f.gauss(d*.1,d*.05),R=f.gauss(0,5),w=V*Math.cos(ne),ue=V*Math.sin(ne);s.push(w,R,ue),o.push(1,1,1);const z=k+N*1337,t=new re(z),c=t.gauss(1,.3),g=t.random()<.05,E=t.random()<.3;let h=Math.max(.3,c);g&&(h*=3+t.uniform(0,2)),E&&(h*=.5+t.uniform(0,.3)),V<d*.2&&(h*=1.8+t.uniform(0,.7),o[o.length-3]=1.2,o[o.length-2]=1.1,o[o.length-1]=.9),C.push(Math.min(h*1.5,12))}for(let N=0;N<y;N++){const ne=p*Math.sqrt(N/y)*2*Math.PI,V=N%a*n,R=d*Math.sqrt(N/y),w=R*Math.cos(ne+V+m)+f.uniform(-l*R,l*R),ue=R*Math.sin(ne+V+m)+f.uniform(-l*R,l*R),z=f.gauss(0,3);s.push(w,z,ue),o.push(1,1,.8);const t=k+N*1337,c=new re(t),g=c.gauss(.8,.25),E=c.random()<.03,h=c.random()<.4;let Q=Math.max(.2,g);E&&(Q*=2.5+c.uniform(0,1.5)),h&&(Q*=.4+c.uniform(0,.2)),R>d*.7&&(Q*=.8),C.push(Math.min(Q*1.3,8))}}else if(r==="Elliptical"){y=Math.min(_,1e5);for(let a=0;a<y;a++){const n=f.uniform(0,2*Math.PI),l=f.uniform(-1,1),p=Math.sqrt(1-l*l),P=f.random(),N=Math.pow(P,.6),ne=-Math.log(1-N*.98)*d*.35,V=ne*p*Math.cos(n),R=ne*l*.6,w=ne*p*Math.sin(n);s.push(V,R,w),o.push(1,.9,.7);const ue=k+a*1337,z=new re(ue),t=z.gauss(.6,.2),c=z.random()<.08,g=z.random()<.25;let E=Math.max(.2,t);c&&(E*=2+z.uniform(0,1)),g&&(E*=.6+z.uniform(0,.2)),Math.sqrt(V*V+R*R+w*w)<d*.3&&(E*=1.5+z.uniform(0,.5)),C.push(Math.min(E*1.4,7))}}else if(r==="Dwarf"){y=Math.min(_/100,1e4);for(let a=0;a<y;a++){const n=f.uniform(0,2*Math.PI),l=f.uniform(0,Math.PI),p=f.gauss(d/3,d*.3),P=p*Math.sin(l)*Math.cos(n),N=p*Math.cos(l)*.5,ne=p*Math.sin(l)*Math.sin(n);s.push(P,N,ne),o.push(.8,.8,1);const V=k+a*1337,R=new re(V),w=R.gauss(.7,.3),ue=R.random()<.02,z=R.random()<.6;let t=Math.max(.3,w);ue&&(t*=2.5+R.uniform(0,1)),z&&(t*=.5+R.uniform(0,.3)),C.push(Math.min(t*1.2,5))}}else if(r==="Singularity Void"){y=1e4;for(let ve=0;ve<y;ve++){const fe=ve/y,ze=fe*30*Math.PI,Ce=d*(1-fe*.8)+f.uniform(-10,10),we=(fe-.5)*300+Math.sin(ze*.5)*20,Pe=Ce*Math.cos(ze)+Math.sin(fe*20)*10,Le=Ce*Math.sin(ze)+Math.cos(fe*20)*10;s.push(Pe,we,Le);const Ee=(fe+Math.sin(ze*.1))%1,Ne=new De;Ne.setHSL(Ee,1,.5+Math.sin(fe*10)*.3),o.push(Ne.r,Ne.g,Ne.b),C.push(f.uniform(.3,2)*(1+Math.sin(fe*50)*.5))}const a=(ve,fe,ze=1)=>{const Ce=new Se(ve,64,64),we=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,Pe=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;

          void main() {
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);

            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;

            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;

            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x +
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);

            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;

            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);

            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;

            gl_FragColor = vec4(color, ${fe});
          }
        `,Le=new _e({uniforms:{time:{value:0},speed:{value:ze}},vertexShader:we,fragmentShader:Pe,transparent:!0,blending:Re,side:qe,depthWrite:!1}),Ee=new q(Ce,Le);return Ee.isSingularityShader=!0,Ee.shaderSpeed=ze,Ee},n=a(250,.3,1);J.add(n);const l=a(180,.4,-.7);J.add(l);const p=a(120,.5,1.5);J.add(p);const P=a(300,.2,.5);P.scale.set(-1,1,1),J.add(P);const N=new Se(350,32,32),ne=new _e({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);


            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;

            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;

          void main() {

            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;

            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;

            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:xt,depthWrite:!1}),V=new q(N,ne);V.isSingularityShader=!0,V.shaderSpeed=.3,J.add(V);const R=new He,w=[],ue=[];for(let ve=0;ve<1e3;ve++){const fe=f.uniform(-d,d),ze=f.uniform(-d/2,d/2),Ce=f.uniform(-d,d),we=f.uniform(-50,50),Pe=f.uniform(-30,30),Le=f.uniform(-50,50);w.push(fe,ze,Ce),w.push(fe+we,ze+Pe,Ce+Le);const Ee=f.random(),Ne=new De;Ne.setHSL(Ee,1,.6),ue.push(Ne.r,Ne.g,Ne.b),ue.push(Ne.r*.5,Ne.g*.5,Ne.b*.5)}R.setAttribute("position",new je(w,3)),R.setAttribute("color",new je(ue,3));const z=new $e({vertexColors:!0,transparent:!0,opacity:.4,blending:Re}),t=new Fe(R,z);t.isGlitchLines=!0,J.add(t);const c=new Ge,g=new Se(20,32,32),E=new ke({color:0,transparent:!0,opacity:.95}),h=new q(g,E);c.add(h);const Q=new Xe(25,80,64),ce=new _e({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;

          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);


            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;


            vec3 hotColor = vec3(1.0, 0.5, 0.0);
            vec3 coldColor = vec3(0.0, 0.3, 1.0);
            vec3 color = mix(coldColor, hotColor, intensity);


            color *= (0.7 + swirl * 0.3);


            float alpha = intensity * 0.8;

            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:qe}),L=new q(Q,ce);L.rotation.x=Math.PI/2,L.isAccretionDisk=!0,c.add(L);for(let ve=0;ve<8;ve++){const fe=30+ve*20,ze=new gt(fe,1+ve*.5,8,64),Ce=new ke({color:new De().setHSL((.7+ve*.05)%1,1,.5),transparent:!0,opacity:.3-ve*.03,wireframe:!0}),we=new q(ze,Ce);we.rotation.x=f.uniform(0,Math.PI),we.rotation.y=f.uniform(0,Math.PI),we.isDistortionRing=!0,we.rotationSpeed=f.uniform(.001,.005)*(ve%2===0?1:-1),c.add(we)}J.add(c);const X=new Ye(5,100,8),pe=new Ie({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Re}),Me=new q(X,pe);Me.position.y=50,J.add(Me);const Ae=new q(X,pe);Ae.position.y=-50,Ae.rotation.z=Math.PI,J.add(Ae)}if(r!=="Singularity Void"){const a=[],n=new re(k+999);for(let z=0;z<H;z++){const t=n.uniform(-50,50),c=n.uniform(-20,20),g=n.uniform(-50,50);a.push({x:t,y:c,z:g})}const l=[],p=[],P=[],N=[],ne=[],V=.4,R=V*25;for(let z=0;z<s.length;z+=3){const t=s[z],c=s[z+1],g=s[z+2];let E=1/0,h=null;for(const Q of a){const ce=Math.sqrt(Math.pow(t-Q.x,2)+Math.pow(c-Q.y,2)+Math.pow(g-Q.z,2));ce<E&&(E=ce,h=Q)}if(!(E<V))if(E<R&&h){const Q=1-(E-V)/(R-V);h.x-t,h.y-c,h.z-g;const ce=Math.atan2(g-h.z,t-h.x),L=Q*.8,X=8;for(let we=0;we<X-1;we++){const Pe=we/(X-1),Le=(we+1)/(X-1),Ee=E*(1-Pe*L*.7),Ne=ce+Pe*L*1.5,Ue=h.x+Ee*Math.cos(Ne),We=c+(h.y-c)*Pe*.3,yt=h.z+Ee*Math.sin(Ne),tt=E*(1-Le*L*.7),nt=ce+Le*L*1.5,Mt=h.x+tt*Math.cos(nt),jt=c+(h.y-c)*Le*.3,St=h.z+tt*Math.sin(nt);N.push(Ue,We,yt),N.push(Mt,jt,St)}const pe=Q*1.5,Me=o[z],Ae=o[z+1],ve=o[z+2],fe=Math.min(Me+pe,2),ze=Math.max(Ae*(1-pe*.6),.1),Ce=Math.max(ve*(1-pe*.8),.1);for(let we=0;we<X-1;we++){const Pe=we/(X-1),Le=(we+1)/(X-1),Ee=1-Pe*Q*.6,Ne=1-Le*Q*.6,Ue=pe*(.5+Pe*.5),We=pe*(.5+Le*.5);ne.push(Math.min(fe+Ue*.3,2)*Ee,Math.max(ze*(1-Ue*.2),.1)*Ee,Math.max(Ce*(1-Ue*.4),.1)*Ee),ne.push(Math.min(fe+We*.3,2)*Ne,Math.max(ze*(1-We*.2),.1)*Ne,Math.max(Ce*(1-We*.4),.1)*Ne)}l.push(t,c,g),p.push(fe,ze,Ce),P.push(Math.max(C[z/3]*(1-Q*.5),.3))}else l.push(t,c,g),p.push(o[z],o[z+1],o[z+2]),P.push(C[z/3])}i.setAttribute("position",new je(l,3)),i.setAttribute("color",new je(p,3)),i.setAttribute("size",new je(P,1));const w=new _e({uniforms:{},vertexShader:`
          attribute float size;
          varying vec3 vColor;
          void main() {
            vColor = color;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * (400.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
          }
        `,fragmentShader:`
          varying vec3 vColor;
          void main() {

            vec2 center = gl_PointCoord - vec2(0.5);
            float distanceFromCenter = length(center);

            if (distanceFromCenter > 0.5) {
              discard;
            }


            float alpha = 1.0 - (distanceFromCenter / 0.5);
            alpha = pow(alpha, 2.0);

            gl_FragColor = vec4(vColor, alpha * 0.8);
          }
        `,transparent:!0,blending:Re,vertexColors:!0,depthWrite:!1}),ue=new Oe(i,w);if(J.add(ue),N.length>0){const z=new He;z.setAttribute("position",new je(N,3)),z.setAttribute("color",new je(ne,3));const t=new $e({vertexColors:!0,transparent:!0,opacity:.8,linewidth:2,blending:Re}),c=new Fe(z,t);J.add(c)}}else{i.setAttribute("position",new je(s,3)),i.setAttribute("color",new je(o,3)),i.setAttribute("size",new je(C,1));const a=new vt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Re,sizeAttenuation:!0}),n=new Oe(i,a);J.add(n)}const W=new re(k+999);for(let a=0;a<H;a++){const n=new Ge,l=W.uniform(-50,50),p=W.uniform(-20,20),P=W.uniform(-50,50),N=new Se(1.5,16,16),ne=new ke({color:0,transparent:!0,opacity:.9}),V=new q(N,ne);n.add(V),[{innerRadius:2,outerRadius:2.3,color:16777215,opacity:.8,emissive:16777164},{innerRadius:2.3,outerRadius:2.7,color:16755200,opacity:.7,emissive:16746496},{innerRadius:2.7,outerRadius:3.2,color:16729088,opacity:.6,emissive:16720384},{innerRadius:3.2,outerRadius:4,color:11141120,opacity:.5,emissive:6684672},{innerRadius:4,outerRadius:5,color:4456448,opacity:.3,emissive:2228224}].forEach((w,ue)=>{const z=new Xe(w.innerRadius,w.outerRadius,32),t=new Ie({color:w.color,transparent:!0,opacity:w.opacity,emissive:w.emissive,emissiveIntensity:.3,side:qe}),c=new q(z,t);c.rotation.x=Math.PI/2,c.rotation.z=f.uniform(0,Math.PI*2),c.isAccretionRing=!0,c.rotationSpeed=.002+ue*5e-4,n.add(c)}),n.position.set(l,p,P),J.add(n)}for(let a=0;a<Y;a++){const n=new Se(1.5,8,8),l=new Ie({color:16776960,emissive:16776960,emissiveIntensity:1}),p=new q(n,l);p.position.set(f.uniform(-d,d),f.uniform(-d/4,d/4),f.uniform(-d,d)),p.isPulsar=!0,p.pulseSpeed=f.uniform(1,3),J.add(p)}for(let a=0;a<G;a++){const n=new Ge,l=new Se(2,16,16),p=new Ie({color:16777215,emissive:16777215,emissiveIntensity:2}),P=new q(l,p);n.add(P);const N=new Ye(1,20,8),ne=new Ie({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),V=new q(N,ne);V.position.y=10,n.add(V);const R=new q(N,ne);R.position.y=-10,R.rotation.z=Math.PI,n.add(R),n.position.set(f.uniform(-d,d),f.uniform(-d/4,d/4),f.uniform(-d,d)),J.add(n)}const F=new Qe(4210752,.5);he.add(F);const ie=new wt(16777215,.5,1e3);ie.position.set(0,100,0),he.add(ie);const de=()=>{Z.current=requestAnimationFrame(de);const a=performance.now()/1e3;K.current&&(K.current.rotation.y+=.001),J.children.forEach(n=>{if(n.isPulsar){const l=n.pulseSpeed||1;n.scale.setScalar(1+Math.sin(Date.now()*.001*l)*.3)}if(n.isSingularityShader&&n instanceof q){const l=n.material;l.uniforms&&l.uniforms.time&&(l.uniforms.time.value=a);const p=n.shaderSpeed||1;n.rotation.y+=.001*p,n.rotation.x+=5e-4*p}if(n.isAccretionDisk&&n instanceof q){const l=n.material;l.uniforms&&l.uniforms.time&&(l.uniforms.time.value=a),n.rotation.z+=.002}if(n.isDistortionRing){const l=n.rotationSpeed||.001;n.rotation.x+=l,n.rotation.y+=l*.7,n.scale.setScalar(1+Math.sin(a*2)*.1)}if(n.isGlitchLines&&n instanceof Fe){const l=n.material;l.opacity=.2+Math.sin(a*3)*.2,n.rotation.z+=5e-4}n instanceof Ge&&n.children.forEach(l=>{if(l.isAccretionDisk&&l instanceof q){const p=l.material;p.uniforms&&p.uniforms.time&&(p.uniforms.time.value=a),l.rotation.z+=.002}if(l.isAccretionRing&&l instanceof q){const p=l.rotationSpeed||.002;l.rotation.z+=p}if(l.isDistortionRing){const p=l.rotationSpeed||.001;l.rotation.x+=p,l.rotation.y+=p*.7,l.scale.setScalar(1+Math.sin(a*2)*.1)}})}),D.current&&D.current.update(),le.render(he,me)};de(),setTimeout(()=>{j(!0),ye(!0),T.current=!0},800);const S=()=>{if(!ee.current||!le)return;const a=ee.current,n=Math.min(a.clientWidth,a.clientHeight);le.setSize(n,n),me.aspect=1,me.updateProjectionMatrix()};return window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S),D.current&&D.current.dispose(),Z.current&&cancelAnimationFrame(Z.current),u&&le.domElement&&u.removeChild(le.domElement),le.dispose()}},[r,_,H,Y,G,k]);const ge=()=>{if(!$.current||!O.current||!xe.current||x)return;M(!0),D.current&&(D.current.enabled=!1);const u=$.current,A=O.current,v=xe.current,ae=u.domElement.width,he=u.domElement.height,me=3840/ae,le=[];A.traverse(f=>{if(f.isPoints&&f.material){const m=f.material;if(m.size!==void 0&&(le.push({material:m,originalSize:m.size}),m.size=m.size*me*1),m.uniforms&&m.uniforms.scale&&(le.push({material:m,originalScale:m.uniforms.scale.value}),m.uniforms.scale.value=m.uniforms.scale.value*me*1),f.geometry&&f.geometry.attributes.size){const i=f.geometry.attributes.size,s=i.array.slice();le.push({geometry:f.geometry,originalSizeArray:s});for(let o=0;o<i.array.length;o++)i.array[o]*=me*1;i.needsUpdate=!0}}});const U=3840,J=3840;u.setSize(U,J),v.aspect=1,v.updateProjectionMatrix(),u.render(A,v),u.domElement.toBlob(f=>{if(f){const m=document.createElement("canvas"),i=m.getContext("2d");if(m.width=U,m.height=J,i){const s=new Image;s.onload=async()=>{i.drawImage(s,0,0),Ft(i,{imageWidth:U,imageHeight:J}),be&&await Ht(i,U,J,{type:"galaxy",stargateUrl:be}),m.toBlob(C=>{if(C){const d=URL.createObjectURL(C),y=document.createElement("a");y.href=d,y.download=`galaxy_${I||r}_${Date.now()}.png`,y.click(),URL.revokeObjectURL(d)}},"image/png",1)};const o=URL.createObjectURL(f);s.src=o}}le.forEach(({material:m,originalSize:i,originalScale:s,geometry:o,originalSizeArray:C})=>{if(i!==void 0&&(m.size=i),s!==void 0&&(m.uniforms.scale.value=s),o&&C){const d=o.attributes.size;for(let y=0;y<C.length;y++)d.array[y]=C[y];d.needsUpdate=!0}}),u.setSize(ae,he),v.aspect=1,v.updateProjectionMatrix(),D.current&&(D.current.enabled=!0),M(!1)},"image/png",1)};return e.jsxs("div",{className:"relative w-full h-full bg-black rounded",children:[e.jsx("canvas",{ref:oe,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${te?"opacity-0":"opacity-100"}`,style:{filter:te?"blur(50px)":"none"}}),e.jsxs("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${se?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:[e.jsx("div",{ref:ee,className:"w-full h-full border border-white/20 rounded bg-black/20"}),e.jsx(_t,{isVisible:x}),se&&I&&e.jsx("div",{className:"absolute bottom-0 left-0 p-2 text-white bg-black bg-opacity-50 max-w-xs rounded-tr-lg",children:e.jsx("h3",{className:"text-xs font-bold",children:I})}),se&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 z-10",children:[e.jsx("button",{onClick:ge,disabled:x,className:`p-2 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg ${x?"bg-black/40 cursor-not-allowed opacity-50":"bg-black/60 hover:bg-black/80"}`,title:x?"Generating image...":"Download 4K screenshot",children:x?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(Dt,{className:"w-4 h-4 text-white"})}),B&&e.jsx("button",{onClick:B,disabled:x,className:`p-2 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg ${x?"bg-black/40 cursor-not-allowed opacity-50":"bg-black/60 hover:bg-black/80"}`,title:x?"Please wait...":"Expand to fullscreen",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]})]})},Ut=({galaxyType:r,numSystems:_,blackHoles:H,pulsars:Y,quasars:G,seed:k=12345,galaxyName:B})=>{const I=b.useRef(null),be=b.useRef(null),ee=b.useRef(null),O=b.useRef(null),$=b.useRef(null),Z=b.useRef(null);class D{seed;constructor(oe){this.seed=oe}random(){const oe=Math.sin(this.seed++)*1e4;return oe-Math.floor(oe)}uniform(oe,T){return oe+this.random()*(T-oe)}gauss(oe,T){let se=0,j=0;for(;se===0;)se=this.random();for(;j===0;)j=this.random();const te=Math.sqrt(-2*Math.log(se))*Math.cos(2*Math.PI*j);return oe+T*te}randint(oe,T){return Math.floor(this.uniform(oe,T+1))}}return b.useEffect(()=>{if(!I.current)return;const K=I.current,oe=K.clientWidth,T=K.clientHeight,se=new Ke;se.background=new De(17),be.current=se;const j=new Je(45,oe/T,.1,1e4);j.position.set(0,200,400),j.lookAt(0,0,0);const te=new Ze({antialias:!0,alpha:!0});te.setSize(oe,T),te.setClearColor(17,1),ee.current=te,K.appendChild(te.domElement);const ye=new bt(j,te.domElement);ye.enableDamping=!0,ye.dampingFactor=.05,ye.minDistance=50,ye.maxDistance=1200,ye.autoRotate=!0,ye.autoRotateSpeed=.5,ye.enablePan=!0,ye.enableZoom=!0,ye.target.set(0,0,0),$.current=ye;const x=new Ge;Z.current=x,se.add(x);const M=new D(k),xe=M.uniform(0,2*Math.PI),re=new He,ge=[],u=[],A=[],v=200;let ae=_;if(r==="Spiral"){ae=Math.min(_,5e4);const m=4,i=2*Math.PI/m,s=.15,o=.5,C=.1;for(let d=0;d<ae*C;d++){const y=M.uniform(0,2*Math.PI),W=M.gauss(v*.1,v*.05),F=M.gauss(0,5),ie=W*Math.cos(y),de=W*Math.sin(y);ge.push(ie,F,de),u.push(1,1,1);const S=k+d*1337,a=new D(S),n=a.gauss(1,.3),l=a.random()<.05,p=a.random()<.3;let P=Math.max(.3,n);l&&(P*=3+a.uniform(0,2)),p&&(P*=.5+a.uniform(0,.3)),W<v*.2&&(P*=1.8+a.uniform(0,.7),u[u.length-3]=1.2,u[u.length-2]=1.1,u[u.length-1]=.9),A.push(Math.min(P*1.5,12))}for(let d=0;d<ae;d++){const y=o*Math.sqrt(d/ae)*2*Math.PI,W=d%m*i,F=v*Math.sqrt(d/ae),ie=F*Math.cos(y+W+xe)+M.uniform(-s*F,s*F),de=F*Math.sin(y+W+xe)+M.uniform(-s*F,s*F),S=M.gauss(0,3);ge.push(ie,S,de),u.push(1,1,.8);const a=k+d*1337,n=new D(a),l=n.gauss(.8,.25),p=n.random()<.03,P=n.random()<.4;let N=Math.max(.2,l);p&&(N*=2.5+n.uniform(0,1.5)),P&&(N*=.4+n.uniform(0,.2)),F>v*.7&&(N*=.8),A.push(Math.min(N*1.3,8))}}else if(r==="Elliptical"){ae=Math.min(_,1e5);for(let m=0;m<ae;m++){const i=M.uniform(0,2*Math.PI),s=M.uniform(-1,1),o=Math.sqrt(1-s*s),C=M.random(),d=Math.pow(C,.6),y=-Math.log(1-d*.98)*v*.35,W=y*o*Math.cos(i),F=y*s*.6,ie=y*o*Math.sin(i);ge.push(W,F,ie),u.push(1,.9,.7);const de=k+m*1337,S=new D(de),a=S.gauss(.6,.2),n=S.random()<.08,l=S.random()<.25;let p=Math.max(.2,a);n&&(p*=2+S.uniform(0,1)),l&&(p*=.6+S.uniform(0,.2)),Math.sqrt(W*W+F*F+ie*ie)<v*.3&&(p*=1.5+S.uniform(0,.5)),A.push(Math.min(p*1.4,7))}}else if(r==="Dwarf"){ae=Math.min(_/100,1e4);for(let m=0;m<ae;m++){const i=M.uniform(0,2*Math.PI),s=M.uniform(0,Math.PI),o=M.gauss(v/3,v*.3),C=o*Math.sin(s)*Math.cos(i),d=o*Math.cos(s)*.5,y=o*Math.sin(s)*Math.sin(i);ge.push(C,d,y),u.push(.8,.8,1);const W=k+m*1337,F=new D(W),ie=F.gauss(.7,.3),de=F.random()<.02,S=F.random()<.6;let a=Math.max(.3,ie);de&&(a*=2.5+F.uniform(0,1)),S&&(a*=.5+F.uniform(0,.3)),A.push(Math.min(a*1.2,5))}}else if(r==="Singularity Void"){ae=1e4;for(let t=0;t<ae;t++){const c=t/ae,g=c*30*Math.PI,E=v*(1-c*.8)+M.uniform(-10,10),h=(c-.5)*300+Math.sin(g*.5)*20,Q=E*Math.cos(g)+Math.sin(c*20)*10,ce=E*Math.sin(g)+Math.cos(c*20)*10;ge.push(Q,h,ce);const L=(c+Math.sin(g*.1))%1,X=new De;X.setHSL(L,1,.5+Math.sin(c*10)*.3),u.push(X.r,X.g,X.b),A.push(M.uniform(.3,2)*(1+Math.sin(c*50)*.5))}const m=(t,c,g=1)=>{const E=new Se(t,64,64),h=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,Q=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;
          
          void main() {
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);
            
            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;
            
            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;
            
            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x + 
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);
            
            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;
            
            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);
            
            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;
            
            gl_FragColor = vec4(color, ${c});
          }
        `,ce=new _e({uniforms:{time:{value:0},speed:{value:g}},vertexShader:h,fragmentShader:Q,transparent:!0,blending:Re,side:qe,depthWrite:!1}),L=new q(E,ce);return L.isSingularityShader=!0,L.shaderSpeed=g,L},i=m(250,.3,1);x.add(i);const s=m(180,.4,-.7);x.add(s);const o=m(120,.5,1.5);x.add(o);const C=m(300,.2,.5);C.scale.set(-1,1,1),x.add(C);const d=new Se(350,32,32),y=new _e({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            
            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          
          void main() {
            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;
            
            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:xt,depthWrite:!1}),W=new q(d,y);W.isSingularityShader=!0,W.shaderSpeed=.3,x.add(W);const F=new He,ie=[],de=[];for(let t=0;t<1e3;t++){const c=M.uniform(-v,v),g=M.uniform(-v/2,v/2),E=M.uniform(-v,v),h=M.uniform(-50,50),Q=M.uniform(-30,30),ce=M.uniform(-50,50);ie.push(c,g,E),ie.push(c+h,g+Q,E+ce);const L=M.random(),X=new De;X.setHSL(L,1,.6),de.push(X.r,X.g,X.b),de.push(X.r*.5,X.g*.5,X.b*.5)}F.setAttribute("position",new je(ie,3)),F.setAttribute("color",new je(de,3));const S=new $e({vertexColors:!0,transparent:!0,opacity:.4,blending:Re}),a=new Fe(F,S);a.isGlitchLines=!0,x.add(a);const n=new Ge,l=new Se(20,32,32),p=new ke({color:0,transparent:!0,opacity:.95}),P=new q(l,p);n.add(P);const N=new Xe(25,80,64),ne=new _e({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;
          
          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);
            
            // Swirling pattern
            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;
            
            // Colors from hot (inner) to cold (outer)
            vec3 hotColor = vec3(1.0, 0.5, 0.0); // Orange
            vec3 coldColor = vec3(0.0, 0.3, 1.0); // Blue
            vec3 color = mix(coldColor, hotColor, intensity);
            
            // Add swirl variation
            color *= (0.7 + swirl * 0.3);
            
            // Fade out at edges
            float alpha = intensity * 0.8;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:qe}),V=new q(N,ne);V.rotation.x=Math.PI/2,V.isAccretionDisk=!0,n.add(V);for(let t=0;t<8;t++){const c=30+t*20,g=new gt(c,1+t*.5,8,64),E=new ke({color:new De().setHSL((.7+t*.05)%1,1,.5),transparent:!0,opacity:.3-t*.03,wireframe:!0}),h=new q(g,E);h.rotation.x=M.uniform(0,Math.PI),h.rotation.y=M.uniform(0,Math.PI),h.isDistortionRing=!0,h.rotationSpeed=M.uniform(.001,.005)*(t%2===0?1:-1),n.add(h)}x.add(n);const R=new Ye(5,100,8),w=new Ie({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Re}),ue=new q(R,w);ue.position.y=50,x.add(ue);const z=new q(R,w);z.position.y=-50,z.rotation.z=Math.PI,x.add(z)}if(r!=="Singularity Void"){const m=[],i=new D(k+999);for(let S=0;S<H;S++){const a=i.uniform(-50,50),n=i.uniform(-20,20),l=i.uniform(-50,50);m.push({x:a,y:n,z:l})}const s=[],o=[],C=[],d=[],y=[],W=.4,F=W*25;for(let S=0;S<ge.length;S+=3){const a=ge[S],n=ge[S+1],l=ge[S+2];let p=1/0,P=null;for(const N of m){const ne=Math.sqrt(Math.pow(a-N.x,2)+Math.pow(n-N.y,2)+Math.pow(l-N.z,2));ne<p&&(p=ne,P=N)}if(!(p<W))if(p<F&&P){const N=1-(p-W)/(F-W);P.x-a,P.y-n,P.z-l;const ne=Math.atan2(l-P.z,a-P.x),V=N*.8,R=8;for(let h=0;h<R-1;h++){const Q=h/(R-1),ce=(h+1)/(R-1),L=p*(1-Q*V*.7),X=ne+Q*V*1.5,pe=P.x+L*Math.cos(X),Me=n+(P.y-n)*Q*.3,Ae=P.z+L*Math.sin(X),ve=p*(1-ce*V*.7),fe=ne+ce*V*1.5,ze=P.x+ve*Math.cos(fe),Ce=n+(P.y-n)*ce*.3,we=P.z+ve*Math.sin(fe);d.push(pe,Me,Ae),d.push(ze,Ce,we)}const w=N*1.5,ue=u[S],z=u[S+1],t=u[S+2],c=Math.min(ue+w,2),g=Math.max(z*(1-w*.6),.1),E=Math.max(t*(1-w*.8),.1);for(let h=0;h<R-1;h++){const Q=h/(R-1),ce=(h+1)/(R-1),L=1-Q*N*.6,X=1-ce*N*.6,pe=w*(.5+Q*.5),Me=w*(.5+ce*.5);y.push(Math.min(c+pe*.3,2)*L,Math.max(g*(1-pe*.2),.1)*L,Math.max(E*(1-pe*.4),.1)*L),y.push(Math.min(c+Me*.3,2)*X,Math.max(g*(1-Me*.2),.1)*X,Math.max(E*(1-Me*.4),.1)*X)}s.push(a,n,l),o.push(c,g,E),C.push(Math.max(A[S/3]*(1-N*.5),.3))}else s.push(a,n,l),o.push(u[S],u[S+1],u[S+2]),C.push(A[S/3])}re.setAttribute("position",new je(s,3)),re.setAttribute("color",new je(o,3)),re.setAttribute("size",new je(C,1));const ie=new _e({uniforms:{},vertexShader:`
          attribute float size;
          varying vec3 vColor;
          void main() {
            vColor = color;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * (400.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
          }
        `,fragmentShader:`
          varying vec3 vColor;
          void main() {
            vec2 center = gl_PointCoord - vec2(0.5);
            float distanceFromCenter = length(center);
            
            if (distanceFromCenter > 0.5) {
              discard;
            }
            
            float alpha = 1.0 - (distanceFromCenter / 0.5);
            alpha = pow(alpha, 2.0);
            
            gl_FragColor = vec4(vColor, alpha * 0.8);
          }
        `,transparent:!0,blending:Re,vertexColors:!0,depthWrite:!1}),de=new Oe(re,ie);if(x.add(de),d.length>0){const S=new He;S.setAttribute("position",new je(d,3)),S.setAttribute("color",new je(y,3));const a=new $e({vertexColors:!0,transparent:!0,opacity:.8,linewidth:2,blending:Re}),n=new Fe(S,a);x.add(n)}}else{re.setAttribute("position",new je(ge,3)),re.setAttribute("color",new je(u,3)),re.setAttribute("size",new je(A,1));const m=new vt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Re,sizeAttenuation:!0}),i=new Oe(re,m);x.add(i)}const he=new D(k+999);for(let m=0;m<H;m++){const i=new Ge,s=he.uniform(-50,50),o=he.uniform(-20,20),C=he.uniform(-50,50),d=new Se(1.5,16,16),y=new ke({color:0,transparent:!0,opacity:.9}),W=new q(d,y);i.add(W),[{innerRadius:2,outerRadius:2.3,color:16777215,opacity:.8,emissive:16777164},{innerRadius:2.3,outerRadius:2.7,color:16755200,opacity:.7,emissive:16746496},{innerRadius:2.7,outerRadius:3.2,color:16729088,opacity:.6,emissive:16720384},{innerRadius:3.2,outerRadius:4,color:11141120,opacity:.5,emissive:6684672},{innerRadius:4,outerRadius:5,color:4456448,opacity:.3,emissive:2228224}].forEach((ie,de)=>{const S=new Xe(ie.innerRadius,ie.outerRadius,32),a=new Ie({color:ie.color,transparent:!0,opacity:ie.opacity,emissive:ie.emissive,emissiveIntensity:.3,side:qe}),n=new q(S,a);n.rotation.x=Math.PI/2,n.rotation.z=M.uniform(0,Math.PI*2),n.isAccretionRing=!0,n.rotationSpeed=.002+de*5e-4,i.add(n)}),i.position.set(s,o,C),x.add(i)}for(let m=0;m<Y;m++){const i=new Se(1.5,8,8),s=new Ie({color:16776960,emissive:16776960,emissiveIntensity:1}),o=new q(i,s);o.position.set(M.uniform(-v,v),M.uniform(-v/4,v/4),M.uniform(-v,v)),o.isPulsar=!0,o.pulseSpeed=M.uniform(1,3),x.add(o)}for(let m=0;m<G;m++){const i=new Ge,s=new Se(2,16,16),o=new Ie({color:16777215,emissive:16777215,emissiveIntensity:2}),C=new q(s,o);i.add(C);const d=new Ye(1,20,8),y=new Ie({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),W=new q(d,y);W.position.y=10,i.add(W);const F=new q(d,y);F.position.y=-10,F.rotation.z=Math.PI,i.add(F),i.position.set(M.uniform(-v,v),M.uniform(-v/4,v/4),M.uniform(-v,v)),x.add(i)}const me=new Qe(4210752,.5);se.add(me);const le=new wt(16777215,.5,1e3);le.position.set(0,100,0),se.add(le);const U=m=>{m.key==="Escape"&&document.dispatchEvent(new CustomEvent("galaxy-close-fullscreen"))};document.addEventListener("keydown",U);const J=()=>{O.current=requestAnimationFrame(J);const m=performance.now()/1e3;Z.current&&(Z.current.rotation.y+=.001),x.children.forEach(i=>{if(i.isPulsar){const s=i.pulseSpeed||1;i.scale.setScalar(1+Math.sin(Date.now()*.001*s)*.3)}if(i.isSingularityShader&&i instanceof q){const s=i.material;s.uniforms&&s.uniforms.time&&(s.uniforms.time.value=m);const o=i.shaderSpeed||1;i.rotation.y+=.001*o,i.rotation.x+=5e-4*o}if(i.isAccretionDisk&&i instanceof q){const s=i.material;s.uniforms&&s.uniforms.time&&(s.uniforms.time.value=m),i.rotation.z+=.002}if(i.isDistortionRing){const s=i.rotationSpeed||.001;i.rotation.x+=s,i.rotation.y+=s*.7,i.scale.setScalar(1+Math.sin(m*2)*.1)}if(i.isGlitchLines&&i instanceof Fe){const s=i.material;s.opacity=.2+Math.sin(m*3)*.2,i.rotation.z+=5e-4}i instanceof Ge&&i.children.forEach(s=>{if(s.isAccretionDisk&&s instanceof q){const o=s.material;o.uniforms&&o.uniforms.time&&(o.uniforms.time.value=m),s.rotation.z+=.002}if(s.isAccretionRing&&s instanceof q){const o=s.rotationSpeed||.002;s.rotation.z+=o}if(s.isDistortionRing){const o=s.rotationSpeed||.001;s.rotation.x+=o,s.rotation.y+=o*.7,s.scale.setScalar(1+Math.sin(m*2)*.1)}})}),$.current&&$.current.update(),te.render(se,j)};J();const f=()=>{if(!I.current||!te)return;const m=I.current,i=m.clientWidth,s=m.clientHeight;te.setSize(i,s),j.aspect=i/s,j.updateProjectionMatrix()};return window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f),document.removeEventListener("keydown",U),$.current&&$.current.dispose(),O.current&&cancelAnimationFrame(O.current),K&&te.domElement&&K.removeChild(te.domElement),te.dispose()}},[r,_,H,Y,G,k]),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{ref:I,className:"w-full h-full"}),B&&e.jsx("div",{className:"absolute bottom-0 left-0 p-2 text-white bg-black bg-opacity-50 max-w-xs rounded-tr-lg",children:e.jsx("h3",{className:"text-xs font-bold",children:B})})]})},Wt=({galaxyUrl:r,galaxyType:_="Spiral",numSystems:H=1e4,blackHoles:Y=5,pulsars:G=10,quasars:k=3,galaxyName:B})=>{const[I,be]=b.useState("Aligning Stargate..."),[ee,O]=b.useState(!1),[$,Z]=b.useState(!1),[D,K]=b.useState(!1),[oe,T]=b.useState(!1);b.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){be("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),O(!0);const te=(re,ge)=>Array.from({length:ge},()=>re[Math.floor(Math.random()*re.length)]).join(""),ye=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:35},{chars:"0123456789ABCDEF",duration:20,iterations:50},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:'\",.<>?/`~",duration:15,iterations:100}];let x=0,M=0;const xe=()=>{if(x>=ye.length){const ge="Stargate system aligned";let u=0;be("");const A=()=>{u<ge.length?(be(ge.substring(0,u+1)),u++,setTimeout(A,30)):O(!1)};A();return}const re=ye[x];be(te(re.chars,32)),M++,M>=re.iterations&&(x++,M=0),setTimeout(xe,re.duration)};xe()},[]),b.useEffect(()=>{const j=document.createElement("style");return j.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(j),()=>{document.head.removeChild(j)}},[]);const se=()=>{K(!0),setTimeout(()=>{Z(!1),K(!1)},300)};return b.useEffect(()=>(document.addEventListener("galaxy-close-fullscreen",se),()=>{document.removeEventListener("galaxy-close-fullscreen",se)}),[]),b.useEffect(()=>{if(oe){const j=setTimeout(()=>T(!1),50);return()=>clearTimeout(j)}},[oe]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Galaxy Visualization"})}),e.jsx("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:e.jsx($t,{galaxyType:_,numSystems:H,blackHoles:Y,pulsars:G,quasars:k,galaxyName:B,galaxyUrl:r,onExpandClick:()=>{Z(!0),T(!0)}})}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:r,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${ee?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),I]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]}),$&&at.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${D||oe?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${D||oe?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:"Galaxy View"})}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Galaxy Visualization"}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Type: ",_," • Systems: ",H.toLocaleString()]})]})}),e.jsx("button",{onClick:se,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(Ut,{galaxyType:_,numSystems:H,blackHoles:Y,pulsars:G,quasars:k,galaxyName:B})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},Xt=({systems:r,coordinates:_})=>{const[H,Y]=b.useState(new Map);return b.useEffect(()=>{(()=>{try{const k=new Map;r.forEach(B=>{const I=Rt(_,B.index,B.num_planets||1);k.set(B.index,I)}),Y(k)}catch{}})()},[_,r]),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:r.map(G=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[(()=>{const k=H.get(G.index)||"none";return k==="complete"?e.jsx("div",{className:"absolute top-1 right-1 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}):k==="partial"?e.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500/20 border border-yellow-500/50 text-yellow-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"PARTIAL"}):null})(),e.jsxs("button",{onClick:()=>window.location.href=`/system/${G.index}`,className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["#",G.number]}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:G.name})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},G.index))}),r.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No systems found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This galaxy appears to be empty"})]})]})},Yt=({currentGalaxy:r})=>{const[_,H]=b.useState(!1),[Y,G]=b.useState(!1),[k,B]=b.useState(!0),I=1e7;b.useEffect(()=>{const[Z,D,K]=r.coordinates,oe=!(Z===0&&D===0&&K===0),T=!(Z===I&&D===I&&K===I);H(oe),G(T),B(!1)},[r.coordinates]);const be=()=>{const[Z,D,K]=r.coordinates;return K>0?[Z,D,K-1]:D>0?[Z,D-1,I]:Z>0?[Z-1,I,I]:[0,0,0]},ee=()=>{const[Z,D,K]=r.coordinates;return K<I?[Z,D,K+1]:D<I?[Z,D+1,0]:Z<I?[Z+1,0,0]:[I,I,I]},O=()=>{if(_){if(!Be.canAffordTravel("galaxy",1)){Be.executeTravel("galaxy",1);return}if(!Be.executeTravel("galaxy",1))return;const[D,K,oe]=be(),T=document.createElement("form");T.method="POST",T.action="/navigate";const se=document.createElement("input");se.type="hidden",se.name="x",se.value=D.toString();const j=document.createElement("input");j.type="hidden",j.name="y",j.value=K.toString();const te=document.createElement("input");te.type="hidden",te.name="z",te.value=oe.toString(),T.appendChild(se),T.appendChild(j),T.appendChild(te),document.body.appendChild(T),T.submit()}},$=()=>{if(Y){if(!Be.canAffordTravel("galaxy",1)){Be.executeTravel("galaxy",1);return}if(!Be.executeTravel("galaxy",1))return;const[D,K,oe]=ee(),T=document.createElement("form");T.method="POST",T.action="/navigate";const se=document.createElement("input");se.type="hidden",se.name="x",se.value=D.toString();const j=document.createElement("input");j.type="hidden",j.name="y",j.value=K.toString();const te=document.createElement("input");te.type="hidden",te.name="z",te.value=oe.toString(),T.appendChild(se),T.appendChild(j),T.appendChild(te),document.body.appendChild(T),T.submit()}};return k?null:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:O,disabled:!_,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${_?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:$,disabled:!Y,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${Y?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})},Ot=({page:r,prevPage:_,nextPage:H,finish:Y})=>{const G="px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105",k="bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg",B="bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white border border-white/20";return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 sm:gap-4 flex-wrap",children:[r!==1&&e.jsxs("button",{onClick:()=>window.location.href="/galaxy/1",className:`${G} ${B}`,title:"First page",children:[e.jsx("span",{className:"hidden sm:inline",children:"First"}),e.jsx("span",{className:"sm:hidden",children:"«"})]}),_&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${_}`,className:`${G} ${B}`,title:"Previous page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"‹"})]}),(()=>{const I=[],ee=Math.max(1,r-2),O=Math.min(Y,r+2);ee>1&&(I.push(e.jsx("button",{onClick:()=>window.location.href="/galaxy/1",className:`${G} ${B}`,children:"1"},1)),ee>2&&I.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"start-ellipsis")));for(let $=ee;$<=O;$++)$===r?I.push(e.jsx("span",{className:`${G} ${k} cursor-default`,children:$},$)):I.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${$}`,className:`${G} ${B} cursor-pointer`,children:$},$));return O<Y&&(O<Y-1&&I.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"end-ellipsis")),I.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${Y}`,className:`${G} ${B}`,children:Y},Y))),I})(),H&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${H}`,className:`${G} ${B}`,title:"Next page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"›"})]}),r!==Y&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${Y}`,className:`${G} ${B}`,title:"Last page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Last"}),e.jsx("span",{className:"sm:hidden",children:"»"})]})]}),e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-400",children:["Page ",r," of ",Y]})]})},rt=({galaxy:r,systems:_,galaxy_url:H,version:Y,page:G,prev_page:k,next_page:B,finish:I,image_url:be})=>{const[ee]=b.useState(r.coordinates.join(","));b.useEffect(()=>{document.body.setAttribute("data-coordinates",ee),Ct(ee)},[ee]);const O=$=>$.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsx(Et,{}),e.jsxs("div",{className:"relative z-10 pt-1",children:[e.jsx(kt,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["Galaxy '",O(r.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Coordinates ",r.coordinates.join(", ")]})]}),e.jsx(Yt,{currentGalaxy:r}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(Wt,{galaxyUrl:H,galaxyType:r.galaxy_type,numSystems:r.num_systems,blackHoles:r.black_holes,pulsars:r.pulsars,quasars:r.quasars,galaxyName:O(r.name)})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(qt,{galaxy:r})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Systems in '",O(r.name),"'"]}),e.jsx(Xt,{systems:_,coordinates:ee})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsx("span",{className:"text-base sm:text-lg",children:"← Go Back to Planetary Index"})})}),e.jsx(Ot,{page:G,prevPage:k,nextPage:B,finish:I})]}),e.jsx(Tt,{version:Y})]}),e.jsx(At,{}),e.jsx(Pt,{currentLocation:{type:"galaxy",name:r.name,coordinates:r.coordinates.join(",")}})]})};document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("atlas-react-root");if(!r)return;const _=H=>{const Y=document.getElementById(H);if(!Y||!Y.textContent)return null;try{return JSON.parse(Y.textContent.trim())}catch{return null}};try{const H=_("data-galaxy")||{},Y=_("data-systems")||[],G=_("data-navigation")||{},k=_("data-common")||{},B={galaxy:{name:H.name||"Unknown Galaxy",coordinates:H.coordinates||[0,0,0],galaxy_type:H.galaxy_type||"Unknown",num_systems:H.num_systems||0,black_holes:H.black_holes||0,pulsars:H.pulsars||0,quasars:H.quasars||0},systems:Y,galaxy_url:G.galaxy_url||"#",version:k.version||"1.0.0",page:G.page||1,prev_page:G.prev_page,next_page:G.next_page,finish:G.finish||1,image_url:k.image_url||""};ot.createRoot(r).render(st.createElement(rt,B))}catch{const Y={galaxy:{name:"Unknown Galaxy",coordinates:[0,0,0],galaxy_type:"Unknown",num_systems:0,black_holes:0,pulsars:0,quasars:0},systems:[],galaxy_url:"#",version:"1.0.0",page:1,finish:1,image_url:""};ot.createRoot(r).render(st.createElement(rt,Y))}});
