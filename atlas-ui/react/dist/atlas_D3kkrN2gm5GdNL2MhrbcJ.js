import{S as r}from"./atlas_BlTNaWGHZ8zx8h3TIfddO.js";import{C as s}from"./atlas_Xs9BLEnnn6iCcADsGARg5.js";const o={NUM_BANDS:{min:6,max:12},BAND_POSITIONS:{min:-.8,max:.8},BAND_WIDTHS:{min:.08,max:.15},ROTATION_ANGLE:{min:0,max:Math.PI*2},ANIMATION_SPEED:{min:.5,max:2},TURBULENCE:{min:.3,max:.8},NOISE_SCALE:{min:2,max:4}};class d{layerMesh;material;params;layerSystem;constructor(i,n={}){this.layerSystem=i;const t=n.seed||Math.floor(Math.random()*1e6),a=new r(t),e=n.numBands||Math.floor(a.uniform(o.NUM_BANDS.min,o.NUM_BANDS.max));this.params={numBands:e,bandPositions:n.bandPositions||this.generateDefaultBandPositions(e,t),bandWidths:n.bandWidths||this.generateDefaultBandWidths(e,t),rotationAngle:n.rotationAngle||a.uniform(o.ROTATION_ANGLE.min,o.ROTATION_ANGLE.max),baseColor:n.baseColor||new s(16753920),bandColor:n.bandColor||new s(16747520),animationSpeed:n.animationSpeed||a.uniform(o.ANIMATION_SPEED.min,o.ANIMATION_SPEED.max),turbulence:n.turbulence||a.uniform(o.TURBULENCE.min,o.TURBULENCE.max),noiseScale:n.noiseScale||a.uniform(o.NOISE_SCALE.min,o.NOISE_SCALE.max),opacity:n.opacity||.4,seed:t},this.material=this.layerSystem.createCloudBandsLayerMaterial(this.params),this.layerMesh=this.layerSystem.addEffectLayer("cloudBands",this.material,1.001,this)}generateDefaultBandPositions(i,n){const t=new Array(20).fill(0),a=new r(n+12345);for(let e=0;e<i&&e<20;e++)t[e]=a.uniform(o.BAND_POSITIONS.min,o.BAND_POSITIONS.max);return t}generateDefaultBandWidths(i,n){const t=new Array(20).fill(0),a=new r(n+67890);for(let e=0;e<i&&e<20;e++)t[e]=a.uniform(o.BAND_WIDTHS.min,o.BAND_WIDTHS.max);return t}update(i,n){this.material.uniforms.time&&(this.material.uniforms.time.value+=i),n!==void 0&&this.material.uniforms.rotationAngle&&(this.material.uniforms.rotationAngle.value=n)}updateParams(i){this.params={...this.params,...i},i.numBands!==void 0&&(this.material.uniforms.numBands.value=i.numBands),i.bandPositions&&(this.material.uniforms.bandPositions.value=i.bandPositions),i.bandWidths&&(this.material.uniforms.bandWidths.value=i.bandWidths),i.animationSpeed!==void 0&&(this.material.uniforms.animationSpeed.value=i.animationSpeed),i.turbulence!==void 0&&(this.material.uniforms.turbulence.value=i.turbulence),i.opacity!==void 0&&(this.material.uniforms.opacity.value=i.opacity)}dispose(){}}function f(m,i,n){const t=i.cloud_bands||{},a=n||Math.floor(Math.random()*1e6),e=new r(a+4e3),l={numBands:t.num_bands||Math.floor(e.uniform(o.NUM_BANDS.min,o.NUM_BANDS.max)),bandPositions:t.positions||void 0,bandWidths:t.widths||void 0,rotationAngle:t.rotation||e.uniform(o.ROTATION_ANGLE.min,o.ROTATION_ANGLE.max),baseColor:i.base_color?new s().setRGB(i.base_color.r||i.base_color[0],i.base_color.g||i.base_color[1],i.base_color.b||i.base_color[2]):new s(16753920),bandColor:new s(16777215),animationSpeed:e.uniform(o.ANIMATION_SPEED.min,o.ANIMATION_SPEED.max),turbulence:i.turbulence||e.uniform(o.TURBULENCE.min,o.TURBULENCE.max),noiseScale:e.uniform(o.NOISE_SCALE.min,o.NOISE_SCALE.max),opacity:.4,seed:a};return new d(m,l)}export{f as c};
