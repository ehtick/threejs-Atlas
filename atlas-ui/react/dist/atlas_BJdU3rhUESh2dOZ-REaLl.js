import{j as a,r as y}from"./atlas_BGo7KNTC_D9rNHeIOnwpB.js";import{u as B,g as ee}from"./atlas_5StMBQg7EZ_DcUhMgqODi.js";const ie=()=>a.jsx("header",{className:"bg-black/20 backdrop-blur-md border-b border-white/10 px-4 sm:px-6 py-4",children:a.jsxs("div",{className:"w-full flex items-center justify-between",children:[a.jsxs("a",{href:"/",className:"flex items-center space-x-3 sm:space-x-4",children:[a.jsx("img",{src:"/static/atlas-logo.jpg",alt:"Atlas Logo",className:"h-10 w-10 sm:h-12 sm:w-12 rounded-full border-2 border-blue-400 shadow-lg"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"The Atlas"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 hidden sm:block",children:"Universal Navigation System"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"ONLINE"})]}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400 hidden lg:block",children:"Quantum Navigation Ready"})]})]})}),te=100,G=4*1024*1024,K={SPACESHIP:"_atlasSpaceShip",ARCHIVE:"__atlasArchive",DAILY_CHALLENGES:"_atlasDailyChallenges",LOCATIONS:"_atlasLocations"},z=d=>{let e="";const t=d.byteLength;for(let s=0;s<t;s++)e+=String.fromCharCode(d[s]);return btoa(e)},H=d=>{const e=atob(d),t=e.length,s=new Uint8Array(t);for(let r=0;r<t;r++)s[r]=e.charCodeAt(r);return s},A=(d,e)=>{try{const t=new Blob([e]).size;if(t>G)throw console.warn(`Value too large: ${t} bytes exceeds ${G} bytes limit`),new Error("Value exceeds maximum storage size");const s=btoa(encodeURIComponent(d)),n=new TextEncoder().encode(e);let o;if(n.length>=te){const l=ee(n);o="c:"+z(l)}else o="u:"+z(n);const i=new Blob([o]).size;if(i>G)throw console.warn(`Encoded value too large: ${i} bytes exceeds ${G} bytes limit`),new Error("Encoded value exceeds maximum storage size");localStorage.setItem(s,o)}catch(t){if(console.error("Error encoding/compressing:",t),t instanceof Error&&t.message.includes("storage size"))throw t;localStorage.setItem(d,e)}},j=d=>{try{const e=btoa(encodeURIComponent(d)),t=localStorage.getItem(e);if(t===null)return null;let s;if(t.startsWith("c:")){const n=H(t.slice(2));s=B(n)}else if(t.startsWith("u:"))s=H(t.slice(2));else{const n=atob(t),o=new Uint8Array(n.split("").map(i=>i.charCodeAt(0)));s=B(o)}return new TextDecoder().decode(s)}catch(e){return console.error("Error decoding/decompressing:",e),localStorage.getItem(d)}},W=d=>{try{const e=btoa(encodeURIComponent(d));localStorage.removeItem(e)}catch(e){console.error("Error removing encoded item:",e),localStorage.removeItem(d)}},se=()=>{Object.values(K).forEach(e=>{const t=localStorage.getItem(e);t!==null&&(A(e,t),localStorage.removeItem(e),console.log(`Migrated ${e} to encoded storage`))})};class T{static STORAGE_KEY="_atlasDailyChallenges";static BASE_GOALS={galaxies:1,systems:3,planets:10};static getTodaysChallenges(){const e=new Date().toISOString().split("T")[0],t=this.getStoredChallenges();return!t||t.date!==e?this.createNewDayChallenges(e,t):t}static getStoredChallenges(){try{const e=j(this.STORAGE_KEY);return e?JSON.parse(e):null}catch(e){return console.error("Error reading daily challenges:",e),null}}static createNewDayChallenges(e,t){const s=t?t.dayNumber+1:1,r=Math.pow(1.1,s-1),n=this.getCurrentStats(),o=[{type:"galaxies",current:n.galaxies,target:Math.ceil(s*this.BASE_GOALS.galaxies*r),dayNumber:s,completed:!1},{type:"systems",current:n.systems,target:Math.ceil(s*this.BASE_GOALS.systems*r),dayNumber:s,completed:!1},{type:"planets",current:n.planets,target:Math.ceil(s*this.BASE_GOALS.planets*r),dayNumber:s,completed:!1}],i=(t?.totalCompletedDays||0)+(t?.dayCompleted?1:0),l={date:e,dayNumber:s,challenges:o,lastReset:Date.now(),totalCompletedDays:i,dayCompleted:!1};return this.saveChallenges(l),l}static getCurrentStats(){try{const e=j("__atlasArchive");if(!e)return{galaxies:0,systems:0,planets:0};const t=JSON.parse(e);let s=0,r=0;Object.values(t.g||{}).forEach(l=>{s+=Object.keys(l).length,Object.values(l).forEach(c=>{typeof c=="string"&&(r+=(c.match(/1/g)||[]).length)})});const n=new Set(Object.keys(t.g||{})),o=new Set(Object.keys(t.gv||{}));return{galaxies:new Set([...n,...o]).size,systems:s,planets:r}}catch(e){return console.error("Error getting current stats:",e),{galaxies:0,systems:0,planets:0}}}static updateProgress(){const e=this.getTodaysChallenges(),t=this.getCurrentStats();return e.challenges.forEach(r=>{const n=t[r.type];r.current=n,r.completed=n>=r.target}),e.challenges.every(r=>r.completed)&&!e.dayCompleted&&(e.dayCompleted=!0),this.saveChallenges(e),e}static getCompletedDaysCount(){try{return this.getTodaysChallenges().totalCompletedDays||0}catch(e){return console.error("Error getting completed days count:",e),0}}static saveChallenges(e){try{A(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving daily challenges:",t)}}static getCompletionStatus(){const e=this.getTodaysChallenges(),t=e.challenges.filter(r=>r.completed).length,s=e.challenges.length;return{completed:t,total:s,allCompleted:t===s}}static getDayInfo(){const e=this.getTodaysChallenges(),t=Math.pow(1.1,e.dayNumber-1);return{dayNumber:e.dayNumber,multiplier:Math.round(t*100)/100}}}const L=d=>{const[e,t,s]=d.split(",").map(Number);return`${e.toString(36)}_${t.toString(36)}_${s.toString(36)}`};class O{static STORAGE_KEY=K.ARCHIVE;static MAX_ENTRIES_PER_GALAXY=1e3;static getData(){try{this.migrateToEncodedStorage(),this.cleanupLegacyStorage();const e=j(this.STORAGE_KEY);if(!e)return{g:{},gv:{}};const t=JSON.parse(e);return t.gv||(t.gv={}),t}catch(e){return console.error("Error reading Atlas archive:",e),{g:{},gv:{}}}}static cleanupLegacyStorage(){try{const e="atlasHistoricalData";localStorage.getItem(e)&&localStorage.removeItem(e)}catch(e){console.error("Error cleaning up legacy storage:",e)}}static migrateToEncodedStorage(){try{localStorage.getItem(this.STORAGE_KEY)&&se()}catch(e){console.error("Error migrating to encoded storage:",e)}}static saveData(e){try{A(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving Atlas archive:",t)}}static performCleanup(e){const t=Object.keys(e.g);t.length>100&&t.slice(0,t.length-100).forEach(r=>delete e.g[r]),Object.keys(e.g).forEach(s=>{const r=e.g[s],n=Object.keys(r);n.length>this.MAX_ENTRIES_PER_GALAXY&&n.slice(0,n.length-this.MAX_ENTRIES_PER_GALAXY).forEach(i=>delete r[i])})}static performEmergencyCleanup(){const e=document.body.getAttribute("data-coordinates");if(e){const t=L(e),s=this.getData(),r=s.g[t];s.g={},r&&(s.g[t]=r),this.saveData(s)}}static markPlanetVisited(e,t,s,r){const n=this.getData(),o=L(e),i=t.toString(16),l=r.findIndex(u=>u.name.toLowerCase()===s.toLowerCase());if(l===-1){console.warn(`Planet ${s} not found in system planets list`);return}n.g[o]||(n.g[o]={}),n.g[o][i]||(n.g[o][i]="");const c=this.bitmapToIndices(n.g[o][i]);c.includes(l)||(c.push(l),n.g[o][i]=this.indicesToBitmap(c),this.saveData(n),T.updateProgress())}static markGalaxyVisited(e){const t=this.getData(),s=L(e);t.gv[s]||(t.gv[s]=!0,console.log(`🌌 Galaxy marked as visited: ${e} (hash: ${s})`),this.saveData(t),T.updateProgress())}static markSystemVisited(e,t){const s=this.getData(),r=L(e),n=t.toString(16);this.markGalaxyVisited(e),s.g[r]||(s.g[r]={}),s.g[r][n]||(s.g[r][n]="",this.saveData(s),T.updateProgress())}static bitmapToIndices(e){return e?e.split("").map((t,s)=>t==="1"?s:-1).filter(t=>t!==-1):[]}static indicesToBitmap(e){if(e.length===0)return"";const t=Math.max(...e),s=Array(t+1).fill("0");return e.forEach(r=>{r>=0&&(s[r]="1")}),s.join("")}static isGalaxyVisited(e){const t=this.getData(),s=L(e);return!!t.gv[s]}static isSystemVisited(e,t){const s=this.getData(),r=L(e),n=t.toString(16);return!!(s.g[r]&&n in s.g[r])}static getVisitedPlanets(e,t,s){const r=this.getData(),n=L(e),o=t.toString(16),i=r.g[n]?.[o]||"";return this.bitmapToIndices(i).map(c=>{const u=s[c];return u?u.name.toLowerCase():null}).filter(c=>c!==null)}static getVisitedPlanetCount(e,t){const s=this.getData(),r=L(e),n=t.toString(16),o=s.g[r]?.[n]||"";return this.bitmapToIndices(o).length}static getStorageStats(){const e=this.getData();let t=0;Object.values(K).forEach(c=>{const u=j(c);u&&(t+=u.length)});let r=0,n=0;Object.values(e.g).forEach(c=>{r+=Object.keys(c).length,Object.values(c).forEach(u=>{typeof u=="string"&&(n+=(u.match(/1/g)||[]).length)})});const o=new Set(Object.keys(e.g||{})),i=new Set(Object.keys(e.gv||{})),l=new Set([...o,...i]);return{size:t,galaxies:l.size,visitedGalaxies:Object.keys(e.gv).length,systems:r,planets:n}}}const le=d=>{O.markGalaxyVisited(d)},ce=(d,e,t,s)=>{O.markPlanetVisited(d,e,t,s)},de=(d,e)=>{O.markSystemVisited(d,e)},me=(d,e,t)=>O.getVisitedPlanets(d,e,t),ae=(d,e)=>O.isSystemVisited(d,e),ue=(d,e,t,s)=>{if(!ae(d,e))return"none";{const r=O.getVisitedPlanetCount(d,e);return r>=t&&t>0?"complete":(r>0,"partial")}},re=()=>O.getStorageStats();class I{static STORAGE_KEY="_atlasLocations";static BASE_MAX_LOCATIONS=5;static BONUS_PER_COMPLETION=5;static ABSOLUTE_MAX_LOCATIONS=999;static getLocations(){try{const e=j(this.STORAGE_KEY);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Error reading saved locations:",e),[]}}static async saveLocation(e){try{const t=this.getLocations(),s=this.getCurrentMaxLocations(),r=t.findIndex(o=>o.stargateUrl===e.stargateUrl),n={...e,id:this.generateId(),timestamp:Date.now()};return r!==-1?(t[r]=n,A(this.STORAGE_KEY,JSON.stringify(t)),!0):t.length>=s&&!await this.showSlotFullDialog(s)?!1:(t.push(n),t.length>s&&(t.sort((o,i)=>i.timestamp-o.timestamp),t.splice(s)),A(this.STORAGE_KEY,JSON.stringify(t)),!0)}catch(t){return console.error("Error saving location:",t),!1}}static saveLocationSync(e){const t=this.getLocations(),s=this.getCurrentMaxLocations(),r=t.findIndex(o=>o.stargateUrl===e.stargateUrl),n={...e,id:this.generateId(),timestamp:Date.now()};r!==-1?t[r]=n:t.push(n),t.length>s&&(t.sort((o,i)=>i.timestamp-o.timestamp),t.splice(s)),A(this.STORAGE_KEY,JSON.stringify(t))}static removeLocation(e){try{const s=this.getLocations().filter(r=>r.id!==e);A(this.STORAGE_KEY,JSON.stringify(s))}catch(t){console.error("Error removing location:",t)}}static clearAllLocations(){try{W(this.STORAGE_KEY)}catch(e){console.error("Error clearing locations:",e)}}static generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static async showSlotFullDialog(e){return new Promise(t=>{const s=document.createElement("div");s.className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm transition-all duration-300 opacity-0",s.style.backdropFilter="blur(8px)";const r=document.createElement("div");r.className="relative bg-gradient-to-br from-slate-900/95 to-slate-800/95 border border-slate-600/50 rounded-2xl p-8 max-w-md mx-4 text-white shadow-2xl backdrop-blur-xl transform scale-95 transition-all duration-300",r.style.backdropFilter="blur(20px)",r.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.05)";const n=document.createElement("div");n.className="text-center";const o=document.createElement("div");o.className="inline-flex items-center justify-center w-16 h-16 bg-amber-500/20 rounded-full mb-6";const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("class","w-8 h-8 text-amber-400"),i.setAttribute("fill","none"),i.setAttribute("stroke","currentColor"),i.setAttribute("viewBox","0 0 24 24");const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("stroke-linecap","round"),l.setAttribute("stroke-linejoin","round"),l.setAttribute("stroke-width","2"),l.setAttribute("d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z");const c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-width","2"),c.setAttribute("d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"),i.appendChild(l),i.appendChild(c),o.appendChild(i);const u=document.createElement("h2");u.className="text-2xl font-bold mb-4 text-white",u.textContent="Storage Full";const p=document.createElement("p");p.className="text-slate-400 mb-6 text-[10px] bg-slate-800/50 rounded-lg p-3 border border-slate-700/50",p.textContent="💡 Complete daily challenges to increase your storage capacity";const N=document.createElement("p");N.className="text-slate-300 mb-4 text-base leading-relaxed",N.textContent="You have reached your maximum of ";const v=document.createElement("span");v.className="font-bold text-amber-400 bg-amber-400/10 px-2 py-1 rounded-lg",v.textContent=e.toString(),N.appendChild(v),N.appendChild(document.createTextNode(" saved locations."));const D=document.createElement("p");D.className="text-slate-200 mb-8 text-base",D.textContent="Overwrite the oldest saved location?";const f=document.createElement("div");f.className="flex gap-4 justify-center";const S=document.createElement("button");S.id="cancelSave",S.className="px-6 py-3 bg-slate-700/80 hover:bg-slate-600/80 border border-slate-600/50 hover:border-slate-500/50 rounded-xl transition-all duration-200 font-medium text-slate-200 hover:text-white transform hover:scale-105 hover:shadow-lg",S.textContent="Cancel";const b=document.createElement("button");b.id="confirmOverwrite",b.className="px-6 py-3 bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-500 hover:to-amber-400 rounded-xl transition-all duration-200 font-semibold text-white transform hover:scale-105 hover:shadow-lg border border-amber-400/30",b.textContent="Overwrite",f.appendChild(S),f.appendChild(b),n.appendChild(o),n.appendChild(u),n.appendChild(p),n.appendChild(N),n.appendChild(D),n.appendChild(f),r.appendChild(n),s.appendChild(r),document.body.appendChild(s),requestAnimationFrame(()=>{s.style.opacity="1",r.style.transform="scale(1)"});const k=r.querySelector("#cancelSave"),C=r.querySelector("#confirmOverwrite"),M=E=>{s.style.opacity="0",r.style.transform="scale(0.95)",setTimeout(()=>{document.body.contains(s)&&document.body.removeChild(s),t(E)},300)};k?.addEventListener("click",()=>{M(!1)}),C?.addEventListener("click",()=>{M(!0)}),s.addEventListener("click",E=>{E.target===s&&M(!1)});const g=E=>{E.key==="Escape"&&(document.removeEventListener("keydown",g),M(!1))};document.addEventListener("keydown",g)})}static hasAvailableSlot(){const e=this.getLocations(),t=this.getCurrentMaxLocations();return e.length<t}static getAvailableSlots(){const e=this.getLocations(),t=this.getCurrentMaxLocations();return Math.max(0,t-e.length)}static getCurrentMaxLocations(){try{const e=this.getCompletedDaysCount(),t=T.getCompletionStatus().allCompleted?1:0,s=this.BASE_MAX_LOCATIONS+(e+t)*this.BONUS_PER_COMPLETION;return Math.min(s,this.ABSOLUTE_MAX_LOCATIONS)}catch(e){return console.error("Error calculating max locations:",e),this.BASE_MAX_LOCATIONS}}static getCompletedDaysCount(){try{const e=j("_atlasDailyChallenges");return e&&JSON.parse(e).totalCompletedDays||0}catch(e){return console.error("Error getting completion history:",e),0}}static getLocationStats(){const e=this.getLocations(),t=this.getCurrentMaxLocations();return console.log("Location debug:",{completedDays:this.getCompletedDaysCount(),todayCompleted:T.getCompletionStatus().allCompleted,maxAllowed:t}),{total:e.length,galaxies:e.filter(s=>s.type==="galaxy").length,systems:e.filter(s=>s.type==="system").length,planets:e.filter(s=>s.type==="planet").length,maxAllowed:t,available:Math.max(0,t-e.length)}}static async saveLocationWithConfirmation(e,t,s){try{const r={name:e,type:t,stargateUrl:s};return await this.saveLocation(r)?{success:!0,message:`Location "${e}" saved successfully!`}:{success:!1,message:"Save operation cancelled by user."}}catch(r){return console.error("Error saving location with confirmation:",r),{success:!1,message:"Failed to save location. Please try again."}}}}class w{static STORAGE_KEY="_atlasSpaceShip";static COLLECTION_COOLDOWNS={planet:900*1e3,system:2700*1e3,galaxy:480*60*1e3};static DAILY_COLLECTION_LIMITS={planet:1/0,system:15,galaxy:5};static PASSIVE_INTERVAL=60*1e3;static DEFAULT_DATA={r:{a:300,e:200,d:250},u:{l:1,ef:1,rn:500,st:1e3,m:1},c:{},t:{},s:{tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0,dcp:0,dcs:0,dcg:0,lcd:new Date().toDateString()}};static getData(){try{const e=j(this.STORAGE_KEY);if(!e)return this.saveData(this.DEFAULT_DATA),{...this.DEFAULT_DATA};const t=JSON.parse(e),s=this.expandData(t);return{r:s.r||{...this.DEFAULT_DATA.r},u:s.u||{...this.DEFAULT_DATA.u},c:s.c||{},t:s.t||{},s:s.s||{...this.DEFAULT_DATA.s}}}catch(e){return console.error("Error reading spaceship data:",e),{...this.DEFAULT_DATA}}}static saveData(e){try{const s=Date.now()-1440*60*1e3;Object.keys(e.c).forEach(o=>{e.c[o]<s&&delete e.c[o]});const r=Object.keys(e.c);if(r.length>500){const o=r.sort((l,c)=>e.c[l]-e.c[c]);o.slice(0,o.length-500).forEach(l=>delete e.c[l])}const n=this.compactData(e);A(this.STORAGE_KEY,JSON.stringify(n))}catch(t){console.error("Error saving spaceship data:",t),t.name==="QuotaExceededError"&&this.performEmergencyCleanup()}}static performEmergencyCleanup(){const e=this.getData();e.c={},e.s={tc:0,tr:{a:0,e:0,d:0},tt:0},this.saveData(e)}static getResources(){const e=this.getData();return{antimatter:e.r.a,element115:e.r.e,deuterium:e.r.d}}static setResources(e){const t=this.getData(),s=t.u;t.r.a=Math.min(Math.max(0,e.antimatter),s.st),t.r.e=Math.min(Math.max(0,e.element115),s.st),t.r.d=Math.min(Math.max(0,e.deuterium),s.st),this.saveData(t)}static addResources(e){const t=this.getData(),s=t.u;t.r.a=Math.min(t.r.a+e.antimatter,s.st),t.r.e=Math.min(t.r.e+e.element115,s.st),t.r.d=Math.min(t.r.d+e.deuterium,s.st),t.s&&(t.s.tr=t.s.tr||{a:0,e:0,d:0},t.s.tr.a+=e.antimatter,t.s.tr.e+=e.element115,t.s.tr.d+=e.deuterium),this.saveData(t)}static consumeResources(e){const t=this.getData(),s={antimatter:Math.floor(e.antimatter/t.u.ef),element115:Math.floor(e.element115/t.u.ef),deuterium:Math.floor(e.deuterium/t.u.ef)};return t.r.a>=s.antimatter&&t.r.e>=s.element115&&t.r.d>=s.deuterium?(t.r.a-=s.antimatter,t.r.e-=s.element115,t.r.d-=s.deuterium,t.s&&(t.s.tt=(t.s.tt||0)+1),this.saveData(t),!0):!1}static getUpgrade(){const e=this.getData();return{level:e.u.l,efficiency:e.u.ef,range:e.u.rn,storage:e.u.st,multiplier:e.u.m}}static upgradeShip(e){const t=this.getData();if(t.u.l>=100)return!1;if(t.r.a>=e.antimatter&&t.r.e>=e.element115&&t.r.d>=e.deuterium){t.r.a-=e.antimatter,t.r.e-=e.element115,t.r.d-=e.deuterium,t.u.l+=1;let r=Math.min(4,1+(t.u.l-1)*.2),n=t.u.l<=25?500+(t.u.l-1)*200:5500+Math.floor(Math.log(t.u.l-25+1)*800);n=Math.min(n,25e3);let o=t.u.l<=20?1e3+(t.u.l-1)*400:1e3+20*400+Math.floor(Math.log(t.u.l-20+1)*1200);o=Math.min(o,5e4);let i=1+(t.u.l-1)*.242;return t.u.ef=Math.min(6,r),t.u.rn=Math.floor(n),t.u.st=Math.floor(o),t.u.m=Math.min(25,i),this.saveData(t),!0}return!1}static getLocationTypeFromId(e){return e.startsWith("planet_")?"planet":e.startsWith("system_")?"system":e.startsWith("galaxy_")?"galaxy":"planet"}static getCooldownForLocation(e){const t=this.getLocationTypeFromId(e);return this.COLLECTION_COOLDOWNS[t]}static canCollectFromLocationType(e,t){t||(t=this.getData());const s=new Date().toDateString();if(t.s&&t.s.lcd!==s&&(t.s.dcp=0,t.s.dcs=0,t.s.dcg=0,t.s.lcd=s,this.saveData(t)),!t.s)return!0;const r=this.DAILY_COLLECTION_LIMITS[e];return r===1/0?!0:(e==="planet"?t.s.dcp||0:e==="system"?t.s.dcs||0:t.s.dcg||0)<r}static canCollectFromLocation(e){const t=this.getData(),s=t.c[e];if(s){const n=Date.now(),o=this.getCooldownForLocation(e);if(n-s<o)return!1}const r=this.getLocationTypeFromId(e);return this.canCollectFromLocationType(r,t)}static getTimeUntilNextCollection(e){const s=this.getData().c[e];if(!s)return 0;const r=Date.now(),o=this.getCooldownForLocation(e)-(r-s);return o>0?o/(1e3*60*60):0}static markLocationCollected(e){const t=this.getData();t.c[e]=Date.now();const s=this.getLocationTypeFromId(e);this.updateDailyCollectionCounters(t,s),this.updateCollectionStreaks(t),this.saveData(t)}static updateDailyCollectionCounters(e,t){const s=new Date().toDateString();e.s||(e.s={tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0,dcp:0,dcs:0,dcg:0,lcd:s}),e.s.lcd!==s&&(e.s.dcp=0,e.s.dcs=0,e.s.dcg=0,e.s.lcd=s),t==="planet"?e.s.dcp=(e.s.dcp||0)+1:t==="system"?e.s.dcs=(e.s.dcs||0)+1:t==="galaxy"&&(e.s.dcg=(e.s.dcg||0)+1)}static updateCollectionStreaks(e){const t=Date.now(),s=new Date(t).toDateString(),r=e.t.lc?new Date(e.t.lc).toDateString():null;if(e.s||(e.s={tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0}),e.s.tc=(e.s.tc||0)+1,s!==r){const n=e.t.lc;if(e.t.lc=t,r&&n){const o=new Date(n),i=new Date(t),l=Math.floor((i.getTime()-o.getTime())/(1e3*60*60*24));l===1?e.s.cs=(e.s.cs||0)+1:l>1&&(e.s.cs=1)}else e.s.cs=1;e.s.dc=1}else e.s.dc=(e.s.dc||0)+1}static getCollectionStreakInfo(){const e=this.getData(),t=e.s?.cs||0,s=e.s?.dc||0,r=t>=3?1.25:1;return{currentStreak:t,dailyCollections:s,streakMultiplier:r}}static getCollectionCount(e){const t=this.getData();return Object.keys(t.c).filter(r=>r.startsWith(e.split("_")[0])).length}static shouldProcessPassive(){const e=this.getData(),t=Date.now(),s=e.t.lp||0;return t-s>=this.PASSIVE_INTERVAL}static markPassiveProcessed(){const e=this.getData();e.t.lp=Date.now(),this.saveData(e)}static getStats(){const e=this.getData();return{totalCollections:e.s?.tc||0,totalResourcesCollected:e.s?.tr||{antimatter:0,element115:0,deuterium:0},totalTravels:e.s?.tt||0}}static migrateFromOldStorage(){try{const e=["atlas_ship_resources","atlas_ship_upgrades","atlas_resource_collections","_atlasSpaceShip_collections","_atlasSpaceShip_lastPassive","atlas_last_resource_generation","atlas_last_passive_generation"];if(j(this.STORAGE_KEY))return;const s=localStorage.getItem("atlas_ship_resources"),r=localStorage.getItem("atlas_ship_upgrades"),n=localStorage.getItem("atlas_resource_collections")||localStorage.getItem("_atlasSpaceShip_collections"),o={...this.DEFAULT_DATA};if(s)try{const i=JSON.parse(s);o.r.a=i.antimatter||150,o.r.e=i.element115||100,o.r.d=i.deuterium||125}catch{}if(r)try{const i=JSON.parse(r);o.u.l=i.level||1,o.u.ef=i.efficiency||1,o.u.rn=i.range||300,o.u.st=i.storage||500,o.u.m=i.multiplier||i.passiveGeneration||1}catch{}if(n)try{const i=JSON.parse(n);Object.keys(i).forEach(l=>{i[l].lastCollected&&(o.c[i[l].id]=i[l].lastCollected)})}catch{}this.saveData(o),e.forEach(i=>{try{localStorage.removeItem(i)}catch{}}),console.log("Successfully migrated to unified spaceship storage")}catch(e){console.error("Error during migration:",e)}}static reset(){W(this.STORAGE_KEY)}static getStorageSize(){return(j(this.STORAGE_KEY)||"{}").length}static compactData(e){return{r:e.r,u:e.u,c:e.c,s:e.s,t:e.t}}static expandData(e){const t=Date.now(),s=1440*60*1e3,r={};return e.c&&Object.keys(e.c).forEach(o=>{const i=e.c[o],l=15778368e5,c=1893456e6;if(i===0){const u=t-s;r[o]=u}else if(i>=l&&i<=c)r[o]=i;else if(i>0&&i<86400*30){const u=t-i*1e3;r[o]=u}else r[o]=t-s}),{r:e.r||{a:300,e:200,d:250},u:e.u||{l:1,ef:1,rn:500,st:1e3,m:1},c:r,t:e.t||{},s:e.s||{tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0,dcp:0,dcs:0,dcg:0,lcd:new Date().toDateString()}}}static cleanCorruptedTimestamps(){const e=this.getData(),t=Date.now(),s=15778368e5,r=1893456e6,n=1440*60*1e3;let o=!1;Object.keys(e.c).forEach(i=>{const l=e.c[i];(l===0||l<s||l>r)&&(e.c[i]=t-n,o=!0)}),o&&this.saveData(e)}static getDailyCollectionInfo(){const e=this.getData(),t=new Date().toDateString();return e.s||(e.s={tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0,dcp:0,dcs:0,dcg:0,lcd:t},this.saveData(e)),e.s.lcd!==t&&(e.s.dcp=0,e.s.dcs=0,e.s.dcg=0,e.s.lcd=t,this.saveData(e)),{planets:{used:e.s.dcp||0,limit:this.DAILY_COLLECTION_LIMITS.planet,unlimited:this.DAILY_COLLECTION_LIMITS.planet===1/0},systems:{used:e.s.dcs||0,limit:this.DAILY_COLLECTION_LIMITS.system,unlimited:this.DAILY_COLLECTION_LIMITS.system===1/0},galaxies:{used:e.s.dcg||0,limit:this.DAILY_COLLECTION_LIMITS.galaxy,unlimited:this.DAILY_COLLECTION_LIMITS.galaxy===1/0}}}}const ge=Object.freeze(Object.defineProperty({__proto__:null,UnifiedSpaceshipStorage:w},Symbol.toStringTag,{value:"Module"}));class h{static initialize(){w.migrateFromOldStorage()}static getResources(){return w.getResources()}static getUpgrade(){return w.getUpgrade()}static addResources(e){w.addResources({antimatter:e.antimatter||0,element115:e.element115||0,deuterium:e.deuterium||0})}static consumeResources(e){return w.consumeResources(e)}static calculateTravelCost(e,t=0){const r={galaxy:{antimatter:25,element115:20,deuterium:15},system:{antimatter:8,element115:6,deuterium:10},planet:{antimatter:2,element115:1,deuterium:3}}[e],n=Math.max(1,t/100);return{antimatter:Math.floor(r.antimatter*n),element115:Math.floor(r.element115*n),deuterium:Math.floor(r.deuterium*n)}}static canAffordTravel(e,t=0){const s=this.calculateTravelCost(e,t),r=this.getResources(),n=this.getUpgrade(),o={antimatter:Math.floor(s.antimatter/n.efficiency),element115:Math.floor(s.element115/n.efficiency),deuterium:Math.floor(s.deuterium/n.efficiency)};return r.antimatter>=o.antimatter&&r.element115>=o.element115&&r.deuterium>=o.deuterium&&t<=n.range}static getUpgradeCost(e){let t;e<=20?t=1e3+(e-1)*400:t=1e3+20*400+Math.floor(Math.log(e-20+1)*1200);const r=Math.floor(t*.4/1.3),n=1+(e-1)*.01,o=Math.floor(r*n);return{antimatter:o,element115:Math.floor(o*1.3),deuterium:Math.floor(o*.9)}}static canAffordUpgrade(){const e=this.getUpgrade();if(e.level>=100)return!1;const s=this.getUpgradeCost(e.level),r=this.getResources();return r.antimatter>=s.antimatter&&r.element115>=s.element115&&r.deuterium>=s.deuterium}static upgradeShip(){const e=this.getUpgrade(),t=this.getUpgradeCost(e.level);return w.upgradeShip(t)}static calculatePassiveGeneration(){const e=this.getUpgrade(),t=JSON.parse(j("_atlasLocations")||"[]"),s=Array.isArray(t)?t:t.locations||[];let r={antimatter:0,element115:0,deuterium:0},n={planets:0,systems:0,galaxies:0};return s.forEach(o=>{o.type==="planet"?(n.planets++,r.antimatter+=3,r.element115+=2,r.deuterium+=3):o.type==="system"&&(n.systems++,r.antimatter+=1,r.element115+=1,r.deuterium+=1)}),r.antimatter=Math.floor(r.antimatter*e.multiplier),r.element115=Math.floor(r.element115*e.multiplier),r.deuterium=Math.floor(r.deuterium*e.multiplier),{...r,sources:n}}static processPassiveGeneration(){if(w.shouldProcessPassive()){const e=this.calculatePassiveGeneration();(e.antimatter>0||e.element115>0||e.deuterium>0)&&(this.addResources({antimatter:e.antimatter,element115:e.element115,deuterium:e.deuterium}),this.showPassiveGenerationNotification(e)),w.markPassiveProcessed()}}static getAccumulatedResourcesWithLimit(){const e=this.calculatePassiveGeneration(),t=this.getUpgrade(),s=this.getUpgradeCost(t.level),r={antimatter:s.antimatter*5,element115:s.element115*5,deuterium:s.deuterium*5},o=w.getData().t.lp,i=Date.now();if(!o||o===0||e.sources.planets===0&&e.sources.systems===0)return e;const l=Math.floor((i-o)/(60*1e3));return l<1?{antimatter:0,element115:0,deuterium:0,sources:e.sources}:l>=1?{antimatter:Math.min(e.antimatter*l,r.antimatter*2),element115:Math.min(e.element115*l,r.element115*2),deuterium:Math.min(e.deuterium*l,r.deuterium*2),sources:e.sources}:{antimatter:Math.min(e.antimatter*l,r.antimatter*2),element115:Math.min(e.element115*l,r.element115*2),deuterium:Math.min(e.deuterium*l,r.deuterium*2),sources:e.sources}}static showPassiveGenerationNotification(e){if(e.antimatter+e.element115+e.deuterium===0)return;const t=document.createElement("div");t.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-purple-900/90 to-blue-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-purple-500/50 w-[90vw] max-w-lg",t.style.animation="slideInDown 0.3s ease-out";const s=document.createElement("div");s.className="flex items-center space-x-3";const r=document.createElement("span");r.className="text-2xl",r.textContent="⛏️";const n=document.createElement("div"),o=document.createElement("div");o.className="text-sm font-bold text-purple-300",o.textContent="Mining Operations Complete!";const i=document.createElement("div");i.className="text-xs text-purple-200 mt-1 flex gap-3";const l=document.createElement("span");l.className="text-purple-300",l.textContent=`+${e.antimatter} AM`;const c=document.createElement("span");c.className="text-cyan-300",c.textContent=`+${e.element115} E115`;const u=document.createElement("span");u.className="text-orange-300",u.textContent=`+${e.deuterium} D`,i.appendChild(l),i.appendChild(c),i.appendChild(u);const p=document.createElement("div");if(p.className="text-xs text-purple-300 mt-1",p.textContent=`Collected from ${e.sources.planets}🪐 ${e.sources.systems}⭐`,n.appendChild(o),n.appendChild(i),n.appendChild(p),s.appendChild(r),s.appendChild(n),t.appendChild(s),!document.getElementById("collection-toast-styles")){const N=document.createElement("style");N.id="collection-toast-styles",N.textContent=`
        @keyframes slideInDown {
          from {
            transform: translate(-50%, -100%);
            opacity: 0;
          }
          to {
            transform: translate(-50%, 0);
            opacity: 1;
          }
        }
        @keyframes slideOutUp {
          from {
            transform: translate(-50%, 0);
            opacity: 1;
          }
          to {
            transform: translate(-50%, -100%);
            opacity: 0;
          }
        }
      `,document.head.appendChild(N)}document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideOutUp 0.3s ease-in forwards",setTimeout(()=>{t.remove()},300)},3e3)}static reset(){w.reset()}static getResourcesPercentage(){const e=this.getResources(),t=this.getUpgrade();return{antimatter:e.antimatter/t.storage*100,element115:e.element115/t.storage*100,deuterium:e.deuterium/t.storage*100}}static getPassiveGenerationInfo(){const e=this.calculatePassiveGeneration(),t=w.shouldProcessPassive()?0:(60*1e3-(Date.now()-(w.getData().t.lp||0)))/1e3;return{generation:e,perHour:{antimatter:e.antimatter*60,element115:e.element115*60,deuterium:e.deuterium*60},nextGenerationIn:Math.max(0,t)}}static getExchangeRates(){const e=this.getResources();return{antimatter:[{from:"antimatter",to:"element115",rate:1.2,available:e.antimatter},{from:"antimatter",to:"deuterium",rate:.8,available:e.antimatter}],element115:[{from:"element115",to:"antimatter",rate:.9,available:e.element115},{from:"element115",to:"deuterium",rate:1.1,available:e.element115}],deuterium:[{from:"deuterium",to:"antimatter",rate:1.3,available:e.deuterium},{from:"deuterium",to:"element115",rate:.95,available:e.deuterium}]}}static exchangeResources(e,t,s){const r=this.getResources(),i=this.getExchangeRates()[e].find(p=>p.to===t);if(!i||s<=0||r[e]<s)return!1;const l=Math.floor(s*i.rate),c=this.getUpgrade();if(r[t]+l>c.storage)return!1;const u={...r};return u[e]-=s,u[t]+=l,w.setResources(u),this.showExchangeNotification(e,t,s,l),!0}static showExchangeNotification(e,t,s,r){const n=document.createElement("div");n.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-amber-900/90 to-orange-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-amber-500/50",n.style.animation="slideInDown 0.3s ease-out";const o={antimatter:{name:"AM",color:"text-purple-300"},element115:{name:"E115",color:"text-cyan-300"},deuterium:{name:"D",color:"text-orange-300"}},i=o[e],l=o[t],c=document.createElement("div");c.className="flex items-center space-x-3";const u=document.createElement("span");u.className="text-2xl",u.textContent="🔄";const p=document.createElement("div"),N=document.createElement("div");N.className="text-sm font-bold text-amber-300",N.textContent="Resource Exchange";const v=document.createElement("div");v.className="text-xs text-amber-200 mt-1";const D=document.createElement("span");D.className=i.color,D.textContent=`-${s} ${i.name}`;const f=document.createElement("span");f.className="text-amber-300 mx-2",f.textContent="→";const S=document.createElement("span");S.className=l.color,S.textContent=`+${r} ${l.name}`,v.appendChild(D),v.appendChild(f),v.appendChild(S),p.appendChild(N),p.appendChild(v),c.appendChild(u),c.appendChild(p),n.appendChild(c),document.body.appendChild(n),setTimeout(()=>{n.style.animation="slideOutUp 0.3s ease-in forwards",setTimeout(()=>{n.remove()},300)},3e3)}}class ${static listeners=new Map;static subscribe(e,t){return this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t),()=>{const s=this.listeners.get(e);if(s){const r=s.indexOf(t);r>-1&&s.splice(r,1)}}}static emit(e,t){const s=this.listeners.get(e);s&&s.forEach(r=>{try{r(t)}catch(n){console.warn("Error in resource event callback:",n)}})}static clear(){this.listeners.clear()}}const R=({value:d,max:e,label:t,color:s="indigo",size:r="xs",showPercentage:n=!1})=>{const o=e>0?Math.min(d/e*100,100):0,i={indigo:{bg:"bg-indigo-500/20",fill:"bg-gradient-to-r from-indigo-500 to-indigo-400",text:"text-indigo-400"},blue:{bg:"bg-blue-500/20",fill:"bg-gradient-to-r from-blue-500 to-blue-400",text:"text-blue-400"},purple:{bg:"bg-purple-500/20",fill:"bg-gradient-to-r from-purple-500 to-purple-400",text:"text-purple-400"},cyan:{bg:"bg-cyan-500/20",fill:"bg-gradient-to-r from-cyan-500 to-cyan-400",text:"text-cyan-400"},green:{bg:"bg-green-500/20",fill:"bg-gradient-to-r from-green-500 to-green-400",text:"text-green-400"},orange:{bg:"bg-orange-500/20",fill:"bg-gradient-to-r from-orange-500 to-orange-400",text:"text-orange-400"},yellow:{bg:"bg-yellow-500/20",fill:"bg-gradient-to-r from-yellow-500 to-yellow-400",text:"text-yellow-400"}},l={xs:"h-1.5",sm:"h-2"},c=i[s]||i.indigo,u=l[r];return a.jsxs("div",{className:"w-full",children:[t&&a.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-400",children:t}),n&&a.jsxs("span",{className:`${c.text} font-medium`,children:[o.toFixed(0),"%"]})]}),a.jsx("div",{className:`w-full ${c.bg} rounded-full overflow-hidden ${u}`,children:a.jsx("div",{className:`${c.fill} ${u} rounded-full transition-all duration-700 ease-out shadow-sm`,style:{width:`${o}%`},children:a.jsx("div",{className:`w-full h-full ${c.fill} opacity-50 animate-pulse`})})})]})},he=({currentLocation:d})=>{const[e,t]=y.useState(!1),[s,r]=y.useState(!1),[n,o]=y.useState("stats"),[i,l]=y.useState(null),[c,u]=y.useState([]),[p,N]=y.useState(null),[v,D]=y.useState(null),[f,S]=y.useState({antimatter:0,element115:0,deuterium:0}),[b,k]=y.useState({level:1,efficiency:1,range:300,storage:500,multiplier:1}),[C,M]=y.useState({antimatter:0,element115:0,deuterium:0}),[g,E]=y.useState({antimatter:0,element115:0,deuterium:0,sources:{planets:0,systems:0,galaxies:0}}),[J,P]=y.useState(!1),V=y.useRef(null);y.useEffect(()=>{if(e){l(re()),u(I.getLocations()),N(I.getLocationStats());const m=T.updateProgress();D(m),S(h.getResources()),k(h.getUpgrade());const x=h.getUpgrade();M(h.getUpgradeCost(x.level));const _=h.getAccumulatedResourcesWithLimit();E(_)}},[e]),y.useEffect(()=>{if(!e)return;const m=()=>{const Z=h.getAccumulatedResourcesWithLimit();E(Z)},x=()=>{S(h.getResources())},_=setInterval(m,15e3),U=$.subscribe("resources_updated",x);return()=>{clearInterval(_),U()}},[e]);const F=()=>{r(!0),setTimeout(()=>{t(!1),r(!1)},300)},X=()=>{e?F():t(!0)};y.useEffect(()=>{const m=x=>{e&&!s&&V.current&&!V.current.contains(x.target)&&F()};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[e,s]);const q=m=>{if(m===0)return"0 B";const x=1024,_=["B","KB","MB"],U=Math.floor(Math.log(m)/Math.log(x));return parseFloat((m/Math.pow(x,U)).toFixed(2))+" "+_[U]},Y=m=>m.replace(/_/g," "),Q=(m,x)=>{m.stopPropagation(),I.removeLocation(x),u(I.getLocations()),N(I.getLocationStats())};return a.jsx(a.Fragment,{children:a.jsxs("div",{ref:V,className:"fixed bottom-4 sm:bottom-6 right-4 sm:right-6 z-50",children:[a.jsxs("button",{onClick:X,className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-600 via-purple-600 to-blue-800 hover:from-blue-500 hover:via-purple-500 hover:to-blue-700 text-white rounded-full shadow-2xl border-2 border-blue-400/30 transition-all duration-300 transform hover:scale-105 backdrop-blur-sm",title:"Spaceship Control Panel",children:[a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("svg",{className:"flex items-center justify-center",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",children:a.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[a.jsx("path",{d:"M12 3a6.02 6.02 0 0 0-5.923 4.9c-.086.466-.13.699.032 1.005c.161.307.39.409.847.613c1.38.614 3.134.982 5.044.982s3.665-.368 5.044-.982c.457-.204.686-.306.847-.613c.162-.306.118-.54.032-1.005A6.02 6.02 0 0 0 12 3"}),a.jsx("path",{d:"M17 5.5c2.989.788 5 2.26 5 3.945C22 11.961 17.523 14 12 14S2 11.96 2 9.445C2 7.76 4.011 6.288 7 5.5M12 18v3m5-4l1 4M7 17l-1 4"})]})})}),a.jsx("div",{className:"absolute inset-0 rounded-full bg-blue-400/20 animate-ping"})]}),e&&a.jsxs("div",{className:"fixed bottom-20 sm:bottom-24 right-2 sm:right-6 w-[calc(100vw-1rem)] sm:w-96 max-w-md max-h-[70vh] sm:max-h-96 bg-black/90 backdrop-blur-xl rounded-2xl border border-blue-400/30 shadow-2xl z-40 overflow-hidden transition-all duration-300 ease-out",style:{animation:s?"slideDownFadeOut 0.3s ease-out forwards":"slideUpFadeIn 0.3s ease-out forwards"},children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 p-4 border-b border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),a.jsx("h3",{className:"text-white font-bold text-lg",children:"🚀 Spaceship Control"})]}),a.jsx("button",{onClick:F,className:"text-gray-400 hover:text-white transition-colors duration-200",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex mt-3 space-x-1 overflow-x-auto",children:[a.jsx("button",{onClick:()=>o("stats"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 whitespace-nowrap ${n==="stats"?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:"📊 Stats"}),a.jsx("button",{onClick:()=>o("ship"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 whitespace-nowrap ${n==="ship"?"bg-green-500/30 text-green-300 border border-green-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:"🚀 Ship"}),a.jsxs("button",{onClick:()=>o("saved"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 whitespace-nowrap ${n==="saved"?"bg-purple-500/30 text-purple-300 border border-purple-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:["📍 Saved (",p?.total||0,")"]})]})]}),a.jsxs("div",{className:"p-4 max-h-64 overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[n==="stats"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"text-white font-semibold text-xs",children:"🌟 Daily Challenges"}),v&&a.jsxs("div",{className:"text-[10px] text-indigo-400 font-medium",children:["Day ",v.dayNumber," • x",T.getDayInfo().multiplier]})]}),v&&a.jsx("div",{className:"space-y-1.5 mb-2",children:v.challenges.map(m=>{const x={galaxies:"indigo",systems:"blue",planets:"purple"},_={galaxies:"Galaxies",systems:"Systems",planets:"Planets"};return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-0.5",children:_[m.type]}),a.jsx(R,{value:m.current,max:m.target,label:`${m.current}/${m.target}`,color:x[m.type],showPercentage:!0}),m.completed&&a.jsx("div",{className:"absolute -right-2 -top-1 text-white bg-green-500 px-0.5 rounded-full text-[8px]",children:"✓"})]},m.type)})}),v&&a.jsxs("div",{className:"grid grid-cols-2 gap-1 text-[10px] mb-2",children:[a.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Completed"}),a.jsxs("div",{className:"text-indigo-400 font-bold",children:[v.challenges.filter(m=>m.completed).length,"/",v.challenges.length]})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-green-500/20",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Atlas Size"}),a.jsx("div",{className:"text-green-400 font-bold",children:i?q(i.size):"0 B"})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold mb-2 text-xs",children:"📍 Saved Locations"}),a.jsxs("div",{className:"mb-2",children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-0.5",children:"Storage Usage"}),a.jsx(R,{value:p?.total||0,max:p?.maxAllowed||50,label:`${p?.total||0}/${p?.maxAllowed||50}`,color:"cyan",showPercentage:!0})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-1 text-[10px]",children:[a.jsxs("div",{className:"bg-white/5 rounded p-1 text-center",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Galaxies"}),a.jsx("div",{className:"text-indigo-400 font-bold",children:p?.galaxies||0})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1 text-center",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Systems"}),a.jsx("div",{className:"text-blue-400 font-bold",children:p?.systems||0})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1 text-center",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Planets"}),a.jsx("div",{className:"text-purple-400 font-bold",children:p?.planets||0})]})]}),a.jsx("div",{className:"text-[9px] text-gray-500 mt-1",children:"*Complete daily tasks to save more locations"})]})]}),n==="ship"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-white font-semibold mb-2 text-xs flex items-center gap-1",children:["⚡ Resources",a.jsxs("div",{className:"text-[10px] text-gray-400",children:["Lv.",b.level]})]}),a.jsxs("div",{className:"space-y-1 mb-2",children:[a.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-purple-500/20",children:[a.jsxs("div",{className:"flex justify-between text-[10px] mb-0.5",children:[a.jsx("span",{className:"text-purple-300",children:"Antimatter"}),a.jsxs("span",{className:"text-white font-mono",children:[f.antimatter,"/",b.storage]})]}),a.jsx(R,{value:f.antimatter,max:b.storage,label:"",color:"purple",showPercentage:!1})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[a.jsxs("div",{className:"flex justify-between text-[10px] mb-0.5",children:[a.jsx("span",{className:"text-cyan-300",children:"Element 115"}),a.jsxs("span",{className:"text-white font-mono",children:[f.element115,"/",b.storage]})]}),a.jsx(R,{value:f.element115,max:b.storage,label:"",color:"cyan",showPercentage:!1})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-orange-500/20",children:[a.jsxs("div",{className:"flex justify-between text-[10px] mb-0.5",children:[a.jsx("span",{className:"text-orange-300",children:"Deuterium"}),a.jsxs("span",{className:"text-white font-mono",children:[f.deuterium,"/",b.storage]})]}),a.jsx(R,{value:f.deuterium,max:b.storage,label:"",color:"orange",showPercentage:!1})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold mb-2 text-xs",children:"🔧 Ship Upgrade"}),a.jsxs("div",{className:"grid grid-cols-3 gap-1 text-[10px] mb-2",children:[a.jsxs("div",{className:"bg-white/5 rounded p-1 border border-blue-500/20",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Efficiency"}),a.jsxs("div",{className:"text-blue-400 font-bold",children:[b.efficiency.toFixed(1),"x"]})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1 border border-yellow-500/20",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Storage"}),a.jsx("div",{className:"text-yellow-400 font-bold",children:b.storage})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1 border border-indigo-500/20",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Multiplier"}),a.jsxs("div",{className:"text-indigo-400 font-bold",children:[b.multiplier.toFixed(1),"x"]})]})]}),b.level<100&&!h.canAffordUpgrade()&&a.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded p-1.5 mb-2",children:[a.jsx("div",{className:"text-[10px] text-red-300 font-semibold mb-0.5",children:"Missing resources:"}),a.jsxs("div",{className:"text-[9px] text-red-200 space-y-0.5",children:[C.antimatter>f.antimatter&&a.jsxs("div",{children:["• Need ",C.antimatter-f.antimatter," more Antimatter"]}),C.element115>f.element115&&a.jsxs("div",{children:["• Need ",C.element115-f.element115," more Element 115"]}),C.deuterium>f.deuterium&&a.jsxs("div",{children:["• Need ",C.deuterium-f.deuterium," more Deuterium"]})]})]}),a.jsx("button",{onClick:()=>{if(h.upgradeShip()){S(h.getResources()),k(h.getUpgrade());const m=h.getUpgrade();M(h.getUpgradeCost(m.level));const x=h.getAccumulatedResourcesWithLimit();E(x),$.emit("resources_updated")}},disabled:!h.canAffordUpgrade(),className:`w-full px-2 py-1.5 rounded text-[10px] font-medium transition-all duration-200 ${h.canAffordUpgrade()?"bg-gradient-to-r from-green-600/30 to-blue-600/30 hover:from-green-600/40 hover:to-blue-600/40 text-green-300 border border-green-500/50 hover:border-green-400/70 cursor-pointer":"bg-gray-700/30 text-gray-500 border border-gray-600/30 cursor-not-allowed"}`,children:b.level>=100?a.jsx("div",{className:"text-yellow-400",children:"🌟 MAX LEVEL - Ultimate Spaceship!"}):a.jsxs("div",{children:[a.jsxs("div",{className:"font-bold",children:["Upgrade to Level ",b.level+1]}),a.jsxs("div",{className:"opacity-80 flex gap-2 justify-center mt-0.5",children:[a.jsxs("span",{className:"text-purple-300",children:[C.antimatter,"AM"]}),a.jsxs("span",{className:"text-cyan-300",children:[C.element115,"E115"]}),a.jsxs("span",{className:"text-orange-300",children:[C.deuterium,"D"]})]})]})})]})]}),n==="saved"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-500/20 to-blue-500/20 rounded-lg p-2 border border-purple-500/30",children:[a.jsx("h4",{className:"text-white font-semibold text-xs flex items-center gap-1 mb-1",children:"⛏️ Mining Operations"}),g.sources.planets===0&&g.sources.systems===0?a.jsx("div",{className:"text-[10px] text-gray-400",children:"💡 Save planets and systems to enable mining operations"}):a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-1",children:[a.jsx("span",{className:"text-purple-300",children:"Generating/min:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("span",{className:"text-purple-300",children:["+",Math.round(b.multiplier*(g.sources.planets*3+g.sources.systems*1))," AM"]}),a.jsxs("span",{className:"text-cyan-300",children:["+",Math.round(b.multiplier*(g.sources.planets*2+g.sources.systems*1))," E115"]}),a.jsxs("span",{className:"text-orange-300",children:["+",Math.round(b.multiplier*(g.sources.planets*3+g.sources.systems*1))," D"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-2",children:[a.jsx("span",{className:"text-gray-400",children:"Ready to collect:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("span",{className:"text-purple-300",children:["+",g.antimatter," AM"]}),a.jsxs("span",{className:"text-cyan-300",children:["+",g.element115," E115"]}),a.jsxs("span",{className:"text-orange-300",children:["+",g.deuterium," D"]})]})]}),a.jsxs("button",{onClick:()=>{P(!0)},disabled:g.antimatter+g.element115+g.deuterium===0,className:`w-full px-2 py-1.5 rounded text-[10px] font-medium transition-all duration-200 ${g.antimatter+g.element115+g.deuterium>0?"bg-gradient-to-r from-purple-600/30 to-blue-600/30 hover:from-purple-600/40 hover:to-blue-600/40 text-purple-300 border border-purple-500/50 hover:border-purple-400/70 cursor-pointer":"bg-gray-700/30 text-gray-500 border border-gray-600/30 cursor-not-allowed"}`,children:["🚀 Collect From ",g.sources.planets,"🪐 ",g.sources.systems,"⭐"]})]})]}),a.jsx("div",{className:"space-y-1",children:c.length===0?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"No saved locations"}),a.jsx("div",{className:"text-gray-500 text-[10px]",children:"Use the 📍 button to save locations"})]}):c.map(m=>a.jsx("div",{className:"bg-white/5 hover:bg-white/10 rounded p-1.5 border border-white/10 hover:border-white/20 transition-all duration-200 group",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("a",{href:m.stargateUrl,className:"flex-1 min-w-0 hover:text-blue-300 transition-colors duration-200",title:`Navigate to ${Y(m.name)}`,children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsxs("div",{className:"text-[8px]",children:[m.type==="galaxy"&&"🌌",m.type==="system"&&"⭐",m.type==="planet"&&"🪐"]}),a.jsx("div",{className:"text-white text-[10px] font-medium truncate",children:Y(m.name)}),a.jsx("div",{className:"text-gray-500 text-[8px] shrink-0",children:(()=>{try{const x=new Date(m.timestamp);return isNaN(x.getTime())?"N/A":x.toLocaleDateString()}catch{return"N/A"}})()})]})}),a.jsx("button",{onClick:x=>Q(x,m.id),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-400 transition-all duration-200 ml-1",title:"Remove location",children:a.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},m.id))})]})]})]}),J&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl border border-purple-400/30 shadow-2xl w-full max-w-md",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 to-blue-600/20 p-4 border-b border-white/10 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:"⛏️ Mass Collection"}),a.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-white transition-colors duration-200",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"Collect resources from all your saved mining locations at once."}),a.jsxs("div",{className:"bg-white/5 rounded-lg p-3 mb-4",children:[a.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Available to collect:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${g.antimatter>0?"text-purple-300":"text-gray-500"}`,children:["+",g.antimatter]}),a.jsx("div",{className:"text-gray-500",children:"Antimatter"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${g.element115>0?"text-cyan-300":"text-gray-500"}`,children:["+",g.element115]}),a.jsx("div",{className:"text-gray-500",children:"Element 115"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${g.deuterium>0?"text-orange-300":"text-gray-500"}`,children:["+",g.deuterium]}),a.jsx("div",{className:"text-gray-500",children:"Deuterium"})]})]})]}),a.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["🌟 Sources: ",g.sources.planets," Planets, ",g.sources.systems," Systems"]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>P(!1),className:"flex-1 px-4 py-2 rounded-lg text-sm font-medium bg-gray-700/50 text-gray-300 hover:bg-gray-700/70 border border-gray-600/50 transition-all duration-200",children:"Cancel"}),a.jsx("button",{onClick:()=>{h.addResources({antimatter:g.antimatter,element115:g.element115,deuterium:g.deuterium}),h.showPassiveGenerationNotification(g);const m=JSON.parse(j("_atlasSpaceShip")||"{}");m.t||(m.t={}),m.t.lp=Date.now(),A("_atlasSpaceShip",JSON.stringify(m)),S(h.getResources());const x=h.getAccumulatedResourcesWithLimit();E(x),$.emit("resources_updated"),P(!1)},className:"flex-1 px-4 py-2 rounded-lg text-sm font-medium bg-gradient-to-r from-purple-600/30 to-blue-600/30 hover:from-purple-600/40 hover:to-blue-600/40 text-purple-300 border border-purple-500/50 hover:border-purple-400/70 transition-all duration-200",children:"🚀 Collect All"})]})]})]})})]})})},pe=()=>{const[d,e]=y.useState({antimatter:0,element115:0,deuterium:0}),[t,s]=y.useState(500),[r,n]=y.useState(!1);y.useEffect(()=>{const l=()=>{e(h.getResources()),s(h.getUpgrade().storage)};l();const c=setInterval(l,5e3),u=$.subscribe("resources_updated",l);return()=>{clearInterval(c),u()}},[]);const o=l=>l>=1e3?`${(l/1e3).toFixed(1)}k`:l.toString(),i=l=>l/t*100;return a.jsx("div",{className:"fixed top-0 left-0 right-0 z-50",children:a.jsxs("div",{className:`flex w-full transition-all duration-300 ease-out backdrop-blur-md ${r?"h-16":"h-1.5"} group`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[a.jsxs("div",{className:"w-1/3 relative bg-purple-900/30 backdrop-blur-md border-r border-white/20 overflow-hidden",children:[a.jsx("div",{className:"absolute left-0 h-full bg-gradient-to-r from-purple-600 to-purple-400 transition-all duration-300",style:{width:`${i(d.antimatter)}%`}}),r&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white p-2",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs font-semibold text-purple-300 mb-1",children:"Antimatter"}),a.jsx("div",{className:"text-xs text-white font-mono",children:o(d.antimatter)})]})})]}),a.jsxs("div",{className:"w-1/3 relative bg-cyan-900/30 backdrop-blur-md border-r border-white/20 overflow-hidden",children:[a.jsx("div",{className:"absolute left-0 h-full bg-gradient-to-r from-cyan-600 to-cyan-400 transition-all duration-300",style:{width:`${i(d.element115)}%`}}),r&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white p-2",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs font-semibold text-cyan-300 mb-1",children:"Element 115"}),a.jsx("div",{className:"text-xs text-white font-mono",children:o(d.element115)})]})})]}),a.jsxs("div",{className:"w-1/3 relative bg-orange-900/30 backdrop-blur-md overflow-hidden",children:[a.jsx("div",{className:"absolute left-0 h-full bg-gradient-to-r from-orange-600 to-orange-400 transition-all duration-300",style:{width:`${i(d.deuterium)}%`}}),r&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white p-2",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs font-semibold text-orange-300 mb-1",children:"Deuterium"}),a.jsx("div",{className:"text-xs text-white font-mono",children:o(d.deuterium)})]})})]})]})})};class xe{static getTravelCost(e,t=0){return h.calculateTravelCost(e,t)}static canAffordTravel(e,t=0){return!0}static executeTravel(e,t=0){const s=this.getTravelCost(e,t),r=h.getResources(),n=h.getUpgrade(),o={antimatter:Math.floor(s.antimatter/n.efficiency),element115:Math.floor(s.element115/n.efficiency),deuterium:Math.floor(s.deuterium/n.efficiency)},i=[r.antimatter/o.antimatter,r.element115/o.element115,r.deuterium/o.deuterium],l=Math.min(...i);return l>=1?(h.consumeResources(o),"success"):l>=.5?(h.consumeResources({antimatter:Math.min(r.antimatter,o.antimatter),element115:Math.min(r.element115,o.element115),deuterium:Math.min(r.deuterium,o.deuterium)}),"partial"):"emergency"}static previewTravelCost(e,t=0){const s=this.getTravelCost(e,t),r=h.getUpgrade(),n={antimatter:Math.floor(s.antimatter/r.efficiency),element115:Math.floor(s.element115/r.efficiency),deuterium:Math.floor(s.deuterium/r.efficiency)};return`${n.antimatter}AM | ${n.element115}E115 | ${n.deuterium}D`}static getTravelEfficiency(){return h.getUpgrade().efficiency}static getMaxTravelRange(){return h.getUpgrade().range}}export{pe as F,ie as H,I as L,$ as R,he as S,w as U,xe as a,me as b,ce as c,de as d,ge as e,ue as g,le as m};
