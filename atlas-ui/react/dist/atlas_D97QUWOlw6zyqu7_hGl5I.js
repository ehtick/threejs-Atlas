import{r as i,j as e,H as _e,V as Ie,c as Ge,R as Ye}from"./atlas_DVrnBBsgS-kH5xseABxRO.js";import{S as je,C as Ne,P as Se,W as Ee,G as Me,c as Z,M as Q,d as U,V as pe,e as Ce,L as Re,g as ke,A as Le,k as De,h as Ae,i as ze,j as Pe,l as Fe}from"./atlas_JzQmrLPlfVl9nkKnI5Ba8.js";import{U as Oe}from"./atlas_QBkh70FCifb1U4lxZZBFq.js";const Ve=({planets:l,stars:a,systemName:j,cosmicOriginTime:S,currentTime:R,onTimeOffsetChange:b})=>{const z=i.useRef(null),v=i.useRef(null),y=i.useRef(null),p=i.useRef(null),P=i.useRef([]),T=i.useRef([]),n=i.useRef([]),k=i.useRef(0),H=(M,A="#ffffff")=>{const f=document.createElement("canvas"),o=f.getContext("2d");if(!o)return null;f.width=768,f.height=192,o.fillStyle="rgba(0, 0, 0, 0.8)",o.fillRect(0,0,f.width,f.height),o.strokeStyle="#ffffff",o.lineWidth=3,o.strokeRect(3,3,f.width-6,f.height-6),o.fillStyle=A,o.font="bold 48px Arial",o.textAlign="center",o.textBaseline="middle",o.fillText(M,384,96);const d=new Ae(f),N=new ze({map:d,transparent:!0,alphaTest:.1}),G=new Pe(N);return G.scale.set(30,7.5,1),G};return k.current=R,i.useEffect(()=>{if(!z.current)return;const M=z.current,A=M.clientWidth,f=M.clientHeight,o=new je;o.background=new Ne(17),v.current=o;const d=new Se(60,A/f,.1,1e4);d.position.set(0,120,180),d.lookAt(0,0,0);const N=new Ee({antialias:!0,alpha:!0});N.setSize(A,f),N.setClearColor(17,1),y.current=N,M.appendChild(N.domElement);const G={"Gas Giant":"#FFA500",Anomaly:"#FFFFFF",Rocky:"#808080",Icy:"#ADD8E6",Oceanic:"#0000FF",Desert:"#FFD700",Lava:"#FF0000",Arid:"#800000",Swamp:"#008000",Tundra:"#F0F8FF",Forest:"#006400",Savannah:"#F4A460",Cave:"#D1D1D1",Crystalline:"#00FFFF",Metallic:"#C0C0C0",Toxic:"#800080",Radioactive:"#00FF00",Magma:"#FF4500","Molten Core":"#FF8C00",Carbon:"#090909",Diamond:"#87CEFA","Super Earth":"#90EE90","Sub Earth":"#006400","Frozen Gas Giant":"#ADD8E6",Nebulous:"#FFC0CB",Aquifer:"#00FFFF",Exotic:"#FF00FF"},ce={red:"#FF4444",orange:"#FF8844",yellow:"#FFFF44",white:"#FFFFFF",blue:"#4488FF",purple:"#8844FF"},w=new Me;a.forEach((t,g)=>{const h=parseFloat(t.Size)*4,s=new Z(h,32,32),m=ce[t.Color]||"#FFFF44",x=new Q({color:m,transparent:!0,opacity:.9}),u=new U(s,x);a.length===1?u.position.set(0,0,0):a.length===2?u.position.set(g===0?-h*2:h*2,0,0):g===0?u.position.set(-h*2,0,0):g===1?u.position.set(h*2,0,0):u.position.set(0,h*2,0);const _=new Z(h*1.5,32,32),Y=new Q({color:m,transparent:!0,opacity:.3}),D=new U(_,Y);u.add(D),w.add(u)}),o.add(w);const L=Math.max(...l.map(t=>t.orbital_radius)),r=150;l.forEach((t,g)=>{const s=30+t.orbital_radius/L*r,m=t.eccentricity_factor,x=s,u=x*Math.sqrt(1-m*m),_=360,Y=2,D=4;for(let le=0;le<_;le+=Y+D){const xe=[];for(let X=le;X<Math.min(le+Y,_-1);X++){const $=X/_*2*Math.PI,K=x*Math.cos($),se=u*Math.sin($);xe.push(new pe(K,0,se))}if(xe.length>1){const X=new Ce().setFromPoints(xe),$=new Re({color:7372944,transparent:!0,opacity:.8,linewidth:2}),K=new ke(X,$);o.add(K),T.current.push(K)}}const V=t.diameter/8e3,W=Math.max(Math.min(V,8),2.5),te=new Z(W,32,32),ie=G[t.planet_type]||"#FFFFFF",he=new Q({color:ie,transparent:!0,opacity:.9}),B=new U(te,he),be=new U(new Z(W*1.5,32,32),new Q({color:ie,transparent:!0,opacity:.2}));B.add(be),o.add(B),P.current.push(B),B.planetData=t,B.orbitRadius=s,B.semiMajorAxis=x,B.semiMinorAxis=u;const ye=t.name.replace(/_/g," "),I=H(ye,"#ffffff");I&&(I.position.copy(B.position),I.position.y+=W+10,I.planetData=t,o.add(I),n.current.push(I))});const c=new Le(4210752,.4);o.add(c);const C=new De(16777215,1,2e3);C.position.set(0,0,0),o.add(C);let E=!1,O=0,q=0,J=0;const fe=t=>{E=!0,O=t.clientX,q=t.clientY},ge=t=>{if(!E)return;const g=t.clientX-O,h=t.clientY-q,s=new Fe;s.setFromVector3(d.position),s.theta-=g*.01,s.phi+=h*.01,s.phi=Math.max(.1,Math.min(Math.PI-.1,s.phi)),d.position.setFromSpherical(s),d.lookAt(0,0,0),O=t.clientX,q=t.clientY},ae=()=>{E=!1,setTimeout(()=>{},3e3)},de=t=>{if(t.ctrlKey)t.preventDefault(),t.deltaY>0?b(604800):b(-604800);else{t.preventDefault();const g=.1,h=d.position.distanceTo(new pe(0,0,0));t.deltaY>0&&h<800?d.position.multiplyScalar(1+g):t.deltaY<0&&h>50&&d.position.multiplyScalar(1-g)}},ne=t=>{t.key==="Escape"&&document.dispatchEvent(new CustomEvent("solar-system-close-fullscreen"))},re=t=>{if(t.preventDefault(),t.touches.length===1)E=!0,O=t.touches[0].clientX,q=t.touches[0].clientY;else if(t.touches.length===2){const g=t.touches[0].clientX-t.touches[1].clientX,h=t.touches[0].clientY-t.touches[1].clientY;J=Math.sqrt(g*g+h*h)}},oe=t=>{if(t.preventDefault(),t.touches.length===1&&E){const g=t.touches[0].clientX-O,h=t.touches[0].clientY-q,s=new Fe;s.setFromVector3(d.position),s.theta-=g*.01,s.phi+=h*.01,s.phi=Math.max(.1,Math.min(Math.PI-.1,s.phi)),d.position.setFromSpherical(s),d.lookAt(0,0,0),O=t.touches[0].clientX,q=t.touches[0].clientY}else if(t.touches.length===2){const g=t.touches[0].clientX-t.touches[1].clientX,h=t.touches[0].clientY-t.touches[1].clientY,s=Math.sqrt(g*g+h*h);if(J>0){const x=s/J,u=d.position.distanceTo(new pe(0,0,0));x>1&&u>50?d.position.multiplyScalar(1-.01):x<1&&u<800&&d.position.multiplyScalar(1+.01)}J=s}},me=t=>{t.preventDefault(),E=!1,J=0,setTimeout(()=>{},3e3)},F=N.domElement;F.style.cursor="grab",F.addEventListener("mousedown",t=>{F.style.cursor="grabbing",fe(t)}),F.addEventListener("mousemove",ge),F.addEventListener("mouseup",()=>{F.style.cursor="grab",ae()}),F.addEventListener("mouseleave",()=>{F.style.cursor="grab",ae()}),F.addEventListener("wheel",de),F.addEventListener("touchstart",re,{passive:!1}),F.addEventListener("touchmove",oe,{passive:!1}),F.addEventListener("touchend",me,{passive:!1}),document.addEventListener("keydown",ne);const ee=()=>{p.current=requestAnimationFrame(ee),P.current.forEach((t,g)=>{const h=t.planetData,s=t.semiMajorAxis,m=t.semiMinorAxis,x=h.orbital_period_seconds,u=2*Math.PI/x,_=(h.initial_orbital_angle+k.current*u)%(2*Math.PI);t.position.x=s*Math.cos(_),t.position.z=m*Math.sin(_),t.position.y=0;const Y=h.rotation_period_seconds,D=2*Math.PI/Y;if(t.rotation.y=k.current*D%(2*Math.PI),n.current[g]){const V=t.geometry.parameters?.radius||2;n.current[g].position.copy(t.position),n.current[g].position.y+=V+10}}),N.render(o,d)};ee();const ue=()=>{const t=M.clientWidth,g=M.clientHeight;d.aspect=t/g,d.updateProjectionMatrix(),N.setSize(t,g)};return window.addEventListener("resize",ue),()=>{window.removeEventListener("resize",ue),document.removeEventListener("keydown",ne),F.removeEventListener("mousedown",fe),F.removeEventListener("mousemove",ge),F.removeEventListener("mouseup",ae),F.removeEventListener("mouseleave",ae),F.removeEventListener("wheel",de),F.removeEventListener("touchstart",re),F.removeEventListener("touchmove",oe),F.removeEventListener("touchend",me),p.current&&cancelAnimationFrame(p.current),M&&N.domElement&&M.removeChild(N.domElement),N.dispose(),P.current=[],T.current=[],n.current=[]}},[l,a,S]),e.jsx("div",{ref:z,className:"w-full h-full"})},Xe=({planets:l,stars:a,systemName:j,cosmicOriginTime:S})=>{const R=i.useRef(null),b=i.useRef(null),z=i.useRef(null),v=i.useRef(null),y=i.useRef([]),p=i.useRef([]),P=i.useRef([]),T=i.useRef(0),n=Math.floor(Date.now()/1e3),[k,H]=i.useState(0),[M,A]=i.useState(!1),[f,o]=i.useState(0),d=n-S+k;T.current=d;const N=(w,L="#ffffff")=>{const r=document.createElement("canvas"),c=r.getContext("2d");if(!c)return null;r.width=512,r.height=128,c.fillStyle="rgba(0, 0, 0, 0.7)",c.fillRect(0,0,r.width,r.height),c.strokeStyle="#ffffff",c.lineWidth=2,c.strokeRect(2,2,r.width-4,r.height-4),c.fillStyle=L,c.font="bold 32px Arial",c.textAlign="center",c.textBaseline="middle",c.fillText(w,256,64);const C=new Ae(r),E=new ze({map:C,transparent:!0,alphaTest:.1}),O=new Pe(E);return O.scale.set(20,5,1),O};i.useEffect(()=>{const w=()=>{A(!1)},L=r=>{r.key==="Escape"&&M&&A(!1)};return M&&o(k),document.addEventListener("solar-system-close-fullscreen",w),document.addEventListener("keydown",L),()=>{document.removeEventListener("solar-system-close-fullscreen",w),document.removeEventListener("keydown",L)}},[M,k]),i.useEffect(()=>{if(!R.current)return;const w=R.current,L=w.clientWidth,r=L<640,c=new je;c.background=new Ne(17),b.current=c;const C=new Se(45,L/(r?120:140),.1,1e4);C.position.set(0,80,120),C.lookAt(0,0,0);const E=new Ee({antialias:!0,alpha:!0});E.setSize(L,r?120:140),E.setClearColor(17,1),z.current=E,w.appendChild(E.domElement);const O={"Gas Giant":"#FFA500",Anomaly:"#FFFFFF",Rocky:"#808080",Icy:"#ADD8E6",Oceanic:"#0000FF",Desert:"#FFD700",Lava:"#FF0000",Arid:"#800000",Swamp:"#008000",Tundra:"#F0F8FF",Forest:"#006400",Savannah:"#F4A460",Cave:"#D1D1D1",Crystalline:"#00FFFF",Metallic:"#C0C0C0",Toxic:"#800080",Radioactive:"#00FF00",Magma:"#FF4500","Molten Core":"#FF8C00",Carbon:"#090909",Diamond:"#87CEFA","Super Earth":"#90EE90","Sub Earth":"#006400","Frozen Gas Giant":"#ADD8E6",Nebulous:"#FFC0CB",Aquifer:"#00FFFF",Exotic:"#FF00FF"},q={red:"#FF4444",orange:"#FF8844",yellow:"#FFFF44",white:"#FFFFFF",blue:"#4488FF",purple:"#8844FF"},J=new Me;a.forEach((s,m)=>{const x=parseFloat(s.Size)*3,u=new Z(x,16,16),_=q[s.Color]||"#FFFF44",Y=new Q({color:_,transparent:!0,opacity:.9}),D=new U(u,Y);a.length===1?D.position.set(0,0,0):a.length===2?D.position.set(m===0?-x*2:x*2,0,0):m===0?D.position.set(-x*2,0,0):m===1?D.position.set(x*2,0,0):D.position.set(0,x*2,0);const V=new Z(x*1.5,16,16),W=new Q({color:_,transparent:!0,opacity:.3}),te=new U(V,W);D.add(te),J.add(D)}),c.add(J);const fe=Math.max(...l.map(s=>s.orbital_radius)),ge=80;l.forEach((s,m)=>{const u=20+s.orbital_radius/fe*ge,_=s.eccentricity_factor,Y=u,D=Y*Math.sqrt(1-_*_),V=360,W=2,te=4;for(let $=0;$<V;$+=W+te){const K=[];for(let se=$;se<Math.min($+W,V-1);se++){const we=se/V*2*Math.PI,ve=Y*Math.cos(we),Te=D*Math.sin(we);K.push(new pe(ve,0,Te))}if(K.length>1){const se=new Ce().setFromPoints(K),we=new Re({color:7372944,transparent:!0,opacity:.8,linewidth:2}),ve=new ke(se,we);c.add(ve),p.current.push(ve)}}const ie=s.diameter/15e3,he=Math.max(Math.min(ie,4),1.5),B=new Z(he,16,16),be=O[s.planet_type]||"#FFFFFF",ye=new Q({color:be,transparent:!0,opacity:.9}),I=new U(B,ye),le=new U(new Z(he*1.5,16,16),new Q({color:be,transparent:!0,opacity:.2}));I.add(le),c.add(I),y.current.push(I),I.planetData=s,I.orbitRadius=u,I.semiMajorAxis=Y,I.semiMinorAxis=D;const xe=s.name.replace(/_/g," "),X=N(xe,"#ffffff");X&&(X.position.copy(I.position),X.position.y+=he+6,X.planetData=s,c.add(X),P.current.push(X))});const ae=new Le(4210752,.4);c.add(ae);const de=new De(16777215,1,1e3);de.position.set(0,0,0),c.add(de);let ne=!1,re=0,oe=0;const me=s=>{ne=!0,re=s.clientX,oe=s.clientY},F=s=>{if(!ne)return;const m=s.clientX-re,x=s.clientY-oe,u=new Fe;u.setFromVector3(C.position),u.theta-=m*.01,u.phi+=x*.01,u.phi=Math.max(.1,Math.min(Math.PI-.1,u.phi)),C.position.setFromSpherical(u),C.lookAt(0,0,0),re=s.clientX,oe=s.clientY},ee=()=>{ne=!1,setTimeout(()=>{},3e3)},ue=s=>{if(s.ctrlKey)s.preventDefault(),s.deltaY>0?H(m=>m+604800):H(m=>m-604800);else{s.preventDefault();const m=.1,x=C.position.distanceTo(new pe(0,0,0));s.deltaY>0&&x<500?C.position.multiplyScalar(1+m):s.deltaY<0&&x>20&&C.position.multiplyScalar(1-m)}},t=E.domElement;t.style.cursor="grab",t.style.borderRadius="8px",t.addEventListener("mousedown",s=>{t.style.cursor="grabbing",me(s)}),t.addEventListener("mousemove",F),t.addEventListener("mouseup",()=>{t.style.cursor="grab",ee()}),t.addEventListener("mouseleave",()=>{t.style.cursor="grab",ee()}),t.addEventListener("wheel",ue);const g=()=>{v.current=requestAnimationFrame(g),y.current.forEach((s,m)=>{const x=s.planetData,u=s.semiMajorAxis,_=s.semiMinorAxis,Y=x.orbital_period_seconds,D=2*Math.PI/Y,V=(x.initial_orbital_angle+T.current*D)%(2*Math.PI);s.position.x=u*Math.cos(V),s.position.z=_*Math.sin(V),s.position.y=0;const W=x.rotation_period_seconds,te=2*Math.PI/W;if(s.rotation.y=T.current*te%(2*Math.PI),P.current[m]){const ie=s.geometry.parameters?.radius||2;P.current[m].position.copy(s.position),P.current[m].position.y+=ie+6}}),E.render(c,C)};g();const h=()=>{const s=w.clientWidth,m=s<640?120:140;C.aspect=s/m,C.updateProjectionMatrix(),E.setSize(s,m)};return window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h),t.removeEventListener("mousedown",me),t.removeEventListener("mousemove",F),t.removeEventListener("mouseup",ee),t.removeEventListener("mouseleave",ee),t.removeEventListener("wheel",ue),v.current&&cancelAnimationFrame(v.current),w&&E.domElement&&w.removeChild(E.domElement),E.dispose(),y.current=[],p.current=[],P.current=[]}},[l,a,S]);const G=w=>{const L=Math.floor(w/31557600),r=Math.floor(w%(365.25*24*3600)/(24*3600)),c=Math.floor(w%(24*3600)/3600);return L>0?`${L}y ${r}d ${c}h`:r>0?`${r}d ${c}h`:`${c}h`},ce=w=>w.replace(/_/g," ");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Solar System Simulation"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:R,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsxs("button",{onClick:()=>A(!0),className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 flex items-center gap-1 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:[e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),e.jsx("span",{className:"text-xs text-white hidden sm:inline",children:"Expand"})]})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:"Star(s)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsxs("span",{className:"text-[10px]",children:[l.length," Planets"]})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:["Time: ",G(d)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom • Ctrl+Scroll: +1week/-1week • Drag: Rotate View"})]})]}),M&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-xl",children:e.jsxs("div",{className:"w-full h-full flex flex-col p-1 sm:p-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white truncate",children:ce(j)}),e.jsxs("div",{className:"hidden sm:flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Star(s)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-300",children:[l.length," Planets"]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Time: ",G(n-S+f)]})]}),e.jsxs("div",{className:"sm:hidden text-xs text-gray-400",children:[l.length,"P • ",G(n-S+f)]})]}),e.jsx("button",{onClick:()=>A(!1),className:"p-1.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded-lg transition-colors duration-200 text-red-400 hover:text-red-300 flex-shrink-0",title:"Close fullscreen (ESC)",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-2 sm:mb-4 px-2 sm:px-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-400 min-w-fit",children:"-15y"}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"range",min:-15*365.25*24*3600,max:15*365.25*24*3600,step:604800,value:f,onChange:w=>o(Number(w.target.value)),className:`w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer 
                               [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 
                               [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-blue-400 
                               [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-blue-600
                               [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:shadow-lg`}),e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-0.5 h-2 bg-yellow-400 rounded"})]}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-400 min-w-fit",children:"+15y"}),e.jsx("button",{onClick:()=>o(0),className:"px-2 py-1 text-xs bg-gray-600 hover:bg-gray-500 text-white rounded transition-colors duration-200",title:"Reset to current time",children:"Now"})]}),e.jsxs("div",{className:"text-center text-xs text-gray-500 mt-1",children:["Time Travel: ",f===0?"Present":f>0?`+${Math.abs(f/(365.25*24*3600)).toFixed(1)} years`:`-${Math.abs(f/(365.25*24*3600)).toFixed(1)} years`," • Range: 30 years"]})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(Ve,{planets:l,stars:a,systemName:j,cosmicOriginTime:S,currentTime:n-S+f,onTimeOffsetChange:w=>o(L=>L+w)})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Ctrl+Scroll: +1week/-1week • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})})]})},He=({system:l,galaxy:a,systemIndex:j,cosmicOriginTime:S})=>{const R=b=>b.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"System Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300 capitalize",children:l.star_system_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Planets"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:l.num_planets})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-orange-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Stars"}),e.jsx("div",{className:"text-sm font-bold text-orange-300",children:l.stars.length})]})]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-3",children:e.jsx(Xe,{planets:l.planets,stars:l.stars,systemName:l.name,cosmicOriginTime:S})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-yellow-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Stellar Composition"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-1",children:l.stars.map((b,z)=>e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-yellow-500/20",children:[e.jsxs("div",{className:"text-xs text-gray-300",children:["Star ",z+1]}),e.jsx("div",{className:"text-xs font-bold text-yellow-300",children:b.Type}),e.jsxs("div",{className:"text-xs text-gray-300",children:[b.Color," • ",b.Size]})]},z))})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"System:"}),e.jsx("div",{className:"text-white truncate font-medium",children:R(l.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"System ID:"}),e.jsxs("div",{className:"text-white font-medium",children:["#",j+1]})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:R(a.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:a.coordinates.join(", ")})]})]})]})]})},We=({systemUrl:l,imageUrl:a})=>{const j=i.useRef(null),S=i.useRef(null),[R,b]=i.useState("Aligning Stargate..."),[z,v]=i.useState(!1),[y,p]=i.useState(!1),[P,T]=i.useState(!1);return i.useEffect(()=>{const n=document.createElement("style");return n.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(n),()=>{document.head.removeChild(n)}},[]),i.useEffect(()=>{const n=j.current;if(!n)return;const k=n.getContext("2d");if(!k)return;let H=[];const M=800;let A,f;const o=800;let d,N=.5;function G(){const r=n?.parentElement;if(!r||!n)return;const c=r.clientWidth,C=r.clientHeight;n.width=Math.min(c,o),n.height=Math.min(C,o),A=n.width/2,f=n.height/2}function ce(){G(),H=[];for(let r=0;r<M;r++)H.push({x:Math.random()*(n?.width||800),y:Math.random()*(n?.height||800),z:Math.random()*(n?.width||800),o:Math.random()});w()}function w(){!n||!k||(k.clearRect(0,0,n.width,n.height),H.forEach(r=>{r.z-=N,r.z<=0&&(r.z=n.width,r.x=Math.random()*n.width,r.y=Math.random()*n.height,r.o=Math.random());const c=n.width/r.z,C=(r.x-A)*c+A,E=(r.y-f)*c+f,O=2*c;k.beginPath(),k.fillStyle=`rgba(255, 255, 255, ${r.o})`,k.arc(C,E,O,0,2*Math.PI),k.fill()}),N<60&&(N+=1),d=requestAnimationFrame(w))}ce();const L=()=>G();return window.addEventListener("resize",L),()=>{window.removeEventListener("resize",L),d&&cancelAnimationFrame(d)}},[]),i.useEffect(()=>{if(a){console.log("Loading system image:",a);const n=new Image;n.onload=()=>{console.log("System image loaded successfully"),S.current&&(S.current.src=a,p(!0),T(!0))},n.onerror=()=>{console.error("Failed to load system image:",a),setTimeout(()=>{p(!0),T(!0)},1500)},n.src=a}else console.log("No imageUrl provided, using placeholder"),setTimeout(()=>{p(!0),T(!0)},1500)},[a]),i.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){b("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),v(!0);const k=(o,d)=>Array.from({length:d},()=>o[Math.floor(Math.random()*o.length)]).join(""),H=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:30},{chars:"0123456789ABCDEF",duration:20,iterations:40},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:\\'\",.<>?/`~",duration:10,iterations:100}];let M=0,A=0;const f=()=>{if(M>=H.length){const d="Stargate system aligned";let N=0;b("");const G=()=>{N<d.length?(b(d.substring(0,N+1)),N++,setTimeout(G,30)):v(!1)};G();return}const o=H[M];b(k(o.chars,32)),A++,A>=o.iterations&&(M++,A=0),setTimeout(f,o.duration)};f()},[]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3",children:"System Visualization"}),e.jsxs("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:[e.jsx("canvas",{ref:j,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${P?"opacity-0":"opacity-100"}`,style:{filter:P?"blur(50px)":"none"}}),e.jsx("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${y?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:y&&a?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Oe,{zoomMargin:20,classDialog:"backdrop-blur-3xl",children:e.jsx("img",{ref:S,className:"max-w-full max-h-full object-contain rounded-xl shadow-2xl shadow-blue-500/20",src:a,alt:"System visualization",style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:"transparent"}})})}):e.jsx("img",{ref:S,className:"w-full h-full object-cover",src:"/static/images/placeholder-min.jpg",alt:"System visualization"})})]}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:l,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${z?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),R]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]})]})},Be=({planets:l,coordinates:a,systemIndex:j})=>{const[S,R]=i.useState(new Set);i.useEffect(()=>{(()=>{try{const T=(JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}")[a]||{})[j.toString()]||[],n=new Set;T.forEach(k=>{n.add(k.toLowerCase())}),R(n)}catch(p){console.error("Error loading historical data:",p)}})(),(()=>{try{let p=JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}");p[a]||(p[a]={}),p[a][j.toString()]||(p[a][j.toString()]=[]),localStorage.setItem("atlasHistoricalData",JSON.stringify(p))}catch(p){console.error("Error saving historical data:",p)}})()},[a,j]);const b=v=>v.replace(/_/g," "),z=v=>{try{let y=JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}");y[a]||(y[a]={}),y[a][j.toString()]||(y[a][j.toString()]=[]);const p=v.toLowerCase();y[a][j.toString()].includes(p)||(y[a][j.toString()].push(p),localStorage.setItem("atlasHistoricalData",JSON.stringify(y)))}catch(y){console.error("Error marking planet as visited:",y)}window.location.href=`/planet/${v.toLowerCase()}`};return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:l.map(v=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[S.has(v.name.toLowerCase())&&e.jsx("div",{className:"absolute left-0 top-0 w-1 h-full bg-cyan-400 rounded-l-lg opacity-100 transition-opacity duration-300",style:{background:"linear-gradient(180deg, #00d4ff 0%, #00a0ff 100%)"}}),e.jsxs("button",{onClick:()=>z(v.name),className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Planet"}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:b(v.name)})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},v.name))}),l.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No planets found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This system appears to be empty"})]})]})},$e=({system:l,galaxy:a,system_url:j,version:S,system_index:R,image_url:b,page:z,cosmic_origin_time:v})=>{const[y]=i.useState(a.coordinates.join(","));i.useEffect(()=>{document.body.setAttribute("data-coordinates",y),document.body.setAttribute("data-system-index",R.toString())},[y,R]);const p=T=>T.replace(/_/g," "),P=T=>T.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(_e,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["System '",p(l.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Galaxy '",P(a.name),"' - Coordinates ",a.coordinates.join(", ")]})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(We,{systemUrl:j,imageUrl:b})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(He,{system:l,galaxy:a,systemIndex:R,cosmicOriginTime:v})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Planets in '",p(l.name),"'"]}),e.jsx(Be,{planets:l.planets,coordinates:y,systemIndex:R})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${z}`,className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsxs("span",{className:"text-base sm:text-lg",children:["← Back to Galaxy '",P(a.name),"'"]})})})]}),e.jsx(Ie,{version:S})]})]})};console.log("Atlas System React script loading...");document.addEventListener("DOMContentLoaded",async()=>{console.log("DOM loaded, starting System React app...");try{const l=document.getElementById("system-data"),a=document.getElementById("galaxy-data"),j=document.getElementById("meta-data");if(!l||!a||!j){console.error("Missing required data elements");return}const S=JSON.parse(l.textContent||"{}"),R=JSON.parse(a.textContent||"{}"),b=JSON.parse(j.textContent||"{}"),z={system:S,galaxy:R,system_url:b.system_url,version:b.version,system_index:b.system_index,image_url:b.image_url,page:b.page||1,cosmic_origin_time:b.cosmic_origin_time},v=document.getElementById("atlas-react-root");v&&(Ge.createRoot(v).render(Ye.createElement($e,z)),console.log("System React app rendered successfully!"))}catch(l){console.error("Error initializing System React app:",l)}});
