import{j as a,r as C}from"./atlas_Bv5zr7cG9joXJ1l7Eo-6s.js";const X=()=>a.jsx("header",{className:"bg-black/20 backdrop-blur-md border-b border-white/10 px-4 sm:px-6 py-4",children:a.jsxs("div",{className:"w-full flex items-center justify-between",children:[a.jsxs("a",{href:"/",className:"flex items-center space-x-3 sm:space-x-4",children:[a.jsx("img",{src:"/static/atlas-logo.jpg",alt:"Atlas Logo",className:"h-10 w-10 sm:h-12 sm:w-12 rounded-full border-2 border-blue-400 shadow-lg"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"The Atlas"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 hidden sm:block",children:"Universal Navigation System"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"ONLINE"})]}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400 hidden lg:block",children:"Quantum Navigation Ready"})]})]})}),D=p=>{const[e,t,s]=p.split(",").map(Number);return`${e.toString(36)}_${t.toString(36)}_${s.toString(36)}`};class L{static STORAGE_KEY="__atlasArchive";static MAX_ENTRIES_PER_GALAXY=1e3;static getData(){try{this.cleanupLegacyStorage();const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return{g:{},gv:{}};const t=JSON.parse(e);return t.gv||(t.gv={}),t}catch(e){return console.error("Error reading Atlas archive:",e),{g:{},gv:{}}}}static cleanupLegacyStorage(){try{const e="atlasHistoricalData";localStorage.getItem(e)&&localStorage.removeItem(e)}catch(e){console.error("Error cleaning up legacy storage:",e)}}static saveData(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving Atlas archive:",t)}}static performCleanup(e){const t=Object.keys(e.g);t.length>100&&t.slice(0,t.length-100).forEach(n=>delete e.g[n]),Object.keys(e.g).forEach(s=>{const n=e.g[s],r=Object.keys(n);r.length>this.MAX_ENTRIES_PER_GALAXY&&r.slice(0,r.length-this.MAX_ENTRIES_PER_GALAXY).forEach(i=>delete n[i])})}static performEmergencyCleanup(){const e=document.body.getAttribute("data-coordinates");if(e){const t=D(e),s=this.getData(),n=s.g[t];s.g={},n&&(s.g[t]=n),this.saveData(s)}}static markPlanetVisited(e,t,s,n){const r=this.getData(),o=D(e),i=t.toString(16),l=n.findIndex(m=>m.name.toLowerCase()===s.toLowerCase());if(l===-1){console.warn(`Planet ${s} not found in system planets list`);return}r.g[o]||(r.g[o]={}),r.g[o][i]||(r.g[o][i]="");const c=this.bitmapToIndices(r.g[o][i]);c.includes(l)||(c.push(l),r.g[o][i]=this.indicesToBitmap(c),this.saveData(r))}static markGalaxyVisited(e){const t=this.getData(),s=D(e);t.gv[s]||(t.gv[s]=!0,console.log(`🌌 Galaxy marked as visited: ${e} (hash: ${s})`),this.saveData(t))}static markSystemVisited(e,t){const s=this.getData(),n=D(e),r=t.toString(16);this.markGalaxyVisited(e),s.g[n]||(s.g[n]={}),s.g[n][r]||(s.g[n][r]="",this.saveData(s))}static bitmapToIndices(e){return e?e.split("").map((t,s)=>t==="1"?s:-1).filter(t=>t!==-1):[]}static indicesToBitmap(e){if(e.length===0)return"";const t=Math.max(...e),s=Array(t+1).fill("0");return e.forEach(n=>{n>=0&&(s[n]="1")}),s.join("")}static isGalaxyVisited(e){const t=this.getData(),s=D(e);return!!t.gv[s]}static isSystemVisited(e,t){const s=this.getData(),n=D(e),r=t.toString(16);return!!(s.g[n]&&r in s.g[n])}static getVisitedPlanets(e,t,s){const n=this.getData(),r=D(e),o=t.toString(16),i=n.g[r]?.[o]||"";return this.bitmapToIndices(i).map(c=>{const m=s[c];return m?m.name.toLowerCase():null}).filter(c=>c!==null)}static getVisitedPlanetCount(e,t){const s=this.getData(),n=D(e),r=t.toString(16),o=s.g[n]?.[r]||"";return this.bitmapToIndices(o).length}static getStorageStats(){const e=this.getData();let t=0;["__atlasArchive","_atlasDailyChallenges","_atlasLocations","_atlasSpaceShip"].forEach(c=>{const m=localStorage.getItem(c);m&&(t+=m.length)});let n=0,r=0;Object.values(e.g).forEach(c=>{n+=Object.keys(c).length,Object.values(c).forEach(m=>{typeof m=="string"&&(r+=(m.match(/1/g)||[]).length)})});const o=new Set(Object.keys(e.g||{})),i=new Set(Object.keys(e.gv||{})),l=new Set([...o,...i]);return{size:t,galaxies:l.size,visitedGalaxies:Object.keys(e.gv).length,systems:n,planets:r}}}const J=p=>{L.markGalaxyVisited(p)},W=(p,e,t,s)=>{L.markPlanetVisited(p,e,t,s)},H=(p,e)=>{L.markSystemVisited(p,e)},q=(p,e,t)=>L.getVisitedPlanets(p,e,t),B=(p,e)=>L.isSystemVisited(p,e),Q=(p,e,t,s)=>{if(!B(p,e))return"none";{const n=L.getVisitedPlanetCount(p,e);return n>=t&&t>0?"complete":(n>0,"partial")}},z=()=>L.getStorageStats();class R{static STORAGE_KEY="_atlasDailyChallenges";static BASE_GOALS={galaxies:1,systems:3,planets:10};static getTodaysChallenges(){const e=new Date().toISOString().split("T")[0],t=this.getStoredChallenges();return!t||t.date!==e?this.createNewDayChallenges(e,t):t}static getStoredChallenges(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):null}catch(e){return console.error("Error reading daily challenges:",e),null}}static createNewDayChallenges(e,t){const s=t?t.dayNumber+1:1,n=Math.pow(1.1,s-1),r=this.getCurrentStats(),o=[{type:"galaxies",current:r.galaxies,target:Math.ceil(s*this.BASE_GOALS.galaxies*n),dayNumber:s,completed:!1},{type:"systems",current:r.systems,target:Math.ceil(s*this.BASE_GOALS.systems*n),dayNumber:s,completed:!1},{type:"planets",current:r.planets,target:Math.ceil(s*this.BASE_GOALS.planets*n),dayNumber:s,completed:!1}],i=(t?.totalCompletedDays||0)+(t?.dayCompleted?1:0),l={date:e,dayNumber:s,challenges:o,lastReset:Date.now(),totalCompletedDays:i,dayCompleted:!1};return this.saveChallenges(l),l}static getCurrentStats(){try{const e=localStorage.getItem("__atlasArchive");if(!e)return{galaxies:0,systems:0,planets:0};const t=JSON.parse(e);let s=0,n=0;Object.values(t.g||{}).forEach(l=>{s+=Object.keys(l).length,Object.values(l).forEach(c=>{typeof c=="string"&&(n+=(c.match(/1/g)||[]).length)})});const r=new Set(Object.keys(t.g||{})),o=new Set(Object.keys(t.gv||{}));return{galaxies:new Set([...r,...o]).size,systems:s,planets:n}}catch(e){return console.error("Error getting current stats:",e),{galaxies:0,systems:0,planets:0}}}static updateProgress(){const e=this.getTodaysChallenges(),t=this.getCurrentStats();return e.challenges.every(n=>n.completed),e.challenges.forEach(n=>{const r=t[n.type];n.current=r,n.completed=r>=n.target}),e.challenges.every(n=>n.completed)&&!e.dayCompleted&&(e.dayCompleted=!0),this.saveChallenges(e),e}static getCompletedDaysCount(){try{return this.getTodaysChallenges().totalCompletedDays||0}catch(e){return console.error("Error getting completed days count:",e),0}}static saveChallenges(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving daily challenges:",t)}}static getCompletionStatus(){const e=this.getTodaysChallenges(),t=e.challenges.filter(n=>n.completed).length,s=e.challenges.length;return{completed:t,total:s,allCompleted:t===s}}static getDayInfo(){const e=this.getTodaysChallenges(),t=Math.pow(1.1,e.dayNumber-1);return{dayNumber:e.dayNumber,multiplier:Math.round(t*100)/100}}}class O{static STORAGE_KEY="_atlasLocations";static BASE_MAX_LOCATIONS=5;static BONUS_PER_COMPLETION=5;static ABSOLUTE_MAX_LOCATIONS=999;static getLocations(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Error reading saved locations:",e),[]}}static async saveLocation(e){try{const t=this.getLocations(),s=this.getCurrentMaxLocations(),n=t.findIndex(o=>o.stargateUrl===e.stargateUrl),r={...e,id:this.generateId(),timestamp:Date.now()};return n!==-1?(t[n]=r,localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),!0):t.length>=s&&!await this.showSlotFullDialog(s)?!1:(t.push(r),t.length>s&&(t.sort((o,i)=>i.timestamp-o.timestamp),t.splice(s)),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)),!0)}catch(t){return console.error("Error saving location:",t),!1}}static saveLocationSync(e){const t=this.getLocations(),s=this.getCurrentMaxLocations(),n=t.findIndex(o=>o.stargateUrl===e.stargateUrl),r={...e,id:this.generateId(),timestamp:Date.now()};n!==-1?t[n]=r:t.push(r),t.length>s&&(t.sort((o,i)=>i.timestamp-o.timestamp),t.splice(s)),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}static removeLocation(e){try{const s=this.getLocations().filter(n=>n.id!==e);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(s))}catch(t){console.error("Error removing location:",t)}}static clearAllLocations(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(e){console.error("Error clearing locations:",e)}}static generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static async showSlotFullDialog(e){return new Promise(t=>{const s=document.createElement("div");s.className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm transition-all duration-300 opacity-0",s.style.backdropFilter="blur(8px)";const n=document.createElement("div");n.className="relative bg-gradient-to-br from-slate-900/95 to-slate-800/95 border border-slate-600/50 rounded-2xl p-8 max-w-md mx-4 text-white shadow-2xl backdrop-blur-xl transform scale-95 transition-all duration-300",n.style.backdropFilter="blur(20px)",n.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.05)";const r=document.createElement("div");r.className="text-center";const o=document.createElement("div");o.className="inline-flex items-center justify-center w-16 h-16 bg-amber-500/20 rounded-full mb-6";const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("class","w-8 h-8 text-amber-400"),i.setAttribute("fill","none"),i.setAttribute("stroke","currentColor"),i.setAttribute("viewBox","0 0 24 24");const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("stroke-linecap","round"),l.setAttribute("stroke-linejoin","round"),l.setAttribute("stroke-width","2"),l.setAttribute("d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z");const c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-width","2"),c.setAttribute("d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"),i.appendChild(l),i.appendChild(c),o.appendChild(i);const m=document.createElement("h2");m.className="text-2xl font-bold mb-4 text-white",m.textContent="Storage Full";const d=document.createElement("p");d.className="text-slate-400 mb-6 text-[10px] bg-slate-800/50 rounded-lg p-3 border border-slate-700/50",d.textContent="💡 Complete daily challenges to increase your storage capacity";const f=document.createElement("p");f.className="text-slate-300 mb-4 text-base leading-relaxed",f.textContent="You have reached your maximum of ";const g=document.createElement("span");g.className="font-bold text-amber-400 bg-amber-400/10 px-2 py-1 rounded-lg",g.textContent=e.toString(),f.appendChild(g),f.appendChild(document.createTextNode(" saved locations."));const N=document.createElement("p");N.className="text-slate-200 mb-8 text-base",N.textContent="Overwrite the oldest saved location?";const x=document.createElement("div");x.className="flex gap-4 justify-center";const S=document.createElement("button");S.id="cancelSave",S.className="px-6 py-3 bg-slate-700/80 hover:bg-slate-600/80 border border-slate-600/50 hover:border-slate-500/50 rounded-xl transition-all duration-200 font-medium text-slate-200 hover:text-white transform hover:scale-105 hover:shadow-lg",S.textContent="Cancel";const y=document.createElement("button");y.id="confirmOverwrite",y.className="px-6 py-3 bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-500 hover:to-amber-400 rounded-xl transition-all duration-200 font-semibold text-white transform hover:scale-105 hover:shadow-lg border border-amber-400/30",y.textContent="Overwrite",x.appendChild(S),x.appendChild(y),r.appendChild(o),r.appendChild(m),r.appendChild(d),r.appendChild(f),r.appendChild(N),r.appendChild(x),n.appendChild(r),s.appendChild(n),document.body.appendChild(s),requestAnimationFrame(()=>{s.style.opacity="1",n.style.transform="scale(1)"});const T=n.querySelector("#cancelSave"),j=n.querySelector("#confirmOverwrite"),A=E=>{s.style.opacity="0",n.style.transform="scale(0.95)",setTimeout(()=>{document.body.contains(s)&&document.body.removeChild(s),t(E)},300)};T?.addEventListener("click",()=>{A(!1)}),j?.addEventListener("click",()=>{A(!0)}),s.addEventListener("click",E=>{E.target===s&&A(!1)});const h=E=>{E.key==="Escape"&&(document.removeEventListener("keydown",h),A(!1))};document.addEventListener("keydown",h)})}static hasAvailableSlot(){const e=this.getLocations(),t=this.getCurrentMaxLocations();return e.length<t}static getAvailableSlots(){const e=this.getLocations(),t=this.getCurrentMaxLocations();return Math.max(0,t-e.length)}static getCurrentMaxLocations(){try{const e=this.getCompletedDaysCount(),t=R.getCompletionStatus().allCompleted?1:0,s=this.BASE_MAX_LOCATIONS+(e+t)*this.BONUS_PER_COMPLETION;return Math.min(s,this.ABSOLUTE_MAX_LOCATIONS)}catch(e){return console.error("Error calculating max locations:",e),this.BASE_MAX_LOCATIONS}}static getCompletedDaysCount(){try{const e=localStorage.getItem("_atlasDailyChallenges");return e&&JSON.parse(e).totalCompletedDays||0}catch(e){return console.error("Error getting completion history:",e),0}}static getLocationStats(){const e=this.getLocations(),t=this.getCurrentMaxLocations();return console.log("Location debug:",{completedDays:this.getCompletedDaysCount(),todayCompleted:R.getCompletionStatus().allCompleted,maxAllowed:t}),{total:e.length,galaxies:e.filter(s=>s.type==="galaxy").length,systems:e.filter(s=>s.type==="system").length,planets:e.filter(s=>s.type==="planet").length,maxAllowed:t,available:Math.max(0,t-e.length)}}static async saveLocationWithConfirmation(e,t,s){try{const n={name:e,type:t,stargateUrl:s};return await this.saveLocation(n)?{success:!0,message:`Location "${e}" saved successfully!`}:{success:!1,message:"Save operation cancelled by user."}}catch(n){return console.error("Error saving location with confirmation:",n),{success:!1,message:"Failed to save location. Please try again."}}}}class w{static STORAGE_KEY="_atlasSpaceShip";static COLLECTION_COOLDOWNS={planet:900*1e3,system:2700*1e3,galaxy:5400*1e3};static PASSIVE_INTERVAL=300*1e3;static DEFAULT_DATA={r:{a:300,e:200,d:250},u:{l:1,ef:1,rn:500,st:1e3,pg:1},c:{},t:{},s:{tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0}};static getData(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return this.saveData(this.DEFAULT_DATA),{...this.DEFAULT_DATA};const t=JSON.parse(e),s=this.expandData(t);return{r:s.r||{...this.DEFAULT_DATA.r},u:s.u||{...this.DEFAULT_DATA.u},c:s.c||{},t:s.t||{},s:s.s||{...this.DEFAULT_DATA.s}}}catch(e){return console.error("Error reading spaceship data:",e),{...this.DEFAULT_DATA}}}static saveData(e){try{const s=Date.now()-1440*60*1e3;Object.keys(e.c).forEach(o=>{e.c[o]<s&&delete e.c[o]});const n=Object.keys(e.c);if(n.length>500){const o=n.sort((l,c)=>e.c[l]-e.c[c]);o.slice(0,o.length-500).forEach(l=>delete e.c[l])}const r=this.compactData(e);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(r))}catch(t){console.error("Error saving spaceship data:",t),t.name==="QuotaExceededError"&&this.performEmergencyCleanup()}}static performEmergencyCleanup(){const e=this.getData();e.c={},e.s={tc:0,tr:{a:0,e:0,d:0},tt:0},this.saveData(e)}static getResources(){const e=this.getData();return{antimatter:e.r.a,element115:e.r.e,deuterium:e.r.d}}static setResources(e){const t=this.getData(),s=t.u;t.r.a=Math.min(Math.max(0,e.antimatter),s.st),t.r.e=Math.min(Math.max(0,e.element115),s.st),t.r.d=Math.min(Math.max(0,e.deuterium),s.st),this.saveData(t)}static addResources(e){const t=this.getData(),s=t.u;t.r.a=Math.min(t.r.a+e.antimatter,s.st),t.r.e=Math.min(t.r.e+e.element115,s.st),t.r.d=Math.min(t.r.d+e.deuterium,s.st),t.s&&(t.s.tr=t.s.tr||{a:0,e:0,d:0},t.s.tr.a+=e.antimatter,t.s.tr.e+=e.element115,t.s.tr.d+=e.deuterium),this.saveData(t)}static consumeResources(e){const t=this.getData(),s={antimatter:Math.floor(e.antimatter/t.u.ef),element115:Math.floor(e.element115/t.u.ef),deuterium:Math.floor(e.deuterium/t.u.ef)};return t.r.a>=s.antimatter&&t.r.e>=s.element115&&t.r.d>=s.deuterium?(t.r.a-=s.antimatter,t.r.e-=s.element115,t.r.d-=s.deuterium,t.s&&(t.s.tt=(t.s.tt||0)+1),this.saveData(t),!0):!1}static getUpgrade(){const e=this.getData();return{level:e.u.l,efficiency:e.u.ef,range:e.u.rn,storage:e.u.st,passiveGeneration:e.u.pg}}static upgradeShip(e){const t=this.getData();if(t.u.l>=100)return!1;if(t.r.a>=e.antimatter&&t.r.e>=e.element115&&t.r.d>=e.deuterium){t.r.a-=e.antimatter,t.r.e-=e.element115,t.r.d-=e.deuterium,t.u.l+=1;let n=Math.min(4,1+(t.u.l-1)*.2),r=t.u.l<=25?500+(t.u.l-1)*200:5500+Math.floor(Math.log(t.u.l-25+1)*800);r=Math.min(r,25e3);let o=t.u.l<=20?1e3+(t.u.l-1)*400:1e3+20*400+Math.floor(Math.log(t.u.l-20+1)*1200);o=Math.min(o,5e4);let i=Math.min(6,1+(t.u.l-1)*.3);return t.u.l%5===0&&(n*=1.3,r=Math.min(r*1.2,25e3),o=Math.min(o*1.15,5e4),i*=1.4),t.u.ef=Math.min(6,n),t.u.rn=Math.floor(r),t.u.st=Math.floor(o),t.u.pg=Math.min(10,i),this.saveData(t),!0}return!1}static getLocationTypeFromId(e){return e.startsWith("planet_")?"planet":e.startsWith("system_")?"system":e.startsWith("galaxy_")?"galaxy":"planet"}static getCooldownForLocation(e){const t=this.getLocationTypeFromId(e);return this.COLLECTION_COOLDOWNS[t]}static canCollectFromLocation(e){const s=this.getData().c[e];if(!s)return!0;const n=Date.now(),r=this.getCooldownForLocation(e);return n-s>=r}static getTimeUntilNextCollection(e){const s=this.getData().c[e];if(!s)return 0;const n=Date.now(),o=this.getCooldownForLocation(e)-(n-s);return o>0?o/(1e3*60*60):0}static markLocationCollected(e){const t=this.getData();t.c[e]=Date.now(),this.updateCollectionStreaks(t),this.saveData(t)}static updateCollectionStreaks(e){const t=Date.now(),s=new Date(t).toDateString(),n=e.t.lc?new Date(e.t.lc).toDateString():null;if(e.s||(e.s={tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0}),e.s.tc=(e.s.tc||0)+1,s!==n){if(e.t.lc=t,n){const r=new Date(e.t.lc),o=new Date(t),i=Math.floor((o.getTime()-r.getTime())/(1e3*60*60*24));i===1?e.s.cs=(e.s.cs||0)+1:i>1&&(e.s.cs=1)}else e.s.cs=1;e.s.dc=1}else e.s.dc=(e.s.dc||0)+1}static getCollectionStreakInfo(){const e=this.getData(),t=e.s?.cs||0,s=e.s?.dc||0,n=t>=3?1.25:1;return{currentStreak:t,dailyCollections:s,streakMultiplier:n}}static getCollectionCount(e){const t=this.getData();return Object.keys(t.c).filter(n=>n.startsWith(e.split("_")[0])).length}static shouldProcessPassive(){const e=this.getData(),t=Date.now(),s=e.t.lp||0;return t-s>=this.PASSIVE_INTERVAL}static markPassiveProcessed(){const e=this.getData();e.t.lp=Date.now(),this.saveData(e)}static getStats(){const e=this.getData();return{totalCollections:e.s?.tc||0,totalResourcesCollected:e.s?.tr||{antimatter:0,element115:0,deuterium:0},totalTravels:e.s?.tt||0}}static migrateFromOldStorage(){try{const e=["atlas_ship_resources","atlas_ship_upgrades","atlas_resource_collections","_atlasSpaceShip_collections","_atlasSpaceShip_lastPassive","atlas_last_resource_generation","atlas_last_passive_generation"];if(localStorage.getItem(this.STORAGE_KEY))return;const s=localStorage.getItem("atlas_ship_resources"),n=localStorage.getItem("atlas_ship_upgrades"),r=localStorage.getItem("atlas_resource_collections")||localStorage.getItem("_atlasSpaceShip_collections"),o={...this.DEFAULT_DATA};if(s)try{const i=JSON.parse(s);o.r.a=i.antimatter||150,o.r.e=i.element115||100,o.r.d=i.deuterium||125}catch{}if(n)try{const i=JSON.parse(n);o.u.l=i.level||1,o.u.ef=i.efficiency||1,o.u.rn=i.range||300,o.u.st=i.storage||500,o.u.pg=i.passiveGeneration||1}catch{}if(r)try{const i=JSON.parse(r);Object.keys(i).forEach(l=>{i[l].lastCollected&&(o.c[i[l].id]=i[l].lastCollected)})}catch{}this.saveData(o),e.forEach(i=>{try{localStorage.removeItem(i)}catch{}}),console.log("Successfully migrated to unified spaceship storage")}catch(e){console.error("Error during migration:",e)}}static reset(){localStorage.removeItem(this.STORAGE_KEY)}static getStorageSize(){return(localStorage.getItem(this.STORAGE_KEY)||"{}").length}static compactData(e){const t=Date.now(),s={};Object.keys(e.c).forEach(r=>{s[r]=Math.floor((t-e.c[r])/1e3)});const n={r:e.r,u:e.u,c:s,s:e.s};return e.t&&(n.t={},e.t.lp&&(n.t.lp=Math.floor((t-e.t.lp)/1e3)),e.t.ld&&(n.t.ld=Math.floor((t-e.t.ld)/1e3)),e.t.lc&&(n.t.lc=Math.floor((t-e.t.lc)/1e3))),n}static expandData(e){const t=Date.now(),s={};e.c&&Object.keys(e.c).forEach(r=>{const o=e.c[r];o>1e9?s[r]=o:s[r]=t-o*1e3});const n={r:e.r||{a:300,e:200,d:250},u:e.u||{l:1,ef:1,rn:500,st:1e3,pg:1},c:s,t:{},s:e.s||{tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0}};if(e.t){if(e.t.lp){const r=e.t.lp;n.t.lp=r>1e9?r:t-r*1e3}if(e.t.ld){const r=e.t.ld;n.t.ld=r>1e9?r:t-r*1e3}if(e.t.lc){const r=e.t.lc;n.t.lc=r>1e9?r:t-r*1e3}}return n}}const Z=Object.freeze(Object.defineProperty({__proto__:null,UnifiedSpaceshipStorage:w},Symbol.toStringTag,{value:"Module"}));class v{static initialize(){w.migrateFromOldStorage()}static getResources(){return w.getResources()}static getUpgrade(){return w.getUpgrade()}static addResources(e){w.addResources({antimatter:e.antimatter||0,element115:e.element115||0,deuterium:e.deuterium||0})}static consumeResources(e){return w.consumeResources(e)}static calculateTravelCost(e,t=0){const n={galaxy:{antimatter:25,element115:20,deuterium:15},system:{antimatter:8,element115:6,deuterium:10},planet:{antimatter:2,element115:1,deuterium:3}}[e],r=Math.max(1,t/100);return{antimatter:Math.floor(n.antimatter*r),element115:Math.floor(n.element115*r),deuterium:Math.floor(n.deuterium*r)}}static canAffordTravel(e,t=0){const s=this.calculateTravelCost(e,t),n=this.getResources(),r=this.getUpgrade(),o={antimatter:Math.floor(s.antimatter/r.efficiency),element115:Math.floor(s.element115/r.efficiency),deuterium:Math.floor(s.deuterium/r.efficiency)};return n.antimatter>=o.antimatter&&n.element115>=o.element115&&n.deuterium>=o.deuterium&&t<=r.range}static getUpgradeCost(e){const s=Math.pow(1.4,e-1);return{antimatter:Math.floor(80*s),element115:Math.floor(80*s*1.3),deuterium:Math.floor(80*s*.9)}}static canAffordUpgrade(){const e=this.getUpgrade();if(e.level>=100)return!1;const s=this.getUpgradeCost(e.level),n=this.getResources();return n.antimatter>=s.antimatter&&n.element115>=s.element115&&n.deuterium>=s.deuterium}static upgradeShip(){const e=this.getUpgrade(),t=this.getUpgradeCost(e.level);return w.upgradeShip(t)}static calculatePassiveGeneration(){const e=this.getUpgrade(),t=JSON.parse(localStorage.getItem("_atlasLocations")||"[]"),s=Array.isArray(t)?t:t.locations||[];let n={antimatter:0,element115:0,deuterium:0},r={planets:0,systems:0,galaxies:0};return s.forEach(o=>{o.type==="planet"?(r.planets++,n.antimatter+=12,n.element115+=9,n.deuterium+=15):o.type==="system"&&(r.systems++,n.antimatter+=5,n.element115+=4,n.deuterium+=6)}),n.antimatter=Math.floor(n.antimatter*e.passiveGeneration),n.element115=Math.floor(n.element115*e.passiveGeneration),n.deuterium=Math.floor(n.deuterium*e.passiveGeneration),{...n,sources:r}}static processPassiveGeneration(){if(w.shouldProcessPassive()){const e=this.calculatePassiveGeneration();(e.antimatter>0||e.element115>0||e.deuterium>0)&&(this.addResources({antimatter:e.antimatter,element115:e.element115,deuterium:e.deuterium}),this.showPassiveGenerationNotification(e)),w.markPassiveProcessed()}}static getAccumulatedResourcesWithLimit(){const e=this.calculatePassiveGeneration(),t=this.getUpgrade(),s=this.getUpgradeCost(t.level),n={antimatter:s.antimatter*5,element115:s.element115*5,deuterium:s.deuterium*5},o=w.getData().t.lp,i=Date.now();if(!o||o===0||e.sources.planets===0&&e.sources.systems===0)return e;const l=Math.floor((i-o)/(300*1e3));return l<1?{antimatter:0,element115:0,deuterium:0,sources:e.sources}:l===1?e:{antimatter:Math.min(e.antimatter*l,n.antimatter*2),element115:Math.min(e.element115*l,n.element115*2),deuterium:Math.min(e.deuterium*l,n.deuterium*2),sources:e.sources}}static showPassiveGenerationNotification(e){if(e.antimatter+e.element115+e.deuterium===0)return;const t=document.createElement("div");t.className="fixed top-4 right-4 z-50 bg-gradient-to-r from-purple-900/90 to-blue-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-purple-500/50",t.style.animation="slideInRight 0.3s ease-out";const s={antimatter:e.antimatter*12,element115:e.element115*12,deuterium:e.deuterium*12},n=document.createElement("div");n.className="flex items-center space-x-3";const r=document.createElement("span");r.className="text-2xl",r.textContent="⛏️";const o=document.createElement("div"),i=document.createElement("div");i.className="text-sm font-bold text-purple-300",i.textContent="Passive Mining";const l=document.createElement("div");l.className="text-xs text-purple-200 mt-1",l.textContent=`${e.sources.planets}🪐 ${e.sources.systems}⭐ generating`;const c=document.createElement("div");if(c.className="text-xs text-purple-200 flex gap-3 mt-1",e.antimatter>0){const d=document.createElement("span");d.className="text-purple-300",d.textContent=`+${e.antimatter} AM`,c.appendChild(d)}if(e.element115>0){const d=document.createElement("span");d.className="text-cyan-300",d.textContent=`+${e.element115} E115`,c.appendChild(d)}if(e.deuterium>0){const d=document.createElement("span");d.className="text-orange-300",d.textContent=`+${e.deuterium} D`,c.appendChild(d)}const m=document.createElement("div");if(m.className="text-xs text-purple-100 mt-1 opacity-75",m.textContent=`Rate: ${s.antimatter}/${s.element115}/${s.deuterium} per hour`,o.appendChild(i),o.appendChild(l),o.appendChild(c),o.appendChild(m),n.appendChild(r),n.appendChild(o),t.appendChild(n),!document.getElementById("passive-toast-styles")){const d=document.createElement("style");d.id="passive-toast-styles",d.textContent=`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        @keyframes slideOutRight {
          from {
            transform: translateX(0);
            opacity: 1;
          }
          to {
            transform: translateX(100%);
            opacity: 0;
          }
        }
      `,document.head.appendChild(d)}document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideOutRight 0.3s ease-in forwards",setTimeout(()=>{t.remove()},300)},5e3)}static reset(){w.reset()}static getResourcesPercentage(){const e=this.getResources(),t=this.getUpgrade();return{antimatter:e.antimatter/t.storage*100,element115:e.element115/t.storage*100,deuterium:e.deuterium/t.storage*100}}static getPassiveGenerationInfo(){const e=this.calculatePassiveGeneration(),t=w.shouldProcessPassive()?0:(300*1e3-(Date.now()-(w.getData().t.lp||0)))/1e3;return{generation:e,perHour:{antimatter:e.antimatter*12,element115:e.element115*12,deuterium:e.deuterium*12},nextGenerationIn:Math.max(0,t)}}static getExchangeRates(){const e=this.getResources();return{antimatter:[{from:"antimatter",to:"element115",rate:1.2,available:e.antimatter},{from:"antimatter",to:"deuterium",rate:.8,available:e.antimatter}],element115:[{from:"element115",to:"antimatter",rate:.9,available:e.element115},{from:"element115",to:"deuterium",rate:1.1,available:e.element115}],deuterium:[{from:"deuterium",to:"antimatter",rate:1.3,available:e.deuterium},{from:"deuterium",to:"element115",rate:.95,available:e.deuterium}]}}static exchangeResources(e,t,s){const n=this.getResources(),i=this.getExchangeRates()[e].find(d=>d.to===t);if(!i||s<=0||n[e]<s)return!1;const l=Math.floor(s*i.rate),c=this.getUpgrade();if(n[t]+l>c.storage)return!1;const m={...n};return m[e]-=s,m[t]+=l,w.setResources(m),this.showExchangeNotification(e,t,s,l),!0}static showExchangeNotification(e,t,s,n){const r=document.createElement("div");r.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-amber-900/90 to-orange-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-amber-500/50",r.style.animation="slideInDown 0.3s ease-out";const o={antimatter:{name:"AM",color:"text-purple-300"},element115:{name:"E115",color:"text-cyan-300"},deuterium:{name:"D",color:"text-orange-300"}},i=o[e],l=o[t],c=document.createElement("div");c.className="flex items-center space-x-3";const m=document.createElement("span");m.className="text-2xl",m.textContent="🔄";const d=document.createElement("div"),f=document.createElement("div");f.className="text-sm font-bold text-amber-300",f.textContent="Resource Exchange";const g=document.createElement("div");g.className="text-xs text-amber-200 mt-1";const N=document.createElement("span");N.className=i.color,N.textContent=`-${s} ${i.name}`;const x=document.createElement("span");x.className="text-amber-300 mx-2",x.textContent="→";const S=document.createElement("span");S.className=l.color,S.textContent=`+${n} ${l.name}`,g.appendChild(N),g.appendChild(x),g.appendChild(S),d.appendChild(f),d.appendChild(g),c.appendChild(m),c.appendChild(d),r.appendChild(c),document.body.appendChild(r),setTimeout(()=>{r.style.animation="slideOutUp 0.3s ease-in forwards",setTimeout(()=>{r.remove()},300)},3e3)}}const _=({value:p,max:e,label:t,color:s="indigo",size:n="xs",showPercentage:r=!1})=>{const o=e>0?Math.min(p/e*100,100):0,i={indigo:{bg:"bg-indigo-500/20",fill:"bg-gradient-to-r from-indigo-500 to-indigo-400",text:"text-indigo-400"},blue:{bg:"bg-blue-500/20",fill:"bg-gradient-to-r from-blue-500 to-blue-400",text:"text-blue-400"},purple:{bg:"bg-purple-500/20",fill:"bg-gradient-to-r from-purple-500 to-purple-400",text:"text-purple-400"},cyan:{bg:"bg-cyan-500/20",fill:"bg-gradient-to-r from-cyan-500 to-cyan-400",text:"text-cyan-400"},green:{bg:"bg-green-500/20",fill:"bg-gradient-to-r from-green-500 to-green-400",text:"text-green-400"},orange:{bg:"bg-orange-500/20",fill:"bg-gradient-to-r from-orange-500 to-orange-400",text:"text-orange-400"},yellow:{bg:"bg-yellow-500/20",fill:"bg-gradient-to-r from-yellow-500 to-yellow-400",text:"text-yellow-400"}},l={xs:"h-1.5",sm:"h-2"},c=i[s]||i.indigo,m=l[n];return a.jsxs("div",{className:"w-full",children:[t&&a.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-400",children:t}),r&&a.jsxs("span",{className:`${c.text} font-medium`,children:[o.toFixed(0),"%"]})]}),a.jsx("div",{className:`w-full ${c.bg} rounded-full overflow-hidden ${m}`,children:a.jsx("div",{className:`${c.fill} ${m} rounded-full transition-all duration-700 ease-out shadow-sm`,style:{width:`${o}%`},children:a.jsx("div",{className:`w-full h-full ${c.fill} opacity-50 animate-pulse`})})})]})},ee=({currentLocation:p})=>{const[e,t]=C.useState(!1),[s,n]=C.useState(!1),[r,o]=C.useState("stats"),[i,l]=C.useState(null),[c,m]=C.useState([]),[d,f]=C.useState(null),[g,N]=C.useState(null),[x,S]=C.useState({antimatter:0,element115:0,deuterium:0}),[y,T]=C.useState({level:1,efficiency:1,range:300,storage:500,passiveGeneration:1}),[j,A]=C.useState({antimatter:0,element115:0,deuterium:0}),[h,E]=C.useState({antimatter:0,element115:0,deuterium:0,sources:{planets:0,systems:0,galaxies:0}}),[$,k]=C.useState(!1),I=C.useRef(null);C.useEffect(()=>{if(e){l(z()),m(O.getLocations()),f(O.getLocationStats());const u=R.updateProgress();N(u),S(v.getResources()),T(v.getUpgrade());const b=v.getUpgrade();A(v.getUpgradeCost(b.level));const M=v.getAccumulatedResourcesWithLimit();E(M)}},[e]),C.useEffect(()=>{if(!e)return;const b=setInterval(()=>{const M=v.getAccumulatedResourcesWithLimit();E(M)},15e3);return()=>clearInterval(b)},[e]);const P=()=>{n(!0),setTimeout(()=>{t(!1),n(!1)},300)},F=()=>{e?P():t(!0)};C.useEffect(()=>{const u=b=>{e&&!s&&I.current&&!I.current.contains(b.target)&&P()};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[e,s]);const V=u=>{if(u===0)return"0 B";const b=1024,M=["B","KB","MB"],U=Math.floor(Math.log(u)/Math.log(b));return parseFloat((u/Math.pow(b,U)).toFixed(2))+" "+M[U]},G=u=>u.replace(/_/g," "),K=(u,b)=>{u.stopPropagation(),O.removeLocation(b),m(O.getLocations()),f(O.getLocationStats())};return a.jsx(a.Fragment,{children:a.jsxs("div",{ref:I,className:"fixed bottom-4 sm:bottom-6 right-4 sm:right-6 z-50",children:[a.jsxs("button",{onClick:F,className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-600 via-purple-600 to-blue-800 hover:from-blue-500 hover:via-purple-500 hover:to-blue-700 text-white rounded-full shadow-2xl border-2 border-blue-400/30 transition-all duration-300 transform hover:scale-105 backdrop-blur-sm",title:"Spaceship Control Panel",children:[a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("svg",{className:"flex items-center justify-center",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",children:a.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[a.jsx("path",{d:"M12 3a6.02 6.02 0 0 0-5.923 4.9c-.086.466-.13.699.032 1.005c.161.307.39.409.847.613c1.38.614 3.134.982 5.044.982s3.665-.368 5.044-.982c.457-.204.686-.306.847-.613c.162-.306.118-.54.032-1.005A6.02 6.02 0 0 0 12 3"}),a.jsx("path",{d:"M17 5.5c2.989.788 5 2.26 5 3.945C22 11.961 17.523 14 12 14S2 11.96 2 9.445C2 7.76 4.011 6.288 7 5.5M12 18v3m5-4l1 4M7 17l-1 4"})]})})}),a.jsx("div",{className:"absolute inset-0 rounded-full bg-blue-400/20 animate-ping"})]}),e&&a.jsxs("div",{className:"fixed bottom-20 sm:bottom-24 right-2 sm:right-6 w-[calc(100vw-1rem)] sm:w-96 max-w-md max-h-[70vh] sm:max-h-96 bg-black/90 backdrop-blur-xl rounded-2xl border border-blue-400/30 shadow-2xl z-40 overflow-hidden transition-all duration-300 ease-out",style:{animation:s?"slideDownFadeOut 0.3s ease-out forwards":"slideUpFadeIn 0.3s ease-out forwards"},children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 p-4 border-b border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),a.jsx("h3",{className:"text-white font-bold text-lg",children:"🚀 Spaceship Control"})]}),a.jsx("button",{onClick:P,className:"text-gray-400 hover:text-white transition-colors duration-200",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex mt-3 space-x-1 overflow-x-auto",children:[a.jsx("button",{onClick:()=>o("stats"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 whitespace-nowrap ${r==="stats"?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:"📊 Stats"}),a.jsx("button",{onClick:()=>o("ship"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 whitespace-nowrap ${r==="ship"?"bg-green-500/30 text-green-300 border border-green-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:"🚀 Ship"}),a.jsxs("button",{onClick:()=>o("saved"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 whitespace-nowrap ${r==="saved"?"bg-purple-500/30 text-purple-300 border border-purple-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:["📍 Saved (",d?.total||0,")"]})]})]}),a.jsxs("div",{className:"p-4 max-h-64 overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[r==="stats"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"text-white font-semibold text-xs",children:"🌟 Daily Challenges"}),g&&a.jsxs("div",{className:"text-[10px] text-indigo-400 font-medium",children:["Day ",g.dayNumber," • x",R.getDayInfo().multiplier]})]}),g&&a.jsx("div",{className:"space-y-1.5 mb-2",children:g.challenges.map(u=>{const b={galaxies:"indigo",systems:"blue",planets:"purple"},M={galaxies:"Galaxies",systems:"Systems",planets:"Planets"};return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-0.5",children:M[u.type]}),a.jsx(_,{value:u.current,max:u.target,label:`${u.current}/${u.target}`,color:b[u.type],showPercentage:!0}),u.completed&&a.jsx("div",{className:"absolute -right-2 -top-1 text-white bg-green-500 px-0.5 rounded-full text-[8px]",children:"✓"})]},u.type)})}),g&&a.jsxs("div",{className:"grid grid-cols-2 gap-1 text-[10px] mb-2",children:[a.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Completed"}),a.jsxs("div",{className:"text-indigo-400 font-bold",children:[g.challenges.filter(u=>u.completed).length,"/",g.challenges.length]})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-green-500/20",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Atlas Size"}),a.jsx("div",{className:"text-green-400 font-bold",children:i?V(i.size):"0 B"})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold mb-2 text-xs",children:"📍 Saved Locations"}),a.jsxs("div",{className:"mb-2",children:[a.jsx("div",{className:"text-[10px] text-gray-400 mb-0.5",children:"Storage Usage"}),a.jsx(_,{value:d?.total||0,max:d?.maxAllowed||50,label:`${d?.total||0}/${d?.maxAllowed||50}`,color:"cyan",showPercentage:!0})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-1 text-[10px]",children:[a.jsxs("div",{className:"bg-white/5 rounded p-1 text-center",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Galaxies"}),a.jsx("div",{className:"text-indigo-400 font-bold",children:d?.galaxies||0})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1 text-center",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Systems"}),a.jsx("div",{className:"text-blue-400 font-bold",children:d?.systems||0})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1 text-center",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Planets"}),a.jsx("div",{className:"text-purple-400 font-bold",children:d?.planets||0})]})]}),a.jsx("div",{className:"text-[9px] text-gray-500 mt-1",children:"*Complete daily tasks to save more locations"})]})]}),r==="ship"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-white font-semibold mb-2 text-xs flex items-center gap-1",children:["⚡ Resources",a.jsxs("div",{className:"text-[10px] text-gray-400",children:["Lv.",y.level]})]}),a.jsxs("div",{className:"space-y-1 mb-2",children:[a.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-purple-500/20",children:[a.jsxs("div",{className:"flex justify-between text-[10px] mb-0.5",children:[a.jsx("span",{className:"text-purple-300",children:"Antimatter"}),a.jsxs("span",{className:"text-white font-mono",children:[x.antimatter,"/",y.storage]})]}),a.jsx(_,{value:x.antimatter,max:y.storage,label:"",color:"purple",showPercentage:!1})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[a.jsxs("div",{className:"flex justify-between text-[10px] mb-0.5",children:[a.jsx("span",{className:"text-cyan-300",children:"Element 115"}),a.jsxs("span",{className:"text-white font-mono",children:[x.element115,"/",y.storage]})]}),a.jsx(_,{value:x.element115,max:y.storage,label:"",color:"cyan",showPercentage:!1})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-orange-500/20",children:[a.jsxs("div",{className:"flex justify-between text-[10px] mb-0.5",children:[a.jsx("span",{className:"text-orange-300",children:"Deuterium"}),a.jsxs("span",{className:"text-white font-mono",children:[x.deuterium,"/",y.storage]})]}),a.jsx(_,{value:x.deuterium,max:y.storage,label:"",color:"orange",showPercentage:!1})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold mb-2 text-xs",children:"🔧 Ship Upgrade"}),a.jsxs("div",{className:"grid grid-cols-4 gap-1 text-[10px] mb-2",children:[a.jsxs("div",{className:"bg-white/5 rounded p-1 border border-blue-500/20",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Efficiency"}),a.jsxs("div",{className:"text-blue-400 font-bold",children:[y.efficiency.toFixed(1),"x"]})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1 border border-green-500/20",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Range"}),a.jsx("div",{className:"text-green-400 font-bold",children:y.range})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1 border border-yellow-500/20",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Storage"}),a.jsx("div",{className:"text-yellow-400 font-bold",children:y.storage})]}),a.jsxs("div",{className:"bg-white/5 rounded p-1 border border-indigo-500/20",children:[a.jsx("div",{className:"text-gray-400 text-[9px]",children:"Passive"}),a.jsxs("div",{className:"text-indigo-400 font-bold",children:[y.passiveGeneration.toFixed(1),"x"]})]})]}),y.level<100&&!v.canAffordUpgrade()&&a.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded p-1.5 mb-2",children:[a.jsx("div",{className:"text-[10px] text-red-300 font-semibold mb-0.5",children:"Missing resources:"}),a.jsxs("div",{className:"text-[9px] text-red-200 space-y-0.5",children:[j.antimatter>x.antimatter&&a.jsxs("div",{children:["• Need ",j.antimatter-x.antimatter," more Antimatter"]}),j.element115>x.element115&&a.jsxs("div",{children:["• Need ",j.element115-x.element115," more Element 115"]}),j.deuterium>x.deuterium&&a.jsxs("div",{children:["• Need ",j.deuterium-x.deuterium," more Deuterium"]})]})]}),a.jsx("button",{onClick:()=>{if(v.upgradeShip()){S(v.getResources()),T(v.getUpgrade());const u=v.getUpgrade();A(v.getUpgradeCost(u.level));const b=v.calculatePassiveGeneration();E(b)}},disabled:!v.canAffordUpgrade(),className:`w-full px-2 py-1.5 rounded text-[10px] font-medium transition-all duration-200 ${v.canAffordUpgrade()?"bg-gradient-to-r from-green-600/30 to-blue-600/30 hover:from-green-600/40 hover:to-blue-600/40 text-green-300 border border-green-500/50 hover:border-green-400/70 cursor-pointer":"bg-gray-700/30 text-gray-500 border border-gray-600/30 cursor-not-allowed"}`,children:y.level>=100?a.jsx("div",{className:"text-yellow-400",children:"🌟 MAX LEVEL - Ultimate Spaceship!"}):a.jsxs("div",{children:[a.jsxs("div",{className:"font-bold",children:["Upgrade to Level ",y.level+1]}),a.jsxs("div",{className:"opacity-80 flex gap-2 justify-center mt-0.5",children:[a.jsxs("span",{className:"text-purple-300",children:[j.antimatter,"AM"]}),a.jsxs("span",{className:"text-cyan-300",children:[j.element115,"E115"]}),a.jsxs("span",{className:"text-orange-300",children:[j.deuterium,"D"]})]})]})})]})]}),r==="saved"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-500/20 to-blue-500/20 rounded-lg p-2 border border-purple-500/30",children:[a.jsx("h4",{className:"text-white font-semibold text-xs flex items-center gap-1 mb-1",children:"⛏️ Mining Operations"}),h.sources.planets===0&&h.sources.systems===0?a.jsx("div",{className:"text-[10px] text-gray-400",children:"💡 Save planets and systems to enable mining operations"}):a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-1",children:[a.jsx("span",{className:"text-purple-300",children:"Generating/min:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("span",{className:"text-purple-300",children:["+",Math.round(y.passiveGeneration*h.sources.planets+y.passiveGeneration*h.sources.systems*.5)," AM"]}),a.jsxs("span",{className:"text-cyan-300",children:["+",Math.round(y.passiveGeneration*h.sources.planets*.8+y.passiveGeneration*h.sources.systems*.6)," E115"]}),a.jsxs("span",{className:"text-orange-300",children:["+",Math.round(y.passiveGeneration*h.sources.planets*.6+y.passiveGeneration*h.sources.systems*.4)," D"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-2",children:[a.jsx("span",{className:"text-gray-400",children:"Ready to collect:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("span",{className:"text-purple-300",children:["+",h.antimatter," AM"]}),a.jsxs("span",{className:"text-cyan-300",children:["+",h.element115," E115"]}),a.jsxs("span",{className:"text-orange-300",children:["+",h.deuterium," D"]})]})]}),a.jsxs("button",{onClick:()=>{k(!0)},disabled:h.antimatter+h.element115+h.deuterium===0,className:`w-full px-2 py-1.5 rounded text-[10px] font-medium transition-all duration-200 ${h.antimatter+h.element115+h.deuterium>0?"bg-gradient-to-r from-purple-600/30 to-blue-600/30 hover:from-purple-600/40 hover:to-blue-600/40 text-purple-300 border border-purple-500/50 hover:border-purple-400/70 cursor-pointer":"bg-gray-700/30 text-gray-500 border border-gray-600/30 cursor-not-allowed"}`,children:["🚀 Collect From ",h.sources.planets,"🪐 ",h.sources.systems,"⭐"]})]})]}),a.jsx("div",{className:"space-y-1",children:c.length===0?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"No saved locations"}),a.jsx("div",{className:"text-gray-500 text-[10px]",children:"Use the 📍 button to save locations"})]}):c.map(u=>a.jsx("div",{className:"bg-white/5 hover:bg-white/10 rounded p-1.5 border border-white/10 hover:border-white/20 transition-all duration-200 group",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("a",{href:u.stargateUrl,className:"flex-1 min-w-0 hover:text-blue-300 transition-colors duration-200",title:`Navigate to ${G(u.name)}`,children:a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsxs("div",{className:"text-[8px]",children:[u.type==="galaxy"&&"🌌",u.type==="system"&&"⭐",u.type==="planet"&&"🪐"]}),a.jsx("div",{className:"text-white text-[10px] font-medium truncate",children:G(u.name)}),a.jsx("div",{className:"text-gray-500 text-[8px] shrink-0",children:(()=>{try{const b=new Date(u.timestamp);return isNaN(b.getTime())?"N/A":b.toLocaleDateString()}catch{return"N/A"}})()})]})}),a.jsx("button",{onClick:b=>K(b,u.id),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-400 transition-all duration-200 ml-1",title:"Remove location",children:a.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},u.id))})]})]})]}),$&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-black/90 backdrop-blur-xl rounded-2xl border border-purple-400/30 shadow-2xl w-full max-w-md",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 to-blue-600/20 p-4 border-b border-white/10 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:"⛏️ Mass Collection"}),a.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-white transition-colors duration-200",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"Collect resources from all your saved mining locations at once."}),a.jsxs("div",{className:"bg-white/5 rounded-lg p-3 mb-4",children:[a.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Available to collect:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${h.antimatter>0?"text-purple-300":"text-gray-500"}`,children:["+",h.antimatter]}),a.jsx("div",{className:"text-gray-500",children:"Antimatter"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${h.element115>0?"text-cyan-300":"text-gray-500"}`,children:["+",h.element115]}),a.jsx("div",{className:"text-gray-500",children:"Element 115"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${h.deuterium>0?"text-orange-300":"text-gray-500"}`,children:["+",h.deuterium]}),a.jsx("div",{className:"text-gray-500",children:"Deuterium"})]})]})]}),a.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["🌟 Sources: ",h.sources.planets," Planets, ",h.sources.systems," Systems"]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2 rounded-lg text-sm font-medium bg-gray-700/50 text-gray-300 hover:bg-gray-700/70 border border-gray-600/50 transition-all duration-200",children:"Cancel"}),a.jsx("button",{onClick:()=>{v.addResources({antimatter:h.antimatter,element115:h.element115,deuterium:h.deuterium}),v.showPassiveGenerationNotification(h);const u=JSON.parse(localStorage.getItem("_atlasSpaceShip")||"{}");u.t||(u.t={}),u.t.lp=Date.now(),localStorage.setItem("_atlasSpaceShip",JSON.stringify(u)),S(v.getResources());const b=v.getAccumulatedResourcesWithLimit();E(b),k(!1)},className:"flex-1 px-4 py-2 rounded-lg text-sm font-medium bg-gradient-to-r from-purple-600/30 to-blue-600/30 hover:from-purple-600/40 hover:to-blue-600/40 text-purple-300 border border-purple-500/50 hover:border-purple-400/70 transition-all duration-200",children:"🚀 Collect All"})]})]})]})})]})})},te=()=>{const[p,e]=C.useState({antimatter:0,element115:0,deuterium:0}),[t,s]=C.useState(500),[n,r]=C.useState(!1);C.useEffect(()=>{const l=()=>{e(v.getResources()),s(v.getUpgrade().storage)};l();const c=setInterval(l,5e3);return()=>clearInterval(c)},[]);const o=l=>l>=1e3?`${(l/1e3).toFixed(1)}k`:l.toString(),i=l=>l/t*100;return a.jsx("div",{className:"fixed top-0 left-0 right-0 z-50",children:a.jsxs("div",{className:`flex w-full transition-all duration-300 ease-out ${n?"h-16":"h-1"} group`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[a.jsxs("div",{className:"flex-1 relative bg-purple-900/40 border-r border-white/10 overflow-hidden",children:[a.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-r from-purple-600 to-purple-400 transition-all duration-300",style:{height:`${i(p.antimatter)}%`}}),n&&a.jsxs("div",{className:"absolute inset-0 flex flex-col justify-center items-center text-white p-2",children:[a.jsx("div",{className:"text-xs font-semibold text-purple-300 mb-1",children:"Antimatter"}),a.jsxs("div",{className:"text-xs text-white font-mono",children:[o(p.antimatter)," / ",o(t)]}),a.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[Math.round(i(p.antimatter)),"% fuel"]})]})]}),a.jsxs("div",{className:"flex-1 relative bg-cyan-900/40 border-r border-white/10 overflow-hidden",children:[a.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-r from-cyan-600 to-cyan-400 transition-all duration-300",style:{height:`${i(p.element115)}%`}}),n&&a.jsxs("div",{className:"absolute inset-0 flex flex-col justify-center items-center text-white p-2",children:[a.jsx("div",{className:"text-xs font-semibold text-cyan-300 mb-1",children:"Element 115"}),a.jsxs("div",{className:"text-xs text-white font-mono",children:[o(p.element115)," / ",o(t)]}),a.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[Math.round(i(p.element115)),"% fuel"]})]})]}),a.jsxs("div",{className:"flex-1 relative bg-orange-900/40 overflow-hidden",children:[a.jsx("div",{className:"absolute bottom-0 w-full bg-gradient-to-r from-orange-600 to-orange-400 transition-all duration-300",style:{height:`${i(p.deuterium)}%`}}),n&&a.jsxs("div",{className:"absolute inset-0 flex flex-col justify-center items-center text-white p-2",children:[a.jsx("div",{className:"text-xs font-semibold text-orange-300 mb-1",children:"Deuterium"}),a.jsxs("div",{className:"text-xs text-white font-mono",children:[o(p.deuterium)," / ",o(t)]}),a.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[Math.round(i(p.deuterium)),"% fuel"]})]})]})]})})};class se{static getTravelCost(e,t=0){return v.calculateTravelCost(e,t)}static canAffordTravel(e,t=0){return!0}static executeTravel(e,t=0){const s=this.getTravelCost(e,t),n=v.getResources(),r=v.getUpgrade(),o={antimatter:Math.floor(s.antimatter/r.efficiency),element115:Math.floor(s.element115/r.efficiency),deuterium:Math.floor(s.deuterium/r.efficiency)},i=[n.antimatter/o.antimatter,n.element115/o.element115,n.deuterium/o.deuterium],l=Math.min(...i);return l>=1?(v.consumeResources(o),this.showTravelNotification(e,o),"success"):l>=.5?(v.consumeResources({antimatter:Math.min(n.antimatter,o.antimatter),element115:Math.min(n.element115,o.element115),deuterium:Math.min(n.deuterium,o.deuterium)}),this.showPartialTravelNotification(e,o,l),"partial"):(this.showEmergencyTravelNotification(e,o),"emergency")}static showTravelNotification(e,t){const s=document.createElement("div");s.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-blue-900/90 to-purple-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-blue-500/50",s.style.animation="slideInDown 0.3s ease-out";const n={galaxy:"🌌",system:"⭐",planet:"🪐"},r={galaxy:"Galaxy",system:"System",planet:"Planet"},o=document.createElement("div");o.className="flex items-center space-x-3";const i=document.createElement("span");i.className="text-2xl",i.textContent=n[e];const l=document.createElement("div"),c=document.createElement("div");c.className="text-sm font-bold text-blue-300",c.textContent=`${r[e]} Travel`;const m=document.createElement("div");m.className="text-xs text-blue-200 mt-1 flex gap-3";const d=document.createElement("span");d.className="text-purple-300",d.textContent=`-${t.antimatter} AM`;const f=document.createElement("span");f.className="text-cyan-300",f.textContent=`-${t.element115} E115`;const g=document.createElement("span");g.className="text-orange-300",g.textContent=`-${t.deuterium} D`,m.appendChild(d),m.appendChild(f),m.appendChild(g),l.appendChild(c),l.appendChild(m),o.appendChild(i),o.appendChild(l),s.appendChild(o),document.body.appendChild(s),setTimeout(()=>{s.style.animation="slideOutUp 0.3s ease-in forwards",setTimeout(()=>{s.remove()},300)},2e3)}static showPartialTravelNotification(e,t,s){const n=document.createElement("div");n.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-orange-900/90 to-yellow-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-orange-500/50",n.style.animation="slideInDown 0.3s ease-out";const r={galaxy:"🌌",system:"⭐",planet:"🪐"},o={galaxy:"Galaxy",system:"System",planet:"Planet"},i=document.createElement("div");i.className="flex items-center space-x-3";const l=document.createElement("span");l.className="text-2xl",l.textContent=r[e];const c=document.createElement("div"),m=document.createElement("div");m.className="text-sm font-bold text-orange-300",m.textContent=`${o[e]} Travel - Low Fuel`;const d=document.createElement("div");d.className="text-xs text-orange-200 mt-1",d.textContent=`${Math.floor(s*100)}% fuel efficiency - slower travel`;const f=document.createElement("div");f.className="text-xs text-orange-200 mt-1 flex gap-3";const g=document.createElement("span");g.className="text-purple-300",g.textContent=`Need ${t.antimatter} AM`;const N=document.createElement("span");N.className="text-cyan-300",N.textContent=`Need ${t.element115} E115`;const x=document.createElement("span");x.className="text-orange-300",x.textContent=`Need ${t.deuterium} D`,f.appendChild(g),f.appendChild(N),f.appendChild(x),c.appendChild(m),c.appendChild(d),c.appendChild(f),i.appendChild(l),i.appendChild(c),n.appendChild(i),document.body.appendChild(n),setTimeout(()=>{n.style.animation="slideOutUp 0.3s ease-in forwards",setTimeout(()=>{n.remove()},300)},3500)}static showEmergencyTravelNotification(e,t){const s=document.createElement("div");s.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-red-900/90 to-orange-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-red-500/50",s.style.animation="slideInDown 0.3s ease-out";const n={galaxy:"🌌",system:"⭐",planet:"🪐"},r={galaxy:"Galaxy",system:"System",planet:"Planet"},o=document.createElement("div");o.className="flex items-center space-x-3";const i=document.createElement("span");i.className="text-2xl",i.textContent=n[e];const l=document.createElement("div"),c=document.createElement("div");c.className="text-sm font-bold text-red-300",c.textContent=`${r[e]} Emergency Travel`;const m=document.createElement("div");m.className="text-xs text-red-200 mt-1",m.textContent="⚠️ Running on fumes - very slow travel";const d=document.createElement("div");d.className="text-xs text-red-200 mt-1 flex gap-3";const f=document.createElement("span");f.className="text-purple-300",f.textContent=`Need ${t.antimatter} AM`;const g=document.createElement("span");g.className="text-cyan-300",g.textContent=`Need ${t.element115} E115`;const N=document.createElement("span");N.className="text-orange-300",N.textContent=`Need ${t.deuterium} D`,d.appendChild(f),d.appendChild(g),d.appendChild(N);const x=document.createElement("div");x.className="text-xs text-red-200 mt-1",x.textContent="🔧 Collect resources or upgrade ship",l.appendChild(c),l.appendChild(m),l.appendChild(d),l.appendChild(x),o.appendChild(i),o.appendChild(l),s.appendChild(o),document.body.appendChild(s),setTimeout(()=>{s.style.animation="slideOutUp 0.3s ease-in forwards",setTimeout(()=>{s.remove()},300)},4500)}static showResourceShortageButTravelNotification(e,t){const s=document.createElement("div");s.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-yellow-900/90 to-orange-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-yellow-500/50",s.style.animation="slideInDown 0.3s ease-out";const n={galaxy:"🌌",system:"⭐",planet:"🪐"},r={galaxy:"Galaxy",system:"System",planet:"Planet"},o=document.createElement("div");o.className="flex items-center space-x-3";const i=document.createElement("span");i.className="text-2xl",i.textContent=n[e];const l=document.createElement("div"),c=document.createElement("div");c.className="text-sm font-bold text-yellow-300",c.textContent=`${r[e]} Travel - No Fuel`;const m=document.createElement("div");m.className="text-xs text-yellow-200 mt-1",m.textContent="Traveling on emergency reserves";const d=document.createElement("div");d.className="text-xs text-yellow-200 mt-1 flex gap-3";const f=document.createElement("span");f.className="text-purple-300",f.textContent=`Need ${t.antimatter} AM`;const g=document.createElement("span");g.className="text-cyan-300",g.textContent=`Need ${t.element115} E115`;const N=document.createElement("span");N.className="text-orange-300",N.textContent=`Need ${t.deuterium} D`,d.appendChild(f),d.appendChild(g),d.appendChild(N);const x=document.createElement("div");x.className="text-xs text-yellow-200 mt-1",x.textContent="⚡ Improve your ship for efficiency",l.appendChild(c),l.appendChild(m),l.appendChild(d),l.appendChild(x),o.appendChild(i),o.appendChild(l),s.appendChild(o),document.body.appendChild(s),setTimeout(()=>{s.style.animation="slideOutUp 0.3s ease-in forwards",setTimeout(()=>{s.remove()},300)},4e3)}static previewTravelCost(e,t=0){const s=this.getTravelCost(e,t),n=v.getUpgrade(),r={antimatter:Math.floor(s.antimatter/n.efficiency),element115:Math.floor(s.element115/n.efficiency),deuterium:Math.floor(s.deuterium/n.efficiency)};return`${r.antimatter}AM | ${r.element115}E115 | ${r.deuterium}D`}static getTravelEfficiency(){return v.getUpgrade().efficiency}static getMaxTravelRange(){return v.getUpgrade().range}}export{te as F,X as H,O as L,ee as S,w as U,se as a,q as b,W as c,H as d,Z as e,Q as g,J as m};
