import{r as o,j as e,a as qe,U as Ze,c as Ce,R as Me}from"./atlas_Bv5zr7cG9joXJ1l7Eo-6s.js";import{g as Ue,a as oe,m as Ke,F as Je,H as Qe,S as et}from"./atlas_BaXi1fL9krZc5NIhr0Ma9.js";import{W as Le}from"./atlas_CNuRMyx4gH271S-qfMS5_.js";import{I as ze,C as Re,J as Te,G as De,m as Ge,cy as Ie,s as Be,cz as $e,cA as fe,b as U,u as K,M as J,V as ie,B as _e,cB as Ae,L as Pe,Y as Ye,X as Xe,r as Fe,cC as He,cD as We}from"./atlas_CqUMNY_RyRklhCsbOI68T.js";import{R as tt,S as st}from"./atlas_XIVztJR3QrwXhTniM5vOF.js";import{V as nt}from"./atlas_D1RtXGjFSAWW01vFUnxaN.js";import"./atlas_SPyfQU6Spv1u19LNdvRDW.js";const at=({coordinates:t,galaxyName:i})=>{const l=o.useRef(null),c=o.useRef(null),d=o.useRef(null),g=o.useRef(null);return o.useEffect(()=>{if(!l.current)return;const m=l.current,N=m.clientWidth,B=m.clientHeight,b=new ze;b.background=new Re(657930),c.current=b;const f=new Te(45,N/B,.1,1e3);f.position.set(20,15,20),f.lookAt(0,0,0);const a=new Le({antialias:!0,alpha:!0});a.setSize(N,B),a.setClearColor(0,.2),d.current=a,m.appendChild(a.domElement);const r=0,k=1e7,L=5e6,[$,D,G]=t,u=(($-r)/(k-r)-.5)*16,z=((D-r)/(k-r)-.5)*16,h=((G-r)/(k-r)-.5)*16,n=new De;b.add(n);const w=new Ge(16,16,16),S=new Ie(w),p=new Be({color:16777215,opacity:.4,transparent:!0,linewidth:2}),x=new $e(S,p);n.add(x);const v=new fe(16,16,16777215,16777215);v.material.opacity=.1,v.material.transparent=!0,v.position.y=-8,n.add(v);const C=new fe(16,16,16777215,16777215);C.material.opacity=.05,C.material.transparent=!0,C.rotation.z=Math.PI/2,C.position.x=-8,n.add(C);const P=new fe(16,16,16777215,16777215);P.material.opacity=.05,P.material.transparent=!0,P.rotation.x=Math.PI/2,P.position.z=-8,n.add(P);const Q=new U(.5,32,32),be=new K({color:16777215,transparent:!0,opacity:.9}),ee=new J(Q,be);ee.position.set(0,0,0),n.add(ee);const ve=new J(new U(.8,32,32),new K({color:16777215,transparent:!0,opacity:.2}));ee.add(ve);const R=new U(.4,32,32),we=new K({color:6605055,transparent:!0,opacity:1}),te=new J(R,we);te.position.set(u,z,h),n.add(te);const ye=new J(new U(.7,32,32),new K({color:6605055,transparent:!0,opacity:.3}));if(te.add(ye),Math.sqrt(Math.pow($-L,2)+Math.pow(D-L,2)+Math.pow(G-L,2))<2e6){const s=[new ie(0,0,0),new ie(u,z,h)],M=new _e().setFromPoints(s),j=new Ae({color:16762980,dashSize:.6,gapSize:.6,opacity:.4,transparent:!0,linewidth:2}),I=new Pe(M,j);I.computeLineDistances(),n.add(I)}const le=new Ye(4210752,.6);b.add(le);const O=new Xe(16777215,.8);O.position.set(10,10,10),b.add(O);const F=(s,M)=>{const j=document.createElement("canvas"),I=j.getContext("2d");if(!I)return null;j.width=64,j.height=64,I.fillStyle=`#${M.toString(16).padStart(6,"0")}`,I.font="bold 48px Arial",I.textAlign="center",I.textBaseline="middle",I.fillText(s,32,32);const T=new Fe(j),re=new He({map:T,transparent:!0,opacity:.8}),Z=new We(re);return Z.scale.set(1.6,1.6,1),Z},ce=F("X",16739179);ce&&(ce.position.set(8.4,-7.6,-7.6),n.add(ce));const de=F("Y",7077739);de&&(de.position.set(-7.6,8.4,-7.6),n.add(de));const q=F("Z",7039999);q&&(q.position.set(-7.6,-7.6,8.4),n.add(q));let Y=!1,H=0,W=0,X=!0,se=0;const Ne=s=>{Y=!0,X=!1,H=s.clientX,W=s.clientY},je=s=>{if(!Y)return;const M=s.clientX-H,j=s.clientY-W;n.rotation.y+=M*.01,n.rotation.x+=j*.01,H=s.clientX,W=s.clientY},ne=()=>{Y=!1,setTimeout(()=>{Y||(X=!0)},3e3)},me=s=>{s.preventDefault();const M=.1,j=f.position.distanceTo(new ie(0,0,0));s.deltaY>0&&j<50?f.position.multiplyScalar(1+M):s.deltaY<0&&j>10&&f.position.multiplyScalar(1-M)},ue=s=>{s.key==="Escape"&&document.dispatchEvent(new CustomEvent("universe-close-fullscreen"))},xe=s=>{if(s.preventDefault(),s.touches.length===1)Y=!0,X=!1,H=s.touches[0].clientX,W=s.touches[0].clientY;else if(s.touches.length===2){const M=s.touches[0].clientX-s.touches[1].clientX,j=s.touches[0].clientY-s.touches[1].clientY;se=Math.sqrt(M*M+j*j)}},he=s=>{if(s.preventDefault(),s.touches.length===1&&Y){const M=s.touches[0].clientX-H,j=s.touches[0].clientY-W;n.rotation.y+=M*.01,n.rotation.x+=j*.01,H=s.touches[0].clientX,W=s.touches[0].clientY}else if(s.touches.length===2){const M=s.touches[0].clientX-s.touches[1].clientX,j=s.touches[0].clientY-s.touches[1].clientY,I=Math.sqrt(M*M+j*j);if(se>0){const re=I/se,Z=f.position.distanceTo(new ie(0,0,0));re>1&&Z>10?f.position.multiplyScalar(1-.01):re<1&&Z<50&&f.position.multiplyScalar(1+.01)}se=I}},ae=s=>{s.preventDefault(),Y=!1,se=0,setTimeout(()=>{Y||(X=!0)},3e3)},y=a.domElement;y.style.cursor="grab",y.addEventListener("mousedown",s=>{y.style.cursor="grabbing",Ne(s)}),y.addEventListener("mousemove",je),y.addEventListener("mouseup",()=>{y.style.cursor="grab",ne()}),y.addEventListener("mouseleave",()=>{y.style.cursor="grab",ne()}),y.addEventListener("wheel",me),y.addEventListener("touchstart",xe,{passive:!1}),y.addEventListener("touchmove",he,{passive:!1}),y.addEventListener("touchend",ae,{passive:!1}),document.addEventListener("keydown",ue);const pe=()=>{g.current=requestAnimationFrame(pe),X&&(n.rotation.y+=.002,n.rotation.x+=.001);const s=Date.now()*.005;ee.scale.setScalar(1+Math.sin(s)*.1),te.rotation.y+=.01,a.render(b,f)};pe();const ge=()=>{const s=m.clientWidth,M=m.clientHeight;f.aspect=s/M,f.updateProjectionMatrix(),a.setSize(s,M)};return window.addEventListener("resize",ge),()=>{window.removeEventListener("resize",ge),document.removeEventListener("keydown",ue),y.removeEventListener("mousedown",Ne),y.removeEventListener("mousemove",je),y.removeEventListener("mouseup",ne),y.removeEventListener("mouseleave",ne),y.removeEventListener("wheel",me),y.removeEventListener("touchstart",xe),y.removeEventListener("touchmove",he),y.removeEventListener("touchend",ae),g.current&&cancelAnimationFrame(g.current),m&&a.domElement&&m.removeChild(a.domElement),a.dispose(),w.dispose(),S.dispose(),p.dispose(),Q.dispose(),be.dispose(),R.dispose(),we.dispose()}},[t,i]),e.jsx("div",{ref:l,className:"w-full h-full"})},rt=({coordinates:t,galaxyName:i})=>{const l=o.useRef(null),c=o.useRef(null),d=o.useRef(null),g=o.useRef(null),[m,N]=o.useState(!1),[B,b]=o.useState(!1),[f,a]=o.useState(!1),r=()=>{b(!0),setTimeout(()=>{N(!1),b(!1)},300)};o.useEffect(()=>{const u=z=>{z.key==="Escape"&&m&&r()};return document.addEventListener("universe-close-fullscreen",r),document.addEventListener("keydown",u),()=>{document.removeEventListener("universe-close-fullscreen",r),document.removeEventListener("keydown",u)}},[m]),o.useEffect(()=>{if(m&&f){const u=setTimeout(()=>{a(!1)},50);return()=>clearTimeout(u)}},[m,f]),o.useEffect(()=>{if(!l.current)return;const u=l.current,z=u.clientWidth,h=z<640,n=new ze;n.background=new Re(657930),c.current=n;const w=new Te(30,z/120,.1,1e3);w.position.set(12,8,12),w.lookAt(0,0,0);const S=new Le({antialias:!0,alpha:!0});S.setSize(z,120),S.setClearColor(0,.2),d.current=S,u.appendChild(S.domElement);const p=0,x=1e7,v=5e6,[C,P,Q]=t,be=((C-p)/(x-p)-.5)*8,ee=((P-p)/(x-p)-.5)*8,ve=((Q-p)/(x-p)-.5)*8,R=new De;n.add(R);const we=new Ge(8,8,8),te=new Ie(we),ye=new Be({color:16777215,opacity:.4,transparent:!0}),Ee=new $e(te,ye);R.add(Ee);const le=new fe(8,8,16777215,16777215);le.material.opacity=.1,le.material.transparent=!0,le.position.y=-4,R.add(le);const O=new fe(8,8,16777215,16777215);O.material.opacity=.05,O.material.transparent=!0,O.rotation.z=Math.PI/2,O.position.x=-4,R.add(O);const F=new fe(8,8,16777215,16777215);F.material.opacity=.05,F.material.transparent=!0,F.rotation.x=Math.PI/2,F.position.z=-4,R.add(F);const ce=new U(.25,16,16),de=new K({color:16777215,transparent:!0,opacity:.9}),q=new J(ce,de);q.position.set(0,0,0),R.add(q);const Y=new J(new U(.45,16,16),new K({color:16777215,transparent:!0,opacity:.2}));q.add(Y);const H=new U(.2,16,16),W=new K({color:6605055,transparent:!0,opacity:1}),X=new J(H,W);X.position.set(be,ee,ve),R.add(X);const se=new J(new U(.35,16,16),new K({color:6605055,transparent:!0,opacity:.3}));if(X.add(se),Math.sqrt(Math.pow(C-v,2)+Math.pow(P-v,2)+Math.pow(Q-v,2))<2e6){const E=[new ie(0,0,0),new ie(be,ee,ve)],_=new _e().setFromPoints(E),A=new Ae({color:16762980,dashSize:.3,gapSize:.3,opacity:.4,transparent:!0}),V=new Pe(_,A);V.computeLineDistances(),R.add(V)}const je=new Ye(4210752,.6);n.add(je);const ne=new Xe(16777215,.8);ne.position.set(5,5,5),n.add(ne);const me=(E,_)=>{const A=document.createElement("canvas"),V=A.getContext("2d");if(!V)return null;A.width=32,A.height=32,V.fillStyle=`#${_.toString(16).padStart(6,"0")}`,V.font="bold 24px Arial",V.textAlign="center",V.textBaseline="middle",V.fillText(E,16,16);const Ve=new Fe(A),Oe=new He({map:Ve,transparent:!0,opacity:.8}),Se=new We(Oe);return Se.scale.set(.8,.8,1),Se},ue=me("X",16739179);ue&&(ue.position.set(4.2,-3.8,-3.8),R.add(ue));const xe=me("Y",7077739);xe&&(xe.position.set(-3.8,4.2,-3.8),R.add(xe));const he=me("Z",7039999);he&&(he.position.set(-3.8,-3.8,4.2),R.add(he));let ae=!1,y=0,pe=0,ge=!0;const s=E=>{ae=!0,ge=!1,y=E.clientX,pe=E.clientY},M=E=>{if(!ae)return;const _=E.clientX-y,A=E.clientY-pe;R.rotation.y+=_*.01,R.rotation.x+=A*.01,y=E.clientX,pe=E.clientY},j=()=>{ae=!1,setTimeout(()=>{ae||(ge=!0)},3e3)},I=E=>{E.preventDefault();const _=.1,A=w.position.distanceTo(new ie(0,0,0));E.deltaY>0&&A<25?w.position.multiplyScalar(1+_):E.deltaY<0&&A>5&&w.position.multiplyScalar(1-_)},T=S.domElement;T.style.cursor="grab",T.style.borderRadius="8px",T.addEventListener("mousedown",E=>{T.style.cursor="grabbing",s(E)}),T.addEventListener("mousemove",M),T.addEventListener("mouseup",()=>{T.style.cursor="grab",j()}),T.addEventListener("mouseleave",()=>{T.style.cursor="grab",j()}),T.addEventListener("wheel",I);const re=()=>{g.current=requestAnimationFrame(re),ge&&(R.rotation.y+=.002,R.rotation.x+=.001);const E=Date.now()*.005;q.scale.setScalar(1+Math.sin(E)*.1),X.rotation.y+=.01,S.render(n,w)};re();const Z=()=>{const E=u.clientWidth,_=E<640?150:160;w.aspect=E/_,w.updateProjectionMatrix(),S.setSize(E,_)};return window.addEventListener("resize",Z),()=>{window.removeEventListener("resize",Z),T.removeEventListener("mousedown",s),T.removeEventListener("mousemove",M),T.removeEventListener("mouseup",j),T.removeEventListener("mouseleave",j),T.removeEventListener("wheel",I),g.current&&cancelAnimationFrame(g.current),u&&S.domElement&&u.removeChild(S.domElement),S.dispose(),we.dispose(),te.dispose(),ye.dispose(),ce.dispose(),de.dispose(),H.dispose(),W.dispose()}},[t,i]);const k=u=>u.replace(/_/g," "),L=u=>u>=1e6?`${(u/1e6).toFixed(1)}M`:u>=1e3?`${(u/1e3).toFixed(1)}K`:u.toString(),[$,D,G]=t;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Galaxy Location"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:l,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsxs("button",{onClick:()=>{N(!0),a(!0)},className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 flex items-center gap-1 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:[e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),e.jsx("span",{className:"text-xs text-white hidden sm:inline",children:"Expand"})]})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-[10px]",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:k(i)})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:[L($),", ",L(D),", ",L(G)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom • Drag: Rotate View"})]})]}),m&&qe.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${B||f?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${B||f?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:k(i)})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[k(i)," - Galaxy Location"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Galaxy"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[L($),", ",L(D),", ",L(G)]})]})]}),e.jsx("button",{onClick:r,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(at,{coordinates:t,galaxyName:i})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},ot=({galaxy:t})=>{const i=l=>l.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex gap-2 z-10",children:[e.jsx(tt,{locationType:"galaxy",locationId:t.name,coordinates:t.coordinates.join(","),className:"text-xs"}),e.jsx(st,{type:"galaxy",name:t.name,coordinates:t.coordinates.join(","),className:"text-xs"}),e.jsx("div",{className:"bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded",children:"VISITED"})]}),e.jsx("div",{className:"mb-3",children:e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Galaxy Information"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300",children:t.galaxy_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Solar Systems"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:t.num_systems.toLocaleString()})]})]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-2",children:e.jsx(rt,{coordinates:t.coordinates,galaxyName:t.name})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-gray-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Cosmic Objects"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-pink-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Black Holes"}),e.jsx("div",{className:"text-xs font-bold text-pink-300",children:t.black_holes.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Pulsars"}),e.jsx("div",{className:"text-xs font-bold text-cyan-300",children:t.pulsars.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Quasars"}),e.jsx("div",{className:"text-xs font-bold text-indigo-300",children:t.quasars.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("div",{className:"text-green-400 font-medium",children:"Visited"})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:i(t.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:t.coordinates.join(", ")})]})]})]})]})},it=({galaxyUrl:t,imageUrl:i})=>{const l=o.useRef(null),c=o.useRef(null),[d,g]=o.useState("Aligning Stargate..."),[m,N]=o.useState(!1),[B,b]=o.useState(!1),[f,a]=o.useState(!1);return o.useEffect(()=>{const r=l.current;if(!r)return;const k=r.getContext("2d");if(!k)return;let L=[];const $=800;let D,G;const u=800;let z,h=.5;function n(){const x=r?.parentElement;if(!x||!r)return;const v=x.clientWidth,C=x.clientHeight;r.width=Math.min(v,u),r.height=Math.min(C,u),D=r.width/2,G=r.height/2}function w(){n(),L=[];for(let x=0;x<$;x++)L.push({x:Math.random()*(r?.width||800),y:Math.random()*(r?.height||800),z:Math.random()*(r?.width||800),o:Math.random()});S()}function S(){!r||!k||(k.clearRect(0,0,r.width,r.height),L.forEach(x=>{x.z-=h,x.z<=0&&(x.z=r.width,x.x=Math.random()*r.width,x.y=Math.random()*r.height,x.o=Math.random());const v=r.width/x.z,C=(x.x-D)*v+D,P=(x.y-G)*v+G,Q=2*v;k.beginPath(),k.fillStyle=`rgba(255, 255, 255, ${x.o})`,k.arc(C,P,Q,0,2*Math.PI),k.fill()}),h<60&&(h+=1),z=requestAnimationFrame(S))}w();const p=()=>n();return window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p),z&&cancelAnimationFrame(z)}},[]),o.useEffect(()=>{if(i){const r=new Image;r.onload=()=>{c.current&&(c.current.src=i,b(!0),a(!0))},r.onerror=()=>{console.error("Failed to load galaxy image:",i),setTimeout(()=>{b(!0),a(!0)},1500)},r.src=i}else setTimeout(()=>{b(!0),a(!0)},1500)},[i]),o.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){g("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),N(!0);const k=(u,z)=>Array.from({length:z},()=>u[Math.floor(Math.random()*u.length)]).join(""),L=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:30},{chars:"0123456789ABCDEF",duration:20,iterations:40},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:'\",.<>?/`~",duration:10,iterations:100}];let $=0,D=0;const G=()=>{if($>=L.length){const z="Stargate system aligned";let h=0;g("");const n=()=>{h<z.length?(g(z.substring(0,h+1)),h++,setTimeout(n,30)):N(!1)};n();return}const u=L[$];g(k(u.chars,32)),D++,D>=u.iterations&&($++,D=0),setTimeout(G,u.duration)};G()},[]),o.useEffect(()=>{const r=document.createElement("style");return r.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(r),()=>{document.head.removeChild(r)}},[]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3",children:"Galaxy Visualization"}),e.jsxs("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:[e.jsx("canvas",{ref:l,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${f?"opacity-0":"opacity-100"}`,style:{filter:f?"blur(50px)":"none"}}),e.jsx("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${B?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:B&&i?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Ze,{zoomMargin:20,classDialog:"backdrop-blur-3xl",children:e.jsx("img",{ref:c,className:"max-w-full max-h-full object-contain rounded-xl shadow-2xl shadow-blue-500/20",src:i,alt:"Galaxy visualization",style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:"transparent"}})})}):e.jsx("img",{ref:c,className:"w-full h-full object-cover",src:"/static/images/placeholder-min.jpg",alt:"Galaxy visualization"})})]}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:t,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${m?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),d]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]})]})},lt=({systems:t,coordinates:i})=>{const[l,c]=o.useState(new Map);return o.useEffect(()=>{(()=>{try{const g=new Map;t.forEach(m=>{const N=Ue(i,m.index,m.num_planets||1);g.set(m.index,N)}),c(g)}catch(g){console.error("Error loading historical data:",g)}})()},[i,t]),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:t.map(d=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[(()=>{const g=l.get(d.index)||"none";return g==="complete"?e.jsx("div",{className:"absolute top-1 right-1 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}):g==="partial"?e.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500/20 border border-yellow-500/50 text-yellow-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"PARTIAL"}):null})(),e.jsxs("button",{onClick:()=>window.location.href=`/system/${d.index}`,className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["#",d.number]}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:d.name})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},d.index))}),t.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No systems found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This galaxy appears to be empty"})]})]})},ct=({currentGalaxy:t})=>{const[i,l]=o.useState(!1),[c,d]=o.useState(!1),[g,m]=o.useState(!0),[N,B]=o.useState(!1),[b,f]=o.useState(null),a=1e7;o.useEffect(()=>{const[h,n,w]=t.coordinates,S=!(h===0&&n===0&&w===0),p=!(h===a&&n===a&&w===a);l(S),d(p),m(!1)},[t.coordinates]);const r=()=>oe.previewTravelCost("galaxy",1),k=h=>{f(h),B(!0)},L=()=>{B(!1),f(null)},$=h=>`(${h.join(", ")})`,D=()=>{const[h,n,w]=t.coordinates;return w>0?[h,n,w-1]:n>0?[h,n-1,a]:h>0?[h-1,a,a]:[0,0,0]},G=()=>{const[h,n,w]=t.coordinates;return w<a?[h,n,w+1]:n<a?[h,n+1,0]:h<a?[h+1,0,0]:[a,a,a]},u=()=>{if(i){if(!oe.canAffordTravel("galaxy",1)){oe.executeTravel("galaxy",1);return}if(!oe.executeTravel("galaxy",1))return;const[n,w,S]=D(),p=document.createElement("form");p.method="POST",p.action="/navigate";const x=document.createElement("input");x.type="hidden",x.name="x",x.value=n.toString();const v=document.createElement("input");v.type="hidden",v.name="y",v.value=w.toString();const C=document.createElement("input");C.type="hidden",C.name="z",C.value=S.toString(),p.appendChild(x),p.appendChild(v),p.appendChild(C),document.body.appendChild(p),p.submit()}},z=()=>{if(c){if(!oe.canAffordTravel("galaxy",1)){oe.executeTravel("galaxy",1);return}if(!oe.executeTravel("galaxy",1))return;const[n,w,S]=G(),p=document.createElement("form");p.method="POST",p.action="/navigate";const x=document.createElement("input");x.type="hidden",x.name="x",x.value=n.toString();const v=document.createElement("input");v.type="hidden",v.name="y",v.value=w.toString();const C=document.createElement("input");C.type="hidden",C.name="z",C.value=S.toString(),p.appendChild(x),p.appendChild(v),p.appendChild(C),document.body.appendChild(p),p.submit()}};return g?null:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:u,onMouseEnter:()=>k("prev"),onMouseLeave:L,disabled:!i,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${i?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:z,onMouseEnter:()=>k("next"),onMouseLeave:L,disabled:!c,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${c?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),N&&b&&e.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 z-50 bg-black/90 backdrop-blur-xl rounded-lg border border-blue-400/30 p-3 shadow-2xl min-w-max",children:[e.jsx("div",{className:"text-xs text-blue-300 font-semibold mb-1",children:"🚀 Galaxy Travel Cost"}),e.jsx("div",{className:"text-xs text-white",children:r()}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[b==="prev"&&`← Galaxy ${$(D())}`,b==="next"&&`Galaxy ${$(G())} →`]})]})]})},dt=({page:t,prevPage:i,nextPage:l,finish:c})=>{const d="px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105",g="bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg",m="bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white border border-white/20";return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 sm:gap-4 flex-wrap",children:[t!==1&&e.jsxs("button",{onClick:()=>window.location.href="/galaxy/1",className:`${d} ${m}`,title:"First page",children:[e.jsx("span",{className:"hidden sm:inline",children:"First"}),e.jsx("span",{className:"sm:hidden",children:"«"})]}),i&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${i}`,className:`${d} ${m}`,title:"Previous page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"‹"})]}),(()=>{const N=[],b=Math.max(1,t-2),f=Math.min(c,t+2);b>1&&(N.push(e.jsx("button",{onClick:()=>window.location.href="/galaxy/1",className:`${d} ${m}`,children:"1"},1)),b>2&&N.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"start-ellipsis")));for(let a=b;a<=f;a++)a===t?N.push(e.jsx("span",{className:`${d} ${g} cursor-default`,children:a},a)):N.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${a}`,className:`${d} ${m} cursor-pointer`,children:a},a));return f<c&&(f<c-1&&N.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"end-ellipsis")),N.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${c}`,className:`${d} ${m}`,children:c},c))),N})(),l&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${l}`,className:`${d} ${m}`,title:"Next page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"›"})]}),t!==c&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${c}`,className:`${d} ${m}`,title:"Last page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Last"}),e.jsx("span",{className:"sm:hidden",children:"»"})]})]}),e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-400",children:["Page ",t," of ",c]})]})},ke=({galaxy:t,systems:i,galaxy_url:l,version:c,page:d,prev_page:g,next_page:m,finish:N,image_url:B})=>{const[b]=o.useState(t.coordinates.join(","));o.useEffect(()=>{document.body.setAttribute("data-coordinates",b),Ke(b)},[b]);const f=a=>a.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsx(Je,{}),e.jsxs("div",{className:"relative z-10 pt-1",children:[e.jsx(Qe,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["Galaxy '",f(t.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Coordinates ",t.coordinates.join(", ")]})]}),e.jsx(ct,{currentGalaxy:t}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(it,{galaxyUrl:l,imageUrl:B})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(ot,{galaxy:t})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Systems in '",f(t.name),"'"]}),e.jsx(lt,{systems:i,coordinates:b})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsx("span",{className:"text-base sm:text-lg",children:"← Go Back to Planetary Index"})})}),e.jsx(dt,{page:d,prevPage:g,nextPage:m,finish:N})]}),e.jsx(nt,{version:c})]}),e.jsx(et,{currentLocation:{type:"galaxy",name:t.name,coordinates:t.coordinates.join(",")}})]})};document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("atlas-react-root");if(!t){console.error("Could not find atlas-react-root element");return}const i=l=>{const c=document.getElementById(l);if(!c||!c.textContent)return null;try{return JSON.parse(c.textContent.trim())}catch(d){return console.error(`Error parsing data from script ${l}:`,d),null}};try{const l=i("data-galaxy")||{},c=i("data-systems")||[],d=i("data-navigation")||{},g=i("data-common")||{},m={galaxy:{name:l.name||"Unknown Galaxy",coordinates:l.coordinates||[0,0,0],galaxy_type:l.galaxy_type||"Unknown",num_systems:l.num_systems||0,black_holes:l.black_holes||0,pulsars:l.pulsars||0,quasars:l.quasars||0},systems:c,galaxy_url:d.galaxy_url||"#",version:g.version||"1.0.0",page:d.page||1,prev_page:d.prev_page,next_page:d.next_page,finish:d.finish||1,image_url:g.image_url||""};Ce.createRoot(t).render(Me.createElement(ke,m))}catch(l){console.error("Error parsing galaxy data:",l);const c={galaxy:{name:"Unknown Galaxy",coordinates:[0,0,0],galaxy_type:"Unknown",num_systems:0,black_holes:0,pulsars:0,quasars:0},systems:[],galaxy_url:"#",version:"1.0.0",page:1,finish:1,image_url:""};Ce.createRoot(t).render(Me.createElement(ke,c))}});
