import{G as c,E as D,B as z,L as R,C as p,h as g,R as v,i as b,D as x,M as m,V as d,j as k,T as P,k as S,l as w}from"./atlas_Xs9BLEnnn6iCcADsGARg5.js";class _{group;doodles=[];doodleData=[];planetRadius;time=0;constructor(t,e={}){this.group=new c,this.planetRadius=t,this.doodleData=e.doodles||[],this.doodleData.length>0&&this.createDoodles()}createDoodles(){this.doodleData.forEach(t=>{let e;switch(t.type){case"arc":e=this.createArcDoodle(t);break;case"fractals":e=this.createFractalDoodle(t);break;case"squiggle":e=this.createSquiggleDoodle(t);break;default:e=this.createSquiggleDoodle(t)}const s=this.planetRadius*1.015;e.position.set(t.position_3d[0]*s,t.position_3d[1]*s,t.position_3d[2]*s),e.lookAt(e.position.x*2,e.position.y*2,e.position.z*2),this.doodles.push(e),this.group.add(e)})}createArcDoodle(t){const e=new c,a=new D(0,0,t.size*this.planetRadius,t.size*this.planetRadius*.7,0,Math.PI*1.5,!1,0).getPoints(50),i=new z().setFromPoints(a),o=new R({color:new p(t.color[0],t.color[1],t.color[2]),transparent:!0,opacity:t.color[3],linewidth:3}),n=new g(i,o);return e.add(n),e}createFractalDoodle(t){const e=new c;for(let s=0;s<t.complexity;s++){const a=s/t.complexity*Math.PI*2,i=t.size*this.planetRadius*(.2+Math.sin(s*.5)*.3),o=new v(i*.8,i,16),n=new b({color:new p(t.color[0]*(.7+Math.sin(s)*.3),t.color[1]*(.7+Math.cos(s)*.3),t.color[2]),transparent:!0,opacity:t.color[3]*(.5+Math.sin(s*2)*.5),side:x}),r=new m(o,n);r.position.set(Math.cos(a)*t.size*this.planetRadius*.5,Math.sin(a)*t.size*this.planetRadius*.5,Math.sin(s*.3)*t.size*this.planetRadius*.1),r.rotation.z=a,e.add(r)}return e}createSquiggleDoodle(t){const e=new c,s=[],a=t.complexity*2;for(let h=0;h<=a;h++){const u=h/a,f=(u-.5)*t.size*this.planetRadius*2,M=Math.sin(u*Math.PI*4)*t.size*this.planetRadius*.3,y=Math.cos(u*Math.PI*3)*t.size*this.planetRadius*.1;s.push(new d(f,M,y))}const i=new k(s),o=new P(i,a*2,t.size*this.planetRadius*.02,8,!1),n=new S({color:new p(t.color[0],t.color[1],t.color[2]),transparent:!0,opacity:t.color[3],emissive:new p(t.color[0]*.2,t.color[1]*.2,t.color[2]*.2),emissiveIntensity:.3}),r=new m(o,n);return e.add(r),e}update(t){this.time+=t,this.doodles.forEach((e,s)=>{const a=this.doodleData[s];if(!a)return;const i=a.movement_speed;switch(a.movement_pattern){case"wave":e.rotation.z=Math.sin(this.time*i)*.2,e.rotation.x=Math.cos(this.time*i*.7)*.1;break;case"pulse":const o=1+Math.sin(this.time*i*2)*.1;e.scale.setScalar(o);break;case"spiral":e.rotation.z+=i*t;break}})}addToScene(t,e){this.group.position.copy(e),t.add(this.group)}removeFromScene(t){t.remove(this.group)}getObject3D(){return this.group}dispose(){this.doodles.forEach(t=>{t.traverse(e=>{e instanceof m?(e.geometry.dispose(),e.material instanceof w&&e.material.dispose()):e instanceof g&&(e.geometry.dispose(),e.material instanceof w&&e.material.dispose())})}),this.doodles=[]}}function G(l,t,e){return!t.exotic_doodles||t.exotic_doodles.length===0?null:new _(l,{doodles:t.exotic_doodles,planetRadius:l})}export{_ as E,G as c};
