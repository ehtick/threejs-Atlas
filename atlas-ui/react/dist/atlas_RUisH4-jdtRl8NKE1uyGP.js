import{r as f,j as t,c as Be}from"./atlas_BG-O7ORrd1CIuvq6sOIEu.js";import{V as Ue}from"./atlas_CMDVgZFw_5MpHeUQOkkoo.js";import{W as Ge}from"./atlas_DpO-yiEKcG7KgC12H7eV0.js";import{E as Ve,R as Oe,U as He,S as ye}from"./atlas_DW5pjI1Gho2bvOSJCUCvJ.js";import{a5 as We,C as re,a6 as Le,f as qe,G as _e,z as ee,V as se,l as $e,M as ie,A as X,B as we,a as q,Y as be,P as Me,b as Xe,r as Ye,v as Ze,R as Qe}from"./atlas_DUxdE5_5iPCKlmI6uaLFO.js";import{c as Je}from"./atlas_DrNuGgsmr8JJoyR3GdX9S.js";import"./atlas_DTMHG0KBmlmtp0V4aoQDq.js";import"./atlas_3UsC9TRh4BQw36DWQTQvf.js";const Ke=({animationType:_,onAnimationComplete:i})=>{const k=f.useRef(null),F=f.useRef(null),B=f.useRef(null),Y=f.useRef(null),O=f.useRef(null),E=f.useRef(null),[U,H]=f.useState(!1),W=f.useRef(null),D=()=>{const d=document.createElement("canvas");d.width=64,d.height=64;const m=d.getContext("2d");m.clearRect(0,0,64,64);const g=m.createRadialGradient(32,32,0,32,32,32);g.addColorStop(0,"rgba(255,255,255,1.0)"),g.addColorStop(.3,"rgba(255,255,255,0.8)"),g.addColorStop(.7,"rgba(255,255,255,0.2)"),g.addColorStop(1,"rgba(255,255,255,0.0)"),m.fillStyle=g,m.beginPath(),m.arc(32,32,32,0,Math.PI*2),m.fill();const M=new Ze(d);return M.premultiplyAlpha=!1,M.format=Qe,M},Z={uniforms:{tDiffuse:{value:null},distortion:{value:0},time:{value:0}},vertexShader:`
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
      }
    `,fragmentShader:`
      uniform sampler2D tDiffuse;
      uniform float distortion;
      uniform float time;
      varying vec2 vUv;
      
      void main() {
        vec2 center = vec2(0.5, 0.5);
        vec2 direction = vUv - center;
        float distance = length(direction);
        
        float aberration = distortion * distance;
        
        vec2 redOffset = direction * aberration * 1.5;
        vec2 greenOffset = direction * aberration;
        vec2 blueOffset = direction * aberration * 0.5;
        
        float red = texture2D(tDiffuse, vUv + redOffset).r;
        float green = texture2D(tDiffuse, vUv + greenOffset).g;
        float blue = texture2D(tDiffuse, vUv + blueOffset).b;
        
        gl_FragColor = vec4(red, green, blue, 1.0);
      }
    `},te={uniforms:{tDiffuse:{value:null},distortionAmount:{value:0},time:{value:0}},vertexShader:`
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
      }
    `,fragmentShader:`
      uniform sampler2D tDiffuse;
      uniform float distortionAmount;
      uniform float time;
      varying vec2 vUv;
      
      void main() {
        vec2 center = vec2(0.5, 0.5);
        vec2 uv = vUv;
        
        vec2 direction = uv - center;
        float distance = length(direction);
        
        float waveDistortion = sin(distance * 20.0 + time * 10.0) * distortionAmount * 0.02;
        float radialDistortion = distance * distortionAmount * 0.1;
        
        uv += direction * (waveDistortion + radialDistortion);
        
        gl_FragColor = texture2D(tDiffuse, uv);
      }
    `},ae=()=>{if(k.current)try{const d=new We;d.background=new re(17),F.current=d;const m=new Le(75,window.innerWidth/window.innerHeight,.01,1e3);m.position.set(0,0,.1),Y.current=m;const g=new Ge({antialias:!0,alpha:!1});g.setSize(window.innerWidth,window.innerHeight),k.current.appendChild(g.domElement),B.current=g;const M=new Ve(g),s=new Oe(d,m);M.addPass(s);const p=new He(new qe(window.innerWidth,window.innerHeight),.3,.6,.3);M.addPass(p);const T=new ye(te);M.addPass(T);const Pe=new ye(Z);M.addPass(Pe),O.current=M;const ce=(e,o)=>{const x=new _e,v=new ee({color:16777215,transparent:!0,opacity:.8});return[[[-e/2,-e/2,e/2],[e/2,-e/2,e/2]],[[e/2,-e/2,e/2],[e/2,e/2,e/2]],[[e/2,e/2,e/2],[-e/2,e/2,e/2]],[[-e/2,e/2,e/2],[-e/2,-e/2,e/2]],[[-e/2,-e/2,-e/2],[e/2,-e/2,-e/2]],[[e/2,-e/2,-e/2],[e/2,e/2,-e/2]],[[e/2,e/2,-e/2],[-e/2,e/2,-e/2]],[[-e/2,e/2,-e/2],[-e/2,-e/2,-e/2]],[[-e/2,-e/2,-e/2],[-e/2,-e/2,e/2]],[[e/2,-e/2,-e/2],[e/2,-e/2,e/2]],[[e/2,e/2,-e/2],[e/2,e/2,e/2]],[[-e/2,e/2,-e/2],[-e/2,e/2,e/2]]].forEach(([b,y])=>{const S=new se(b[0],b[1],b[2]),w=new se(y[0],y[1],y[2]),j=w.clone().sub(S).length(),G=new $e(o,o,j,8),C=new ie(G,v);C.position.copy(S.clone().add(w).multiplyScalar(.5)),C.lookAt(w),C.rotateX(Math.PI/2),x.add(C)}),x},c=ce(10,.05);d.add(c);const R=ce(10,.05);R.children.forEach(e=>{const o=c.children[0].material;e.material=new ee({color:o.color.clone(),transparent:!0,opacity:0,blending:X})}),R.position.copy(c.position),d.add(R);const Ae=new Float32Array([0,0,0]),De=new Float32Array([1,1,1]),Ne=new Float32Array([10]),Q=new we;Q.setAttribute("position",new q(Ae,3)),Q.setAttribute("color",new q(De,3)),Q.setAttribute("size",new q(Ne,1));const J=new be({size:7,vertexColors:!0,blending:X,transparent:!0,alphaTest:.01,map:D()}),Ee=new Me(Q,J);d.add(Ee);const I=7500,N=new Float32Array(I*3),K=new Float32Array(I*3),le=new Float32Array(I),ne=new Float32Array(I*3),L=new Float32Array(I*3),Re=new Float32Array(I),oe=[];for(let e=0;e<I;e++){const o=3+Math.floor(Math.random()*3);let x=1/0,v=0,u=0,b=0;for(let S=0;S<o;S++){const w=(Math.random()-.5)*10,h=(Math.random()-.5)*10,j=(Math.random()-.5)*10,G=Math.sqrt(w*w+h*h+j*j),C=Math.pow(Math.random(),1.8)+G*.1;C<x&&(x=C,v=w,u=h,b=j)}const y=Math.sqrt(v*v+u*u+b*b);oe.push({index:e,x:v,y:u,z:b,distance:y,launchTime:Math.random()*3,speed:y>0?(2+Math.random()*3)/y:1})}for(let e=0;e<I;e++){const o=oe[e];N[e*3]=0,N[e*3+1]=0,N[e*3+2]=0,ne[e*3]=o.x,ne[e*3+1]=o.y,ne[e*3+2]=o.z,Re[e]=o.distance,o.distance>0?(L[e*3]=o.x/o.distance,L[e*3+1]=o.y/o.distance,L[e*3+2]=o.z/o.distance):(L[e*3]=0,L[e*3+1]=0,L[e*3+2]=1);const x=Math.random()*.8+.4,v=Math.min(o.distance/5,1);K[e*3]=x*(.2+v*.8),K[e*3+1]=x*(.5+v*.5),K[e*3+2]=x*(.8+v*.2),le[e]=Math.random()*.8+.3}const $=new we;$.setAttribute("position",new q(N,3)),$.setAttribute("color",new q(K,3)),$.setAttribute("size",new q(le,1));const de=new be({size:.1,vertexColors:!0,blending:X,transparent:!0,alphaTest:.01,depthWrite:!1,map:D()}),me=new Me($,de);d.add(me);const z=[];for(let e=0;e<8;e++){const o=new ie(new Xe(1,32,32),new ee({color:new re().setHSL(e*.08,1,.7),transparent:!0,opacity:0,wireframe:!0,blending:X}));z.push(o),d.add(o)}const ue=[],Ie=200;for(let e=0;e<Ie;e++){const o=new ie(new Ye(.1,.1,.1),new ee({color:new re().setHSL(Math.random()*.2,1,.8),transparent:!0,opacity:0,blending:X}));o.userData={direction:new se((Math.random()-.5)*2,(Math.random()-.5)*2,(Math.random()-.5)*2).normalize(),speed:Math.random()*10+5,life:Math.random()*2+1},ue.push(o),d.add(o)}let Te=Date.now();const he=()=>{const e=(Date.now()-Te)/1e3,o=10,x=7.5,v=2,u=1.5,b=O.current,y=b?.passes[1],S=b?.passes[2],w=b?.passes[3],h=Math.min(e/u,1),j=e<u;if(y&&S&&w)if(j){const a=Math.sin(h*Math.PI);y.strength=.2+a*.4,y.radius=.5+a*.1,S.uniforms.distortionAmount.value=a*2.5,S.uniforms.time.value=e,w.uniforms.distortion.value=a*.4,w.uniforms.time.value=e}else{const a=Math.max(0,1-(e-u)/2);y.strength=.3+a*.4,y.radius=.6+a*.1,S.uniforms.distortionAmount.value=a*.1,S.uniforms.time.value=e,w.uniforms.distortion.value=a*.03,w.uniforms.time.value=e}if(j){const a=h<.2?Math.sin(h*Math.PI*10)*.5+1:Math.max(0,1-h*2);z.forEach((n,l)=>{const P=l*.08,A=Math.max(0,h-P);if(A>0){const V=A*(40+l*8);n.scale.setScalar(V),n.material.opacity=Math.max(0,1.2-l*.1-A*.8)}}),ue.forEach(n=>{const l=h*n.userData.life;if(l>0){const P=l*n.userData.speed,A=n.userData.direction.clone().multiplyScalar(P);n.position.copy(A),n.material.opacity=Math.max(0,1-l/n.userData.life),n.rotation.x+=.2,n.rotation.y+=.15,n.rotation.z+=.25}}),m.fov=75+Math.sin(h*Math.PI)*40,m.updateProjectionMatrix();const r=Math.sin(e*80)*.5+1;J.size=15+r*20*(1-h),J.opacity=Math.min(1.5,1+a*.8-h)}else{J.opacity=0;const a=e-u,r=2;if(a<r){const n=a/r;z.forEach((l,P)=>{l.material.opacity=Math.max(0,(.3-P*.05)*(1-n))})}else z.forEach(n=>{n.material.opacity=0})}const G=e<u?h*.1:.1+(1-.1)*Math.pow(Math.min((e-u)/2,1),.7);for(let a=0;a<I;a++){const r=oe[a],n=r.launchTime,l=r.speed;if(e>n){const P=e-n,A=Math.min(P*l,1),V=Math.pow(A,.8);N[a*3]=r.x*V*G,N[a*3+1]=r.y*V*G,N[a*3+2]=r.z*V*G}else N[a*3]=0,N[a*3+1]=0,N[a*3+2]=0}if($.attributes.position.needsUpdate=!0,de.opacity=Math.min(e*1.2,1),e<u*.3)c.scale.setScalar(.01),c.rotation.x=0,c.rotation.y=0,c.rotation.z=0;else if(e<u){const a=(h-.3)/.7,r=Math.pow(a,.3)*.8,n=(1-a)*.5,l={x:(Math.random()-.5)*n,y:(Math.random()-.5)*n,z:(Math.random()-.5)*n};c.scale.setScalar(r),c.position.set(l.x,l.y,l.z),c.rotation.x=e*(1.5+Math.sin(e*20)*1),c.rotation.y=e*(2+Math.cos(e*15)*1.5),c.rotation.z=e*(1+Math.sin(e*25)*.5)}else{const a=e-u,r=.8;if(a<r){const V=a/r,Fe=1-Math.pow(V,2);c.position.multiplyScalar(Fe)}else c.position.set(0,0,0);const n=.8+Math.pow(Math.min(a/3,1),.5)*.2;c.scale.setScalar(n);const l=Math.min(a/1,1),P=.2+a*.7,A=e*P*l;c.rotation.x=Math.sin(A*.7)*.3,c.rotation.y=A*.8,c.rotation.z=Math.cos(A*.5)*.25}if(me.rotation.copy(c.rotation),R.position.set(0,0,0),R.rotation.copy(c.rotation),j)R.children.forEach(a=>{const r=a.material;r.opacity=0});else{const a=e-u;if(a>0){const r=1+a*50;R.scale.setScalar(r);const n=Math.max(0,.9-a*.4);R.children.forEach(l=>{const P=l.material;P.opacity=n})}else R.children.forEach(r=>{const n=r.material;n.opacity=0})}let C=8;if(!j){const a=e-u;if(e>=x){const r=Math.min((e-x)/v,1),n=Math.pow(r,2);C=Math.max(.5,2-n*1.8)}else C=Math.max(2,8-a*.8)}const fe=C+Math.sin(e*.3)*1,pe=e*.15,ke=Math.sin(e*.08)*2;let xe=Math.cos(pe)*fe,ge=ke,ve=Math.sin(pe)*fe;if(j){const a=Math.sin(h*Math.PI)*.8;xe+=(Math.random()-.5)*a,ge+=(Math.random()-.5)*a,ve+=(Math.random()-.5)*a}if(m.position.set(xe,ge,ve),m.lookAt(0,0,0),O.current?O.current.render():g.render(d,m),e>=x&&W.current){const a=Math.min((e-x)/v,1),r=Math.pow(a,2);W.current.style.opacity=r.toString()}if(e>o&&i){i();return}E.current=requestAnimationFrame(he)};he()}catch{}};return f.useEffect(()=>{_&&!U&&(H(!0),setTimeout(()=>{ae()},100))},[_,U]),f.useEffect(()=>()=>{E.current&&cancelAnimationFrame(E.current),B.current&&k.current&&B.current.domElement.parentNode&&(k.current.removeChild(B.current.domElement),B.current.dispose())},[]),U?t.jsxs(t.Fragment,{children:[t.jsx("div",{ref:k,className:"fixed inset-0 z-50 bg-black",style:{width:"100vw",height:"100vh"}}),t.jsx("div",{ref:W,className:"fixed inset-0 z-[51] bg-black pointer-events-none",style:{width:"100vw",height:"100vh",opacity:0,transition:"none"}})]}):null},ze=({version:_})=>{const[i,k]=f.useState(""),[F,B]=f.useState("selection"),[Y,O]=f.useState(null),[E,U]=f.useState(!1),[H,W]=f.useState(""),[D,Z]=f.useState(""),te=[{value:"default",title:"The Core Continuum",description:"Venture into the primordial universe where time and space converge for you, exploring the vast cosmos we all traverse as a single entity."},{value:"custom",title:"Design the Multiverse",description:"Generate a personal universe with its own seed and cosmic origin time, a completely unique creation entirely shaped by your decision."}],ae=s=>{k(s),s!=="custom"&&(W(""),Z(""))},d=s=>{if(s.length>20)return"Maximum 20 characters allowed";const p=Je.filterSeed(s);return p.isBlocked?p.reason||"Invalid content":""},m=s=>{const p=s.target.value;if(p.length<=20){W(p);const T=d(p);Z(T)}},g=async s=>{if(s.preventDefault(),!i||F!=="selection"||E||i==="custom"&&D)return;U(!0);const p=new FormData;p.append("universe_type",i),i==="custom"&&H.trim()&&p.append("custom_seed",H.trim());try{const T=await fetch("/onboarding",{method:"POST",body:p});T.ok?(B("animating"),O(i==="default"?"core":"multiverse")):(console.error("Server responded with error:",T.status),U(!1))}catch(T){console.error("Error creating universe:",T),U(!1)}},M=async()=>{window.location.href="/"};return t.jsxs(t.Fragment,{children:[Y&&t.jsx("div",{className:"fixed inset-0 bg-black z-50",children:t.jsx(Ke,{animationType:Y,onAnimationComplete:M})}),t.jsxs("div",{className:`w-full min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white transition-opacity duration-500 flex flex-col ${F!=="selection"?"opacity-0 pointer-events-none":"opacity-100"}`,children:[t.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),t.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[t.jsx("header",{className:"bg-black/20 backdrop-blur-md border-b border-white/10 px-4 sm:px-6 py-6",children:t.jsxs("div",{className:"w-full flex flex-col items-center space-y-4",children:[t.jsx("img",{src:"/static/atlas-logo.jpg",alt:"Atlas Logo",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-full border-2 border-cyan-400 shadow-lg animate-pulse"}),t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Atlas Initialization Protocol"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-300 mt-2",children:"Quantum Navigation System Startup Sequence"})]})]})}),t.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8 sm:py-12 flex-1",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("form",{onSubmit:g,className:"space-y-8",children:[t.jsx("div",{className:"text-center mb-12",children:t.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"Will you journey through a shared universe or forge a new one of your own?"})}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8 mb-12",children:te.map(s=>t.jsx("div",{onClick:()=>ae(s.value),className:`
                        relative group cursor-pointer transition-all duration-500 transform hover:scale-105
                        ${i===s.value?"shadow-2xl shadow-cyan-400/25 scale-105":"hover:shadow-xl hover:shadow-blue-500/20"}
                      `,children:t.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 via-slate-700/80 to-slate-800/80 backdrop-blur-lg rounded-2xl border border-white/10 p-6 sm:p-8 h-full",children:[t.jsx("div",{className:"absolute top-4 right-4",children:t.jsx("div",{className:`
                            w-6 h-6 rounded-full border-2 transition-all duration-300
                            ${i===s.value?"bg-cyan-400 border-cyan-400 shadow-lg shadow-cyan-400/50":"border-gray-400 group-hover:border-cyan-400"}
                          `,children:i===s.value&&t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})})})}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent",children:s.title}),t.jsx("p",{className:"text-gray-300 leading-relaxed text-sm sm:text-base",children:s.description}),s.value==="custom"&&i==="custom"&&t.jsxs("div",{className:"mt-4 space-y-2",onClick:p=>p.stopPropagation(),children:[t.jsx("label",{className:"block text-sm text-gray-400",children:"Custom Seed (optional)"}),t.jsx("input",{type:"text",value:H,onChange:m,maxLength:20,placeholder:"Leave empty for random",className:`w-full px-4 py-2 bg-slate-900/80 border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 transition-all ${D?"border-red-500 focus:ring-red-500/50":"border-white/20 focus:ring-cyan-400/50 focus:border-cyan-400"}`}),t.jsxs("div",{className:"flex justify-between text-xs",children:[t.jsx("span",{className:D?"text-red-400":"text-transparent",children:D||"."}),t.jsxs("span",{className:"text-gray-500",children:[H.length,"/20"]})]})]})]}),t.jsx("div",{className:`
                          absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none
                          bg-gradient-to-br from-cyan-500/10 via-blue-500/10 to-purple-500/10
                          ${i===s.value?"opacity-20":""}
                        `})]})},s.value))}),t.jsx("div",{className:"text-center",children:t.jsxs("button",{type:"submit",disabled:!i||F!=="selection"||E||i==="custom"&&!!D,className:`
                      relative overflow-hidden group px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-500 transform
                      ${i&&F==="selection"&&!E&&!(i==="custom"&&D)?"bg-gradient-to-r from-cyan-500 via-blue-500 to-purple-500 text-white shadow-2xl shadow-blue-500/30 hover:shadow-blue-500/50 hover:scale-110 active:scale-95":"bg-gray-600 text-gray-400 cursor-not-allowed"}
                    `,children:[i&&F==="selection"&&!E&&!(i==="custom"&&D)&&t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 opacity-20 group-hover:opacity-40 transition-opacity duration-300"}),t.jsx("span",{className:"relative z-10 flex items-center justify-center space-x-3",children:E?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{children:"Initializing..."})]}):t.jsx("span",{children:i?"Initialize Protocol":"Select Universe Type"})})]})})]})})}),t.jsx(Ue,{version:_})]})]})]})},Se=document.querySelector('meta[name="atlas-version"]'),je=document.querySelector('meta[name="atlas-version-hash"]'),et={version:Se&&Se.getAttribute("content")||"1.0.0",versionHash:je&&je.getAttribute("content")||""},Ce=document.getElementById("atlas-react-root");Ce&&Be.createRoot(Ce).render(f.createElement(ze,et));
