import{r as o,j as e,V as re,c as ie}from"./atlas_BbN-uIjV0wYM8qO8tvbuH.js";import{S as le,C as ce,P as de,W as ue,B as me,E as ge,L as pe,a as he,e as O,m as f,n as X,o as Y,p as Z,h as xe,R as be}from"./atlas_LIGbhrLWddKCHvzrai2Nn.js";const ve=({animationType:d,onAnimationComplete:s})=>{const u=o.useRef(null),r=o.useRef(null),l=o.useRef(null),A=o.useRef(null),h=o.useRef(null),[m,G]=o.useState(!1);console.log("UniverseAnimationCanvas render, animationType:",d);const M=()=>{const t=document.createElement("canvas");t.width=64,t.height=64;const a=t.getContext("2d");a.clearRect(0,0,64,64);const i=a.createRadialGradient(32,32,0,32,32,32);i.addColorStop(0,"rgba(255,255,255,1.0)"),i.addColorStop(.3,"rgba(255,255,255,0.8)"),i.addColorStop(.7,"rgba(255,255,255,0.2)"),i.addColorStop(1,"rgba(255,255,255,0.0)"),a.fillStyle=i,a.beginPath(),a.arc(32,32,32,0,Math.PI*2),a.fill();const w=new xe(t);return w.premultiplyAlpha=!1,w.format=be,w},P=()=>{if(console.log("Initializing Three.js scene..."),!u.current){console.error("mountRef.current is null");return}try{const t=new le;t.background=new ce(17),r.current=t;const a=new de(75,window.innerWidth/window.innerHeight,.1,1e3);a.position.z=5,A.current=a;const i=new ue({antialias:!0,alpha:!1});i.setSize(window.innerWidth,window.innerHeight),u.current.appendChild(i.domElement),l.current=i,console.log("Three.js scene initialized successfully");const w=new me(10,10,10),K=new ge(w),ee=new pe({color:6710886,transparent:!0,opacity:.5,linewidth:3}),j=new he(K,ee);t.add(j);const te=new Float32Array([0,0,0]),ne=new Float32Array([1,1,1]),ae=new Float32Array([10]),S=new O;S.setAttribute("position",new f(te,3)),S.setAttribute("color",new f(ne,3)),S.setAttribute("size",new f(ae,1));const D=new X({size:7,vertexColors:!0,blending:Y,transparent:!0,alphaTest:.01,map:M()}),se=new Z(S,D);t.add(se);const x=7500,E=new Float32Array(x*3),z=new Float32Array(x*3),q=new Float32Array(x),V=new Float32Array(x);for(let n=0;n<x;n++){let c,b,v;const I=3+Math.floor(Math.random()*3);let y=1/0,R=0,B=0,F=0;for(let k=0;k<I;k++){const N=(Math.random()-.5)*10,g=(Math.random()-.5)*10,p=(Math.random()-.5)*10,$=Math.sqrt(N*N+g*g+p*p),H=Math.pow(Math.random(),1.8)+$*.1;H<y&&(y=H,R=N,B=g,F=p)}c=R,b=B,v=F,E[n*3]=c,E[n*3+1]=b,E[n*3+2]=v;const T=Math.sqrt(c*c+b*b+v*v);V[n]=T,z[n*3]=.2,z[n*3+1]=.5,z[n*3+2]=1,q[n]=Math.random()*.4+.1}const C=new O;C.setAttribute("position",new f(E,3)),C.setAttribute("color",new f(z,3)),C.setAttribute("size",new f(q,1));const W=new X({size:.2,vertexColors:!0,blending:Y,transparent:!0,alphaTest:.01,depthWrite:!1,map:M()}),L=new Z(C,W);t.add(L);let oe=Date.now();const U=()=>{const n=(Date.now()-oe)/1e3,c=Math.min(n/7,1),b=Math.pow(n*.8,3),v=Math.pow(c,2)*20,I=1+b+v,y=n*.05*I;j.rotation.x=Math.sin(y*.7)*.2,j.rotation.y=y*.5,j.rotation.z=Math.cos(y*.3)*.15,L.rotation.copy(j.rotation);const R=3+Math.sin(n*8)*2;D.size=R,D.opacity=.8+Math.sin(n*10)*.2;const B=Math.sqrt(75),F=c*B;let T=0;for(let p=0;p<x;p++)V[p]<=F&&T++;C.setDrawRange(0,T),W.opacity=1;const k=15+Math.sin(n*.5)*3,N=1-c*.6,g=k*N;if(a.position.x=Math.cos(n*.2)*g,a.position.y=Math.sin(n*.15)*g*.5,a.position.z=Math.sin(n*.2)*g,a.lookAt(0,0,0),i.render(t,a),n>7.5&&s){console.log("Big Bang animation complete, calling callback"),s();return}h.current=requestAnimationFrame(U)};U()}catch(t){console.error("Error initializing Three.js scene:",t)}};return o.useEffect(()=>{console.log("useEffect triggered, animationType:",d,"isVisible:",m),d&&!m&&(console.log("Setting visible and initializing scene"),G(!0),setTimeout(()=>{P()},100))},[d,m]),o.useEffect(()=>()=>{console.log("Cleaning up animation"),h.current&&cancelAnimationFrame(h.current),l.current&&u.current&&l.current.domElement.parentNode&&(u.current.removeChild(l.current.domElement),l.current.dispose())},[]),console.log("Rendering component, isVisible:",m),m?e.jsx("div",{ref:u,className:"fixed inset-0 z-50 bg-black",style:{width:"100vw",height:"100vh"}}):(console.log("Component not visible, returning null"),null)},ye=({version:d})=>{const[s,u]=o.useState(""),[r,l]=o.useState("selection"),[A,h]=o.useState(null),m=[{value:"default",title:"The Core Continuum",description:"Venture into the primordial universe where time and space converge for you, exploring the vast cosmos we all traverse as a single entity."},{value:"custom",title:"Design the Multiverse",description:"Generate a personal universe with its own seed and cosmic origin time, a completely unique creation entirely shaped by your decision."}],G=t=>{u(t)},M=t=>{t.preventDefault(),!(!s||r!=="selection")&&(l("animating"),h(s==="default"?"core":"multiverse"))},P=()=>{console.log("Animation completed, current state:",r),l("redirecting"),h(null),setTimeout(()=>{console.log("Redirecting to Flask with universe type:",s);const t=document.createElement("form");t.method="POST",t.action="/onboarding";const a=document.createElement("input");a.type="hidden",a.name="universe_type",a.value=s,t.appendChild(a),document.body.appendChild(t),t.submit()},1e3)};return e.jsxs(e.Fragment,{children:[A&&e.jsx(ve,{animationType:A,onAnimationComplete:P}),e.jsxs("div",{className:`w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto transition-opacity duration-500 ${r!=="selection"?"opacity-0 pointer-events-none":"opacity-100"}`,children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("header",{className:"bg-black/20 backdrop-blur-md border-b border-white/10 px-4 sm:px-6 py-6",children:e.jsxs("div",{className:"w-full flex flex-col items-center space-y-4",children:[e.jsx("img",{src:"/static/atlas-logo.jpg",alt:"Atlas Logo",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-full border-2 border-cyan-400 shadow-lg animate-pulse"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Atlas Initialization Protocol"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-300 mt-2",children:"Quantum Navigation System Startup Sequence"})]})]})}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("form",{onSubmit:M,className:"space-y-8",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"Will you journey through a shared universe or forge a new one of your own?"})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8 mb-12",children:m.map(t=>e.jsx("div",{onClick:()=>G(t.value),className:`
                        relative group cursor-pointer transition-all duration-500 transform hover:scale-105
                        ${s===t.value?"ring-2 ring-cyan-400 shadow-2xl shadow-cyan-400/25 scale-105":"hover:shadow-xl hover:shadow-blue-500/20"}
                      `,children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 via-slate-700/80 to-slate-800/80 backdrop-blur-lg rounded-2xl border border-white/10 p-6 sm:p-8 h-full",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("div",{className:`
                            w-6 h-6 rounded-full border-2 transition-all duration-300
                            ${s===t.value?"bg-cyan-400 border-cyan-400 shadow-lg shadow-cyan-400/50":"border-gray-400 group-hover:border-cyan-400"}
                          `,children:s===t.value&&e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent",children:t.title}),e.jsx("p",{className:"text-gray-300 leading-relaxed text-sm sm:text-base",children:t.description})]}),e.jsx("div",{className:`
                          absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300
                          bg-gradient-to-br from-cyan-500/10 via-blue-500/10 to-purple-500/10
                          ${s===t.value?"opacity-20":""}
                        `})]})},t.value))}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{type:"submit",disabled:!s||r!=="selection",className:`
                      relative overflow-hidden group px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-500 transform
                      ${s&&r==="selection"?"bg-gradient-to-r from-cyan-500 via-blue-500 to-purple-500 text-white shadow-2xl shadow-blue-500/30 hover:shadow-blue-500/50 hover:scale-110 active:scale-95":"bg-gray-600 text-gray-400 cursor-not-allowed"}
                    `,children:[s&&r==="selection"&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 opacity-20 group-hover:opacity-40 transition-opacity duration-300"}),e.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-3",children:[e.jsx("span",{children:s?"Initialize Protocol":"Select Universe Type"}),s&&r==="selection"&&e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin opacity-0 group-hover:opacity-100 transition-opacity duration-300 group-active:opacity-100"})]})]})})]})})}),e.jsx(re,{version:d})]})]}),r==="redirecting"&&e.jsx("div",{className:"fixed inset-0 bg-black z-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-cyan-400 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-cyan-400 text-xl font-semibold",children:"Atlas Initialization Protocol Finished"})]})})]})},Q=document.querySelector('meta[name="atlas-version"]'),_=document.querySelector('meta[name="atlas-version-hash"]'),fe={version:Q&&Q.getAttribute("content")||"1.0.0",versionHash:_&&_.getAttribute("content")||""},J=document.getElementById("atlas-react-root");J?ie.createRoot(J).render(o.createElement(ye,fe)):console.error("Container atlas-react-root not found!");
