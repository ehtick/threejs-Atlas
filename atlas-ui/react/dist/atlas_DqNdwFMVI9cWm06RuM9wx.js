import{r as w,j as e,a as ct,c as st,R as it}from"./atlas_C3xj8MG9oH9uC54MklkAb.js";import{R as lt,L as Ct,g as Et,S as Ve,m as kt,F as Pt,H as Lt,a as Gt}from"./atlas_sTg3lzW1OSKXzhMIs23Wv.js";import{W as Ke}from"./atlas_jwQDkDgkbYrDf9CRKibQy.js";import{a4 as Je,C as Ae,a5 as Qe,G as Ge,r as dt,cH as ut,a2 as Ue,cI as He,cJ as qe,b as Me,z as ke,M as $,V as Te,B as Be,cK as mt,o as ht,aa as et,a9 as pt,v as ft,cL as xt,cM as gt,S as Fe,c as vt,A as Re,g as ye,x as Xe,D as $e,H as wt,t as Oe,m as De,P as Ze,Y as bt,y as yt}from"./atlas_pGQiCQeTD5l6dMUXRRcYJ.js";import{R as It,S as Dt,M as At,a as tt,D as _t,b as Ft,c as Ht,T as Bt}from"./atlas_CeI5XGQwqQ2WhAY5WiLMP.js";import{S as rt,a as Tt,b as Vt,E as qt}from"./atlas_D9WDsCw0X8TduftsoVtNe.js";import{O as Mt}from"./atlas_D0eA6tgysic-V8oq2dTta.js";import{V as $t}from"./atlas_DwvSdObFEIQcgn4zq5yYd.js";import"./atlas_C0q7_QgoBkw_1ECio0nFC.js";import"./atlas_VCubJKDOL5Jc0RUG-uxb-.js";import"./atlas_CtOhIAiNHzSpXytHIyKwk.js";import"./atlas_DJ7i7UfL_c0UysIQfk_Wq.js";import"./atlas_CwYcokoa2i6NGa8CMcVH-.js";import"./atlas_CDmCjAbKL2BudWSRsmj9N.js";import"./atlas_MjNYrLc1c4EY8hYLeoBxW.js";import"./atlas_BJ_QDdZoUPjYT-9n_I4Gp.js";import"./atlas_HiFslN68N6WR8NcVQRQp7.js";import"./atlas_ChinNMIx15I-x-zfb2cxc.js";import"./atlas_BK5KpVHHDMchlABYedhdJ.js";import"./atlas_D1CR0bARAX433mi1gofoX.js";import"./atlas_k2E4Oa2ZTr-ShzFQV4yGe.js";import"./atlas_C6pdp7ZaYdLNQa3nKe66N.js";import"./atlas_CCCB6wayl60uvstX_VV1b.js";import"./atlas_CuSf8Ux199dN5TQGANNsL.js";import"./atlas_B-7ciEeDInNr7ubvXaM1p.js";import"./atlas_QIlGLcqC1yx-yIj5WPE_2.js";import"./atlas_BrtSY9WI0jnpWr8b8l2p0.js";import"./atlas_DozMyZz-MgtutptlVtnXw.js";import"./atlas_DSMMIt__RfTLlDwy5o46G.js";import"./atlas_FvuaiM6ukQxncYDnO-LRN.js";import"./atlas_AcePMkcyOwGOfjKIaBXr7.js";import"./atlas_qLVe_rIPJrOk-heQF9xYK.js";import"./atlas_CVSIdj3IKNuZh1Tc9MWju.js";import"./atlas_DEVVBRTll3E69js2-hd6f.js";import"./atlas_DJS6mCG7iAKygTFzFyy0q.js";import"./atlas_CXqOkCPqDZlFOooak3r6p.js";import"./atlas_CXGNRo_qmRRLtYwZjj9MN.js";import"./atlas_B-8_xMAZUXFU3ijFjimI-.js";import"./atlas_ZZwvv2NOfM75V8EKAgXHJ.js";import"./atlas_CNSvMCCms-TRWdl5PfLso.js";import"./atlas_DNAC-xK9EjNtVKbqCBrWr.js";import"./atlas_DleynCheRNz9nOtzxamBI.js";import"./atlas_DRk1PRoP8HUsgl6w7XFKV.js";import"./atlas_DuNAKdzbUSGhCUnfjh5BO.js";import"./atlas_D7m96u8GNCAETXWneOccD.js";import"./atlas_DDAIyn7FrSglShWFzRYs6.js";import"./atlas_CUZqEERRQBivhH-lGjb0z.js";import"./atlas_B3jNgK3wg_91IYqexUq2H.js";import"./atlas_M0UXn4YDKB4xcqAMdAR2c.js";import"./atlas_cDvRyMmiFrWDA_rD6LEQ8.js";import"./atlas_CsENJmsgVSKbIkIORp0De.js";import"./atlas_3xd9BqPYYnkrfh-Kzp59J.js";import"./atlas_B55frdK5FY4jYv3eL7WSF.js";import"./atlas_GBC17wBCdVuY879Mt3pV2.js";import"./atlas_EMT4MQkZxhiCjMEXcl8lu.js";import"./atlas_CNSwdXAEZgA__qIDxXEVA.js";import"./atlas_C3o773RrkB_QrrdANyLLX.js";import"./atlas_fEdukK2Ek4bJoqmXZLuoQ.js";import"./atlas_vhwV7nEeimrmal9rEu7B6.js";import"./atlas_BBGO3sthS_o2yDU3NQGQW.js";import"./atlas_DsAFxLjqd-fdDTXvXH8ER.js";import"./atlas_D31v7Al7eqV3B0M2QxzuG.js";import"./atlas_DHEyh2PRya1CVc9B_tQzq.js";import"./atlas_Cs0We1NVUxzA8UwJU4DMq.js";import"./atlas_4Br5bcXbvuWUmKa_tm5wr.js";const Ut=({coordinates:a,galaxyName:b})=>{const F=w.useRef(null),Y=w.useRef(null),R=w.useRef(null),z=w.useRef(null);return w.useEffect(()=>{if(!F.current)return;const B=F.current,E=B.clientWidth,je=B.clientHeight,se=new Je;se.background=new Ae(657930),Y.current=se;const U=new Qe(45,E/je,.1,1e3);U.position.set(20,15,20),U.lookAt(0,0,0);const L=new Ke({antialias:!0,alpha:!0});L.setSize(E,je),L.setClearColor(0,.2),R.current=L,B.appendChild(L.domElement);const Z=0,T=1e7,G=5e6,[ie,V,ne]=a,S=((ie-Z)/(T-Z)-.5)*16,I=((V-Z)/(T-Z)-.5)*16,xe=((ne-Z)/(T-Z)-.5)*16,k=new Ge;se.add(k);const y=new dt(16,16,16),Se=new ut(y),ge=new Ue({color:16777215,opacity:.4,transparent:!0,linewidth:2}),he=new He(Se,ge);k.add(he);const re=new qe(16,16,16777215,16777215);re.material.opacity=.1,re.material.transparent=!0,re.position.y=-8,k.add(re);const N=new qe(16,16,16777215,16777215);N.material.opacity=.05,N.material.transparent=!0,N.rotation.z=Math.PI/2,N.position.x=-8,k.add(N);const f=new qe(16,16,16777215,16777215);f.material.opacity=.05,f.material.transparent=!0,f.rotation.x=Math.PI/2,f.position.z=-8,k.add(f);const oe=new Me(.5,32,32),ve=new ke({color:16777215,transparent:!0,opacity:.9}),ue=new $(oe,ve);ue.position.set(0,0,0),k.add(ue);const me=new $(new Me(.8,32,32),new ke({color:16777215,transparent:!0,opacity:.2}));ue.add(me);const q=new Me(.4,32,32),ae=new ke({color:6605055,transparent:!0,opacity:1}),X=new $(q,ae);X.position.set(S,I,xe),k.add(X);const n=new $(new Me(.7,32,32),new ke({color:6605055,transparent:!0,opacity:.3}));if(X.add(n),Math.sqrt(Math.pow(ie-G,2)+Math.pow(V-G,2)+Math.pow(ne-G,2))<2e6){const t=[new Te(0,0,0),new Te(S,I,xe)],u=new Be().setFromPoints(t),l=new mt({color:16762980,dashSize:.6,gapSize:.6,opacity:.4,transparent:!0,linewidth:2}),P=new ht(u,l);P.computeLineDistances(),k.add(P)}const s=new et(4210752,.6);se.add(s);const h=new pt(16777215,.8);h.position.set(10,10,10),se.add(h);const d=(t,u)=>{const l=document.createElement("canvas"),P=l.getContext("2d");if(!P)return null;l.width=64,l.height=64,P.fillStyle=`#${u.toString(16).padStart(6,"0")}`,P.font="bold 48px Arial",P.textAlign="center",P.textBaseline="middle",P.fillText(t,32,32);const v=new ft(l),_=new xt({map:v,transparent:!0,opacity:.8}),K=new gt(_);return K.scale.set(1.6,1.6,1),K},M=d("X",16739179);M&&(M.position.set(8.4,-7.6,-7.6),k.add(M));const m=d("Y",7077739);m&&(m.position.set(-7.6,8.4,-7.6),k.add(m));const g=d("Z",7039999);g&&(g.position.set(-7.6,-7.6,8.4),k.add(g));let D=!1,ee=0,ce=0,j=!0,J=0;const i=t=>{D=!0,j=!1,ee=t.clientX,ce=t.clientY},r=t=>{if(!D)return;const u=t.clientX-ee,l=t.clientY-ce;k.rotation.y+=u*.01,k.rotation.x+=l*.01,ee=t.clientX,ce=t.clientY},c=()=>{D=!1,setTimeout(()=>{D||(j=!0)},3e3)},p=t=>{t.preventDefault();const u=.1,l=U.position.distanceTo(new Te(0,0,0));t.deltaY>0&&l<50?U.position.multiplyScalar(1+u):t.deltaY<0&&l>10&&U.position.multiplyScalar(1-u)},H=t=>{t.key==="Escape"&&document.dispatchEvent(new CustomEvent("universe-close-fullscreen"))},W=t=>{if(t.preventDefault(),t.touches.length===1)D=!0,j=!1,ee=t.touches[0].clientX,ce=t.touches[0].clientY;else if(t.touches.length===2){const u=t.touches[0].clientX-t.touches[1].clientX,l=t.touches[0].clientY-t.touches[1].clientY;J=Math.sqrt(u*u+l*l)}},Q=t=>{if(t.preventDefault(),t.touches.length===1&&D){const u=t.touches[0].clientX-ee,l=t.touches[0].clientY-ce;k.rotation.y+=u*.01,k.rotation.x+=l*.01,ee=t.touches[0].clientX,ce=t.touches[0].clientY}else if(t.touches.length===2){const u=t.touches[0].clientX-t.touches[1].clientX,l=t.touches[0].clientY-t.touches[1].clientY,P=Math.sqrt(u*u+l*l);if(J>0){const _=P/J,K=U.position.distanceTo(new Te(0,0,0));_>1&&K>10?U.position.multiplyScalar(1-.01):_<1&&K<50&&U.position.multiplyScalar(1+.01)}J=P}},A=t=>{t.preventDefault(),D=!1,J=0,setTimeout(()=>{D||(j=!0)},3e3)},x=L.domElement;x.style.cursor="grab",x.addEventListener("mousedown",t=>{x.style.cursor="grabbing",i(t)}),x.addEventListener("mousemove",r),x.addEventListener("mouseup",()=>{x.style.cursor="grab",c()}),x.addEventListener("mouseleave",()=>{x.style.cursor="grab",c()}),x.addEventListener("wheel",p),x.addEventListener("touchstart",W,{passive:!1}),x.addEventListener("touchmove",Q,{passive:!1}),x.addEventListener("touchend",A,{passive:!1}),document.addEventListener("keydown",H);const te=()=>{z.current=requestAnimationFrame(te),j&&(k.rotation.y+=.002,k.rotation.x+=.001);const t=Date.now()*.005;ue.scale.setScalar(1+Math.sin(t)*.1),X.rotation.y+=.01,L.render(se,U)};te();const le=()=>{const t=B.clientWidth,u=B.clientHeight;U.aspect=t/u,U.updateProjectionMatrix(),L.setSize(t,u)};return window.addEventListener("resize",le),()=>{window.removeEventListener("resize",le),document.removeEventListener("keydown",H),x.removeEventListener("mousedown",i),x.removeEventListener("mousemove",r),x.removeEventListener("mouseup",c),x.removeEventListener("mouseleave",c),x.removeEventListener("wheel",p),x.removeEventListener("touchstart",W),x.removeEventListener("touchmove",Q),x.removeEventListener("touchend",A),z.current&&cancelAnimationFrame(z.current),B&&L.domElement&&B.removeChild(L.domElement),L.dispose(),y.dispose(),Se.dispose(),ge.dispose(),oe.dispose(),ve.dispose(),q.dispose(),ae.dispose()}},[a,b]),e.jsx("div",{ref:F,className:"w-full h-full"})},Wt=({coordinates:a,galaxyName:b})=>{const F=w.useRef(null),Y=w.useRef(null),R=w.useRef(null),z=w.useRef(null),[B,E]=w.useState(!1),[je,se]=w.useState(!1),[U,L]=w.useState(!1),Z=()=>{se(!0),setTimeout(()=>{E(!1),se(!1)},300)};w.useEffect(()=>{const S=I=>{I.key==="Escape"&&B&&Z()};return document.addEventListener("universe-close-fullscreen",Z),document.addEventListener("keydown",S),()=>{document.removeEventListener("universe-close-fullscreen",Z),document.removeEventListener("keydown",S)}},[B]),w.useEffect(()=>{if(B&&U){const S=setTimeout(()=>{L(!1)},50);return()=>clearTimeout(S)}},[B,U]),w.useEffect(()=>{if(!F.current)return;const S=F.current,I=S.clientWidth,xe=I<640,k=new Je;k.background=new Ae(657930),Y.current=k;const y=new Qe(30,I/120,.1,1e3);y.position.set(12,8,12),y.lookAt(0,0,0);const Se=new Ke({antialias:!0,alpha:!0});Se.setSize(I,120),Se.setClearColor(0,.2),R.current=Se,S.appendChild(Se.domElement);const ge=0,he=1e7,re=5e6,[N,f,oe]=a,ve=((N-ge)/(he-ge)-.5)*8,ue=((f-ge)/(he-ge)-.5)*8,me=((oe-ge)/(he-ge)-.5)*8,q=new Ge;k.add(q);const ae=new dt(8,8,8),X=new ut(ae),n=new Ue({color:16777215,opacity:.4,transparent:!0}),o=new He(X,n);q.add(o);const s=new qe(8,8,16777215,16777215);s.material.opacity=.1,s.material.transparent=!0,s.position.y=-4,q.add(s);const h=new qe(8,8,16777215,16777215);h.material.opacity=.05,h.material.transparent=!0,h.rotation.z=Math.PI/2,h.position.x=-4,q.add(h);const d=new qe(8,8,16777215,16777215);d.material.opacity=.05,d.material.transparent=!0,d.rotation.x=Math.PI/2,d.position.z=-4,q.add(d);const M=new Me(.25,16,16),m=new ke({color:16777215,transparent:!0,opacity:.9}),g=new $(M,m);g.position.set(0,0,0),q.add(g);const D=new $(new Me(.45,16,16),new ke({color:16777215,transparent:!0,opacity:.2}));g.add(D);const ee=new Me(.2,16,16),ce=new ke({color:6605055,transparent:!0,opacity:1}),j=new $(ee,ce);j.position.set(ve,ue,me),q.add(j);const J=new $(new Me(.35,16,16),new ke({color:6605055,transparent:!0,opacity:.3}));if(j.add(J),Math.sqrt(Math.pow(N-re,2)+Math.pow(f-re,2)+Math.pow(oe-re,2))<2e6){const C=[new Te(0,0,0),new Te(ve,ue,me)],O=new Be().setFromPoints(C),de=new mt({color:16762980,dashSize:.3,gapSize:.3,opacity:.4,transparent:!0}),pe=new ht(O,de);pe.computeLineDistances(),q.add(pe)}const r=new et(4210752,.6);k.add(r);const c=new pt(16777215,.8);c.position.set(5,5,5),k.add(c);const p=(C,O)=>{const de=document.createElement("canvas"),pe=de.getContext("2d");if(!pe)return null;de.width=32,de.height=32,pe.fillStyle=`#${O.toString(16).padStart(6,"0")}`,pe.font="bold 24px Arial",pe.textAlign="center",pe.textBaseline="middle",pe.fillText(C,16,16);const _e=new ft(de),Ie=new xt({map:_e,transparent:!0,opacity:.8}),fe=new gt(Ie);return fe.scale.set(.8,.8,1),fe},H=p("X",16739179);H&&(H.position.set(4.2,-3.8,-3.8),q.add(H));const W=p("Y",7077739);W&&(W.position.set(-3.8,4.2,-3.8),q.add(W));const Q=p("Z",7039999);Q&&(Q.position.set(-3.8,-3.8,4.2),q.add(Q));let A=!1,x=0,te=0,le=!0;const t=C=>{A=!0,le=!1,x=C.clientX,te=C.clientY},u=C=>{if(!A)return;const O=C.clientX-x,de=C.clientY-te;q.rotation.y+=O*.01,q.rotation.x+=de*.01,x=C.clientX,te=C.clientY},l=()=>{A=!1,setTimeout(()=>{A||(le=!0)},3e3)},P=C=>{C.preventDefault();const O=.1,de=y.position.distanceTo(new Te(0,0,0));C.deltaY>0&&de<25?y.position.multiplyScalar(1+O):C.deltaY<0&&de>5&&y.position.multiplyScalar(1-O)},v=Se.domElement;v.style.cursor="grab",v.style.borderRadius="8px",v.addEventListener("mousedown",C=>{v.style.cursor="grabbing",t(C)}),v.addEventListener("mousemove",u),v.addEventListener("mouseup",()=>{v.style.cursor="grab",l()}),v.addEventListener("mouseleave",()=>{v.style.cursor="grab",l()}),v.addEventListener("wheel",P);const _=()=>{z.current=requestAnimationFrame(_),le&&(q.rotation.y+=.002,q.rotation.x+=.001);const C=Date.now()*.005;g.scale.setScalar(1+Math.sin(C)*.1),j.rotation.y+=.01,Se.render(k,y)};_();const K=()=>{const C=S.clientWidth,O=C<640?150:160;y.aspect=C/O,y.updateProjectionMatrix(),Se.setSize(C,O)};return window.addEventListener("resize",K),()=>{window.removeEventListener("resize",K),v.removeEventListener("mousedown",t),v.removeEventListener("mousemove",u),v.removeEventListener("mouseup",l),v.removeEventListener("mouseleave",l),v.removeEventListener("wheel",P),z.current&&cancelAnimationFrame(z.current),S&&Se.domElement&&S.removeChild(Se.domElement),Se.dispose(),ae.dispose(),X.dispose(),n.dispose(),M.dispose(),m.dispose(),ee.dispose(),ce.dispose()}},[a,b]);const T=S=>S.replace(/_/g," "),G=S=>S>=1e6?`${(S/1e6).toFixed(1)}M`:S>=1e3?`${(S/1e3).toFixed(1)}K`:S.toString(),[ie,V,ne]=a;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Galaxy Location"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:F,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsx("button",{onClick:()=>{E(!0),L(!0)},className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-[10px]",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:T(b)})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:[G(ie),", ",G(V),", ",G(ne)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom • Drag: Rotate View"})]})]}),B&&ct.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${je||U?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${je||U?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:T(b)})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[T(b)," - Galaxy Location"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Galaxy"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[G(ie),", ",G(V),", ",G(ne)]})]})]}),e.jsx("button",{onClick:Z,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(Ut,{coordinates:a,galaxyName:b})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},Yt=({galaxy:a})=>{const[b,F]=w.useState({isOnCooldown:!1,isSaved:!1,isCollecting:!1,timeUntilNext:0});w.useEffect(()=>{let R;const z=()=>{const se=tt.generateLocationId("galaxy",a.coordinates.join(","),void 0,void 0),U=tt.canCollectFromLocation(se),L=tt.getTimeUntilNextCollection(se),Z=a.coordinates,T=rt.generateGalaxyUrl(Z,rt.getCurrentPage()),ie=Ct.getLocations().some(V=>V.stargateUrl===T);F(V=>({isOnCooldown:!U&&L>0,isSaved:ie,isCollecting:V.isCollecting,timeUntilNext:L}))},B=()=>{F(se=>({...se,isCollecting:!0})),R=setTimeout(()=>{F(se=>({...se,isCollecting:!1}))},1e3)};z();const E=setInterval(z,1e3),je=lt.subscribe("mining_completed",B);return()=>{clearInterval(E),R&&clearTimeout(R),je()}},[a.name,a.coordinates]);const Y=R=>R.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex gap-2 z-10",children:[e.jsx(It,{locationType:"galaxy",locationId:a.name,coordinates:a.coordinates.join(","),className:"text-xs"}),e.jsx(Dt,{type:"galaxy",name:a.name,coordinates:a.coordinates.join(","),className:"text-xs"}),e.jsx("div",{className:"inline-flex items-center bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] font-medium px-1.5 py-0.5 rounded h-[21px] box-border",children:"VISITED"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(At,{isOnCooldown:b.isOnCooldown,isSaved:b.isSaved,isCollecting:b.isCollecting}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Details"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300",children:a.galaxy_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Solar Systems"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:a.num_systems.toLocaleString()})]})]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-2",children:e.jsx(Wt,{coordinates:a.coordinates,galaxyName:a.name})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-gray-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Cosmic Objects"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-pink-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Black Holes"}),e.jsx("div",{className:"text-xs font-bold text-pink-300",children:a.black_holes.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Pulsars"}),e.jsx("div",{className:"text-xs font-bold text-cyan-300",children:a.pulsars.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Quasars"}),e.jsx("div",{className:"text-xs font-bold text-indigo-300",children:a.quasars.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("div",{className:"text-green-400 font-medium",children:"Visited"})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:Y(a.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:a.coordinates.join(", ")})]})]})]})]})},jt=w.forwardRef(({galaxyType:a,numSystems:b,blackHoles:F,pulsars:Y,quasars:R,seed:z=12345,onExpandClick:B,galaxyName:E,galaxyUrl:je},se)=>{const U=w.useRef(null),L=w.useRef(null),Z=w.useRef(null),T=w.useRef(null),G=w.useRef(null),ie=w.useRef(null),V=w.useRef(null),ne=w.useRef(!1),[S,I]=w.useState(!1),[xe,k]=w.useState(!1),[y,Se]=w.useState(!1),ge=w.useRef(null);w.useImperativeHandle(se,()=>({captureScreenshot:re,isGeneratingImage:y}));class he{seed;constructor(f){this.seed=f}random(){const f=Math.sin(this.seed++)*1e4;return f-Math.floor(f)}uniform(f,oe){return f+this.random()*(oe-f)}gauss(f,oe){let ve=0,ue=0;for(;ve===0;)ve=this.random();for(;ue===0;)ue=this.random();const me=Math.sqrt(-2*Math.log(ve))*Math.cos(2*Math.PI*ue);return f+oe*me}randint(f,oe){return Math.floor(this.uniform(f,oe+1))}}w.useEffect(()=>{const N=V.current;if(!N)return;const f=N.getContext("2d");if(!f)return;let oe=[];const ve=800;let ue,me;const q=800;let ae,X=.5;function n(){const d=N?.parentElement;if(!d||!N)return;const M=d.clientWidth,m=d.clientHeight;N.width=Math.min(M,q),N.height=Math.min(m,q),ue=N.width/2,me=N.height/2}function o(){n(),oe=[];for(let d=0;d<ve;d++)oe.push({x:Math.random()*(N?.width||800),y:Math.random()*(N?.height||800),z:Math.random()*(N?.width||800),o:Math.random()});s()}function s(){!N||!f||(f.clearRect(0,0,N.width,N.height),oe.forEach(d=>{d.z-=X,d.z<=0&&(d.z=N.width,d.x=Math.random()*N.width,d.y=Math.random()*N.height,d.o=Math.random());const M=N.width/d.z,m=(d.x-ue)*M+ue,g=(d.y-me)*M+me,D=2*M;f.beginPath(),f.fillStyle=`rgba(255, 255, 255, ${d.o})`,f.arc(m,g,D,0,2*Math.PI),f.fill()}),!ne.current&&X<60&&(X+=1),ne.current&&X>2&&(X-=2),ae=requestAnimationFrame(s))}o();const h=()=>n();return window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h),ae&&cancelAnimationFrame(ae)}},[]),w.useEffect(()=>{if(!U.current)return;const N=U.current,f=N.clientWidth,oe=N.clientHeight,ve=Math.min(f,oe),ue=new Je;ue.background=new Ae(17),L.current=ue;const me=new Qe(45,1,.1,1e4);me.position.set(0,200,400),me.lookAt(0,0,0),ge.current=me;const q=new Ke({antialias:!0,alpha:!0});q.setSize(ve,ve),q.setClearColor(17,1),Z.current=q,q.domElement.className="",N.appendChild(q.domElement);const ae=new Mt(me,q.domElement);ae.enableDamping=!0,ae.dampingFactor=.05,ae.minDistance=50,ae.maxDistance=800,ae.autoRotate=!0,ae.autoRotateSpeed=.5,ae.enablePan=!0,ae.enableZoom=!0,ae.target.set(0,0,0),G.current=ae;const X=new Ge;ie.current=X,ue.add(X);const n=new he(z),o=n.uniform(0,2*Math.PI),s=new Be,h=[],d=[],M=[],m=200;let g=b;if(a==="Spiral"){g=Math.min(b,5e4);const i=4,r=2*Math.PI/i,c=.15,p=.5,H=.1;for(let W=0;W<g*H;W++){const Q=n.uniform(0,2*Math.PI),A=n.gauss(m*.1,m*.05),x=n.gauss(0,5),te=A*Math.cos(Q),le=A*Math.sin(Q);h.push(te,x,le),d.push(1,1,1);const t=z+W*1337,u=new he(t),l=u.gauss(1,.3),P=u.random()<.05,v=u.random()<.3;let _=Math.max(.3,l);P&&(_*=3+u.uniform(0,2)),v&&(_*=.5+u.uniform(0,.3)),A<m*.2&&(_*=1.8+u.uniform(0,.7),d[d.length-3]=1.2,d[d.length-2]=1.1,d[d.length-1]=.9),M.push(Math.min(_*1.5,12))}for(let W=0;W<g;W++){const Q=p*Math.sqrt(W/g)*2*Math.PI,A=W%i*r,x=m*Math.sqrt(W/g),te=x*Math.cos(Q+A+o)+n.uniform(-c*x,c*x),le=x*Math.sin(Q+A+o)+n.uniform(-c*x,c*x),t=n.gauss(0,3);h.push(te,t,le),d.push(1,1,.8);const u=z+W*1337,l=new he(u),P=l.gauss(.8,.25),v=l.random()<.03,_=l.random()<.4;let K=Math.max(.2,P);v&&(K*=2.5+l.uniform(0,1.5)),_&&(K*=.4+l.uniform(0,.2)),x>m*.7&&(K*=.8),M.push(Math.min(K*1.3,8))}}else if(a==="Elliptical"){g=Math.min(b,1e5);for(let i=0;i<g;i++){const r=n.uniform(0,2*Math.PI),c=n.uniform(-1,1),p=Math.sqrt(1-c*c),H=n.random(),W=Math.pow(H,.6),Q=-Math.log(1-W*.98)*m*.35,A=Q*p*Math.cos(r),x=Q*c*.6,te=Q*p*Math.sin(r);h.push(A,x,te),d.push(1,.9,.7);const le=z+i*1337,t=new he(le),u=t.gauss(.6,.2),l=t.random()<.08,P=t.random()<.25;let v=Math.max(.2,u);l&&(v*=2+t.uniform(0,1)),P&&(v*=.6+t.uniform(0,.2)),Math.sqrt(A*A+x*x+te*te)<m*.3&&(v*=1.5+t.uniform(0,.5)),M.push(Math.min(v*1.4,7))}}else if(a==="Dwarf"){let i;b<=1500?i=1:b<=5e3?i=1+(b-1500)/3500*9:b<=15e3?i=10+(b-5e3)/1e4*40:i=50+Math.min((b-15e3)/35e3,1)*50,g=Math.min(Math.floor(b/i),1e4);for(let r=0;r<g;r++){const c=n.uniform(0,2*Math.PI),p=n.uniform(0,Math.PI),H=n.gauss(m/3,m*.3),W=H*Math.sin(p)*Math.cos(c),Q=H*Math.cos(p)*.5,A=H*Math.sin(p)*Math.sin(c);h.push(W,Q,A),d.push(.8,.8,1);const x=z+r*1337,te=new he(x),le=te.gauss(.7,.3),t=te.random()<.02,u=te.random()<.6;let l=Math.max(.3,le);t&&(l*=2.5+te.uniform(0,1)),u&&(l*=.5+te.uniform(0,.3)),M.push(Math.min(l*1.2,5))}}else if(a==="Singularity Void"){g=1e4;for(let fe=0;fe<g;fe++){const we=fe/g,ze=we*30*Math.PI,Ce=m*(1-we*.8)+n.uniform(-10,10),be=(we-.5)*300+Math.sin(ze*.5)*20,Pe=Ce*Math.cos(ze)+Math.sin(we*20)*10,Le=Ce*Math.sin(ze)+Math.cos(we*20)*10;h.push(Pe,be,Le);const Ee=(we+Math.sin(ze*.1))%1,Ne=new Ae;Ne.setHSL(Ee,1,.5+Math.sin(we*10)*.3),d.push(Ne.r,Ne.g,Ne.b),M.push(n.uniform(.3,2)*(1+Math.sin(we*50)*.5))}const i=(fe,we,ze=1)=>{const Ce=new Me(fe,64,64),be=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,Pe=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;

          void main() {
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);

            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;

            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;

            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x +
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);

            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;

            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);

            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;

            gl_FragColor = vec4(color, ${we});
          }
        `,Le=new Fe({uniforms:{time:{value:0},speed:{value:ze}},vertexShader:be,fragmentShader:Pe,transparent:!0,blending:Re,side:$e,depthWrite:!1}),Ee=new $(Ce,Le);return Ee.isSingularityShader=!0,Ee.shaderSpeed=ze,Ee},r=i(250,.3,1);X.add(r);const c=i(180,.4,-.7);X.add(c);const p=i(120,.5,1.5);X.add(p);const H=i(300,.2,.5);H.scale.set(-1,1,1),X.add(H);const W=new Me(350,32,32),Q=new Fe({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);


            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;

            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;

          void main() {

            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;

            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;

            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:vt,depthWrite:!1}),A=new $(W,Q);A.isSingularityShader=!0,A.shaderSpeed=.3,X.add(A);const x=new Be,te=[],le=[];for(let fe=0;fe<1e3;fe++){const we=n.uniform(-m,m),ze=n.uniform(-m/2,m/2),Ce=n.uniform(-m,m),be=n.uniform(-50,50),Pe=n.uniform(-30,30),Le=n.uniform(-50,50);te.push(we,ze,Ce),te.push(we+be,ze+Pe,Ce+Le);const Ee=n.random(),Ne=new Ae;Ne.setHSL(Ee,1,.6),le.push(Ne.r,Ne.g,Ne.b),le.push(Ne.r*.5,Ne.g*.5,Ne.b*.5)}x.setAttribute("position",new ye(te,3)),x.setAttribute("color",new ye(le,3));const t=new Ue({vertexColors:!0,transparent:!0,opacity:.4,blending:Re}),u=new He(x,t);u.isGlitchLines=!0,X.add(u);const l=new Ge,P=new Me(20,32,32),v=new ke({color:0,transparent:!0,opacity:.95}),_=new $(P,v);l.add(_);const K=new Xe(25,80,64),C=new Fe({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;

          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);


            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;


            vec3 hotColor = vec3(1.0, 0.5, 0.0);
            vec3 coldColor = vec3(0.0, 0.3, 1.0);
            vec3 color = mix(coldColor, hotColor, intensity);


            color *= (0.7 + swirl * 0.3);


            float alpha = intensity * 0.8;

            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:$e}),O=new $(K,C);O.rotation.x=Math.PI/2,O.isAccretionDisk=!0,l.add(O);for(let fe=0;fe<8;fe++){const we=30+fe*20,ze=new wt(we,1+fe*.5,8,64),Ce=new ke({color:new Ae().setHSL((.7+fe*.05)%1,1,.5),transparent:!0,opacity:.3-fe*.03,wireframe:!0}),be=new $(ze,Ce);be.rotation.x=n.uniform(0,Math.PI),be.rotation.y=n.uniform(0,Math.PI),be.isDistortionRing=!0,be.rotationSpeed=n.uniform(.001,.005)*(fe%2===0?1:-1),l.add(be)}X.add(l);const de=new Oe(5,100,8),pe=new De({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Re}),_e=new $(de,pe);_e.position.y=50,X.add(_e);const Ie=new $(de,pe);Ie.position.y=-50,Ie.rotation.z=Math.PI,X.add(Ie)}if(a!=="Singularity Void"){const i=[],r=new he(z+999);for(let t=0;t<F;t++){const u=r.uniform(-50,50),l=r.uniform(-20,20),P=r.uniform(-50,50);i.push({x:u,y:l,z:P})}const c=[],p=[],H=[],W=[],Q=[],A=.4,x=A*25;for(let t=0;t<h.length;t+=3){const u=h[t],l=h[t+1],P=h[t+2];let v=1/0,_=null;for(const K of i){const C=Math.sqrt(Math.pow(u-K.x,2)+Math.pow(l-K.y,2)+Math.pow(P-K.z,2));C<v&&(v=C,_=K)}if(!(v<A))if(v<x&&_){const K=1-(v-A)/(x-A);_.x-u,_.y-l,_.z-P;const C=Math.atan2(P-_.z,u-_.x),O=K*.8,de=8;for(let be=0;be<de-1;be++){const Pe=be/(de-1),Le=(be+1)/(de-1),Ee=v*(1-Pe*O*.7),Ne=C+Pe*O*1.5,We=_.x+Ee*Math.cos(Ne),Ye=l+(_.y-l)*Pe*.3,St=_.z+Ee*Math.sin(Ne),nt=v*(1-Le*O*.7),ot=C+Le*O*1.5,Nt=_.x+nt*Math.cos(ot),zt=l+(_.y-l)*Le*.3,Rt=_.z+nt*Math.sin(ot);W.push(We,Ye,St),W.push(Nt,zt,Rt)}const pe=K*1.5,_e=d[t],Ie=d[t+1],fe=d[t+2],we=Math.min(_e+pe,2),ze=Math.max(Ie*(1-pe*.6),.1),Ce=Math.max(fe*(1-pe*.8),.1);for(let be=0;be<de-1;be++){const Pe=be/(de-1),Le=(be+1)/(de-1),Ee=1-Pe*K*.6,Ne=1-Le*K*.6,We=pe*(.5+Pe*.5),Ye=pe*(.5+Le*.5);Q.push(Math.min(we+We*.3,2)*Ee,Math.max(ze*(1-We*.2),.1)*Ee,Math.max(Ce*(1-We*.4),.1)*Ee),Q.push(Math.min(we+Ye*.3,2)*Ne,Math.max(ze*(1-Ye*.2),.1)*Ne,Math.max(Ce*(1-Ye*.4),.1)*Ne)}c.push(u,l,P),p.push(we,ze,Ce),H.push(Math.max(M[t/3]*(1-K*.5),.3))}else c.push(u,l,P),p.push(d[t],d[t+1],d[t+2]),H.push(M[t/3])}s.setAttribute("position",new ye(c,3)),s.setAttribute("color",new ye(p,3)),s.setAttribute("size",new ye(H,1));const te=new Fe({uniforms:{},vertexShader:`
          attribute float size;
          varying vec3 vColor;
          void main() {
            vColor = color;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * (400.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
          }
        `,fragmentShader:`
          varying vec3 vColor;
          void main() {

            vec2 center = gl_PointCoord - vec2(0.5);
            float distanceFromCenter = length(center);

            if (distanceFromCenter > 0.5) {
              discard;
            }


            float alpha = 1.0 - (distanceFromCenter / 0.5);
            alpha = pow(alpha, 2.0);

            gl_FragColor = vec4(vColor, alpha * 0.8);
          }
        `,transparent:!0,blending:Re,vertexColors:!0,depthWrite:!1}),le=new Ze(s,te);if(X.add(le),W.length>0){const t=new Be;t.setAttribute("position",new ye(W,3)),t.setAttribute("color",new ye(Q,3));const u=new Ue({vertexColors:!0,transparent:!0,opacity:.8,linewidth:2,blending:Re}),l=new He(t,u);X.add(l)}}else{s.setAttribute("position",new ye(h,3)),s.setAttribute("color",new ye(d,3)),s.setAttribute("size",new ye(M,1));const i=new bt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Re,sizeAttenuation:!0}),r=new Ze(s,i);X.add(r)}const D=new he(z+999);for(let i=0;i<F;i++){const r=new Ge,c=D.uniform(-50,50),p=D.uniform(-20,20),H=D.uniform(-50,50),W=new Me(1.5,16,16),Q=new ke({color:0,transparent:!0,opacity:.9}),A=new $(W,Q);r.add(A),[{innerRadius:2,outerRadius:2.3,color:16777215,opacity:.8,emissive:16777164},{innerRadius:2.3,outerRadius:2.7,color:16755200,opacity:.7,emissive:16746496},{innerRadius:2.7,outerRadius:3.2,color:16729088,opacity:.6,emissive:16720384},{innerRadius:3.2,outerRadius:4,color:11141120,opacity:.5,emissive:6684672},{innerRadius:4,outerRadius:5,color:4456448,opacity:.3,emissive:2228224}].forEach((te,le)=>{const t=new Xe(te.innerRadius,te.outerRadius,32),u=new De({color:te.color,transparent:!0,opacity:te.opacity,emissive:te.emissive,emissiveIntensity:.3,side:$e}),l=new $(t,u);l.rotation.x=Math.PI/2,l.rotation.z=n.uniform(0,Math.PI*2),l.isAccretionRing=!0,l.rotationSpeed=.002+le*5e-4,r.add(l)}),r.position.set(c,p,H),X.add(r)}for(let i=0;i<Y;i++){const r=new Me(1.5,8,8),c=new De({color:16776960,emissive:16776960,emissiveIntensity:1}),p=new $(r,c);p.position.set(n.uniform(-m,m),n.uniform(-m/4,m/4),n.uniform(-m,m)),p.isPulsar=!0,p.pulseSpeed=n.uniform(1,3),X.add(p)}for(let i=0;i<R;i++){const r=new Ge,c=new Me(2,16,16),p=new De({color:16777215,emissive:16777215,emissiveIntensity:2}),H=new $(c,p);r.add(H);const W=new Oe(1,20,8),Q=new De({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),A=new $(W,Q);A.position.y=10,r.add(A);const x=new $(W,Q);x.position.y=-10,x.rotation.z=Math.PI,r.add(x),r.position.set(n.uniform(-m,m),n.uniform(-m/4,m/4),n.uniform(-m,m)),X.add(r)}const ee=new et(4210752,.5);ue.add(ee);const ce=new yt(16777215,.5,1e3);ce.position.set(0,100,0),ue.add(ce);const j=()=>{T.current=requestAnimationFrame(j);const i=performance.now()/1e3;ie.current&&(ie.current.rotation.y+=.001),X.children.forEach(r=>{if(r.isPulsar){const c=r.pulseSpeed||1;r.scale.setScalar(1+Math.sin(Date.now()*.001*c)*.3)}if(r.isSingularityShader&&r instanceof $){const c=r.material;c.uniforms&&c.uniforms.time&&(c.uniforms.time.value=i);const p=r.shaderSpeed||1;r.rotation.y+=.001*p,r.rotation.x+=5e-4*p}if(r.isAccretionDisk&&r instanceof $){const c=r.material;c.uniforms&&c.uniforms.time&&(c.uniforms.time.value=i),r.rotation.z+=.002}if(r.isDistortionRing){const c=r.rotationSpeed||.001;r.rotation.x+=c,r.rotation.y+=c*.7,r.scale.setScalar(1+Math.sin(i*2)*.1)}if(r.isGlitchLines&&r instanceof He){const c=r.material;c.opacity=.2+Math.sin(i*3)*.2,r.rotation.z+=5e-4}r instanceof Ge&&r.children.forEach(c=>{if(c.isAccretionDisk&&c instanceof $){const p=c.material;p.uniforms&&p.uniforms.time&&(p.uniforms.time.value=i),c.rotation.z+=.002}if(c.isAccretionRing&&c instanceof $){const p=c.rotationSpeed||.002;c.rotation.z+=p}if(c.isDistortionRing){const p=c.rotationSpeed||.001;c.rotation.x+=p,c.rotation.y+=p*.7,c.scale.setScalar(1+Math.sin(i*2)*.1)}})}),G.current&&G.current.update(),q.render(ue,me)};j(),setTimeout(()=>{I(!0),k(!0),ne.current=!0},800);const J=()=>{if(!U.current||!q)return;const i=U.current,r=Math.min(i.clientWidth,i.clientHeight);q.setSize(r,r),me.aspect=1,me.updateProjectionMatrix()};return window.addEventListener("resize",J),()=>{window.removeEventListener("resize",J),G.current&&G.current.dispose(),T.current&&cancelAnimationFrame(T.current),N&&q.domElement&&N.removeChild(q.domElement),q.dispose()}},[a,b,F,Y,R,z]);const re=()=>{if(!Z.current||!L.current||!ge.current||y)return;Se(!0),G.current&&(G.current.enabled=!1);const N=Z.current,f=L.current,oe=ge.current,ve=N.domElement.width,ue=N.domElement.height,me=3840/ve,q=[];f.traverse(n=>{if(n.isPoints&&n.material){const o=n.material;if(o.size!==void 0&&(q.push({material:o,originalSize:o.size}),o.size=o.size*me*1),o.uniforms&&o.uniforms.scale&&(q.push({material:o,originalScale:o.uniforms.scale.value}),o.uniforms.scale.value=o.uniforms.scale.value*me*1),n.geometry&&n.geometry.attributes.size){const s=n.geometry.attributes.size,h=s.array.slice();q.push({geometry:n.geometry,originalSizeArray:h});for(let d=0;d<s.array.length;d++)s.array[d]*=me*1;s.needsUpdate=!0}}});const ae=3840,X=3840;N.setSize(ae,X),oe.aspect=1,oe.updateProjectionMatrix(),N.render(f,oe),N.domElement.toBlob(n=>{if(n){const o=document.createElement("canvas"),s=o.getContext("2d");if(o.width=ae,o.height=X,s){const h=new Image;h.onload=async()=>{s.drawImage(h,0,0),Tt(s,{imageWidth:ae,imageHeight:X}),je&&await Vt(s,ae,X,{type:"galaxy",stargateUrl:je}),o.toBlob(M=>{if(M){const m=URL.createObjectURL(M),g=document.createElement("a");g.href=m,g.download=`galaxy_${E||a}_${Date.now()}.png`,g.click(),URL.revokeObjectURL(m)}},"image/png",1)};const d=URL.createObjectURL(n);h.src=d}}q.forEach(({material:o,originalSize:s,originalScale:h,geometry:d,originalSizeArray:M})=>{if(s!==void 0&&(o.size=s),h!==void 0&&(o.uniforms.scale.value=h),d&&M){const m=d.attributes.size;for(let g=0;g<M.length;g++)m.array[g]=M[g];m.needsUpdate=!0}}),N.setSize(ve,ue),oe.aspect=1,oe.updateProjectionMatrix(),G.current&&(G.current.enabled=!0),Se(!1)},"image/png",1)};return e.jsxs("div",{className:"relative w-full h-full bg-black rounded",children:[e.jsx("canvas",{ref:V,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${xe?"opacity-0":"opacity-100"}`,style:{filter:xe?"blur(50px)":"none"}}),e.jsxs("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${S?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:[e.jsx("div",{ref:U,className:"w-full h-full border border-white/20 rounded bg-black/20"}),e.jsx(qt,{isVisible:y}),S&&E&&e.jsx("div",{className:"absolute bottom-0 left-0 p-2 text-white bg-black bg-opacity-50 max-w-xs rounded-tr-lg",children:e.jsx("h3",{className:"text-xs font-bold",children:E})}),S&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 z-10",children:[e.jsx("button",{onClick:re,disabled:y,className:`p-2 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg ${y?"bg-black/40 cursor-not-allowed opacity-50":"bg-black/60 hover:bg-black/80"}`,title:y?"Generating image...":"Download 4K screenshot",children:y?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(_t,{className:"w-4 h-4 text-white"})}),B&&e.jsx("button",{onClick:B,disabled:y,className:`p-2 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg ${y?"bg-black/40 cursor-not-allowed opacity-50":"bg-black/60 hover:bg-black/80"}`,title:y?"Please wait...":"Expand to fullscreen",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]})]})});jt.displayName="Galaxy3DViewer";const Xt=({galaxyType:a,numSystems:b,blackHoles:F,pulsars:Y,quasars:R,seed:z=12345,galaxyName:B})=>{const E=w.useRef(null),je=w.useRef(null),se=w.useRef(null),U=w.useRef(null),L=w.useRef(null),Z=w.useRef(null);class T{seed;constructor(ie){this.seed=ie}random(){const ie=Math.sin(this.seed++)*1e4;return ie-Math.floor(ie)}uniform(ie,V){return ie+this.random()*(V-ie)}gauss(ie,V){let ne=0,S=0;for(;ne===0;)ne=this.random();for(;S===0;)S=this.random();const I=Math.sqrt(-2*Math.log(ne))*Math.cos(2*Math.PI*S);return ie+V*I}randint(ie,V){return Math.floor(this.uniform(ie,V+1))}}return w.useEffect(()=>{if(!E.current)return;const G=E.current,ie=G.clientWidth,V=G.clientHeight,ne=new Je;ne.background=new Ae(17),je.current=ne;const S=new Qe(45,ie/V,.1,1e4);S.position.set(0,200,400),S.lookAt(0,0,0);const I=new Ke({antialias:!0,alpha:!0});I.setSize(ie,V),I.setClearColor(17,1),se.current=I,G.appendChild(I.domElement);const xe=new Mt(S,I.domElement);xe.enableDamping=!0,xe.dampingFactor=.05,xe.minDistance=50,xe.maxDistance=1200,xe.autoRotate=!0,xe.autoRotateSpeed=.5,xe.enablePan=!0,xe.enableZoom=!0,xe.target.set(0,0,0),L.current=xe;const k=new Ge;Z.current=k,ne.add(k);const y=new T(z),Se=y.uniform(0,2*Math.PI),ge=new Be,he=[],re=[],N=[],f=200;let oe=b;if(a==="Spiral"){oe=Math.min(b,5e4);const n=4,o=2*Math.PI/n,s=.15,h=.5,d=.1;for(let M=0;M<oe*d;M++){const m=y.uniform(0,2*Math.PI),g=y.gauss(f*.1,f*.05),D=y.gauss(0,5),ee=g*Math.cos(m),ce=g*Math.sin(m);he.push(ee,D,ce),re.push(1,1,1);const j=z+M*1337,J=new T(j),i=J.gauss(1,.3),r=J.random()<.05,c=J.random()<.3;let p=Math.max(.3,i);r&&(p*=3+J.uniform(0,2)),c&&(p*=.5+J.uniform(0,.3)),g<f*.2&&(p*=1.8+J.uniform(0,.7),re[re.length-3]=1.2,re[re.length-2]=1.1,re[re.length-1]=.9),N.push(Math.min(p*1.5,12))}for(let M=0;M<oe;M++){const m=h*Math.sqrt(M/oe)*2*Math.PI,g=M%n*o,D=f*Math.sqrt(M/oe),ee=D*Math.cos(m+g+Se)+y.uniform(-s*D,s*D),ce=D*Math.sin(m+g+Se)+y.uniform(-s*D,s*D),j=y.gauss(0,3);he.push(ee,j,ce),re.push(1,1,.8);const J=z+M*1337,i=new T(J),r=i.gauss(.8,.25),c=i.random()<.03,p=i.random()<.4;let H=Math.max(.2,r);c&&(H*=2.5+i.uniform(0,1.5)),p&&(H*=.4+i.uniform(0,.2)),D>f*.7&&(H*=.8),N.push(Math.min(H*1.3,8))}}else if(a==="Elliptical"){oe=Math.min(b,1e5);for(let n=0;n<oe;n++){const o=y.uniform(0,2*Math.PI),s=y.uniform(-1,1),h=Math.sqrt(1-s*s),d=y.random(),M=Math.pow(d,.6),m=-Math.log(1-M*.98)*f*.35,g=m*h*Math.cos(o),D=m*s*.6,ee=m*h*Math.sin(o);he.push(g,D,ee),re.push(1,.9,.7);const ce=z+n*1337,j=new T(ce),J=j.gauss(.6,.2),i=j.random()<.08,r=j.random()<.25;let c=Math.max(.2,J);i&&(c*=2+j.uniform(0,1)),r&&(c*=.6+j.uniform(0,.2)),Math.sqrt(g*g+D*D+ee*ee)<f*.3&&(c*=1.5+j.uniform(0,.5)),N.push(Math.min(c*1.4,7))}}else if(a==="Dwarf"){let n;b<=1500?n=1:b<=5e3?n=1+(b-1500)/3500*9:b<=15e3?n=10+(b-5e3)/1e4*40:n=50+Math.min((b-15e3)/35e3,1)*50,oe=Math.min(Math.floor(b/n),1e4);for(let o=0;o<oe;o++){const s=y.uniform(0,2*Math.PI),h=y.uniform(0,Math.PI),d=y.gauss(f/3,f*.3),M=d*Math.sin(h)*Math.cos(s),m=d*Math.cos(h)*.5,g=d*Math.sin(h)*Math.sin(s);he.push(M,m,g),re.push(.8,.8,1);const D=z+o*1337,ee=new T(D),ce=ee.gauss(.7,.3),j=ee.random()<.02,J=ee.random()<.6;let i=Math.max(.3,ce);j&&(i*=2.5+ee.uniform(0,1)),J&&(i*=.5+ee.uniform(0,.3)),N.push(Math.min(i*1.2,5))}}else if(a==="Singularity Void"){oe=1e4;for(let t=0;t<oe;t++){const u=t/oe,l=u*30*Math.PI,P=f*(1-u*.8)+y.uniform(-10,10),v=(u-.5)*300+Math.sin(l*.5)*20,_=P*Math.cos(l)+Math.sin(u*20)*10,K=P*Math.sin(l)+Math.cos(u*20)*10;he.push(_,v,K);const C=(u+Math.sin(l*.1))%1,O=new Ae;O.setHSL(C,1,.5+Math.sin(u*10)*.3),re.push(O.r,O.g,O.b),N.push(y.uniform(.3,2)*(1+Math.sin(u*50)*.5))}const n=(t,u,l=1)=>{const P=new Me(t,64,64),v=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,_=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;
          
          void main() {
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);
            
            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;
            
            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;
            
            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x + 
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);
            
            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;
            
            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);
            
            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;
            
            gl_FragColor = vec4(color, ${u});
          }
        `,K=new Fe({uniforms:{time:{value:0},speed:{value:l}},vertexShader:v,fragmentShader:_,transparent:!0,blending:Re,side:$e,depthWrite:!1}),C=new $(P,K);return C.isSingularityShader=!0,C.shaderSpeed=l,C},o=n(250,.3,1);k.add(o);const s=n(180,.4,-.7);k.add(s);const h=n(120,.5,1.5);k.add(h);const d=n(300,.2,.5);d.scale.set(-1,1,1),k.add(d);const M=new Me(350,32,32),m=new Fe({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            
            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          
          void main() {
            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;
            
            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:vt,depthWrite:!1}),g=new $(M,m);g.isSingularityShader=!0,g.shaderSpeed=.3,k.add(g);const D=new Be,ee=[],ce=[];for(let t=0;t<1e3;t++){const u=y.uniform(-f,f),l=y.uniform(-f/2,f/2),P=y.uniform(-f,f),v=y.uniform(-50,50),_=y.uniform(-30,30),K=y.uniform(-50,50);ee.push(u,l,P),ee.push(u+v,l+_,P+K);const C=y.random(),O=new Ae;O.setHSL(C,1,.6),ce.push(O.r,O.g,O.b),ce.push(O.r*.5,O.g*.5,O.b*.5)}D.setAttribute("position",new ye(ee,3)),D.setAttribute("color",new ye(ce,3));const j=new Ue({vertexColors:!0,transparent:!0,opacity:.4,blending:Re}),J=new He(D,j);J.isGlitchLines=!0,k.add(J);const i=new Ge,r=new Me(20,32,32),c=new ke({color:0,transparent:!0,opacity:.95}),p=new $(r,c);i.add(p);const H=new Xe(25,80,64),W=new Fe({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;
          
          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);
            
            // Swirling pattern
            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;
            
            // Colors from hot (inner) to cold (outer)
            vec3 hotColor = vec3(1.0, 0.5, 0.0); // Orange
            vec3 coldColor = vec3(0.0, 0.3, 1.0); // Blue
            vec3 color = mix(coldColor, hotColor, intensity);
            
            // Add swirl variation
            color *= (0.7 + swirl * 0.3);
            
            // Fade out at edges
            float alpha = intensity * 0.8;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Re,side:$e}),Q=new $(H,W);Q.rotation.x=Math.PI/2,Q.isAccretionDisk=!0,i.add(Q);for(let t=0;t<8;t++){const u=30+t*20,l=new wt(u,1+t*.5,8,64),P=new ke({color:new Ae().setHSL((.7+t*.05)%1,1,.5),transparent:!0,opacity:.3-t*.03,wireframe:!0}),v=new $(l,P);v.rotation.x=y.uniform(0,Math.PI),v.rotation.y=y.uniform(0,Math.PI),v.isDistortionRing=!0,v.rotationSpeed=y.uniform(.001,.005)*(t%2===0?1:-1),i.add(v)}k.add(i);const A=new Oe(5,100,8),x=new De({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Re}),te=new $(A,x);te.position.y=50,k.add(te);const le=new $(A,x);le.position.y=-50,le.rotation.z=Math.PI,k.add(le)}if(a!=="Singularity Void"){const n=[],o=new T(z+999);for(let j=0;j<F;j++){const J=o.uniform(-50,50),i=o.uniform(-20,20),r=o.uniform(-50,50);n.push({x:J,y:i,z:r})}const s=[],h=[],d=[],M=[],m=[],g=.4,D=g*25;for(let j=0;j<he.length;j+=3){const J=he[j],i=he[j+1],r=he[j+2];let c=1/0,p=null;for(const H of n){const W=Math.sqrt(Math.pow(J-H.x,2)+Math.pow(i-H.y,2)+Math.pow(r-H.z,2));W<c&&(c=W,p=H)}if(!(c<g))if(c<D&&p){const H=1-(c-g)/(D-g);p.x-J,p.y-i,p.z-r;const W=Math.atan2(r-p.z,J-p.x),Q=H*.8,A=8;for(let v=0;v<A-1;v++){const _=v/(A-1),K=(v+1)/(A-1),C=c*(1-_*Q*.7),O=W+_*Q*1.5,de=p.x+C*Math.cos(O),pe=i+(p.y-i)*_*.3,_e=p.z+C*Math.sin(O),Ie=c*(1-K*Q*.7),fe=W+K*Q*1.5,we=p.x+Ie*Math.cos(fe),ze=i+(p.y-i)*K*.3,Ce=p.z+Ie*Math.sin(fe);M.push(de,pe,_e),M.push(we,ze,Ce)}const x=H*1.5,te=re[j],le=re[j+1],t=re[j+2],u=Math.min(te+x,2),l=Math.max(le*(1-x*.6),.1),P=Math.max(t*(1-x*.8),.1);for(let v=0;v<A-1;v++){const _=v/(A-1),K=(v+1)/(A-1),C=1-_*H*.6,O=1-K*H*.6,de=x*(.5+_*.5),pe=x*(.5+K*.5);m.push(Math.min(u+de*.3,2)*C,Math.max(l*(1-de*.2),.1)*C,Math.max(P*(1-de*.4),.1)*C),m.push(Math.min(u+pe*.3,2)*O,Math.max(l*(1-pe*.2),.1)*O,Math.max(P*(1-pe*.4),.1)*O)}s.push(J,i,r),h.push(u,l,P),d.push(Math.max(N[j/3]*(1-H*.5),.3))}else s.push(J,i,r),h.push(re[j],re[j+1],re[j+2]),d.push(N[j/3])}ge.setAttribute("position",new ye(s,3)),ge.setAttribute("color",new ye(h,3)),ge.setAttribute("size",new ye(d,1));const ee=new Fe({uniforms:{},vertexShader:`
          attribute float size;
          varying vec3 vColor;
          void main() {
            vColor = color;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * (400.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
          }
        `,fragmentShader:`
          varying vec3 vColor;
          void main() {
            vec2 center = gl_PointCoord - vec2(0.5);
            float distanceFromCenter = length(center);
            
            if (distanceFromCenter > 0.5) {
              discard;
            }
            
            float alpha = 1.0 - (distanceFromCenter / 0.5);
            alpha = pow(alpha, 2.0);
            
            gl_FragColor = vec4(vColor, alpha * 0.8);
          }
        `,transparent:!0,blending:Re,vertexColors:!0,depthWrite:!1}),ce=new Ze(ge,ee);if(k.add(ce),M.length>0){const j=new Be;j.setAttribute("position",new ye(M,3)),j.setAttribute("color",new ye(m,3));const J=new Ue({vertexColors:!0,transparent:!0,opacity:.8,linewidth:2,blending:Re}),i=new He(j,J);k.add(i)}}else{ge.setAttribute("position",new ye(he,3)),ge.setAttribute("color",new ye(re,3)),ge.setAttribute("size",new ye(N,1));const n=new bt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Re,sizeAttenuation:!0}),o=new Ze(ge,n);k.add(o)}const ve=new T(z+999);for(let n=0;n<F;n++){const o=new Ge,s=ve.uniform(-50,50),h=ve.uniform(-20,20),d=ve.uniform(-50,50),M=new Me(1.5,16,16),m=new ke({color:0,transparent:!0,opacity:.9}),g=new $(M,m);o.add(g),[{innerRadius:2,outerRadius:2.3,color:16777215,opacity:.8,emissive:16777164},{innerRadius:2.3,outerRadius:2.7,color:16755200,opacity:.7,emissive:16746496},{innerRadius:2.7,outerRadius:3.2,color:16729088,opacity:.6,emissive:16720384},{innerRadius:3.2,outerRadius:4,color:11141120,opacity:.5,emissive:6684672},{innerRadius:4,outerRadius:5,color:4456448,opacity:.3,emissive:2228224}].forEach((ee,ce)=>{const j=new Xe(ee.innerRadius,ee.outerRadius,32),J=new De({color:ee.color,transparent:!0,opacity:ee.opacity,emissive:ee.emissive,emissiveIntensity:.3,side:$e}),i=new $(j,J);i.rotation.x=Math.PI/2,i.rotation.z=y.uniform(0,Math.PI*2),i.isAccretionRing=!0,i.rotationSpeed=.002+ce*5e-4,o.add(i)}),o.position.set(s,h,d),k.add(o)}for(let n=0;n<Y;n++){const o=new Me(1.5,8,8),s=new De({color:16776960,emissive:16776960,emissiveIntensity:1}),h=new $(o,s);h.position.set(y.uniform(-f,f),y.uniform(-f/4,f/4),y.uniform(-f,f)),h.isPulsar=!0,h.pulseSpeed=y.uniform(1,3),k.add(h)}for(let n=0;n<R;n++){const o=new Ge,s=new Me(2,16,16),h=new De({color:16777215,emissive:16777215,emissiveIntensity:2}),d=new $(s,h);o.add(d);const M=new Oe(1,20,8),m=new De({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),g=new $(M,m);g.position.y=10,o.add(g);const D=new $(M,m);D.position.y=-10,D.rotation.z=Math.PI,o.add(D),o.position.set(y.uniform(-f,f),y.uniform(-f/4,f/4),y.uniform(-f,f)),k.add(o)}const ue=new et(4210752,.5);ne.add(ue);const me=new yt(16777215,.5,1e3);me.position.set(0,100,0),ne.add(me);const q=n=>{n.key==="Escape"&&document.dispatchEvent(new CustomEvent("galaxy-close-fullscreen"))};document.addEventListener("keydown",q);const ae=()=>{U.current=requestAnimationFrame(ae);const n=performance.now()/1e3;Z.current&&(Z.current.rotation.y+=.001),k.children.forEach(o=>{if(o.isPulsar){const s=o.pulseSpeed||1;o.scale.setScalar(1+Math.sin(Date.now()*.001*s)*.3)}if(o.isSingularityShader&&o instanceof $){const s=o.material;s.uniforms&&s.uniforms.time&&(s.uniforms.time.value=n);const h=o.shaderSpeed||1;o.rotation.y+=.001*h,o.rotation.x+=5e-4*h}if(o.isAccretionDisk&&o instanceof $){const s=o.material;s.uniforms&&s.uniforms.time&&(s.uniforms.time.value=n),o.rotation.z+=.002}if(o.isDistortionRing){const s=o.rotationSpeed||.001;o.rotation.x+=s,o.rotation.y+=s*.7,o.scale.setScalar(1+Math.sin(n*2)*.1)}if(o.isGlitchLines&&o instanceof He){const s=o.material;s.opacity=.2+Math.sin(n*3)*.2,o.rotation.z+=5e-4}o instanceof Ge&&o.children.forEach(s=>{if(s.isAccretionDisk&&s instanceof $){const h=s.material;h.uniforms&&h.uniforms.time&&(h.uniforms.time.value=n),s.rotation.z+=.002}if(s.isAccretionRing&&s instanceof $){const h=s.rotationSpeed||.002;s.rotation.z+=h}if(s.isDistortionRing){const h=s.rotationSpeed||.001;s.rotation.x+=h,s.rotation.y+=h*.7,s.scale.setScalar(1+Math.sin(n*2)*.1)}})}),L.current&&L.current.update(),I.render(ne,S)};ae();const X=()=>{if(!E.current||!I)return;const n=E.current,o=n.clientWidth,s=n.clientHeight;I.setSize(o,s),S.aspect=o/s,S.updateProjectionMatrix()};return window.addEventListener("resize",X),()=>{window.removeEventListener("resize",X),document.removeEventListener("keydown",q),L.current&&L.current.dispose(),U.current&&cancelAnimationFrame(U.current),G&&I.domElement&&G.removeChild(I.domElement),I.dispose()}},[a,b,F,Y,R,z]),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{ref:E,className:"w-full h-full"}),B&&e.jsx("div",{className:"absolute bottom-0 left-0 p-2 text-white bg-black bg-opacity-50 max-w-xs rounded-tr-lg",children:e.jsx("h3",{className:"text-xs font-bold",children:B})})]})},Ot=({galaxyUrl:a,galaxyType:b="Spiral",numSystems:F=1e4,blackHoles:Y=5,pulsars:R=10,quasars:z=3,galaxyName:B})=>{const[E,je]=w.useState(!1),[se,U]=w.useState(!1),[L,Z]=w.useState(!1),[T,G]=w.useState(!1),[ie,V]=w.useState(!1),ne=w.useRef(null);w.useEffect(()=>{const I=document.createElement("style");return I.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(I),()=>{document.head.removeChild(I)}},[]);const S=()=>{U(!0),setTimeout(()=>{je(!1),U(!1)},300)};return w.useEffect(()=>(document.addEventListener("galaxy-close-fullscreen",S),()=>{document.removeEventListener("galaxy-close-fullscreen",S)}),[]),w.useEffect(()=>{if(L){const I=setTimeout(()=>Z(!1),50);return()=>clearTimeout(I)}},[L]),w.useEffect(()=>{const I=setInterval(()=>{ne.current&&T&&!ne.current.isGeneratingImage&&T&&G(!1)},50);return()=>clearInterval(I)},[T]),w.useEffect(()=>{const I=()=>{V(!0)},xe=lt.subscribe("mining_completed",I);return()=>{xe()}},[]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Galaxy Visualization"})}),e.jsxs("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:[e.jsx(jt,{ref:ne,galaxyType:b,numSystems:F,blackHoles:Y,pulsars:R,quasars:z,galaxyName:B,galaxyUrl:a,onExpandClick:()=>{je(!0),Z(!0)}}),e.jsx(Ft,{isActive:ie,onAnimationComplete:()=>{V(!1)}})]}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsx(Ht,{href:a,onTakeScreenshot:()=>{ne.current&&!T&&(G(!0),ne.current.captureScreenshot())},isGeneratingImage:T}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]}),E&&ct.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${se||L?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${se||L?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:"Galaxy View"})}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Galaxy Visualization"}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Type: ",b," • Systems: ",F.toLocaleString()]})]})}),e.jsx("button",{onClick:S,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(Xt,{galaxyType:b,numSystems:F,blackHoles:Y,pulsars:R,quasars:z,galaxyName:B})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},Zt=({systems:a,coordinates:b})=>{const[F,Y]=w.useState(new Map);return w.useEffect(()=>{(()=>{try{const z=new Map;a.forEach(B=>{const E=Et(b,B.index,B.num_planets||1);z.set(B.index,E)}),Y(z)}catch{}})()},[b,a]),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:a.map(R=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[(()=>{const z=F.get(R.index)||"none";return z==="complete"?e.jsx("div",{className:"absolute top-1 right-1 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}):z==="partial"?e.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500/20 border border-yellow-500/50 text-yellow-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"PARTIAL"}):null})(),e.jsxs("button",{onClick:()=>window.location.href=`/system/${R.index}`,className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["#",R.number]}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:R.name})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},R.index))}),a.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No systems found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This galaxy appears to be empty"})]})]})},Kt=({currentGalaxy:a})=>{const[b,F]=w.useState(!1),[Y,R]=w.useState(!1),[z,B]=w.useState(!0),E=1e7;w.useEffect(()=>{const[Z,T,G]=a.coordinates,ie=!(Z===0&&T===0&&G===0),V=!(Z===E&&T===E&&G===E);F(ie),R(V),B(!1)},[a.coordinates]);const je=()=>{const[Z,T,G]=a.coordinates;return G>0?[Z,T,G-1]:T>0?[Z,T-1,E]:Z>0?[Z-1,E,E]:[0,0,0]},se=()=>{const[Z,T,G]=a.coordinates;return G<E?[Z,T,G+1]:T<E?[Z,T+1,0]:Z<E?[Z+1,0,0]:[E,E,E]},U=()=>{if(b){if(!Ve.canAffordTravel("galaxy",1)){Ve.executeTravel("galaxy",1);return}if(!Ve.executeTravel("galaxy",1))return;const[T,G,ie]=je(),V=document.createElement("form");V.method="POST",V.action="/navigate";const ne=document.createElement("input");ne.type="hidden",ne.name="x",ne.value=T.toString();const S=document.createElement("input");S.type="hidden",S.name="y",S.value=G.toString();const I=document.createElement("input");I.type="hidden",I.name="z",I.value=ie.toString(),V.appendChild(ne),V.appendChild(S),V.appendChild(I),document.body.appendChild(V),V.submit()}},L=()=>{if(Y){if(!Ve.canAffordTravel("galaxy",1)){Ve.executeTravel("galaxy",1);return}if(!Ve.executeTravel("galaxy",1))return;const[T,G,ie]=se(),V=document.createElement("form");V.method="POST",V.action="/navigate";const ne=document.createElement("input");ne.type="hidden",ne.name="x",ne.value=T.toString();const S=document.createElement("input");S.type="hidden",S.name="y",S.value=G.toString();const I=document.createElement("input");I.type="hidden",I.name="z",I.value=ie.toString(),V.appendChild(ne),V.appendChild(S),V.appendChild(I),document.body.appendChild(V),V.submit()}};return z?null:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:U,disabled:!b,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${b?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:L,disabled:!Y,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${Y?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})},Jt=({page:a,prevPage:b,nextPage:F,finish:Y})=>{const R="px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105",z="bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg",B="bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white border border-white/20";return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 sm:gap-4 flex-wrap",children:[a!==1&&e.jsxs("button",{onClick:()=>window.location.href="/galaxy/1",className:`${R} ${B}`,title:"First page",children:[e.jsx("span",{className:"hidden sm:inline",children:"First"}),e.jsx("span",{className:"sm:hidden",children:"«"})]}),b&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${b}`,className:`${R} ${B}`,title:"Previous page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"‹"})]}),(()=>{const E=[],se=Math.max(1,a-2),U=Math.min(Y,a+2);se>1&&(E.push(e.jsx("button",{onClick:()=>window.location.href="/galaxy/1",className:`${R} ${B}`,children:"1"},1)),se>2&&E.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"start-ellipsis")));for(let L=se;L<=U;L++)L===a?E.push(e.jsx("span",{className:`${R} ${z} cursor-default`,children:L},L)):E.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${L}`,className:`${R} ${B} cursor-pointer`,children:L},L));return U<Y&&(U<Y-1&&E.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"end-ellipsis")),E.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${Y}`,className:`${R} ${B}`,children:Y},Y))),E})(),F&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${F}`,className:`${R} ${B}`,title:"Next page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"›"})]}),a!==Y&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${Y}`,className:`${R} ${B}`,title:"Last page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Last"}),e.jsx("span",{className:"sm:hidden",children:"»"})]})]}),e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-400",children:["Page ",a," of ",Y]})]})},at=({galaxy:a,systems:b,galaxy_url:F,version:Y,page:R,prev_page:z,next_page:B,finish:E,image_url:je})=>{const[se]=w.useState(a.coordinates.join(","));w.useEffect(()=>{document.body.setAttribute("data-coordinates",se),kt(se)},[se]);const U=L=>L.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsx(Pt,{}),e.jsxs("div",{className:"relative z-10 pt-1",children:[e.jsx(Lt,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["Galaxy '",U(a.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Coordinates ",a.coordinates.join(", ")]})]}),e.jsx(Kt,{currentGalaxy:a}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(Ot,{galaxyUrl:F,galaxyType:a.galaxy_type,numSystems:a.num_systems,blackHoles:a.black_holes,pulsars:a.pulsars,quasars:a.quasars,galaxyName:U(a.name)})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(Yt,{galaxy:a})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Systems in '",U(a.name),"'"]}),e.jsx(Zt,{systems:b,coordinates:se})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsx("span",{className:"text-base sm:text-lg",children:"← Go Back to Planetary Index"})})}),e.jsx(Jt,{page:R,prevPage:z,nextPage:B,finish:E})]}),e.jsx($t,{version:Y})]}),e.jsx(Bt,{}),e.jsx(Gt,{currentLocation:{type:"galaxy",name:a.name,coordinates:a.coordinates.join(",")}})]})};document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("atlas-react-root");if(!a)return;const b=F=>{const Y=document.getElementById(F);if(!Y||!Y.textContent)return null;try{return JSON.parse(Y.textContent.trim())}catch{return null}};try{const F=b("data-galaxy")||{},Y=b("data-systems")||[],R=b("data-navigation")||{},z=b("data-common")||{},B={galaxy:{name:F.name||"Unknown Galaxy",coordinates:F.coordinates||[0,0,0],galaxy_type:F.galaxy_type||"Unknown",num_systems:F.num_systems||0,black_holes:F.black_holes||0,pulsars:F.pulsars||0,quasars:F.quasars||0},systems:Y,galaxy_url:R.galaxy_url||"#",version:z.version||"1.0.0",page:R.page||1,prev_page:R.prev_page,next_page:R.next_page,finish:R.finish||1,image_url:z.image_url||""};st.createRoot(a).render(it.createElement(at,B))}catch{const Y={galaxy:{name:"Unknown Galaxy",coordinates:[0,0,0],galaxy_type:"Unknown",num_systems:0,black_holes:0,pulsars:0,quasars:0},systems:[],galaxy_url:"#",version:"1.0.0",page:1,finish:1,image_url:""};st.createRoot(a).render(it.createElement(at,Y))}});
