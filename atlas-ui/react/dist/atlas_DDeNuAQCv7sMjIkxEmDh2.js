import{r as x,j as e,c as q,R as G}from"./atlas_BSujyM3STIIs7ogMAeFeS.js";import{H as R,F as Q,M as X,h as N,S as Z,N as ee,a as te,i as T}from"./atlas_CMZze-r7Ly6ijDY38QF2c.js";import{V as se}from"./atlas_DFpgC65o32Sm57XjKQ2G5.js";import{T as re,D as ae}from"./atlas_D4-6vOjB9oC_HZlJUheFM.js";import{c as n,S as w}from"./atlas_eXFZ7Ff1XhDUqQaTWR8yb.js";import"./atlas_BrYhsyGbdfinGesBjh40k.js";import"./atlas_XGSDCzrG-pjJUG7P8pQ46.js";import"./atlas_S2gaYUaVDGx2fzGLEfKud.js";import"./atlas_DhYLk9xu4Hn3qb7qcWDa_.js";import"./atlas_XeJvk2NHk9pvQBQNpBJiW.js";const ne=()=>{const f="/api/multiverse/peers",B="2.8.46",[i,L]=x.useState(null),[y,C]=x.useState(!0),[k,u]=x.useState(null),[_,M]=x.useState(null),[m,U]=x.useState(()=>{const t=localStorage.getItem("atlasMultiverseAutoRefresh");return t!==null?t==="true":!0}),[S,P]=x.useState(!1),[E,$]=x.useState(!1),[I,A]=x.useState(null),[h,V]=x.useState(null),[z,H]=x.useState(()=>localStorage.getItem("atlasMultiversePortMessageDismissed")!=="true"),F=t=>t?new Date(t*1e3).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown Origin",g=t=>{if(!t)return{text:"Never",relative:"Unknown"};const s=new Date(t*1e3),l=new Date().getTime()-s.getTime(),d=Math.floor(l/6e4),r=Math.floor(d/60),o=Math.floor(r/24);let c="";return o>0?c=`${o}d ago`:r>0?c=`${r}h ago`:d>0?c=`${d}m ago`:c="Just now",{text:s.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),relative:c}},p=t=>h?.remote&&h?.seed_str===t,b=t=>{switch(t){case"ACTIVE":return{bgColor:"bg-green-500/20",textColor:"text-green-400",opacity:"opacity-100",animation:"animate-pulse",dotColor:"bg-green-500"};case"INACTIVE":return{bgColor:"bg-yellow-500/20",textColor:"text-yellow-400",opacity:"opacity-75",animation:"",dotColor:"bg-yellow-500"};case"STALE":return{bgColor:"bg-orange-500/20",textColor:"text-orange-400",opacity:"opacity-60",animation:"",dotColor:"bg-orange-500"};case"ARCHIVED":return{bgColor:"bg-gray-500/20",textColor:"text-gray-400",opacity:"opacity-40",animation:"",dotColor:"bg-gray-500"};default:return{bgColor:"bg-red-500/20",textColor:"text-red-400",opacity:"opacity-50",animation:"",dotColor:"bg-red-500"}}},j=async()=>{try{C(!0);const s=await(await fetch(f)).json();s.success?(L(s),u(null)):u(s.error||"Failed to fetch multiverse data")}catch(t){u(`Network error: ${t.message}`)}finally{C(!1),M(new Date)}},O=t=>{const s=t.peers.reduce((d,r)=>r.last_seen>d.last_seen?r:d),a=new URLSearchParams({seed:t.seed,seed_name:t.seed_name,cosmic_origin_time:t.cosmic_origin_time.toString()}),l=`/multiverse/${s.peer_id}/explore?${a.toString()}`;A(l),P(!0)},Y=()=>{I&&(window.location.href=I)},W=()=>{$(!0)},J=()=>{window.location.href="/multiverse/exit"},K=()=>{localStorage.setItem("atlasMultiversePortMessageDismissed","true"),H(!1)};return x.useEffect(()=>{if(j(),m){const t=setInterval(()=>{j()},3e4);return()=>clearInterval(t)}},[m]),x.useEffect(()=>{const t=()=>{const a=document.getElementById("data-universe-config");if(a)try{const l=JSON.parse(a.textContent);V(l)}catch(l){console.error("Error parsing universe config:",l)}};t();const s=setInterval(t,1e3);return()=>clearInterval(s)},[]),y&&!i?e.jsx("div",{className:"w-full min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white flex flex-col",children:e.jsxs("div",{className:"relative z-10 pt-1 flex-1 flex flex-col",children:[e.jsx(R,{}),e.jsx("div",{className:"flex items-center justify-center h-[60vh] flex-1",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500 mx-auto mb-4"}),e.jsx("p",{className:"text-xl text-purple-300",children:"Scanning Multiverse..."})]})})]})}):e.jsxs("div",{className:"w-full min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white flex flex-col",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsx(Q,{}),e.jsxs("div",{className:"relative z-10 pt-1 flex-1 flex flex-col",children:[e.jsx(R,{}),e.jsx(X,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8 flex-1",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-4",children:"Multiverse Network"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Connected P2P Universe Instances"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs flex-wrap mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-400",children:"Total Peers:"}),e.jsx("span",{className:"text-purple-300 font-bold",children:i?.total_peers||0})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-400",children:"Valid Universes:"}),e.jsx("span",{className:"text-purple-300 font-bold",children:i?.groups?.filter(t=>{const s=n.filterContent(t.seed_name),a=n.filterContent(t.seed);return!s.isBlocked&&!a.isBlocked}).length||0})]}),i?.groups?.filter(t=>{const s=n.filterContent(t.seed_name),a=n.filterContent(t.seed);return s.isBlocked||a.isBlocked}).length>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-red-400",children:"Filtered:"}),e.jsx("span",{className:"text-red-300 font-bold",children:i.groups.filter(t=>{const s=n.filterContent(t.seed_name),a=n.filterContent(t.seed);return s.isBlocked||a.isBlocked}).length})]}),_&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-400",children:"Last Update:"}),e.jsx("span",{className:"text-purple-300",children:_.toLocaleTimeString()})]}),e.jsx("button",{onClick:()=>j(),className:"px-3 py-1 bg-purple-600/30 hover:bg-purple-600/50 rounded-full border border-purple-500/50 transition-colors",children:"Refresh"}),e.jsxs("button",{onClick:()=>{const t=!m;U(t),localStorage.setItem("atlasMultiverseAutoRefresh",t.toString())},className:`px-3 py-1 rounded-full border transition-colors ${m?"bg-green-600/30 hover:bg-green-600/50 border-green-500/50":"bg-gray-600/30 hover:bg-gray-600/50 border-gray-500/50"}`,children:["Auto-refresh: ",m?"ON":"OFF"]})]}),z&&e.jsx("div",{className:"mt-4 max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-900/40 via-indigo-900/40 to-purple-900/40 backdrop-blur-lg rounded-xl border border-blue-500/40 p-4 shadow-xl relative",children:[e.jsx("button",{onClick:K,className:"absolute top-2 right-2 text-gray-400 hover:text-white transition-colors p-1","aria-label":"Dismiss message",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("div",{className:"flex items-center gap-3 pr-8",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-400 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"m21.17 15.4l-5.91-9.85c-.78-1.3-1.96-2.04-3.26-2.04s-2.48.74-3.26 2.03L2.83 15.4c-.44.73-.66 1.49-.66 2.21c0 .57.14 1.13.42 1.62C3.23 20.35 4.47 21 6 21h12c1.53 0 2.77-.65 3.41-1.77c.28-.49.42-1.02.42-1.58c.01-.74-.21-1.51-.66-2.25M12 8.45c.85 0 1.55.7 1.55 1.55s-.69 1.55-1.55 1.55c-.85 0-1.55-.7-1.55-1.55c0-.86.69-1.55 1.55-1.55m1.69 8.46c-.03.04-.8.92-2.07.92h-.15c-.51-.03-.93-.25-1.18-.63c-.31-.47-.36-1.11-.12-1.82l.41-1.22c.23-.68.01-.79-.11-.85l-.14-.02c-.25 0-.6.15-.71.21c-.1.05-.23.03-.31-.07c-.07-.1-.07-.23.01-.32c.03-.04.87-.99 2.22-.91c.51.03.93.25 1.18.63c.32.47.36 1.11.12 1.83l-.41 1.22c-.23.68-.01.79.11.85l.14.02c.25 0 .6-.15.71-.2c.11-.06.23-.03.31.07c.07.07.07.2-.01.29",strokeWidth:"0.5",stroke:"currentColor"})}),e.jsx("h3",{className:"text-blue-200 font-semibold text-sm",children:"Private Network Notice"})]}),e.jsx("p",{className:"text-gray-300 text-xs leading-relaxed text-center",children:"If you're behind a private connection or firewall, make sure to open the Atlas ports to allow communication with other multiverse instances. This enables P2P connectivity across the network."})]})})]})})]}),h?.remote&&e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"bg-gradient-to-r from-amber-900/30 via-orange-900/30 to-amber-900/30 backdrop-blur-lg rounded-2xl border border-amber-500/40 p-4 sm:p-6 shadow-2xl",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsxs("h3",{className:"text-amber-200 font-bold text-sm sm:text-lg flex items-center justify-center sm:justify-start",children:[e.jsx(N,{className:"mr-2"})," Exploring Remote Universe"]}),e.jsxs("div",{className:"space-y-1 mt-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center sm:justify-start gap-1 sm:gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-amber-400"}),e.jsx("span",{className:"text-amber-300/80",children:"Seed:"})]}),e.jsx("span",{className:"text-amber-200 font-mono",children:w.sanitizeForDisplay(h.seed_str)||"Unknown"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center sm:justify-start gap-1 sm:gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4 text-amber-400"}),e.jsx("span",{className:"text-amber-300/80",children:"Atlas ID:"})]}),e.jsx("span",{className:"text-amber-200 font-mono truncate max-w-xs sm:max-w-none",children:h.node_id||"Unknown"})]})]})]})}),e.jsxs("button",{onClick:W,className:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-amber-500/25 flex items-center gap-2 w-full text-center sm:w-auto justify-center",children:[e.jsx(N,{size:18,color:"white"}),e.jsx("span",{children:"Return to Your Universe"})]})]})})}),k&&e.jsx("div",{className:"bg-red-500/20 backdrop-blur-lg rounded-2xl border border-red-500/50 p-6 mb-8",children:e.jsx("p",{className:"text-red-300 text-center",children:k})}),i&&i.groups&&e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:i.groups.filter(t=>{const s=n.filterContent(t.seed_name),a=n.filterContent(t.seed);return!s.isBlocked&&!a.isBlocked}).map((t,s)=>{const a=t.peers.reduce((r,o)=>o.last_seen>r.last_seen?o:r),l=b(a.status),d=t.seed==="1.618033988749895"&&t.peers.find(r=>new Date(r.cosmic_origin_time*1e3).getFullYear()===1986)?.cosmic_origin_time||t.cosmic_origin_time;return e.jsxs("div",{className:`bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-6 shadow-2xl hover:shadow-purple-500/20 transition-all duration-300 hover:scale-[1.02] ${l.opacity} relative group ${p(t.seed)?"border-amber-500/50 ring-2 ring-amber-400/20":""}`,children:[p(t.seed)&&e.jsx("div",{className:"absolute -top-2 -left-2 z-10",children:e.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white text-xs font-bold py-1 px-2 rounded-full shadow-lg flex items-center gap-1 animate-pulse",children:[e.jsx(N,{size:12,color:"white"}),e.jsx("span",{children:"Exploring"})]})}),e.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-2",children:[e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-semibold ${l.bgColor} ${l.textColor} ${l.animation} flex items-center gap-1`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${l.dotColor}`}),a.status]}),t.count>1&&e.jsx("div",{className:"px-2 py-1 bg-purple-500/30 rounded-full text-xs font-semibold text-purple-200 flex items-center justify-center",children:t.count})]}),e.jsx("div",{className:"flex items-start justify-between mb-4 pr-20",children:e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:n.getDisplayText(t.seed_name)})})}),e.jsxs("div",{className:"space-y-2 mb-4 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Seed:"}),e.jsx("span",{className:"text-gray-300 font-mono",children:w.sanitizeForDisplay(n.getDisplayText(t.seed))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Bit Bang:"}),e.jsx("span",{className:"text-gray-300",children:F(d)})]})]}),t.count>1?e.jsxs("details",{className:"mt-4",children:[e.jsxs("summary",{className:"cursor-pointer text-xs text-purple-400 hover:text-purple-300",children:["View all ",t.count," instances"]}),e.jsx("div",{className:"mt-2 space-y-2",children:[...t.peers].sort((r,o)=>o.last_seen-r.last_seen).map(r=>{const o=b(r.status),c=g(r.last_seen);return e.jsx("div",{className:`p-2 bg-black/20 rounded-lg text-xs ${o.opacity}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-1",children:[e.jsxs("div",{className:"flex-1 sm:mr-2",children:[e.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"Atlas ID"}),e.jsx("span",{className:"font-mono text-gray-400 truncate block",children:r.peer_id})]}),e.jsxs("div",{className:"flex-shrink-0 sm:text-right mt-2 sm:mt-0",children:[e.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"Last Seen"}),e.jsx("span",{className:"text-gray-400",children:c.relative})]})]})},r.peer_id)})})]}):e.jsx("div",{className:"mt-4",children:t.peers.map(r=>{const o=b(r.status),c=g(r.last_seen);return e.jsx("div",{className:`p-2 bg-black/20 rounded-lg text-xs ${o.opacity}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-1",children:[e.jsxs("div",{className:"flex-1 sm:mr-2",children:[e.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"Atlas ID"}),e.jsx("span",{className:"font-mono text-gray-400 truncate block",children:r.peer_id})]}),e.jsxs("div",{className:"flex-shrink-0 sm:text-right mt-2 sm:mt-0",children:[e.jsx("div",{className:"text-gray-500 text-xs mb-1",children:"Last Seen"}),e.jsx("span",{className:"text-gray-400",children:c.relative})]})]})},r.peer_id)})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:p(t.seed)?e.jsx("div",{className:"w-full bg-gradient-to-r from-amber-600/50 to-orange-600/50 text-amber-200 font-semibold py-3 px-4 rounded-xl flex items-center justify-center gap-2 border border-amber-500/30",children:e.jsx("span",{children:"You are Here"})}):e.jsx("button",{onClick:()=>O(t),className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg hover:shadow-purple-500/25",children:"Explore this Universe"})})]},`${t.seed}-${s}`)})}),i.groups.filter(t=>{const s=n.filterContent(t.seed_name),a=n.filterContent(t.seed);return s.isBlocked||a.isBlocked}).length>0&&e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-red-400 mb-2",children:"⚠️ Filtered Content"}),e.jsx("p",{className:"text-sm text-red-300",children:"The following universes contain inappropriate content and have been filtered"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-3",children:i.groups.filter(t=>{const s=n.filterContent(t.seed_name),a=n.filterContent(t.seed);return s.isBlocked||a.isBlocked}).map((t,s)=>{const a=t.peers.reduce((c,v)=>v.last_seen>c.last_seen?v:c),l=g(a.last_seen),d=n.filterContent(t.seed_name),r=n.filterContent(t.seed),o=t.seed==="1.618033988749895"&&t.peers.find(c=>new Date(c.cosmic_origin_time*1e3).getFullYear()===1986)?.cosmic_origin_time||t.cosmic_origin_time;return e.jsxs("div",{className:"bg-red-900/20 backdrop-blur-lg rounded-lg border border-red-500/30 p-3 shadow-lg opacity-60 relative",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:"text-sm font-bold text-red-400 truncate",children:d.isBlocked?"Forbidden":t.seed_name})}),t.count>1&&e.jsx("div",{className:"ml-2 bg-red-500/30 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold text-red-200 flex-shrink-0",children:t.count})]}),e.jsxs("div",{className:"space-y-1 mb-2 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-red-400 flex-shrink-0",children:"Seed:"}),e.jsx("span",{className:"text-red-300 font-mono text-xs truncate ml-2 min-w-0",children:r.isBlocked?"Forbidden":w.sanitizeForDisplay(t.seed)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-red-400 flex-shrink-0",children:"Bit Bang:"}),e.jsx("span",{className:"text-red-300 text-xs truncate ml-2",children:F(o)})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-red-500/20",children:[e.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-semibold text-red-400",children:"FILTERED"})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsx("div",{className:"text-xs text-red-300",children:l.relative})})]}),e.jsx("div",{className:"relative bottom-0 left-0 right-0 bg-red-500/20 rounded-lg mt-2 px-2 py-1",children:e.jsxs("div",{className:"text-xs text-red-300 text-center truncate",children:["Reason: ",d.isBlocked?d.reason:r.reason]})})]},`filtered-${t.seed}-${s}`)})})]})]}),i&&i.groups&&i.groups.length===0&&e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-12 text-center",children:[e.jsx("p",{className:"text-xl text-gray-400 mb-2",children:"No Multiverse Connections Found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Waiting for P2P peers to connect..."})]}),!i&&!y&&e.jsxs("div",{className:"bg-red-500/20 backdrop-blur-lg rounded-2xl border border-red-500/50 p-12 text-center",children:[e.jsx("p",{className:"text-xl text-red-400 mb-2",children:"No Data Received"}),e.jsx("p",{className:"text-sm text-red-300",children:"Check browser console for details"})]})]}),e.jsx(te,{}),e.jsx(re,{}),e.jsx(ae,{currentView:"galaxy"}),e.jsx(se,{version:B})]}),S&&e.jsx("div",{className:"fixed inset-0 z-[9999] animate-fadeIn",children:e.jsx(T,{isActive:S,onTransitionComplete:Y})}),E&&e.jsx("div",{className:"fixed inset-0 z-[9999] animate-fadeIn",children:e.jsx(T,{isActive:E,onTransitionComplete:J})})]})};document.addEventListener("DOMContentLoaded",()=>{const f=document.getElementById("atlas-react-root");if(!f)return;q.createRoot(f).render(G.createElement(ne,{}))});
