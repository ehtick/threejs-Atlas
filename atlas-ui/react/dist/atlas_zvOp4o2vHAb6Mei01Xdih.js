import{r as f,j as a,c as Ut}from"./atlas_DztNjO7RDBVhWZ-y1bcy1.js";import{V as Bt}from"./atlas_DkhYSJBHjNj1C82pPhqOg.js";import{W as Gt}from"./atlas_oohEvMdySAEvykvrmEZWK.js";import{E as Vt,R as Ot,U as Ht,S as ft}from"./atlas_CL1FEvCMa5769vO7IeA4_.js";import{a4 as Wt,C as et,a5 as qt,f as Lt,G as _t,z as J,V as at,l as $t,M as ot,A as L,B as vt,a as G,Y as gt,P as xt,b as Xt,r as Yt,v as Zt,R as Qt}from"./atlas_Dr7FhitegIaVfnn-NnCom.js";import"./atlas_NcbMusH95geV1bEYmniMW.js";import"./atlas_C0NoXn30NvQskZTlvs4ww.js";const Jt=({animationType:V,onAnimationComplete:h})=>{const N=f.useRef(null),R=f.useRef(null),T=f.useRef(null),_=f.useRef(null),k=f.useRef(null),O=f.useRef(null),[H,K]=f.useState(!1),W=f.useRef(null),m=()=>{const d=document.createElement("canvas");d.width=64,d.height=64;const u=d.getContext("2d");u.clearRect(0,0,64,64);const w=u.createRadialGradient(32,32,0,32,32,32);w.addColorStop(0,"rgba(255,255,255,1.0)"),w.addColorStop(.3,"rgba(255,255,255,0.8)"),w.addColorStop(.7,"rgba(255,255,255,0.2)"),w.addColorStop(1,"rgba(255,255,255,0.0)"),u.fillStyle=w,u.beginPath(),u.arc(32,32,32,0,Math.PI*2),u.fill();const D=new Zt(d);return D.premultiplyAlpha=!1,D.format=Qt,D},$={uniforms:{tDiffuse:{value:null},distortion:{value:0},time:{value:0}},vertexShader:`
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
      }
    `,fragmentShader:`
      uniform sampler2D tDiffuse;
      uniform float distortion;
      uniform float time;
      varying vec2 vUv;
      
      void main() {
        vec2 center = vec2(0.5, 0.5);
        vec2 direction = vUv - center;
        float distance = length(direction);
        
        float aberration = distortion * distance;
        
        vec2 redOffset = direction * aberration * 1.5;
        vec2 greenOffset = direction * aberration;
        vec2 blueOffset = direction * aberration * 0.5;
        
        float red = texture2D(tDiffuse, vUv + redOffset).r;
        float green = texture2D(tDiffuse, vUv + greenOffset).g;
        float blue = texture2D(tDiffuse, vUv + blueOffset).b;
        
        gl_FragColor = vec4(red, green, blue, 1.0);
      }
    `},U={uniforms:{tDiffuse:{value:null},distortionAmount:{value:0},time:{value:0}},vertexShader:`
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
      }
    `,fragmentShader:`
      uniform sampler2D tDiffuse;
      uniform float distortionAmount;
      uniform float time;
      varying vec2 vUv;
      
      void main() {
        vec2 center = vec2(0.5, 0.5);
        vec2 uv = vUv;
        
        vec2 direction = uv - center;
        float distance = length(direction);
        
        float waveDistortion = sin(distance * 20.0 + time * 10.0) * distortionAmount * 0.02;
        float radialDistortion = distance * distortionAmount * 0.1;
        
        uv += direction * (waveDistortion + radialDistortion);
        
        gl_FragColor = texture2D(tDiffuse, uv);
      }
    `},Mt=()=>{if(N.current)try{const d=new Wt;d.background=new et(17),R.current=d;const u=new qt(75,window.innerWidth/window.innerHeight,.01,1e3);u.position.set(0,0,.1),_.current=u;const w=new Gt({antialias:!0,alpha:!1});w.setSize(window.innerWidth,window.innerHeight),N.current.appendChild(w.domElement),T.current=w;const D=new Vt(w),St=new Ot(d,u);D.addPass(St);const jt=new Ht(new Lt(window.innerWidth,window.innerHeight),.3,.6,.3);D.addPass(jt);const Pt=new ft(U);D.addPass(Pt);const Ct=new ft($);D.addPass(Ct),k.current=D;const nt=(t,n)=>{const p=new _t,v=new J({color:16777215,transparent:!0,opacity:.8});return[[[-t/2,-t/2,t/2],[t/2,-t/2,t/2]],[[t/2,-t/2,t/2],[t/2,t/2,t/2]],[[t/2,t/2,t/2],[-t/2,t/2,t/2]],[[-t/2,t/2,t/2],[-t/2,-t/2,t/2]],[[-t/2,-t/2,-t/2],[t/2,-t/2,-t/2]],[[t/2,-t/2,-t/2],[t/2,t/2,-t/2]],[[t/2,t/2,-t/2],[-t/2,t/2,-t/2]],[[-t/2,t/2,-t/2],[-t/2,-t/2,-t/2]],[[-t/2,-t/2,-t/2],[-t/2,-t/2,t/2]],[[t/2,-t/2,-t/2],[t/2,-t/2,t/2]],[[t/2,t/2,-t/2],[t/2,t/2,t/2]],[[-t/2,t/2,-t/2],[-t/2,t/2,t/2]]].forEach(([y,g])=>{const b=new at(y[0],y[1],y[2]),x=new at(g[0],g[1],g[2]),M=x.clone().sub(b).length(),F=new $t(n,n,M,8),S=new ot(F,v);S.position.copy(b.clone().add(x).multiplyScalar(.5)),S.lookAt(x),S.rotateX(Math.PI/2),p.add(S)}),p},s=nt(10,.05);d.add(s);const A=nt(10,.05);A.children.forEach(t=>{const n=s.children[0].material;t.material=new J({color:n.color.clone(),transparent:!0,opacity:0,blending:L})}),A.position.copy(s.position),d.add(A);const Dt=new Float32Array([0,0,0]),At=new Float32Array([1,1,1]),Et=new Float32Array([10]),X=new vt;X.setAttribute("position",new G(Dt,3)),X.setAttribute("color",new G(At,3)),X.setAttribute("size",new G(Et,1));const Y=new gt({size:7,vertexColors:!0,blending:L,transparent:!0,alphaTest:.01,map:m()}),Nt=new xt(X,Y);d.add(Nt);const E=7500,C=new Float32Array(E*3),Z=new Float32Array(E*3),rt=new Float32Array(E),z=new Float32Array(E*3),B=new Float32Array(E*3),Rt=new Float32Array(E),tt=[];for(let t=0;t<E;t++){const n=3+Math.floor(Math.random()*3);let p=1/0,v=0,c=0,y=0;for(let b=0;b<n;b++){const x=(Math.random()-.5)*10,l=(Math.random()-.5)*10,M=(Math.random()-.5)*10,F=Math.sqrt(x*x+l*l+M*M),S=Math.pow(Math.random(),1.8)+F*.1;S<p&&(p=S,v=x,c=l,y=M)}const g=Math.sqrt(v*v+c*c+y*y);tt.push({index:t,x:v,y:c,z:y,distance:g,launchTime:Math.random()*3,speed:g>0?(2+Math.random()*3)/g:1})}for(let t=0;t<E;t++){const n=tt[t];C[t*3]=0,C[t*3+1]=0,C[t*3+2]=0,z[t*3]=n.x,z[t*3+1]=n.y,z[t*3+2]=n.z,Rt[t]=n.distance,n.distance>0?(B[t*3]=n.x/n.distance,B[t*3+1]=n.y/n.distance,B[t*3+2]=n.z/n.distance):(B[t*3]=0,B[t*3+1]=0,B[t*3+2]=1);const p=Math.random()*.8+.4,v=Math.min(n.distance/5,1);Z[t*3]=p*(.2+v*.8),Z[t*3+1]=p*(.5+v*.5),Z[t*3+2]=p*(.8+v*.2),rt[t]=Math.random()*.8+.3}const q=new vt;q.setAttribute("position",new G(C,3)),q.setAttribute("color",new G(Z,3)),q.setAttribute("size",new G(rt,1));const st=new gt({size:.1,vertexColors:!0,blending:L,transparent:!0,alphaTest:.01,depthWrite:!1,map:m()}),it=new xt(q,st);d.add(it);const Q=[];for(let t=0;t<8;t++){const n=new ot(new Xt(1,32,32),new J({color:new et().setHSL(t*.08,1,.7),transparent:!0,opacity:0,wireframe:!0,blending:L}));Q.push(n),d.add(n)}const ct=[],Tt=200;for(let t=0;t<Tt;t++){const n=new ot(new Yt(.1,.1,.1),new J({color:new et().setHSL(Math.random()*.2,1,.8),transparent:!0,opacity:0,blending:L}));n.userData={direction:new at((Math.random()-.5)*2,(Math.random()-.5)*2,(Math.random()-.5)*2).normalize(),speed:Math.random()*10+5,life:Math.random()*2+1},ct.push(n),d.add(n)}let Ft=Date.now();const lt=()=>{const t=(Date.now()-Ft)/1e3,n=10,p=7.5,v=2,c=1.5,y=k.current,g=y?.passes[1],b=y?.passes[2],x=y?.passes[3],l=Math.min(t/c,1),M=t<c;if(g&&b&&x)if(M){const e=Math.sin(l*Math.PI);g.strength=.2+e*.4,g.radius=.5+e*.1,b.uniforms.distortionAmount.value=e*2.5,b.uniforms.time.value=t,x.uniforms.distortion.value=e*.4,x.uniforms.time.value=t}else{const e=Math.max(0,1-(t-c)/2);g.strength=.3+e*.4,g.radius=.6+e*.1,b.uniforms.distortionAmount.value=e*.1,b.uniforms.time.value=t,x.uniforms.distortion.value=e*.03,x.uniforms.time.value=t}if(M){const e=l<.2?Math.sin(l*Math.PI*10)*.5+1:Math.max(0,1-l*2);Q.forEach((o,i)=>{const j=i*.08,P=Math.max(0,l-j);if(P>0){const I=P*(40+i*8);o.scale.setScalar(I),o.material.opacity=Math.max(0,1.2-i*.1-P*.8)}}),ct.forEach(o=>{const i=l*o.userData.life;if(i>0){const j=i*o.userData.speed,P=o.userData.direction.clone().multiplyScalar(j);o.position.copy(P),o.material.opacity=Math.max(0,1-i/o.userData.life),o.rotation.x+=.2,o.rotation.y+=.15,o.rotation.z+=.25}}),u.fov=75+Math.sin(l*Math.PI)*40,u.updateProjectionMatrix();const r=Math.sin(t*80)*.5+1;Y.size=15+r*20*(1-l),Y.opacity=Math.min(1.5,1+e*.8-l)}else{Y.opacity=0;const e=t-c,r=2;if(e<r){const o=e/r;Q.forEach((i,j)=>{i.material.opacity=Math.max(0,(.3-j*.05)*(1-o))})}else Q.forEach(o=>{o.material.opacity=0})}const F=t<c?l*.1:.1+(1-.1)*Math.pow(Math.min((t-c)/2,1),.7);for(let e=0;e<E;e++){const r=tt[e],o=r.launchTime,i=r.speed;if(t>o){const j=t-o,P=Math.min(j*i,1),I=Math.pow(P,.8);C[e*3]=r.x*I*F,C[e*3+1]=r.y*I*F,C[e*3+2]=r.z*I*F}else C[e*3]=0,C[e*3+1]=0,C[e*3+2]=0}if(q.attributes.position.needsUpdate=!0,st.opacity=Math.min(t*1.2,1),t<c*.3)s.scale.setScalar(.01),s.rotation.x=0,s.rotation.y=0,s.rotation.z=0;else if(t<c){const e=(l-.3)/.7,r=Math.pow(e,.3)*.8,o=(1-e)*.5,i={x:(Math.random()-.5)*o,y:(Math.random()-.5)*o,z:(Math.random()-.5)*o};s.scale.setScalar(r),s.position.set(i.x,i.y,i.z),s.rotation.x=t*(1.5+Math.sin(t*20)*1),s.rotation.y=t*(2+Math.cos(t*15)*1.5),s.rotation.z=t*(1+Math.sin(t*25)*.5)}else{const e=t-c,r=.8;if(e<r){const I=e/r,kt=1-Math.pow(I,2);s.position.multiplyScalar(kt)}else s.position.set(0,0,0);const o=.8+Math.pow(Math.min(e/3,1),.5)*.2;s.scale.setScalar(o);const i=Math.min(e/1,1),j=.2+e*.7,P=t*j*i;s.rotation.x=Math.sin(P*.7)*.3,s.rotation.y=P*.8,s.rotation.z=Math.cos(P*.5)*.25}if(it.rotation.copy(s.rotation),A.position.set(0,0,0),A.rotation.copy(s.rotation),M)A.children.forEach(e=>{const r=e.material;r.opacity=0});else{const e=t-c;if(e>0){const r=1+e*50;A.scale.setScalar(r);const o=Math.max(0,.9-e*.4);A.children.forEach(i=>{const j=i.material;j.opacity=o})}else A.children.forEach(r=>{const o=r.material;o.opacity=0})}let S=8;if(!M){const e=t-c;if(t>=p){const r=Math.min((t-p)/v,1),o=Math.pow(r,2);S=Math.max(.5,2-o*1.8)}else S=Math.max(2,8-e*.8)}const dt=S+Math.sin(t*.3)*1,mt=t*.15,It=Math.sin(t*.08)*2;let ut=Math.cos(mt)*dt,ht=It,pt=Math.sin(mt)*dt;if(M){const e=Math.sin(l*Math.PI)*.8;ut+=(Math.random()-.5)*e,ht+=(Math.random()-.5)*e,pt+=(Math.random()-.5)*e}if(u.position.set(ut,ht,pt),u.lookAt(0,0,0),k.current?k.current.render():w.render(d,u),t>=p&&W.current){const e=Math.min((t-p)/v,1),r=Math.pow(e,2);W.current.style.opacity=r.toString()}if(t>n&&h){h();return}O.current=requestAnimationFrame(lt)};lt()}catch{}};return f.useEffect(()=>{V&&!H&&(K(!0),setTimeout(()=>{Mt()},100))},[V,H]),f.useEffect(()=>()=>{O.current&&cancelAnimationFrame(O.current),T.current&&N.current&&T.current.domElement.parentNode&&(N.current.removeChild(T.current.domElement),T.current.dispose())},[]),H?a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:N,className:"fixed inset-0 z-50 bg-black",style:{width:"100vw",height:"100vh"}}),a.jsx("div",{ref:W,className:"fixed inset-0 z-[51] bg-black pointer-events-none",style:{width:"100vw",height:"100vh",opacity:0,transition:"none"}})]}):null},Kt=({version:V})=>{const[h,N]=f.useState(""),[R,T]=f.useState("selection"),[_,k]=f.useState(null),O=[{value:"default",title:"The Core Continuum",description:"Venture into the primordial universe where time and space converge for you, exploring the vast cosmos we all traverse as a single entity."},{value:"custom",title:"Design the Multiverse",description:"Generate a personal universe with its own seed and cosmic origin time, a completely unique creation entirely shaped by your decision."}],H=m=>{N(m)},K=async m=>{if(m.preventDefault(),!h||R!=="selection")return;const $=new FormData;$.append("universe_type",h);try{const U=await fetch("/onboarding",{method:"POST",body:$});U.ok?(T("animating"),k(h==="default"?"core":"multiverse")):console.error("Server responded with error:",U.status)}catch(U){console.error("Error creating universe:",U)}},W=async()=>{window.location.href="/"};return a.jsxs(a.Fragment,{children:[_&&a.jsx("div",{className:"fixed inset-0 bg-black z-50",children:a.jsx(Jt,{animationType:_,onAnimationComplete:W})}),a.jsxs("div",{className:`w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto transition-opacity duration-500 ${R!=="selection"?"opacity-0 pointer-events-none":"opacity-100"}`,children:[a.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("header",{className:"bg-black/20 backdrop-blur-md border-b border-white/10 px-4 sm:px-6 py-6",children:a.jsxs("div",{className:"w-full flex flex-col items-center space-y-4",children:[a.jsx("img",{src:"/static/atlas-logo.jpg",alt:"Atlas Logo",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-full border-2 border-cyan-400 shadow-lg animate-pulse"}),a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Atlas Initialization Protocol"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-300 mt-2",children:"Quantum Navigation System Startup Sequence"})]})]})}),a.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("form",{onSubmit:K,className:"space-y-8",children:[a.jsx("div",{className:"text-center mb-12",children:a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"Will you journey through a shared universe or forge a new one of your own?"})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8 mb-12",children:O.map(m=>a.jsx("div",{onClick:()=>H(m.value),className:`
                        relative group cursor-pointer transition-all duration-500 transform hover:scale-105
                        ${h===m.value?"shadow-2xl shadow-cyan-400/25 scale-105":"hover:shadow-xl hover:shadow-blue-500/20"}
                      `,children:a.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 via-slate-700/80 to-slate-800/80 backdrop-blur-lg rounded-2xl border border-white/10 p-6 sm:p-8 h-full",children:[a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("div",{className:`
                            w-6 h-6 rounded-full border-2 transition-all duration-300
                            ${h===m.value?"bg-cyan-400 border-cyan-400 shadow-lg shadow-cyan-400/50":"border-gray-400 group-hover:border-cyan-400"}
                          `,children:h===m.value&&a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})})})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent",children:m.title}),a.jsx("p",{className:"text-gray-300 leading-relaxed text-sm sm:text-base",children:m.description})]}),a.jsx("div",{className:`
                          absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300
                          bg-gradient-to-br from-cyan-500/10 via-blue-500/10 to-purple-500/10
                          ${h===m.value?"opacity-20":""}
                        `})]})},m.value))}),a.jsx("div",{className:"text-center",children:a.jsxs("button",{type:"submit",disabled:!h||R!=="selection",className:`
                      relative overflow-hidden group px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-500 transform
                      ${h&&R==="selection"?"bg-gradient-to-r from-cyan-500 via-blue-500 to-purple-500 text-white shadow-2xl shadow-blue-500/30 hover:shadow-blue-500/50 hover:scale-110 active:scale-95":"bg-gray-600 text-gray-400 cursor-not-allowed"}
                    `,children:[h&&R==="selection"&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 opacity-20 group-hover:opacity-40 transition-opacity duration-300"}),a.jsx("span",{className:"relative z-10",children:a.jsx("span",{children:h?"Initialize Protocol":"Select Universe Type"})})]})})]})})}),a.jsx(Bt,{version:V})]})]})]})},yt=document.querySelector('meta[name="atlas-version"]'),wt=document.querySelector('meta[name="atlas-version-hash"]'),zt={version:yt&&yt.getAttribute("content")||"1.0.0",versionHash:wt&&wt.getAttribute("content")||""},bt=document.getElementById("atlas-react-root");bt&&Ut.createRoot(bt).render(f.createElement(Kt,zt));
