import{j as a,c as D,r as L}from"./atlas_DztNjO7RDBVhWZ-y1bcy1.js";import{u as j,g as O}from"./atlas_NcbMusH95geV1bEYmniMW.js";const Z=()=>a.jsx("header",{className:"bg-black/20 backdrop-blur-md border-b border-white/10 px-4 sm:px-6 py-4",children:a.jsxs("div",{className:"w-full flex items-center justify-between",children:[a.jsxs("a",{href:"/",className:"flex items-center space-x-3 sm:space-x-4",children:[a.jsx("img",{src:"/static/atlas-logo.jpg",alt:"Atlas Logo",className:"h-10 w-10 sm:h-12 sm:w-12 rounded-full border-2 border-blue-400 shadow-lg"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"The Atlas"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-400 hidden sm:block",children:"Universal Navigation System"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"ONLINE"})]}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400 hidden lg:block",children:"Quantum Navigation Ready"})]})]})}),U=100,E=4*1024*1024,k={SPACESHIP:"_atlasSpaceShip",ARCHIVE:"__atlasArchive",DAILY_CHALLENGES:"_atlasDailyChallenges",LOCATIONS:"_atlasLocations"},_=l=>{let e="";const t=l.byteLength;for(let s=0;s<t;s++)e+=String.fromCharCode(l[s]);return btoa(e)},I=l=>{const e=atob(l),t=e.length,s=new Uint8Array(t);for(let r=0;r<t;r++)s[r]=e.charCodeAt(r);return s},A=(l,e)=>{try{const t=new Blob([e]).size;if(t>E)throw console.warn(`Value too large: ${t} bytes exceeds ${E} bytes limit`),new Error("Value exceeds maximum storage size");const s=btoa(encodeURIComponent(l)),o=new TextEncoder().encode(e);let n;if(o.length>=U){const c=O(o);n="c:"+_(c)}else n="u:"+_(o);const i=new Blob([n]).size;if(i>E)throw console.warn(`Encoded value too large: ${i} bytes exceeds ${E} bytes limit`),new Error("Encoded value exceeds maximum storage size");localStorage.setItem(s,n)}catch(t){if(console.error("Error encoding/compressing:",t),t instanceof Error&&t.message.includes("storage size"))throw t;localStorage.setItem(l,e)}},M=l=>{try{const e=btoa(encodeURIComponent(l)),t=localStorage.getItem(e);if(t===null)return null;let s;if(t.startsWith("c:")){const o=I(t.slice(2));s=j(o)}else if(t.startsWith("u:"))s=I(t.slice(2));else{const o=atob(t),n=new Uint8Array(o.split("").map(i=>i.charCodeAt(0)));s=j(n)}return new TextDecoder().decode(s)}catch(e){return console.error("Error decoding/decompressing:",e),localStorage.getItem(l)}},F=l=>{try{const e=btoa(encodeURIComponent(l));localStorage.removeItem(e)}catch(e){console.error("Error removing encoded item:",e),localStorage.removeItem(l)}},G=()=>{Object.values(k).forEach(e=>{const t=localStorage.getItem(e);t!==null&&(A(e,t),localStorage.removeItem(e),console.log(`Migrated ${e} to encoded storage`))})};class p{static STORAGE_KEY="_atlasSpaceShip";static COLLECTION_COOLDOWNS={planet:900*1e3,system:2700*1e3,galaxy:480*60*1e3};static DAILY_COLLECTION_LIMITS={planet:1/0,system:15,galaxy:5};static PASSIVE_INTERVAL=60*1e3;static DEFAULT_DATA={r:{a:300,e:200,d:250},u:{l:1,ef:1,rn:500,st:1e3,m:1},c:{},t:{},s:{tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0,dcp:0,dcs:0,dcg:0,lcd:new Date().toDateString()}};static getData(){try{const e=M(this.STORAGE_KEY);if(!e)return this.saveData(this.DEFAULT_DATA),{...this.DEFAULT_DATA};const t=JSON.parse(e),s=this.expandData(t);return{r:s.r||{...this.DEFAULT_DATA.r},u:s.u||{...this.DEFAULT_DATA.u},c:s.c||{},t:s.t||{},s:s.s||{...this.DEFAULT_DATA.s}}}catch(e){return console.error("Error reading spaceship data:",e),{...this.DEFAULT_DATA}}}static saveData(e){try{const s=Date.now()-1440*60*1e3;Object.keys(e.c).forEach(n=>{e.c[n]<s&&delete e.c[n]});const r=Object.keys(e.c);if(r.length>500){const n=r.sort((c,h)=>e.c[c]-e.c[h]);n.slice(0,n.length-500).forEach(c=>delete e.c[c])}const o=this.compactData(e);A(this.STORAGE_KEY,JSON.stringify(o))}catch(t){console.error("Error saving spaceship data:",t),t.name==="QuotaExceededError"&&this.performEmergencyCleanup()}}static performEmergencyCleanup(){const e=this.getData();e.c={},e.s={tc:0,tr:{a:0,e:0,d:0},tt:0},this.saveData(e)}static getResources(){const e=this.getData();return{antimatter:Math.round(e.r.a),element115:Math.round(e.r.e),deuterium:Math.round(e.r.d)}}static setResources(e){const t=this.getData(),s=t.u;t.r.a=Math.min(Math.max(0,e.antimatter),s.st),t.r.e=Math.min(Math.max(0,e.element115),s.st),t.r.d=Math.min(Math.max(0,e.deuterium),s.st),this.saveData(t)}static addResources(e){const t=this.getData(),s=t.u;t.r.a=Math.round(Math.min(t.r.a+e.antimatter,s.st)),t.r.e=Math.round(Math.min(t.r.e+e.element115,s.st)),t.r.d=Math.round(Math.min(t.r.d+e.deuterium,s.st)),t.s&&(t.s.tr=t.s.tr||{a:0,e:0,d:0},t.s.tr.a+=e.antimatter,t.s.tr.e+=e.element115,t.s.tr.d+=e.deuterium),this.saveData(t)}static consumeResources(e){const t=this.getData(),s={antimatter:Math.floor(e.antimatter/t.u.ef),element115:Math.floor(e.element115/t.u.ef),deuterium:Math.floor(e.deuterium/t.u.ef)};return t.r.a>=s.antimatter&&t.r.e>=s.element115&&t.r.d>=s.deuterium?(t.r.a-=s.antimatter,t.r.e-=s.element115,t.r.d-=s.deuterium,t.s&&(t.s.tt=(t.s.tt||0)+1),this.saveData(t),!0):!1}static getUpgrade(){const e=this.getData();return{level:e.u.l,efficiency:e.u.ef,range:e.u.rn,storage:e.u.st,multiplier:e.u.m}}static upgradeShip(e){const t=this.getData();if(t.u.l>=100)return!1;if(t.r.a>=e.antimatter&&t.r.e>=e.element115&&t.r.d>=e.deuterium){t.r.a-=e.antimatter,t.r.e-=e.element115,t.r.d-=e.deuterium,t.u.l+=1;let r=Math.min(4,1+(t.u.l-1)*.2),o=t.u.l<=25?500+(t.u.l-1)*200:5500+Math.floor(Math.log(t.u.l-25+1)*800);o=Math.min(o,25e3);let n=t.u.l<=20?1e3+(t.u.l-1)*400:1e3+20*400+Math.floor(Math.log(t.u.l-20+1)*1200);n=Math.min(n,5e4);let i=1+(t.u.l-1)*.242;return t.u.ef=Math.min(6,r),t.u.rn=Math.floor(o),t.u.st=Math.floor(n),t.u.m=Math.min(25,i),this.saveData(t),!0}return!1}static getLocationTypeFromId(e){return e.startsWith("planet_")?"planet":e.startsWith("system_")?"system":e.startsWith("galaxy_")?"galaxy":"planet"}static getCooldownForLocation(e){const t=this.getLocationTypeFromId(e);return this.COLLECTION_COOLDOWNS[t]}static canCollectFromLocationType(e,t){t||(t=this.getData());const s=new Date().toDateString();if(t.s&&t.s.lcd!==s&&(t.s.dcp=0,t.s.dcs=0,t.s.dcg=0,t.s.lcd=s,this.saveData(t)),!t.s)return!0;const r=this.DAILY_COLLECTION_LIMITS[e];return r===1/0?!0:(e==="planet"?t.s.dcp||0:e==="system"?t.s.dcs||0:t.s.dcg||0)<r}static canCollectFromLocation(e){const t=this.getData(),s=t.c[e];if(s){const o=Date.now(),n=this.getCooldownForLocation(e);if(o-s<n)return!1}const r=this.getLocationTypeFromId(e);return this.canCollectFromLocationType(r,t)}static getTimeUntilNextCollection(e){const s=this.getData().c[e];if(!s)return 0;const r=Date.now(),n=this.getCooldownForLocation(e)-(r-s);return n>0?n/(1e3*60*60):0}static markLocationCollected(e){const t=this.getData();t.c[e]=Date.now();const s=this.getLocationTypeFromId(e);this.updateDailyCollectionCounters(t,s),this.updateCollectionStreaks(t),this.saveData(t)}static updateDailyCollectionCounters(e,t){const s=new Date().toDateString();e.s||(e.s={tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0,dcp:0,dcs:0,dcg:0,lcd:s}),e.s.lcd!==s&&(e.s.dcp=0,e.s.dcs=0,e.s.dcg=0,e.s.lcd=s),t==="planet"?e.s.dcp=(e.s.dcp||0)+1:t==="system"?e.s.dcs=(e.s.dcs||0)+1:t==="galaxy"&&(e.s.dcg=(e.s.dcg||0)+1)}static updateCollectionStreaks(e){const t=Date.now(),s=new Date(t).toDateString(),r=e.t.lc?new Date(e.t.lc).toDateString():null;if(e.s||(e.s={tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0}),e.s.tc=(e.s.tc||0)+1,s!==r){const o=e.t.lc;if(e.t.lc=t,r&&o){const n=new Date(o),i=new Date(t),c=Math.floor((i.getTime()-n.getTime())/(1e3*60*60*24));c===1?e.s.cs=(e.s.cs||0)+1:c>1&&(e.s.cs=1)}else e.s.cs=1;e.s.dc=1}else e.s.dc=(e.s.dc||0)+1}static getCollectionStreakInfo(){const e=this.getData(),t=e.s?.cs||0,s=e.s?.dc||0;return{currentStreak:t,dailyCollections:s,streakMultiplier:1}}static getCollectionCount(e){const t=this.getData();return Object.keys(t.c).filter(r=>r.startsWith(e.split("_")[0])).length}static shouldProcessPassive(){const e=this.getData(),t=Date.now(),s=e.t.lp||0;return t-s>=this.PASSIVE_INTERVAL}static markPassiveProcessed(){const e=this.getData();e.t.lp=Date.now(),this.saveData(e)}static getStats(){const e=this.getData(),t=e.s?.tr||{a:0,e:0,d:0};return{totalCollections:e.s?.tc||0,totalResourcesCollected:{antimatter:t.a||0,element115:t.e||0,deuterium:t.d||0},totalTravels:e.s?.tt||0}}static migrateFromOldStorage(){try{const e=["atlas_ship_resources","atlas_ship_upgrades","atlas_resource_collections","_atlasSpaceShip_collections","_atlasSpaceShip_lastPassive","atlas_last_resource_generation","atlas_last_passive_generation"];if(M(this.STORAGE_KEY))return;const s=localStorage.getItem("atlas_ship_resources"),r=localStorage.getItem("atlas_ship_upgrades"),o=localStorage.getItem("atlas_resource_collections")||localStorage.getItem("_atlasSpaceShip_collections"),n={...this.DEFAULT_DATA};if(s)try{const i=JSON.parse(s);n.r.a=i.antimatter||150,n.r.e=i.element115||100,n.r.d=i.deuterium||125}catch{}if(r)try{const i=JSON.parse(r);n.u.l=i.level||1,n.u.ef=i.efficiency||1,n.u.rn=i.range||300,n.u.st=i.storage||500,n.u.m=i.multiplier||i.passiveGeneration||1}catch{}if(o)try{const i=JSON.parse(o);Object.keys(i).forEach(c=>{i[c].lastCollected&&(n.c[i[c].id]=i[c].lastCollected)})}catch{}this.saveData(n),e.forEach(i=>{try{localStorage.removeItem(i)}catch{}}),console.log("Successfully migrated to unified spaceship storage")}catch(e){console.error("Error during migration:",e)}}static reset(){F(this.STORAGE_KEY)}static getStorageSize(){return(M(this.STORAGE_KEY)||"{}").length}static compactData(e){return{r:e.r,u:e.u,c:e.c,s:e.s,t:e.t}}static expandData(e){const t=Date.now(),s=1440*60*1e3,r={};return e.c&&Object.keys(e.c).forEach(n=>{const i=e.c[n],c=15778368e5,h=1893456e6;if(i===0){const m=t-s;r[n]=m}else if(i>=c&&i<=h)r[n]=i;else if(i>0&&i<86400*30){const m=t-i*1e3;r[n]=m}else r[n]=t-s}),{r:e.r||{a:300,e:200,d:250},u:e.u||{l:1,ef:1,rn:500,st:1e3,m:1},c:r,t:e.t||{},s:e.s||{tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0,dcp:0,dcs:0,dcg:0,lcd:new Date().toDateString()}}}static cleanCorruptedTimestamps(){const e=this.getData(),t=Date.now(),s=15778368e5,r=1893456e6,o=1440*60*1e3;let n=!1;Object.keys(e.c).forEach(i=>{const c=e.c[i];(c===0||c<s||c>r)&&(e.c[i]=t-o,n=!0)}),n&&this.saveData(e)}static getDailyCollectionInfo(){const e=this.getData(),t=new Date().toDateString();return e.s||(e.s={tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0,dcp:0,dcs:0,dcg:0,lcd:t},this.saveData(e)),e.s.lcd!==t&&(e.s.dcp=0,e.s.dcs=0,e.s.dcg=0,e.s.lcd=t,this.saveData(e)),{planets:{used:e.s.dcp||0,limit:this.DAILY_COLLECTION_LIMITS.planet,unlimited:this.DAILY_COLLECTION_LIMITS.planet===1/0},systems:{used:e.s.dcs||0,limit:this.DAILY_COLLECTION_LIMITS.system,unlimited:this.DAILY_COLLECTION_LIMITS.system===1/0},galaxies:{used:e.s.dcg||0,limit:this.DAILY_COLLECTION_LIMITS.galaxy,unlimited:this.DAILY_COLLECTION_LIMITS.galaxy===1/0}}}}const Y=Object.freeze(Object.defineProperty({__proto__:null,UnifiedSpaceshipStorage:p},Symbol.toStringTag,{value:"Module"})),y=({size:l=24,className:e="",color:t="currentColor"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",className:e,children:[a.jsx("circle",{cx:12,cy:12,r:2.197,fill:t}),a.jsx("path",{fill:t,d:"M21.63441 6.43671c-.70909-1.22723-2.41155-1.73142-4.79628-1.42354c-.30258.03942-.61354.09379-.92927.15769C15.00856 2.619 13.6066 1 12 1C10.39089 1 8.98713 2.62441 8.087 5.1834c-2.7384-.54268-4.90657-.15669-5.72186 1.25331C1.55256 7.84376 2.2947 9.90626 4.12193 12C2.2947 14.09374 1.55256 16.15624 2.3651 17.56329c.58143 1.00732 1.85 1.49542 3.52453 1.49542a11.47535 11.47535 0 0 0 2.197-.24305C8.98673 21.37518 10.39069 23 12 23c1.60658 0 3.00854-1.619 3.90884-4.17086c.31573.0639.62669.11827.92927.15769a10.18235 10.18235 0 0 0 1.297.088c1.70461 0 2.92647-.52028 3.49932-1.51151c.81254-1.407.07053-3.46955-1.75643-5.56329C21.70494 9.90626 22.447 7.84376 21.63441 6.43671ZM16.9851 6.13956a9.0809 9.0809 0 0 1 1.15965-.08046c1.26048 0 2.14979.32826 2.507.94617c.50426.87335-.06645 2.44138-1.55187 4.16777a20.50554 20.50554 0 0 0-2.30139-1.95281a19.9752 19.9752 0 0 0-.5471-2.93612C16.49539 6.23744 16.7503 6.17013 16.9851 6.13956Zm-3.07236 9.17417c-.64647.37332-1.28408.70346-1.90695.9935c-.63936-.29755-1.2812-.62534-1.919-.9935c-.64888-.37459-1.25525-.76326-1.81959-1.15917c-.06229-.6861-.09688-1.405-.09688-2.15456s.03459-1.46846.09688-2.15456c.56434-.39591 1.17071-.78458 1.81959-1.15917c.63487-.36648 1.27383-.69333 1.91024-.98982c.62668.29132 1.26511.61409 1.91573.98982c.64908.37472 1.25572.76346 1.82019 1.15958c.06222.686.09682 1.40477.09682 2.15415s-.0346 1.46813-.09682 2.15415C15.16846 14.55027 14.56182 14.939 13.91274 15.31373Zm1.628.3351a17.87565 17.87565 0 0 1-.39136 1.82408a18.46424 18.46424 0 0 1-1.76012-.58257c.36293-.18713.72713-.38337 1.092-.594C14.8457 16.086 15.1977 15.86928 15.54078 15.64883Zm-4.92407 1.24372A18.41329 18.41329 0 0 1 8.851 17.474a17.86018 17.86018 0 0 1-.39176-1.82549c.34328.22058.69541.43734 1.06.64787C9.88355 16.50677 10.24989 16.70348 10.61671 16.89255ZM7.07428 13.25036A18.3863 18.3863 0 0 1 5.67548 12a18.38878 18.38878 0 0 1 1.3988-1.25043c-.02005.41033-.03252.82636-.03252 1.25043S7.05423 12.8401 7.07428 13.25036Zm1.385-4.89886a17.86727 17.86727 0 0 1 .391-1.82227a18.22228 18.22228 0 0 1 1.76937.57681c-.36775.18947-.735.38659-1.10031.59759C9.15468 7.91416 8.80255 8.13092 8.45927 8.3515Zm4.93057-1.242a18.48842 18.48842 0 0 1 1.75958-.58237a17.87565 17.87565 0 0 1 .39136 1.82408c-.34308-.22045-.69508-.43715-1.05948-.64754C14.11663 7.4931 13.75263 7.29652 13.38984 7.10946ZM16.92577 10.75A18.40125 18.40125 0 0 1 18.324 12a18.38809 18.38809 0 0 1-1.39826 1.25c.02-.41013.03251-.826.03251-1.25S16.94581 11.1601 16.92577 10.75ZM12 2.12854c.99773 0 2.05613 1.23433 2.80746 3.31044a20.80159 20.80159 0 0 0-2.8094 1.01141A20.51935 20.51935 0 0 0 9.19055 5.44481C9.94208 3.36508 11.00163 2.12854 12 2.12854ZM3.34774 7.00527c.35133-.60825 1.2519-.93437 2.52043-.93437a10.26212 10.26212 0 0 1 1.88362.20148A19.96778 19.96778 0 0 0 7.20147 9.2205a20.48874 20.48874 0 0 0-2.30166 1.95288C3.41412 9.44692 2.84341 7.87869 3.34774 7.00527Zm0 9.98946c-.50433-.87342.06638-2.44165 1.55207-4.16811A20.50145 20.50145 0 0 0 7.20147 14.7795a19.94422 19.94422 0 0 0 .5518 2.95356C5.50578 18.162 3.85468 17.87245 3.34774 16.99473ZM12 21.87146c-.99866 0-2.05847-1.23708-2.81007-3.31775a20.44828 20.44828 0 0 0 2.81155-1.00255a20.80209 20.80209 0 0 0 2.806 1.00979C14.05615 20.63706 12.99775 21.87146 12 21.87146Zm8.65175-4.87673c-.45914.79277-1.79257 1.10923-3.66667.86571c-.2348-.03057-.48971-.09788-.73369-.14455a19.97619 19.97619 0 0 0 .5471-2.93619A20.50419 20.50419 0 0 0 19.0999 12.827C20.58532 14.55335 21.156 16.12138 20.65177 16.99473Z"}),a.jsx("circle",{cx:-.5,cy:2,r:1.5,fill:t,children:a.jsx("animateMotion",{dur:"2s",path:"M14.75 14.1471C12.2277 15.6034 9.69019 16.4332 7.6407 16.6145C5.54599 16.7998 4.15833 16.3018 3.62324 15.375C3.08815 14.4482 3.35067 12.9974 4.55852 11.276C5.74031 9.59178 7.72768 7.80915 10.25 6.35289C12.7723 4.89662 15.3098 4.06682 17.3593 3.88549C19.454 3.70016 20.8417 4.1982 21.3768 5.125C21.9118 6.0518 21.6493 7.50256 20.4415 9.22397C19.2597 10.9082 17.2723 12.6909 14.75 14.1471Z",repeatCount:"indefinite"})})]}),S=({size:l=24,className:e="",color:t="currentColor"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",className:e,children:[a.jsx("path",{fill:t,fillOpacity:0,d:"M12 3l2.35 5.76l6.21 0.46l-4.76 4.02l1.49 6.04l-5.29 -3.28l-5.29 3.28l1.49 -6.04l-4.76 -4.02l6.21 -0.46Z",children:a.jsx("animate",{fill:"freeze",attributeName:"fill-opacity",begin:"0.5s",dur:"0.5s",values:"0;1"})}),a.jsxs("path",{fill:"none",stroke:t,strokeDasharray:36,strokeDashoffset:36,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M12 3L9.65 8.76L3.44 9.22L8.2 13.24L6.71 19.28L12 16M12 3L14.35 8.76L20.56 9.22L15.8 13.24L17.29 19.28L12 16",children:[a.jsx("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.5s",values:"36;0"}),a.jsx("animate",{attributeName:"d",dur:"1.5s",repeatCount:"indefinite",values:"M12 3L9.65 8.76L3.44 9.22L8.2 13.24L6.71 19.28L12 16M12 3L14.35 8.76L20.56 9.22L15.8 13.24L17.29 19.28L12 16;M12 7L10.82 10.38L7.24 10.45L10.1 12.62L9.06 16.05L12 14M12 7L13.18 10.38L16.76 10.45L13.9 12.62L14.94 16.05L12 14;M12 3L9.65 8.76L3.44 9.22L8.2 13.24L6.71 19.28L12 16M12 3L14.35 8.76L20.56 9.22L15.8 13.24L17.29 19.28L12 16"})]})]}),N=({size:l=24,className:e="",color:t="currentColor"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",className:e,children:a.jsxs("g",{fill:"none",stroke:t,strokeLinecap:"round",strokeWidth:1.3,children:[a.jsxs("path",{fill:t,fillOpacity:0,strokeDasharray:28,strokeDashoffset:28,d:"M12 10l4 7h-8Z",children:[a.jsx("animate",{fill:"freeze",attributeName:"fill-opacity",begin:"0.7s",dur:"0.5s",values:"0;1"}),a.jsx("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.4s",values:"28;0"})]}),a.jsxs("path",{d:"M12 10l4 7h-8Z",opacity:0,children:[a.jsx("animate",{attributeName:"d",begin:"0.4s",dur:"0.8s",keyTimes:"0;0.25;1",repeatCount:"indefinite",values:"M12 10l4 7h-8Z;M12 4l9.25 16h-18.5Z;M12 4l9.25 16h-18.5Z"}),a.jsx("animate",{attributeName:"opacity",begin:"0.4s",dur:"0.8s",keyTimes:"0;0.1;0.75;1",repeatCount:"indefinite",values:"0;1;1;0"})]})]})});class T{static initialize(){p.migrateFromOldStorage()}static getResources(){return p.getResources()}static getUpgrade(){return p.getUpgrade()}static addResources(e){p.addResources({antimatter:e.antimatter||0,element115:e.element115||0,deuterium:e.deuterium||0})}static consumeResources(e){return p.consumeResources(e)}static calculateTravelCost(e,t=0){const r={galaxy:{antimatter:25,element115:20,deuterium:15},system:{antimatter:8,element115:6,deuterium:10},planet:{antimatter:2,element115:1,deuterium:3}}[e],o=Math.max(1,t/100);return{antimatter:Math.floor(r.antimatter*o),element115:Math.floor(r.element115*o),deuterium:Math.floor(r.deuterium*o)}}static canAffordTravel(e,t=0){const s=this.calculateTravelCost(e,t),r=this.getResources(),o=this.getUpgrade(),n={antimatter:Math.floor(s.antimatter/o.efficiency),element115:Math.floor(s.element115/o.efficiency),deuterium:Math.floor(s.deuterium/o.efficiency)};return r.antimatter>=n.antimatter&&r.element115>=n.element115&&r.deuterium>=n.deuterium&&t<=o.range}static getUpgradeCost(e){let t;e<=20?t=1e3+(e-1)*400:t=1e3+20*400+Math.floor(Math.log(e-20+1)*1200);const r=Math.floor(t*.4/1.3),o=1+(e-1)*.01,n=Math.floor(r*o);return{antimatter:n,element115:Math.floor(n*1.3),deuterium:Math.floor(n*.9)}}static canAffordUpgrade(){const e=this.getUpgrade();if(e.level>=100)return!1;const s=this.getUpgradeCost(e.level),r=this.getResources();return r.antimatter>=s.antimatter&&r.element115>=s.element115&&r.deuterium>=s.deuterium}static upgradeShip(){const e=this.getUpgrade(),t=this.getUpgradeCost(e.level);return p.upgradeShip(t)}static calculatePassiveGeneration(){const e=this.getUpgrade(),t=JSON.parse(M("_atlasLocations")||"[]"),s=Array.isArray(t)?t:t.locations||[];let r={antimatter:0,element115:0,deuterium:0},o={planets:0,systems:0,galaxies:0};return s.forEach(n=>{n.type==="planet"?(o.planets++,r.antimatter+=.07,r.element115+=.05,r.deuterium+=.08):n.type==="system"&&(o.systems++,r.antimatter+=.02,r.element115+=.02,r.deuterium+=.02)}),r.antimatter=r.antimatter*e.multiplier,r.element115=r.element115*e.multiplier,r.deuterium=r.deuterium*e.multiplier,{...r,sources:o}}static processPassiveGeneration(){if(p.shouldProcessPassive()){const e=this.calculatePassiveGeneration();(e.antimatter>0||e.element115>0||e.deuterium>0)&&(this.addResources({antimatter:Math.round(e.antimatter),element115:Math.round(e.element115),deuterium:Math.round(e.deuterium)}),this.showPassiveGenerationNotification(e)),p.markPassiveProcessed()}}static getAccumulatedResourcesWithLimit(){const e=this.calculatePassiveGeneration(),t=this.getUpgrade(),s=this.getUpgradeCost(t.level),r={antimatter:s.antimatter*5,element115:s.element115*5,deuterium:s.deuterium*5},n=p.getData().t.lp,i=Date.now();if(!n||n===0||e.sources.planets===0&&e.sources.systems===0)return e;const c=Math.floor((i-n)/(60*1e3));return c<1?{antimatter:0,element115:0,deuterium:0,sources:e.sources}:c>=1?{antimatter:Math.min(e.antimatter*c,r.antimatter*2),element115:Math.min(e.element115*c,r.element115*2),deuterium:Math.min(e.deuterium*c,r.deuterium*2),sources:e.sources}:{antimatter:Math.min(e.antimatter*c,r.antimatter*2),element115:Math.min(e.element115*c,r.element115*2),deuterium:Math.min(e.deuterium*c,r.deuterium*2),sources:e.sources}}static showPassiveGenerationNotification(e){if(e.antimatter+e.element115+e.deuterium===0)return;const t=document.createElement("div");t.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-purple-900/90 to-blue-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-purple-500/50 w-[90vw] max-w-lg",t.className+=" animate-slideInDown";const s=document.createElement("div");s.className="flex items-center space-x-3";const r=document.createElement("span");r.className="text-2xl",r.textContent="⛏️";const o=document.createElement("div"),n=document.createElement("div");n.className="text-sm font-bold text-purple-300",n.textContent="Mining Operations Complete!";const i=document.createElement("div");i.className="text-xs text-purple-200 mt-1 flex gap-3";const c=document.createElement("span");c.className="text-purple-300 flex items-center gap-1",D.createRoot(c).render(a.jsxs(a.Fragment,{children:[a.jsx(y,{size:12,color:"currentColor"}),"+",Math.round(e.antimatter)," AM"]}));const m=document.createElement("span");m.className="text-cyan-300 flex items-center gap-1",D.createRoot(m).render(a.jsxs(a.Fragment,{children:[a.jsx(N,{size:12,color:"currentColor"}),"+",Math.round(e.element115)," E115"]}));const g=document.createElement("span");g.className="text-orange-300 flex items-center gap-1",D.createRoot(g).render(a.jsxs(a.Fragment,{children:[a.jsx(S,{size:12,color:"currentColor"}),"+",Math.round(e.deuterium)," D"]})),i.appendChild(c),i.appendChild(m),i.appendChild(g);const f=document.createElement("div");f.className="text-xs text-purple-300 mt-1",f.textContent=`Collected from ${e.sources.planets}🪐 ${e.sources.systems}⭐`,o.appendChild(n),o.appendChild(i),o.appendChild(f),s.appendChild(r),s.appendChild(o),t.appendChild(s),document.body.appendChild(t),setTimeout(()=>{t.className=t.className.replace("animate-slideInDown","animate-slideOutUp"),setTimeout(()=>{t.remove()},300)},3e3)}static reset(){p.reset()}static getResourcesPercentage(){const e=this.getResources(),t=this.getUpgrade();return{antimatter:e.antimatter/t.storage*100,element115:e.element115/t.storage*100,deuterium:e.deuterium/t.storage*100}}static getPassiveGenerationInfo(){const e=this.calculatePassiveGeneration(),t=p.shouldProcessPassive()?0:(60*1e3-(Date.now()-(p.getData().t.lp||0)))/1e3;return{generation:e,perHour:{antimatter:e.antimatter*60,element115:e.element115*60,deuterium:e.deuterium*60},nextGenerationIn:Math.max(0,t)}}static getExchangeRates(){const e=this.getResources();return{antimatter:[{from:"antimatter",to:"element115",rate:1.2,available:e.antimatter},{from:"antimatter",to:"deuterium",rate:.8,available:e.antimatter}],element115:[{from:"element115",to:"antimatter",rate:.9,available:e.element115},{from:"element115",to:"deuterium",rate:1.1,available:e.element115}],deuterium:[{from:"deuterium",to:"antimatter",rate:1.3,available:e.deuterium},{from:"deuterium",to:"element115",rate:.95,available:e.deuterium}]}}static exchangeResources(e,t,s){const r=this.getResources(),i=this.getExchangeRates()[e].find(v=>v.to===t);if(!i||s<=0||r[e]<s)return!1;const c=Math.floor(s*i.rate),h=this.getUpgrade();if(r[t]+c>h.storage)return!1;const m={...r};return m[e]-=s,m[t]+=c,p.setResources(m),this.showExchangeNotification(e,t,s,c),!0}static showExchangeNotification(e,t,s,r){const o=document.createElement("div");o.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-amber-900/90 to-orange-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-amber-500/50",o.className+=" animate-slideInDown";const n={antimatter:{name:"AM",color:"text-purple-300"},element115:{name:"E115",color:"text-cyan-300"},deuterium:{name:"D",color:"text-orange-300"}},i=n[e],c=n[t],h=document.createElement("div");h.className="flex items-center space-x-3";const m=document.createElement("span");m.className="text-2xl",m.textContent="🔄";const v=document.createElement("div"),g=document.createElement("div");g.className="text-sm font-bold text-amber-300",g.textContent="Resource Exchange";const u=document.createElement("div");u.className="text-xs text-amber-200 mt-1";const f=document.createElement("span");f.className=`${i.color} flex items-center gap-1`;const d=document.createElement("span");d.className=`${c.color} flex items-center gap-1`;const x=document.createElement("span");x.className="text-amber-300 mx-2",x.textContent="→";const C=D.createRoot(f),b=e==="antimatter"?a.jsx(y,{size:10,color:"currentColor"}):e==="element115"?a.jsx(N,{size:10,color:"currentColor"}):a.jsx(S,{size:10,color:"currentColor"}),w=D.createRoot(d),R=t==="antimatter"?a.jsx(y,{size:10,color:"currentColor"}):t==="element115"?a.jsx(N,{size:10,color:"currentColor"}):a.jsx(S,{size:10,color:"currentColor"});C.render(a.jsxs(a.Fragment,{children:[b,"-",s," ",i.name]})),w.render(a.jsxs(a.Fragment,{children:[R,"+",r," ",c.name]})),u.appendChild(f),u.appendChild(x),u.appendChild(d),v.appendChild(g),v.appendChild(u),h.appendChild(m),h.appendChild(v),o.appendChild(h),document.body.appendChild(o),setTimeout(()=>{o.className=o.className.replace("animate-slideInDown","animate-slideOutUp"),setTimeout(()=>{o.remove()},300)},3e3)}}class P{static listeners=new Map;static subscribe(e,t){return this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t),()=>{const s=this.listeners.get(e);if(s){const r=s.indexOf(t);r>-1&&s.splice(r,1)}}}static emit(e,t){const s=this.listeners.get(e);s&&s.forEach(r=>{try{r(t)}catch(o){console.warn("Error in resource event callback:",o)}})}static clear(){this.listeners.clear()}}const V=()=>{const[l,e]=L.useState({antimatter:0,element115:0,deuterium:0}),[t,s]=L.useState(500),[r,o]=L.useState(!1),[n,i]=L.useState(null),[c,h]=L.useState(!1);L.useEffect(()=>{const d=()=>{const b=T.getResources();e(b),s(T.getUpgrade().storage)};d();const x=setInterval(d,5e3),C=P.subscribe("resources_updated",d);return()=>{clearInterval(x),C()}},[]);const m=d=>d>=1e6?`${(d/1e6).toFixed(2)}M`:d>=1e3?`${(d/1e3).toFixed(1)}k`:d.toFixed(0),v=d=>Math.min(d/t*100,100),g=[{name:"ANTIMATTER",value:l.antimatter,color:"purple",glow:"rgba(168, 85, 247, 0.5)",icon:a.jsx(y,{size:20,color:"#ffffff"}),gradient:"from-purple-600 via-purple-500 to-fuchsia-500"},{name:"ELEMENT 115",value:l.element115,color:"cyan",glow:"rgba(34, 211, 238, 0.5)",icon:a.jsx(N,{size:20,color:"#ffffff"}),gradient:"from-cyan-500 via-cyan-400 to-blue-400"},{name:"DEUTERIUM",value:l.deuterium,color:"orange",glow:"rgba(251, 146, 60, 0.5)",icon:a.jsx(S,{size:20,color:"#ffffff"}),gradient:"from-orange-500 via-amber-500 to-yellow-500"}],u=r||c,f=()=>{h(!c),i(null)};return a.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[a.jsxs("div",{className:`relative w-full transition-all duration-500 ease-out ${u?"h-14 sm:h-20":"h-1 sm:h-1.5"}`,onMouseEnter:()=>o(!0),onMouseLeave:()=>{o(!1),i(null)},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-transparent backdrop-blur-xl"}),a.jsx("div",{className:"relative h-full flex gap-px",children:g.map(d=>{const x=v(d.value),C=n===d.name,b=x<20,w=x>90;return a.jsxs("div",{className:"flex-1 relative overflow-hidden group",onMouseEnter:()=>i(d.name),onMouseLeave:()=>i(null),children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/50 to-gray-800/50"}),a.jsx("div",{className:`absolute left-0 h-full bg-gradient-to-r ${d.gradient} 
                    transition-all duration-700 ease-out ${C?"brightness-125 saturate-150":""} ${b?"animate-pulse":""}`,style:{width:`${x}%`,boxShadow:`0 0 20px ${d.glow}`},children:a.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent 
                    animate-shimmer`,style:{backgroundSize:"200% 100%",animation:"shimmer 3s infinite"}})}),b&&a.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-pulse pointer-events-none"}),w&&a.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-white/20 to-transparent animate-pulse"}),u&&a.jsxs("div",{className:`absolute inset-0 transition-opacity duration-300 ${u?"opacity-100":"opacity-0"}`,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 via-black/50 to-black/60"}),a.jsxs("div",{className:"sm:hidden absolute inset-0 flex flex-col justify-center px-2 z-10",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("div",{className:"text-base",style:{filter:`drop-shadow(0 0 8px ${d.glow})`},children:d.icon}),a.jsx("span",{className:"text-[10px] font-bold tracking-wider text-white/90 uppercase drop-shadow-lg",children:d.name})]}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-xs font-bold text-white font-mono drop-shadow-lg",children:m(d.value)}),a.jsxs("span",{className:"text-[9px] text-white/70 drop-shadow-lg",children:["/ ",m(t)]})]}),b&&a.jsx("div",{className:"absolute bottom-1 right-2",children:a.jsx("span",{className:"text-[8px] text-red-400 uppercase tracking-wider animate-pulse font-bold drop-shadow-lg",children:"LOW"})}),w&&a.jsx("div",{className:"absolute bottom-1 right-2",children:a.jsx("span",{className:"text-[8px] text-green-400 uppercase tracking-wider font-bold drop-shadow-lg",children:"FULL"})})]}),a.jsxs("div",{className:"hidden sm:flex absolute inset-0 items-center justify-between px-4 z-10",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`text-2xl ${C?"animate-spin-slow":""}`,style:{filter:`drop-shadow(0 0 12px ${d.glow})`},children:d.icon}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] font-bold tracking-wider text-white/90 uppercase drop-shadow-lg",children:d.name}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-base font-bold text-white font-mono drop-shadow-lg",children:m(d.value)}),a.jsxs("span",{className:"text-xs text-white/80 drop-shadow-lg",children:["/ ",m(t)]})]})]})]}),(b||w)&&a.jsxs("div",{className:`text-right transition-all duration-300 ${C?"scale-110":""}`,children:[b&&a.jsx("div",{className:"text-[11px] text-red-400 uppercase tracking-wider animate-pulse font-bold",children:"LOW"}),w&&a.jsx("div",{className:"text-[11px] text-green-400 uppercase tracking-wider font-bold",children:"FULL"})]})]})]}),C&&u&&a.jsx("div",{className:"absolute inset-0 pointer-events-none"})]},d.name)})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),a.jsx("div",{className:"sm:hidden absolute top-full right-2 z-40",children:a.jsxs("div",{onClick:f,className:`bg-gradient-to-b from-black/40 via-black/50 to-black/60 backdrop-blur-md 
            border-l border-r border-b border-white/10 w-6 h-6 cursor-pointer 
            transition-all duration-300 hover:bg-black/70 active:bg-black/80
            flex items-center justify-center relative overflow-hidden
            shadow-lg shadow-black/30 ${u?"opacity-100":"opacity-70"}`,style:{borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px"},children:[a.jsx("div",{className:`absolute inset-0 transition-opacity duration-300 ${u?"bg-gradient-to-r from-blue-500/10 to-transparent":"bg-gradient-to-r from-blue-500/5 to-transparent"}`}),a.jsx("div",{className:"text-white/90 relative z-10",children:a.jsx("div",{className:`text-sm font-bold transition-all duration-300 transform ${u?"rotate-180 scale-110":"rotate-0 scale-100"}`,children:u?"−":"+"})})]})})]})};export{y as A,S as D,N as E,V as F,Z as H,P as R,T as S,p as U,k as a,Y as b,M as g,G as m,F as r,A as s};
