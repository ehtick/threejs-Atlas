import{d as ue,e as ge,r as L,j as s,R as v,f as pe}from"./atlas_Cr0Zug9V7R-1A_zuxWx5F.js";var ve=ue();const fe=ge(ve);class N{static STORAGE_KEY="_atlasLocations";static MAX_LOCATIONS=50;static getLocations(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Error reading saved locations:",e),[]}}static saveLocation(e){try{const t=this.getLocations(),n=t.findIndex(r=>r.stargateUrl===e.stargateUrl),i={...e,id:this.generateId(),timestamp:Date.now()};n!==-1?(t[n]=i,console.log("📍 Updated saved location:",e.name)):(t.push(i),console.log("📍 Saved new location:",e.name)),t.length>this.MAX_LOCATIONS&&(t.sort((r,c)=>c.timestamp-r.timestamp),t.splice(this.MAX_LOCATIONS)),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(t){console.error("Error saving location:",t)}}static removeLocation(e){try{const n=this.getLocations().filter(i=>i.id!==e);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n)),console.log("🗑️ Removed saved location")}catch(t){console.error("Error removing location:",t)}}static clearAllLocations(){try{localStorage.removeItem(this.STORAGE_KEY),console.log("🗑️ Cleared all saved locations")}catch(e){console.error("Error clearing locations:",e)}}static generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static getLocationStats(){const e=this.getLocations();return{total:e.length,galaxies:e.filter(t=>t.type==="galaxy").length,systems:e.filter(t=>t.type==="system").length,planets:e.filter(t=>t.type==="planet").length}}}class O{static encodeUrl(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_")}static generateGalaxyUrl(e,t=1){const n=`coordinates=${e[0]},${e[1]},${e[2]}&page=${t}`,i=this.encodeUrl(n);return`${window.location.origin}/stargate/${i}`}static generateSystemUrl(e,t,n=1){const i=`coordinates=${e[0]},${e[1]},${e[2]}&system=${t}&page=${n}`,r=this.encodeUrl(i);return`${window.location.origin}/stargate/${r}`}static generatePlanetUrl(e,t,n,i=1){const r=`coordinates=${e[0]},${e[1]},${e[2]}&system=${t}&planet=${n.toLowerCase()}&page=${i}`,c=this.encodeUrl(r);return`${window.location.origin}/stargate/${c}`}static getCurrentPage(){try{const t=new URLSearchParams(window.location.search).get("page");return t?parseInt(t,10):1}catch{return 1}}}const Oe=({type:o,name:e,coordinates:t,systemIndex:n,planetName:i,className:r=""})=>{const[c,m]=L.useState(!1),[l,a]=L.useState(!1),p=()=>{try{const h=t.split(",").map(Number),f=O.getCurrentPage();switch(o){case"galaxy":return O.generateGalaxyUrl(h,f);case"system":if(n!==void 0)return O.generateSystemUrl(h,n,f);break;case"planet":if(n!==void 0&&i)return O.generatePlanetUrl(h,n,i,f);break}return window.location.pathname}catch(h){return console.error("Error generating stargate URL:",h),window.location.pathname}};L.useEffect(()=>{const h=N.getLocations(),f=p(),d=h.some(g=>g.stargateUrl===f);m(d)},[t,n,i,o]);const w=async()=>{a(!0);try{const h=p();N.saveLocation({name:e,type:o,coordinates:t,systemIndex:n,planetName:i?.toLowerCase(),stargateUrl:h}),m(!0),setTimeout(()=>{a(!1)},300)}catch(h){console.error("Error saving location:",h),a(!1)}},u=h=>h.replace(/_/g," ");return s.jsx(s.Fragment,{children:s.jsx("button",{onClick:w,disabled:c||l,className:`inline-flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 text-sm font-medium ${c?"bg-green-500/20 border border-green-500/50 text-green-400 cursor-default":l?"bg-blue-500/20 border border-blue-500/50 text-blue-400 cursor-wait":"bg-white/10 hover:bg-white/20 border border-white/20 hover:border-white/40 text-white hover:text-blue-300"} ${r}`,title:c?"Location saved":`Save ${u(e)} to bookmarks`,children:l?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"Saving..."})]}):c?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),s.jsx("span",{children:"Saved"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{children:"Save Location"})]})})})};function we(){return v.createElement("svg",{"aria-hidden":"true","data-rmiz-btn-unzoom-icon":!0,fill:"currentColor",focusable:"false",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{d:"M 14.144531 1.148438 L 9 6.292969 L 9 3 L 8 3 L 8 8 L 13 8 L 13 7 L 9.707031 7 L 14.855469 1.851563 Z M 8 8 L 3 8 L 3 9 L 6.292969 9 L 1.148438 14.144531 L 1.851563 14.855469 L 7 9.707031 L 7 13 L 8 13 Z"}))}function xe(){return v.createElement("svg",{"aria-hidden":"true","data-rmiz-btn-zoom-icon":!0,fill:"currentColor",focusable:"false",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},v.createElement("path",{d:"M 9 1 L 9 2 L 12.292969 2 L 2 12.292969 L 2 9 L 1 9 L 1 14 L 6 14 L 6 13 L 2.707031 13 L 13 2.707031 L 13 6 L 14 6 L 14 1 Z"}))}const U=(o,e)=>o===e?.tagName?.toUpperCase?.(),$=o=>U("DIV",o)||U("SPAN",o),T=o=>U("IMG",o),V=o=>o.complete&&o.naturalHeight!==0,A=o=>U("SVG",o),Q=({height:o,offset:e,width:t})=>Math.min((window.innerWidth-e*2)/t,(window.innerHeight-e*2)/o),be=({containerHeight:o,containerWidth:e,offset:t,targetHeight:n,targetWidth:i})=>{const r=Q({height:n,offset:t,width:i}),c=i>n?i/e:n/o;return r>1?c:r*c},I=({containerHeight:o,containerWidth:e,hasScalableSrc:t,offset:n,targetHeight:i,targetWidth:r})=>!o||!e?1:!t&&i&&r?be({containerHeight:o,containerWidth:e,offset:n,targetHeight:i,targetWidth:r}):Q({height:o,offset:n,width:e}),Le=/url(?:\(['"]?)(.*?)(?:['"]?\))/,q=o=>{if(o){if(T(o))return o.currentSrc;if($(o)){const e=window.getComputedStyle(o).backgroundImage;if(e)return Le.exec(e)?.[1]}}},Se=o=>{if(o)return T(o)?o.alt??void 0:o.getAttribute("aria-label")??void 0},ye=({containerHeight:o,containerLeft:e,containerTop:t,containerWidth:n,hasScalableSrc:i,offset:r,targetHeight:c,targetWidth:m})=>{const l=I({containerHeight:o,containerWidth:n,hasScalableSrc:i,offset:r,targetHeight:c,targetWidth:m});return{top:t,left:e,width:n*l,height:o*l,transform:`translate(0,0) scale(${1/l})`}},b=({position:o,relativeNum:e})=>{const t=parseFloat(o);return o.endsWith("%")?e*t/100:t},Ee=({containerHeight:o,containerLeft:e,containerTop:t,containerWidth:n,hasScalableSrc:i,objectFit:r,objectPosition:c,offset:m,targetHeight:l,targetWidth:a})=>{if(r==="scale-down"&&(a<=n&&l<=o?r="none":r="contain"),r==="cover"||r==="contain"){const p=n/a,w=o/l,u=r==="cover"?Math.max(p,w):Math.min(p,w),[h="50%",f="50%"]=c.split(" "),d=b({position:h,relativeNum:n-a*u}),g=b({position:f,relativeNum:o-l*u}),x=I({containerHeight:l*u,containerWidth:a*u,hasScalableSrc:i,offset:m,targetHeight:l,targetWidth:a});return{top:t+g,left:e+d,width:a*u*x,height:l*u*x,transform:`translate(0,0) scale(${1/x})`}}else if(r==="none"){const[p="50%",w="50%"]=c.split(" "),u=b({position:p,relativeNum:n-a}),h=b({position:w,relativeNum:o-l}),f=I({containerHeight:l,containerWidth:a,hasScalableSrc:i,offset:m,targetHeight:l,targetWidth:a});return{top:t+h,left:e+u,width:a*f,height:l*f,transform:`translate(0,0) scale(${1/f})`}}else if(r==="fill"){const p=n/a,w=o/l,u=Math.max(p,w),h=I({containerHeight:l*u,containerWidth:a*u,hasScalableSrc:i,offset:m,targetHeight:l,targetWidth:a});return{width:n*h,height:o*h,transform:`translate(0,0) scale(${1/h})`}}else return{}},Ne=({backgroundPosition:o,backgroundSize:e,containerHeight:t,containerLeft:n,containerTop:i,containerWidth:r,hasScalableSrc:c,offset:m,targetHeight:l,targetWidth:a})=>{if(e==="cover"||e==="contain"){const p=r/a,w=t/l,u=e==="cover"?Math.max(p,w):Math.min(p,w),[h="50%",f="50%"]=o.split(" "),d=b({position:h,relativeNum:r-a*u}),g=b({position:f,relativeNum:t-l*u}),x=I({containerHeight:l*u,containerWidth:a*u,hasScalableSrc:c,offset:m,targetHeight:l,targetWidth:a});return{top:i+g,left:n+d,width:a*u*x,height:l*u*x,transform:`translate(0,0) scale(${1/x})`}}else if(e==="auto"){const[p="50%",w="50%"]=o.split(" "),u=b({position:p,relativeNum:r-a}),h=b({position:w,relativeNum:t-l}),f=I({containerHeight:l,containerWidth:a,hasScalableSrc:c,offset:m,targetHeight:l,targetWidth:a});return{top:i+h,left:n+u,width:a*f,height:l*f,transform:`translate(0,0) scale(${1/f})`}}else{const[p="50%",w="50%"]=e.split(" "),u=b({position:p,relativeNum:r}),h=b({position:w,relativeNum:t}),f=u/a,d=h/l,g=Math.min(f,d),[x="50%",S="50%"]=o.split(" "),j=b({position:x,relativeNum:r-a*g}),C=b({position:S,relativeNum:t-l*g}),y=I({containerHeight:l*g,containerWidth:a*g,hasScalableSrc:c,offset:m,targetHeight:l,targetWidth:a});return{top:i+C,left:n+j,width:a*g*y,height:l*g*y,transform:`translate(0,0) scale(${1/y})`}}},Ie=/\.svg$/i,je=({hasZoomImg:o,imgSrc:e,isSvg:t,isZoomed:n,loadedImgEl:i,offset:r,shouldRefresh:c,targetEl:m})=>{const l=t||e?.slice?.(0,18)==="data:image/svg+xml"||o||!!(e&&Ie.test(e)),a=m.getBoundingClientRect(),p=window.getComputedStyle(m),w=i!=null&&$(m),u=i!=null&&!w,h=ye({containerHeight:a.height,containerLeft:a.left,containerTop:a.top,containerWidth:a.width,hasScalableSrc:l,offset:r,targetHeight:i?.naturalHeight||a.height,targetWidth:i?.naturalWidth||a.width}),f=u?Ee({containerHeight:a.height,containerLeft:a.left,containerTop:a.top,containerWidth:a.width,hasScalableSrc:l,objectFit:p.objectFit,objectPosition:p.objectPosition,offset:r,targetHeight:i?.naturalHeight||a.height,targetWidth:i?.naturalWidth||a.width}):void 0,d=w?Ne({backgroundPosition:p.backgroundPosition,backgroundSize:p.backgroundSize,containerHeight:a.height,containerLeft:a.left,containerTop:a.top,containerWidth:a.width,hasScalableSrc:l,offset:r,targetHeight:i?.naturalHeight||a.height,targetWidth:i?.naturalWidth||a.width}):void 0,g=Object.assign({},h,f,d);if(n){const x=window.innerWidth/2,S=window.innerHeight/2,j=parseFloat(String(g.left||0))+parseFloat(String(g.width||0))/2,C=parseFloat(String(g.top||0))+parseFloat(String(g.height||0))/2,y=x-j,D=S-C;c&&(g.transitionDuration="0.01ms"),g.transform=`translate(${y}px,${D}px) scale(1)`}return g},R=o=>{if(!o)return{};if(A(o)){const e=o.parentElement,t=o.getBoundingClientRect();if(e){const n=e.getBoundingClientRect();return{height:t.height,left:n.left-t.left,top:n.top-t.top,width:t.width}}else return{height:t.height,left:t.left,width:t.width,top:t.top}}else return{height:o.offsetHeight,left:o.offsetLeft,width:o.offsetWidth,top:o.offsetTop}},Ce=o=>{const e="-zoom",t=["clip-path","fill","mask","marker-start","marker-mid","marker-end"],n=new Map;if(o.hasAttribute("id")){const i=o.id,r=i+e;n.set(i,r),o.id=r}o.querySelectorAll("[id]").forEach(i=>{const r=i.id,c=r+e;n.set(r,c),i.id=c}),n.forEach((i,r)=>{const c=`url(#${r})`,m=`url(#${i})`,l=t.map(a=>`[${a}="${c}"]`).join(", ");o.querySelectorAll(l).forEach(a=>{t.forEach(p=>{a.getAttribute(p)===c&&a.setAttribute(p,m)})})}),o.querySelectorAll("style").forEach(i=>{n.forEach((r,c)=>{i.textContent&&(i.textContent=i.textContent.replaceAll(`#${c}`,`#${r}`))})})},ze=["img","svg",'[role="img"]',"[data-zoom]"].map(o=>`${o}:not([aria-hidden="true"])`).join(","),J={overflow:"",width:""};function De(o){return v.createElement(W,{...o})}class W extends v.Component{constructor(){super(...arguments),this.state={id:"",isZoomImgLoaded:!1,loadedImgEl:void 0,modalState:"UNLOADED",shouldRefresh:!1,styleGhost:{}},this.refContent=v.createRef(),this.refDialog=v.createRef(),this.refModalContent=v.createRef(),this.refModalImg=v.createRef(),this.refWrap=v.createRef(),this.imgEl=null,this.isScaling=!1,this.prevBodyAttrs=J,this.styleModalImg={},this.handleModalStateChange=e=>{const{modalState:t}=this.state;e!=="LOADING"&&t==="LOADING"?(this.loadZoomImg(),window.addEventListener("resize",this.handleResize,{passive:!0}),window.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),window.addEventListener("touchmove",this.handleTouchMove,{passive:!0}),window.addEventListener("touchend",this.handleTouchEnd,{passive:!0}),window.addEventListener("touchcancel",this.handleTouchCancel,{passive:!0}),document.addEventListener("keydown",this.handleKeyDown,!0)):e!=="LOADED"&&t==="LOADED"?window.addEventListener("wheel",this.handleWheel,{passive:!0}):e!=="UNLOADING"&&t==="UNLOADING"?(this.ensureImgTransitionEnd(),window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchcancel",this.handleTouchCancel),document.removeEventListener("keydown",this.handleKeyDown,!0)):e!=="UNLOADED"&&t==="UNLOADED"&&(this.bodyScrollEnable(),window.removeEventListener("resize",this.handleResize),this.refModalImg.current?.removeEventListener?.("transitionend",this.handleImgTransitionEnd),this.refDialog.current?.close?.())},this.getDialogContainer=()=>{let e=document.querySelector("[data-rmiz-portal]");return e==null&&(e=document.createElement("div"),e.setAttribute("data-rmiz-portal",""),document.body.appendChild(e)),e},this.setId=()=>{const e=()=>Math.random().toString(16).slice(-4);this.setState({id:e()+e()+e()})},this.setAndTrackImg=()=>{const e=this.refContent.current;e&&(this.imgEl=e.querySelector(ze),this.imgEl?(this.contentNotFoundChangeObserver?.disconnect?.(),this.imgEl.addEventListener("load",this.handleImgLoad),this.imgEl.addEventListener("click",this.handleZoom),this.state.loadedImgEl||this.handleImgLoad(),this.imgElResizeObserver=new ResizeObserver(t=>{const n=t[0];n?.target&&(this.imgEl=n.target,this.setState({styleGhost:R(this.imgEl)}))}),this.imgElResizeObserver.observe(this.imgEl),this.contentChangeObserver||(this.contentChangeObserver=new MutationObserver(()=>{this.setState({styleGhost:R(this.imgEl)})}),this.contentChangeObserver.observe(e,{attributes:!0,childList:!0,subtree:!0}))):this.contentNotFoundChangeObserver||(this.contentNotFoundChangeObserver=new MutationObserver(this.setAndTrackImg),this.contentNotFoundChangeObserver.observe(e,{childList:!0,subtree:!0})))},this.handleIfZoomChanged=e=>{const{isZoomed:t}=this.props;!e&&t?this.zoom():e&&!t&&this.unzoom()},this.handleImgLoad=()=>{const e=q(this.imgEl);if(!e)return;const t=new Image;T(this.imgEl)&&(t.sizes=this.imgEl.sizes,t.srcset=this.imgEl.srcset,t.crossOrigin=this.imgEl.crossOrigin),t.src=e;const n=()=>{this.setState({loadedImgEl:t,styleGhost:R(this.imgEl)})};t.decode().then(n).catch(()=>{if(V(t)){n();return}t.onload=n})},this.handleZoom=()=>{!this.props.isDisabled&&this.hasImage()&&this.props.onZoomChange?.(!0)},this.handleUnzoom=()=>{this.props.isDisabled||this.props.onZoomChange?.(!1)},this.handleBtnUnzoomClick=e=>{e.preventDefault(),e.stopPropagation(),this.handleUnzoom()},this.handleDialogCancel=e=>{e.preventDefault()},this.handleDialogClick=e=>{(e.target===this.refModalContent.current||e.target===this.refModalImg.current)&&(e.stopPropagation(),this.handleUnzoom())},this.handleDialogClose=e=>{e.stopPropagation(),this.handleUnzoom()},this.handleKeyDown=e=>{(e.key==="Escape"||e.keyCode===27)&&(e.preventDefault(),e.stopPropagation(),this.handleUnzoom())},this.handleWheel=e=>{e.ctrlKey||(e.stopPropagation(),queueMicrotask(()=>{this.handleUnzoom()}))},this.handleTouchStart=e=>{if(e.touches.length>1){this.isScaling=!0;return}e.changedTouches.length===1&&e.changedTouches[0]&&(this.touchYStart=e.changedTouches[0].screenY)},this.handleTouchMove=e=>{const t=window.visualViewport?.scale??1;if(this.props.canSwipeToUnzoom&&!this.isScaling&&t<=1&&this.touchYStart!=null&&e.changedTouches[0]){this.touchYEnd=e.changedTouches[0].screenY;const n=Math.max(this.touchYStart,this.touchYEnd),i=Math.min(this.touchYStart,this.touchYEnd);Math.abs(n-i)>this.props.swipeToUnzoomThreshold&&(this.touchYStart=void 0,this.touchYEnd=void 0,this.handleUnzoom())}},this.handleTouchEnd=()=>{this.isScaling=!1,this.touchYStart=void 0,this.touchYEnd=void 0},this.handleTouchCancel=()=>{this.isScaling=!1,this.touchYStart=void 0,this.touchYEnd=void 0},this.handleResize=()=>{this.setState({shouldRefresh:!0})},this.hasImage=()=>this.imgEl&&(this.state.loadedImgEl||A(this.imgEl))&&window.getComputedStyle(this.imgEl).display!=="none",this.zoom=()=>{this.bodyScrollDisable(),this.refDialog.current?.showModal?.(),this.refModalImg.current?.addEventListener?.("transitionend",this.handleImgTransitionEnd),this.setState({modalState:"LOADING"})},this.unzoom=()=>{this.setState({modalState:"UNLOADING"})},this.handleImgTransitionEnd=()=>{clearTimeout(this.timeoutTransitionEnd),this.state.modalState==="LOADING"?this.setState({modalState:"LOADED"}):this.state.modalState==="UNLOADING"&&this.setState({shouldRefresh:!1,modalState:"UNLOADED"})},this.ensureImgTransitionEnd=()=>{if(this.refModalImg.current){const e=window.getComputedStyle(this.refModalImg.current).transitionDuration,t=parseFloat(e);if(t){const n=t*(e.endsWith("ms")?1:1e3)+50;this.timeoutTransitionEnd=setTimeout(this.handleImgTransitionEnd,n)}}},this.bodyScrollDisable=()=>{this.prevBodyAttrs={overflow:document.body.style.overflow,width:document.body.style.width};const e=document.body.clientWidth;document.body.style.overflow="hidden",document.body.style.width=`${e}px`},this.bodyScrollEnable=()=>{document.body.style.width=this.prevBodyAttrs.width,document.body.style.overflow=this.prevBodyAttrs.overflow,this.prevBodyAttrs=J},this.loadZoomImg=()=>{const{props:{zoomImg:e}}=this,t=e?.src;if(t){const n=new Image;n.sizes=e?.sizes??"",n.srcset=e?.srcSet??"",n.crossOrigin=e?.crossOrigin??void 0,n.src=t;const i=()=>{this.setState({isZoomImgLoaded:!0})};n.decode().then(i).catch(()=>{if(V(n)){i();return}n.onload=i})}},this.UNSAFE_handleSvg=()=>{const{imgEl:e,refModalImg:t,styleModalImg:n}=this;if(A(e)){const i=e.cloneNode(!0);Ce(i),i.style.width=`${n.width||0}px`,i.style.height=`${n.height||0}px`,i.addEventListener("click",this.handleUnzoom),t.current?.firstChild?.remove?.(),t.current?.appendChild?.(i)}}}render(){const{handleBtnUnzoomClick:e,handleDialogCancel:t,handleDialogClick:n,handleDialogClose:i,handleUnzoom:r,handleZoom:c,imgEl:m,props:{a11yNameButtonUnzoom:l,a11yNameButtonZoom:a,children:p,classDialog:w,IconUnzoom:u,IconZoom:h,isZoomed:f,wrapElement:d,ZoomContent:g,zoomImg:x,zoomMargin:S},refContent:j,refDialog:C,refModalContent:y,refModalImg:D,refWrap:H,state:{id:B,isZoomImgLoaded:G,loadedImgEl:ee,modalState:E,shouldRefresh:te,styleGhost:se}}=this,Z=`rmiz-modal-${B}`,Y=`rmiz-modal-img-${B}`,oe=$(m),M=T(m),P=A(m),k=Se(m),F=q(m),ne=M?m.sizes:void 0,ie=M?m.srcset:void 0,ae=M?m.crossOrigin:void 0,re=!!x?.src,z=this.hasImage(),le=k?`${a}: ${k}`:a,ce=E==="LOADING"||E==="LOADED",de=z?"found":"not-found",he=E==="UNLOADED"||E==="UNLOADING"?"hidden":"visible",me={visibility:E==="UNLOADED"?"visible":"hidden"};this.styleModalImg=z?je({hasZoomImg:re,imgSrc:F,isSvg:P,isZoomed:f&&ce,loadedImgEl:ee,offset:S,shouldRefresh:te,targetEl:m}):{};let _=null;if(z){const X=M||oe?v.createElement("img",{alt:k,crossOrigin:ae,sizes:ne,src:F,srcSet:ie,...G&&E==="LOADED"?x:{},"data-rmiz-modal-img":"",height:this.styleModalImg.height||void 0,id:Y,ref:D,style:this.styleModalImg,width:this.styleModalImg.width||void 0}):P?v.createElement("div",{"data-rmiz-modal-img":!0,ref:D,style:this.styleModalImg}):null,K=v.createElement("button",{"aria-label":l,"data-rmiz-btn-unzoom":"",onClick:e,type:"button"},v.createElement(u,null));_=g?v.createElement(g,{buttonUnzoom:K,modalState:E,img:X,isZoomImgLoaded:G,onUnzoom:r}):v.createElement(v.Fragment,null,X,K)}return v.createElement(d,{"aria-owns":Z,"data-rmiz":"",ref:H},v.createElement(d,{"data-rmiz-content":de,ref:j,style:me},p),z&&v.createElement(d,{"data-rmiz-ghost":"",style:se},v.createElement("button",{"aria-label":le,"data-rmiz-btn-zoom":"",onClick:c,type:"button"},v.createElement(h,null))),z&&fe.createPortal(v.createElement("dialog",{"aria-labelledby":Y,"aria-modal":"true",className:w,"data-rmiz-modal":"",id:Z,onClick:n,onClose:i,onCancel:t,ref:C,role:"dialog"},v.createElement("div",{"data-rmiz-modal-overlay":he}),v.createElement("div",{"data-rmiz-modal-content":"",ref:y},_)),this.getDialogContainer()))}componentDidMount(){this.setId(),this.setAndTrackImg(),this.handleImgLoad(),this.UNSAFE_handleSvg()}componentWillUnmount(){this.state.modalState!=="UNLOADED"&&this.bodyScrollEnable(),this.contentChangeObserver?.disconnect?.(),this.contentNotFoundChangeObserver?.disconnect?.(),this.imgElResizeObserver?.disconnect?.(),this.imgEl?.removeEventListener?.("load",this.handleImgLoad),this.imgEl?.removeEventListener?.("click",this.handleZoom),this.refModalImg.current?.removeEventListener?.("transitionend",this.handleImgTransitionEnd),window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchcancel",this.handleTouchCancel),window.removeEventListener("resize",this.handleResize),document.removeEventListener("keydown",this.handleKeyDown,!0)}componentDidUpdate(e,t){this.handleModalStateChange(t.modalState),this.UNSAFE_handleSvg(),this.handleIfZoomChanged(e.isZoomed)}}W.defaultProps={a11yNameButtonUnzoom:"Minimize image",a11yNameButtonZoom:"Expand image",canSwipeToUnzoom:!0,IconUnzoom:we,IconZoom:xe,isDisabled:!1,swipeToUnzoomThreshold:10,wrapElement:"div",zoomMargin:0};function Ae(o){const[e,t]=v.useState(!1);return v.createElement(De,{...o,isZoomed:e,onZoomChange:t})}const Ue=({currentLocation:o})=>{const[e,t]=L.useState(!1),[n,i]=L.useState("stats"),[r,c]=L.useState(null),[m,l]=L.useState([]),[a,p]=L.useState(null);L.useEffect(()=>{e&&(c(pe()),l(N.getLocations()),p(N.getLocationStats()))},[e]);const w=d=>{if(d===0)return"0 B";const g=1024,x=["B","KB","MB"],S=Math.floor(Math.log(d)/Math.log(g));return parseFloat((d/Math.pow(g,S)).toFixed(2))+" "+x[S]},u=d=>d.replace(/_/g," "),h=(d,g)=>{d.stopPropagation(),N.removeLocation(g),l(N.getLocations()),p(N.getLocationStats())},f=()=>{window.scrollTo({top:0,behavior:"smooth"})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[s.jsxs("button",{onClick:()=>t(!e),className:"w-14 h-14 bg-gradient-to-br from-blue-600 via-purple-600 to-blue-800 hover:from-blue-500 hover:via-purple-500 hover:to-blue-700 text-white rounded-full shadow-2xl border-2 border-blue-400/30 transition-all duration-300 transform hover:scale-105 backdrop-blur-sm",title:"Spaceship Control Panel",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("svg",{className:"w-7 h-7",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 2L8 7h3v10a1 1 0 001 1h2a1 1 0 001-1V7h3l-4-5zM6 13.5V16a4 4 0 004 4h4a4 4 0 004-4v-2.5l-2 1.5v1a2 2 0 01-2 2h-4a2 2 0 01-2-2v-1l-2-1.5z"})})}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-blue-400/20 animate-ping"})]}),!e&&s.jsx("button",{onClick:f,className:"absolute -top-16 left-1/2 transform -translate-x-1/2 w-10 h-10 bg-white/10 hover:bg-white/20 backdrop-blur-md text-white rounded-full shadow-lg border border-white/20 transition-all duration-300",title:"Scroll to top",children:s.jsx("svg",{className:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]}),e&&s.jsxs("div",{className:"fixed bottom-24 right-6 w-96 max-h-96 bg-black/90 backdrop-blur-xl rounded-2xl border border-blue-400/30 shadow-2xl z-40 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 p-4 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),s.jsx("h3",{className:"text-white font-bold text-lg",children:"🚀 Ship Control"})]}),s.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white transition-colors duration-200",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex mt-3 space-x-1",children:[s.jsx("button",{onClick:()=>i("stats"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 ${n==="stats"?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:"📊 Statistics"}),s.jsxs("button",{onClick:()=>i("locations"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 ${n==="locations"?"bg-purple-500/30 text-purple-300 border border-purple-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:["📍 Saved Locations (",a?.total||0,")"]})]})]}),s.jsxs("div",{className:"p-4 max-h-64 overflow-y-auto",children:[n==="stats"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-semibold mb-2 text-sm",children:"🌌 Exploration Progress"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{className:"bg-white/5 rounded-lg p-2 border border-blue-500/20",children:[s.jsx("div",{className:"text-gray-400",children:"Galaxies"}),s.jsx("div",{className:"text-blue-400 font-bold",children:r?.galaxies||0})]}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-2 border border-purple-500/20",children:[s.jsx("div",{className:"text-gray-400",children:"Systems"}),s.jsx("div",{className:"text-purple-400 font-bold",children:r?.systems||0})]}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-2 border border-cyan-500/20",children:[s.jsx("div",{className:"text-gray-400",children:"Planets"}),s.jsx("div",{className:"text-cyan-400 font-bold",children:r?.planets||0})]}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-2 border border-green-500/20",children:[s.jsx("div",{className:"text-gray-400",children:"Archive Size"}),s.jsx("div",{className:"text-green-400 font-bold",children:r?w(r.size):"0 B"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-semibold mb-2 text-sm",children:"📍 Saved Locations"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:a&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white/5 rounded-lg p-2",children:[s.jsx("div",{className:"text-gray-400",children:"Total"}),s.jsx("div",{className:"text-white font-bold",children:a.total})]}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-2",children:[s.jsx("div",{className:"text-gray-400",children:"Planets"}),s.jsx("div",{className:"text-cyan-400 font-bold",children:a.planets})]})]})})]})]}),n==="locations"&&s.jsx("div",{className:"space-y-2",children:m.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"No saved locations"}),s.jsx("div",{className:"text-gray-500 text-xs",children:"Use the 📍 button to save locations"})]}):m.map(d=>s.jsx("div",{className:"bg-white/5 hover:bg-white/10 rounded-lg p-3 border border-white/10 hover:border-white/20 transition-all duration-200 group",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("a",{href:d.stargateUrl,className:"flex-1 min-w-0 hover:text-blue-300 transition-colors duration-200",title:`Navigate to ${u(d.name)}`,children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsxs("div",{className:"text-xs",children:[d.type==="galaxy"&&"🌌",d.type==="system"&&"⭐",d.type==="planet"&&"🪐"]}),s.jsx("div",{className:"text-white text-sm font-medium truncate",children:u(d.name)})]}),s.jsxs("div",{className:"text-gray-400 text-xs truncate",children:[d.coordinates,d.systemIndex!==void 0&&` • System ${d.systemIndex}`]}),s.jsxs("div",{className:"text-blue-400 text-xs truncate mt-1 opacity-70",children:["🔗 ",d.stargateUrl]})]}),s.jsx("button",{onClick:g=>h(g,d.id),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-400 transition-all duration-200 ml-2",title:"Remove location",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},d.id))})]})]})]})};export{Oe as S,Ae as U,Ue as a,ve as r};
