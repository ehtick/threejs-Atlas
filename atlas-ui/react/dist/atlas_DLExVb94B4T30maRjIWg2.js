import{r as d,j as e,H as R,V as L,c as P,R as A}from"./atlas_CFledeilutgbU3PjQ07IW.js";import{U as H}from"./atlas_BLeDWoIJJV-ej6pBo9-Yl.js";const _=({system:r,galaxy:t,systemIndex:o})=>{const[m,g]=d.useState(!1),i=x=>x.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 flex-1",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 sm:p-3 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs sm:text-lg text-gray-300 mb-1",children:"System Type"}),e.jsx("div",{className:"text-sm sm:text-3xl font-bold text-blue-400 capitalize",children:r.star_system_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 sm:p-3 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs sm:text-lg text-gray-300 mb-1",children:"Planets"}),e.jsx("div",{className:"text-sm sm:text-3xl font-bold text-purple-400",children:r.num_planets})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 sm:p-3 border border-orange-500/30",children:[e.jsx("div",{className:"text-xs sm:text-lg text-gray-300 mb-1",children:"Stars"}),e.jsx("div",{className:"text-sm sm:text-3xl font-bold text-orange-400",children:r.stars.length})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 sm:p-3 border border-yellow-500/30 col-span-2 lg:col-span-3",children:[e.jsx("div",{className:"text-xs sm:text-lg text-gray-300 mb-2",children:"Stellar Composition"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 mb-3",children:r.stars.map((x,s)=>e.jsxs("div",{className:"bg-white/5 rounded p-2 border border-yellow-500/20",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Star ",s+1]}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-yellow-400",children:x.Type}),e.jsx("div",{className:"text-xs text-gray-300",children:x.Color}),e.jsx("div",{className:"text-xs text-gray-300",children:x.Size})]},s))}),e.jsxs("div",{className:"border-t border-yellow-500/20 pt-2",children:[e.jsxs("button",{onClick:()=>g(!m),className:"text-xs text-gray-500 hover:text-gray-300 transition-colors duration-300",children:[m?"▼":"▶"," Technical Data"]}),m&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 lg:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded p-1",children:[e.jsx("span",{className:"text-yellow-400",children:"System:"}),e.jsx("div",{className:"text-white truncate",children:i(r.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1",children:[e.jsx("span",{className:"text-yellow-400",children:"ID:"}),e.jsxs("div",{className:"text-white",children:["#",o+1]})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1",children:[e.jsx("span",{className:"text-yellow-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate",children:i(t.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1",children:[e.jsx("span",{className:"text-yellow-400",children:"Coords:"}),e.jsx("div",{className:"text-white",children:t.coordinates.join(", ")})]})]})]})]})]})]})},O=({systemUrl:r,imageUrl:t})=>{const o=d.useRef(null),m=d.useRef(null),[g,i]=d.useState("Aligning Stargate..."),[x,s]=d.useState(!1),[n,l]=d.useState(!1),[f,j]=d.useState(!1);return d.useEffect(()=>{const a=document.createElement("style");return a.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(a),()=>{document.head.removeChild(a)}},[]),d.useEffect(()=>{const a=o.current;if(!a)return;const h=a.getContext("2d");if(!h)return;let y=[];const N=800;let b,w;const u=800;let p,v=.5;function S(){const c=a?.parentElement;if(!c||!a)return;const C=c.clientWidth,E=c.clientHeight;a.width=Math.min(C,u),a.height=Math.min(E,u),b=a.width/2,w=a.height/2}function D(){S(),y=[];for(let c=0;c<N;c++)y.push({x:Math.random()*(a?.width||800),y:Math.random()*(a?.height||800),z:Math.random()*(a?.width||800),o:Math.random()});k()}function k(){!a||!h||(h.clearRect(0,0,a.width,a.height),y.forEach(c=>{c.z-=v,c.z<=0&&(c.z=a.width,c.x=Math.random()*a.width,c.y=Math.random()*a.height,c.o=Math.random());const C=a.width/c.z,E=(c.x-b)*C+b,M=(c.y-w)*C+w,I=2*C;h.beginPath(),h.fillStyle=`rgba(255, 255, 255, ${c.o})`,h.arc(E,M,I,0,2*Math.PI),h.fill()}),v<60&&(v+=1),p=requestAnimationFrame(k))}D();const z=()=>S();return window.addEventListener("resize",z),()=>{window.removeEventListener("resize",z),p&&cancelAnimationFrame(p)}},[]),d.useEffect(()=>{if(t){console.log("Loading system image:",t);const a=new Image;a.onload=()=>{console.log("System image loaded successfully"),m.current&&(m.current.src=t,l(!0),j(!0))},a.onerror=()=>{console.error("Failed to load system image:",t),setTimeout(()=>{l(!0),j(!0)},1500)},a.src=t}else console.log("No imageUrl provided, using placeholder"),setTimeout(()=>{l(!0),j(!0)},1500)},[t]),d.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){i("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),s(!0);const h=(u,p)=>Array.from({length:p},()=>u[Math.floor(Math.random()*u.length)]).join(""),y=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:30},{chars:"0123456789ABCDEF",duration:20,iterations:40},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:\\'\",.<>?/`~",duration:10,iterations:100}];let N=0,b=0;const w=()=>{if(N>=y.length){const p="Stargate system aligned";let v=0;i("");const S=()=>{v<p.length?(i(p.substring(0,v+1)),v++,setTimeout(S,30)):s(!1)};S();return}const u=y[N];i(h(u.chars,32)),b++,b>=u.iterations&&(N++,b=0),setTimeout(w,u.duration)};w()},[]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4",children:"System Visualization"}),e.jsxs("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:[e.jsx("canvas",{ref:o,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${f?"opacity-0":"opacity-100"}`,style:{filter:f?"blur(50px)":"none"}}),e.jsx("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${n?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:n&&t?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(H,{zoomMargin:20,classDialog:"backdrop-blur-3xl",children:e.jsx("img",{ref:m,className:"max-w-full max-h-full object-contain rounded-xl shadow-2xl shadow-blue-500/20",src:t,alt:"System visualization",style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:"transparent"}})})}):e.jsx("img",{ref:m,className:"w-full h-full object-cover",src:"/static/images/placeholder-min.jpg",alt:"System visualization"})})]}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:r,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${x?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),g]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]})]})},T=({planets:r,coordinates:t,systemIndex:o})=>{const[m,g]=d.useState(new Set);d.useEffect(()=>{(()=>{try{const j=(JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}")[t]||{})[o.toString()]||[],a=new Set;j.forEach(h=>{a.add(h.toLowerCase())}),g(a)}catch(l){console.error("Error loading historical data:",l)}})(),(()=>{try{let l=JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}");l[t]||(l[t]={}),l[t][o.toString()]||(l[t][o.toString()]=[]),localStorage.setItem("atlasHistoricalData",JSON.stringify(l))}catch(l){console.error("Error saving historical data:",l)}})()},[t,o]);const i=s=>s.replace(/_/g," "),x=s=>{try{let n=JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}");n[t]||(n[t]={}),n[t][o.toString()]||(n[t][o.toString()]=[]);const l=s.toLowerCase();n[t][o.toString()].includes(l)||(n[t][o.toString()].push(l),localStorage.setItem("atlasHistoricalData",JSON.stringify(n)))}catch(n){console.error("Error marking planet as visited:",n)}window.location.href=`/planet/${s.toLowerCase()}`};return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:r.map(s=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[m.has(s.name.toLowerCase())&&e.jsx("div",{className:"absolute left-0 top-0 w-1 h-full bg-cyan-400 rounded-l-lg opacity-100 transition-opacity duration-300",style:{background:"linear-gradient(180deg, #00d4ff 0%, #00a0ff 100%)"}}),e.jsxs("button",{onClick:()=>x(s.name),className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Planet"}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:i(s.name)})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},s.name))}),r.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No planets found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This system appears to be empty"})]})]})},B=({system:r,galaxy:t,system_url:o,version:m,system_index:g,image_url:i,page:x})=>{const[s]=d.useState(t.coordinates.join(","));d.useEffect(()=>{document.body.setAttribute("data-coordinates",s),document.body.setAttribute("data-system-index",g.toString())},[s,g]);const n=f=>f.replace(/_/g," "),l=f=>f.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(R,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["System '",n(r.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Galaxy '",l(t.name),"' - Coordinates ",t.coordinates.join(", ")]})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(O,{systemUrl:o,imageUrl:i})}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(_,{system:r,galaxy:t,systemIndex:g})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Planets in '",n(r.name),"'"]}),e.jsx(T,{planets:r.planets,coordinates:s,systemIndex:g})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${x}`,className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsxs("span",{className:"text-base sm:text-lg",children:["← Back to Galaxy '",l(t.name),"'"]})})})]}),e.jsx(L,{version:m})]})]})};console.log("Atlas System React script loading...");document.addEventListener("DOMContentLoaded",async()=>{console.log("DOM loaded, starting System React app...");try{const r=document.getElementById("system-data"),t=document.getElementById("galaxy-data"),o=document.getElementById("meta-data");if(!r||!t||!o){console.error("Missing required data elements");return}const m=JSON.parse(r.textContent||"{}"),g=JSON.parse(t.textContent||"{}"),i=JSON.parse(o.textContent||"{}"),x={system:m,galaxy:g,system_url:i.system_url,version:i.version,system_index:i.system_index,image_url:i.image_url,page:i.page||1},s=document.getElementById("atlas-react-root");s&&(P.createRoot(s).render(A.createElement(B,x)),console.log("System React app rendered successfully!"))}catch(r){console.error("Error initializing System React app:",r)}});
