import{r as l,j as e,H as Me,V as Ce,c as Le,R as Re}from"./atlas_DVrnBBsgS-kH5xseABxRO.js";import{S as ge,C as fe,P as be,W as we,G as ve,c as J,M as K,d as Z,V as de,e as ye,L as Fe,g as je,A as Ne,k as Se,l as pe}from"./atlas_JzQmrLPlfVl9nkKnI5Ba8.js";import{U as De}from"./atlas_QBkh70FCifb1U4lxZZBFq.js";const ke=({planets:i,stars:a,systemName:b,cosmicOriginTime:M,currentTime:F,onTimeOffsetChange:u})=>{const D=l.useRef(null),x=l.useRef(null),p=l.useRef(null),m=l.useRef(null),G=l.useRef([]),k=l.useRef([]);return l.useEffect(()=>{if(!D.current)return;const n=D.current,C=n.clientWidth,_=n.clientHeight,w=new ge;w.background=new fe(17),x.current=w;const c=new be(60,C/_,.1,1e4);c.position.set(0,120,180),c.lookAt(0,0,0);const S=new we({antialias:!0,alpha:!0});S.setSize(C,_),S.setClearColor(17,1),p.current=S,n.appendChild(S.domElement);const d={"Gas Giant":"#FFA500",Anomaly:"#FFFFFF",Rocky:"#808080",Icy:"#ADD8E6",Oceanic:"#0000FF",Desert:"#FFD700",Lava:"#FF0000",Arid:"#800000",Swamp:"#008000",Tundra:"#F0F8FF",Forest:"#006400",Savannah:"#F4A460",Cave:"#D1D1D1",Crystalline:"#00FFFF",Metallic:"#C0C0C0",Toxic:"#800080",Radioactive:"#00FF00",Magma:"#FF4500","Molten Core":"#FF8C00",Carbon:"#090909",Diamond:"#87CEFA","Super Earth":"#90EE90","Sub Earth":"#006400","Frozen Gas Giant":"#ADD8E6",Nebulous:"#FFC0CB",Aquifer:"#00FFFF",Exotic:"#FF00FF"},v={red:"#FF4444",orange:"#FF8844",yellow:"#FFFF44",white:"#FFFFFF",blue:"#4488FF",purple:"#8844FF"},E=new ve;a.forEach((t,s)=>{const o=parseFloat(t.Size)*4,r=new J(o,32,32),y=v[t.Color]||"#FFFF44",R=new K({color:y,transparent:!0,opacity:.9}),f=new Z(r,R);a.length===1?f.position.set(0,0,0):a.length===2?f.position.set(s===0?-o*2:o*2,0,0):s===0?f.position.set(-o*2,0,0):s===1?f.position.set(o*2,0,0):f.position.set(0,o*2,0);const j=new J(o*1.5,32,32),I=new K({color:y,transparent:!0,opacity:.3}),Y=new Z(j,I);f.add(Y),E.add(f)}),w.add(E);const N=Math.max(...i.map(t=>t.orbital_radius)),A=150;i.forEach((t,s)=>{const r=30+t.orbital_radius/N*A,y=t.eccentricity_factor,R=r,f=R*Math.sqrt(1-y*y),j=360,I=2,Y=4;for(let oe=0;oe<j;oe+=I+Y){const q=[];for(let W=oe;W<Math.min(oe+I,j-1);W++){const O=W/j*2*Math.PI,B=R*Math.cos(O),ne=f*Math.sin(O);q.push(new de(B,0,ne))}if(q.length>1){const W=new ye().setFromPoints(q),O=new Fe({color:7372944,transparent:!0,opacity:.8,linewidth:2}),B=new je(W,O);w.add(B),k.current.push(B)}}const ee=t.diameter/8e3,me=Math.max(Math.min(ee,8),2.5),ue=new J(me,32,32),he=d[t.planet_type]||"#FFFFFF",xe=new K({color:he,transparent:!0,opacity:.9}),X=new Z(ue,xe),H=new Z(new J(me*1.5,32,32),new K({color:he,transparent:!0,opacity:.2}));X.add(H),w.add(X),G.current.push(X),X.planetData=t,X.orbitRadius=r,X.semiMajorAxis=R,X.semiMinorAxis=f});const z=new Ne(4210752,.4);w.add(z);const Q=new Se(16777215,1,2e3);Q.position.set(0,0,0),w.add(Q);let h=!1,P=0,T=0,V=0;const te=t=>{h=!0,P=t.clientX,T=t.clientY},re=t=>{if(!h)return;const s=t.clientX-P,o=t.clientY-T,r=new pe;r.setFromVector3(c.position),r.theta-=s*.01,r.phi+=o*.01,r.phi=Math.max(.1,Math.min(Math.PI-.1,r.phi)),c.position.setFromSpherical(r),c.lookAt(0,0,0),P=t.clientX,T=t.clientY},$=()=>{h=!1,setTimeout(()=>{},3e3)},se=t=>{if(t.ctrlKey)t.preventDefault(),t.deltaY>0?u(86400):u(-86400);else{t.preventDefault();const s=.1,o=c.position.distanceTo(new de(0,0,0));t.deltaY>0&&o<800?c.position.multiplyScalar(1+s):t.deltaY<0&&o>50&&c.position.multiplyScalar(1-s)}},ae=t=>{t.key==="Escape"&&document.dispatchEvent(new CustomEvent("solar-system-close-fullscreen"))},ie=t=>{if(t.preventDefault(),t.touches.length===1)h=!0,P=t.touches[0].clientX,T=t.touches[0].clientY;else if(t.touches.length===2){const s=t.touches[0].clientX-t.touches[1].clientX,o=t.touches[0].clientY-t.touches[1].clientY;V=Math.sqrt(s*s+o*o)}},le=t=>{if(t.preventDefault(),t.touches.length===1&&h){const s=t.touches[0].clientX-P,o=t.touches[0].clientY-T,r=new pe;r.setFromVector3(c.position),r.theta-=s*.01,r.phi+=o*.01,r.phi=Math.max(.1,Math.min(Math.PI-.1,r.phi)),c.position.setFromSpherical(r),c.lookAt(0,0,0),P=t.touches[0].clientX,T=t.touches[0].clientY}else if(t.touches.length===2){const s=t.touches[0].clientX-t.touches[1].clientX,o=t.touches[0].clientY-t.touches[1].clientY,r=Math.sqrt(s*s+o*o);if(V>0){const R=r/V,f=c.position.distanceTo(new de(0,0,0));R>1&&f>50?c.position.multiplyScalar(1-.01):R<1&&f<800&&c.position.multiplyScalar(1+.01)}V=r}},U=t=>{t.preventDefault(),h=!1,V=0,setTimeout(()=>{},3e3)},g=S.domElement;g.style.cursor="grab",g.addEventListener("mousedown",t=>{g.style.cursor="grabbing",te(t)}),g.addEventListener("mousemove",re),g.addEventListener("mouseup",()=>{g.style.cursor="grab",$()}),g.addEventListener("mouseleave",()=>{g.style.cursor="grab",$()}),g.addEventListener("wheel",se),g.addEventListener("touchstart",ie,{passive:!1}),g.addEventListener("touchmove",le,{passive:!1}),g.addEventListener("touchend",U,{passive:!1}),document.addEventListener("keydown",ae);const L=()=>{m.current=requestAnimationFrame(L),G.current.forEach((t,s)=>{const o=t.planetData,r=t.semiMajorAxis,y=t.semiMinorAxis,R=o.orbital_period_seconds,f=2*Math.PI/R,j=(o.initial_orbital_angle+F*f)%(2*Math.PI);t.position.x=r*Math.cos(j),t.position.z=y*Math.sin(j),t.position.y=0;const I=o.rotation_period_seconds,Y=2*Math.PI/I;t.rotation.y=F*Y%(2*Math.PI)}),S.render(w,c)};L();const ce=()=>{const t=n.clientWidth,s=n.clientHeight;c.aspect=t/s,c.updateProjectionMatrix(),S.setSize(t,s)};return window.addEventListener("resize",ce),()=>{window.removeEventListener("resize",ce),document.removeEventListener("keydown",ae),g.removeEventListener("mousedown",te),g.removeEventListener("mousemove",re),g.removeEventListener("mouseup",$),g.removeEventListener("mouseleave",$),g.removeEventListener("wheel",se),g.removeEventListener("touchstart",ie),g.removeEventListener("touchmove",le),g.removeEventListener("touchend",U),m.current&&cancelAnimationFrame(m.current),n&&S.domElement&&n.removeChild(S.domElement),S.dispose(),G.current=[],k.current=[]}},[i,a,F,M]),e.jsx("div",{ref:D,className:"w-full h-full"})},Ae=({planets:i,stars:a,systemName:b,cosmicOriginTime:M})=>{const F=l.useRef(null),u=l.useRef(null),D=l.useRef(null),x=l.useRef(null),p=l.useRef([]),m=l.useRef([]),G=Math.floor(Date.now()/1e3),[k,n]=l.useState(0),[C,_]=l.useState(!1),w=G-M+k;l.useEffect(()=>{const d=()=>{_(!1)},v=E=>{E.key==="Escape"&&C&&_(!1)};return document.addEventListener("solar-system-close-fullscreen",d),document.addEventListener("keydown",v),()=>{document.removeEventListener("solar-system-close-fullscreen",d),document.removeEventListener("keydown",v)}},[C]),l.useEffect(()=>{if(!F.current)return;const d=F.current,v=d.clientWidth,E=v<640,N=new ge;N.background=new fe(17),u.current=N;const A=new be(45,v/(E?120:140),.1,1e4);A.position.set(0,80,120),A.lookAt(0,0,0);const z=new we({antialias:!0,alpha:!0});z.setSize(v,E?120:140),z.setClearColor(17,1),D.current=z,d.appendChild(z.domElement);const Q={"Gas Giant":"#FFA500",Anomaly:"#FFFFFF",Rocky:"#808080",Icy:"#ADD8E6",Oceanic:"#0000FF",Desert:"#FFD700",Lava:"#FF0000",Arid:"#800000",Swamp:"#008000",Tundra:"#F0F8FF",Forest:"#006400",Savannah:"#F4A460",Cave:"#D1D1D1",Crystalline:"#00FFFF",Metallic:"#C0C0C0",Toxic:"#800080",Radioactive:"#00FF00",Magma:"#FF4500","Molten Core":"#FF8C00",Carbon:"#090909",Diamond:"#87CEFA","Super Earth":"#90EE90","Sub Earth":"#006400","Frozen Gas Giant":"#ADD8E6",Nebulous:"#FFC0CB",Aquifer:"#00FFFF",Exotic:"#FF00FF"},h={red:"#FF4444",orange:"#FF8844",yellow:"#FFFF44",white:"#FFFFFF",blue:"#4488FF",purple:"#8844FF"},P=new ve;a.forEach((s,o)=>{const r=parseFloat(s.Size)*3,y=new J(r,16,16),R=h[s.Color]||"#FFFF44",f=new K({color:R,transparent:!0,opacity:.9}),j=new Z(y,f);a.length===1?j.position.set(0,0,0):a.length===2?j.position.set(o===0?-r*2:r*2,0,0):o===0?j.position.set(-r*2,0,0):o===1?j.position.set(r*2,0,0):j.position.set(0,r*2,0);const I=new J(r*1.5,16,16),Y=new K({color:R,transparent:!0,opacity:.3}),ee=new Z(I,Y);j.add(ee),P.add(j)}),N.add(P);const T=Math.max(...i.map(s=>s.orbital_radius)),V=80;i.forEach((s,o)=>{const y=20+s.orbital_radius/T*V,R=s.eccentricity_factor,f=y,j=f*Math.sqrt(1-R*R),I=360,Y=2,ee=4;for(let q=0;q<I;q+=Y+ee){const W=[];for(let O=q;O<Math.min(q+Y,I-1);O++){const B=O/I*2*Math.PI,ne=f*Math.cos(B),Ee=j*Math.sin(B);W.push(new de(ne,0,Ee))}if(W.length>1){const O=new ye().setFromPoints(W),B=new Fe({color:7372944,transparent:!0,opacity:.8,linewidth:2}),ne=new je(O,B);N.add(ne),m.current.push(ne)}}const me=s.diameter/15e3,ue=Math.max(Math.min(me,4),1.5),he=new J(ue,16,16),xe=Q[s.planet_type]||"#FFFFFF",X=new K({color:xe,transparent:!0,opacity:.9}),H=new Z(he,X),oe=new Z(new J(ue*1.5,16,16),new K({color:xe,transparent:!0,opacity:.2}));H.add(oe),N.add(H),p.current.push(H),H.planetData=s,H.orbitRadius=y,H.semiMajorAxis=f,H.semiMinorAxis=j});const te=new Ne(4210752,.4);N.add(te);const re=new Se(16777215,1,1e3);re.position.set(0,0,0),N.add(re);let $=!1,se=0,ae=0;const ie=s=>{$=!0,se=s.clientX,ae=s.clientY},le=s=>{if(!$)return;const o=s.clientX-se,r=s.clientY-ae,y=new pe;y.setFromVector3(A.position),y.theta-=o*.01,y.phi+=r*.01,y.phi=Math.max(.1,Math.min(Math.PI-.1,y.phi)),A.position.setFromSpherical(y),A.lookAt(0,0,0),se=s.clientX,ae=s.clientY},U=()=>{$=!1,setTimeout(()=>{},3e3)},g=s=>{if(s.ctrlKey)s.preventDefault(),s.deltaY>0?n(o=>o+86400):n(o=>o-86400);else{s.preventDefault();const o=.1,r=A.position.distanceTo(new de(0,0,0));s.deltaY>0&&r<500?A.position.multiplyScalar(1+o):s.deltaY<0&&r>20&&A.position.multiplyScalar(1-o)}},L=z.domElement;L.style.cursor="grab",L.style.borderRadius="8px",L.addEventListener("mousedown",s=>{L.style.cursor="grabbing",ie(s)}),L.addEventListener("mousemove",le),L.addEventListener("mouseup",()=>{L.style.cursor="grab",U()}),L.addEventListener("mouseleave",()=>{L.style.cursor="grab",U()}),L.addEventListener("wheel",g);const ce=()=>{x.current=requestAnimationFrame(ce),p.current.forEach((s,o)=>{const r=s.planetData,y=s.semiMajorAxis,R=s.semiMinorAxis,f=r.orbital_period_seconds,j=2*Math.PI/f,I=(r.initial_orbital_angle+w*j)%(2*Math.PI);s.position.x=y*Math.cos(I),s.position.z=R*Math.sin(I),s.position.y=0;const Y=r.rotation_period_seconds,ee=2*Math.PI/Y;s.rotation.y=w*ee%(2*Math.PI)}),z.render(N,A)};ce();const t=()=>{const s=d.clientWidth,o=s<640?120:140;A.aspect=s/o,A.updateProjectionMatrix(),z.setSize(s,o)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),L.removeEventListener("mousedown",ie),L.removeEventListener("mousemove",le),L.removeEventListener("mouseup",U),L.removeEventListener("mouseleave",U),L.removeEventListener("wheel",g),x.current&&cancelAnimationFrame(x.current),d&&z.domElement&&d.removeChild(z.domElement),z.dispose(),p.current=[],m.current=[]}},[i,a,w,k,M]);const c=d=>{const v=Math.floor(d/31557600),E=Math.floor(d%(365.25*24*3600)/(24*3600)),N=Math.floor(d%(24*3600)/3600);return v>0?`${v}y ${E}d ${N}h`:E>0?`${E}d ${N}h`:`${N}h`},S=d=>d.replace(/_/g," ");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Solar System Simulation"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:F,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsxs("button",{onClick:()=>_(!0),className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 flex items-center gap-1 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:[e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),e.jsx("span",{className:"text-xs text-white hidden sm:inline",children:"Expand"})]})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:"Star(s)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsxs("span",{className:"text-[10px]",children:[i.length," Planets"]})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:["Time: ",c(w)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom • Ctrl+Scroll: +1day/-1day • Drag: Rotate View"})]})]}),C&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-xl flex items-center justify-center",children:e.jsxs("div",{className:"w-full h-full flex flex-col p-2 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white truncate",children:S(b)}),e.jsxs("div",{className:"hidden sm:flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Star(s)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-300",children:[i.length," Planets"]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Time: ",c(w)]})]}),e.jsxs("div",{className:"sm:hidden text-xs text-gray-400",children:[i.length,"P • ",c(w)]})]}),e.jsx("button",{onClick:()=>_(!1),className:"p-1.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded-lg transition-colors duration-200 text-red-400 hover:text-red-300 flex-shrink-0",title:"Close fullscreen (ESC)",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(ke,{planets:i,stars:a,systemName:b,cosmicOriginTime:M,currentTime:w,onTimeOffsetChange:d=>n(v=>v+d)})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Ctrl+Scroll: +1day/-1day • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})})]})},ze=({system:i,galaxy:a,systemIndex:b,cosmicOriginTime:M})=>{const F=u=>u.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"System Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300 capitalize",children:i.star_system_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Planets"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:i.num_planets})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-orange-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Stars"}),e.jsx("div",{className:"text-sm font-bold text-orange-300",children:i.stars.length})]})]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-3",children:e.jsx(Ae,{planets:i.planets,stars:i.stars,systemName:i.name,cosmicOriginTime:M})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-yellow-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Stellar Composition"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-1",children:i.stars.map((u,D)=>e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-yellow-500/20",children:[e.jsxs("div",{className:"text-xs text-gray-300",children:["Star ",D+1]}),e.jsx("div",{className:"text-xs font-bold text-yellow-300",children:u.Type}),e.jsxs("div",{className:"text-xs text-gray-300",children:[u.Color," • ",u.Size]})]},D))})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"System:"}),e.jsx("div",{className:"text-white truncate font-medium",children:F(i.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"System ID:"}),e.jsxs("div",{className:"text-white font-medium",children:["#",b+1]})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:F(a.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:a.coordinates.join(", ")})]})]})]})]})},Pe=({systemUrl:i,imageUrl:a})=>{const b=l.useRef(null),M=l.useRef(null),[F,u]=l.useState("Aligning Stargate..."),[D,x]=l.useState(!1),[p,m]=l.useState(!1),[G,k]=l.useState(!1);return l.useEffect(()=>{const n=document.createElement("style");return n.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(n),()=>{document.head.removeChild(n)}},[]),l.useEffect(()=>{const n=b.current;if(!n)return;const C=n.getContext("2d");if(!C)return;let _=[];const w=800;let c,S;const d=800;let v,E=.5;function N(){const h=n?.parentElement;if(!h||!n)return;const P=h.clientWidth,T=h.clientHeight;n.width=Math.min(P,d),n.height=Math.min(T,d),c=n.width/2,S=n.height/2}function A(){N(),_=[];for(let h=0;h<w;h++)_.push({x:Math.random()*(n?.width||800),y:Math.random()*(n?.height||800),z:Math.random()*(n?.width||800),o:Math.random()});z()}function z(){!n||!C||(C.clearRect(0,0,n.width,n.height),_.forEach(h=>{h.z-=E,h.z<=0&&(h.z=n.width,h.x=Math.random()*n.width,h.y=Math.random()*n.height,h.o=Math.random());const P=n.width/h.z,T=(h.x-c)*P+c,V=(h.y-S)*P+S,te=2*P;C.beginPath(),C.fillStyle=`rgba(255, 255, 255, ${h.o})`,C.arc(T,V,te,0,2*Math.PI),C.fill()}),E<60&&(E+=1),v=requestAnimationFrame(z))}A();const Q=()=>N();return window.addEventListener("resize",Q),()=>{window.removeEventListener("resize",Q),v&&cancelAnimationFrame(v)}},[]),l.useEffect(()=>{if(a){console.log("Loading system image:",a);const n=new Image;n.onload=()=>{console.log("System image loaded successfully"),M.current&&(M.current.src=a,m(!0),k(!0))},n.onerror=()=>{console.error("Failed to load system image:",a),setTimeout(()=>{m(!0),k(!0)},1500)},n.src=a}else console.log("No imageUrl provided, using placeholder"),setTimeout(()=>{m(!0),k(!0)},1500)},[a]),l.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){u("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),x(!0);const C=(d,v)=>Array.from({length:v},()=>d[Math.floor(Math.random()*d.length)]).join(""),_=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:30},{chars:"0123456789ABCDEF",duration:20,iterations:40},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:\\'\",.<>?/`~",duration:10,iterations:100}];let w=0,c=0;const S=()=>{if(w>=_.length){const v="Stargate system aligned";let E=0;u("");const N=()=>{E<v.length?(u(v.substring(0,E+1)),E++,setTimeout(N,30)):x(!1)};N();return}const d=_[w];u(C(d.chars,32)),c++,c>=d.iterations&&(w++,c=0),setTimeout(S,d.duration)};S()},[]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3",children:"System Visualization"}),e.jsxs("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:[e.jsx("canvas",{ref:b,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${G?"opacity-0":"opacity-100"}`,style:{filter:G?"blur(50px)":"none"}}),e.jsx("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${p?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:p&&a?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(De,{zoomMargin:20,classDialog:"backdrop-blur-3xl",children:e.jsx("img",{ref:M,className:"max-w-full max-h-full object-contain rounded-xl shadow-2xl shadow-blue-500/20",src:a,alt:"System visualization",style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:"transparent"}})})}):e.jsx("img",{ref:M,className:"w-full h-full object-cover",src:"/static/images/placeholder-min.jpg",alt:"System visualization"})})]}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:i,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${D?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),F]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]})]})},Ie=({planets:i,coordinates:a,systemIndex:b})=>{const[M,F]=l.useState(new Set);l.useEffect(()=>{(()=>{try{const k=(JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}")[a]||{})[b.toString()]||[],n=new Set;k.forEach(C=>{n.add(C.toLowerCase())}),F(n)}catch(m){console.error("Error loading historical data:",m)}})(),(()=>{try{let m=JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}");m[a]||(m[a]={}),m[a][b.toString()]||(m[a][b.toString()]=[]),localStorage.setItem("atlasHistoricalData",JSON.stringify(m))}catch(m){console.error("Error saving historical data:",m)}})()},[a,b]);const u=x=>x.replace(/_/g," "),D=x=>{try{let p=JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}");p[a]||(p[a]={}),p[a][b.toString()]||(p[a][b.toString()]=[]);const m=x.toLowerCase();p[a][b.toString()].includes(m)||(p[a][b.toString()].push(m),localStorage.setItem("atlasHistoricalData",JSON.stringify(p)))}catch(p){console.error("Error marking planet as visited:",p)}window.location.href=`/planet/${x.toLowerCase()}`};return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:i.map(x=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[M.has(x.name.toLowerCase())&&e.jsx("div",{className:"absolute left-0 top-0 w-1 h-full bg-cyan-400 rounded-l-lg opacity-100 transition-opacity duration-300",style:{background:"linear-gradient(180deg, #00d4ff 0%, #00a0ff 100%)"}}),e.jsxs("button",{onClick:()=>D(x.name),className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Planet"}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:u(x.name)})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},x.name))}),i.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No planets found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This system appears to be empty"})]})]})},_e=({system:i,galaxy:a,system_url:b,version:M,system_index:F,image_url:u,page:D,cosmic_origin_time:x})=>{const[p]=l.useState(a.coordinates.join(","));l.useEffect(()=>{document.body.setAttribute("data-coordinates",p),document.body.setAttribute("data-system-index",F.toString())},[p,F]);const m=k=>k.replace(/_/g," "),G=k=>k.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(Me,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["System '",m(i.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Galaxy '",G(a.name),"' - Coordinates ",a.coordinates.join(", ")]})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(Pe,{systemUrl:b,imageUrl:u})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(ze,{system:i,galaxy:a,systemIndex:F,cosmicOriginTime:x})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Planets in '",m(i.name),"'"]}),e.jsx(Ie,{planets:i.planets,coordinates:p,systemIndex:F})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${D}`,className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsxs("span",{className:"text-base sm:text-lg",children:["← Back to Galaxy '",G(a.name),"'"]})})})]}),e.jsx(Ce,{version:M})]})]})};console.log("Atlas System React script loading...");document.addEventListener("DOMContentLoaded",async()=>{console.log("DOM loaded, starting System React app...");try{const i=document.getElementById("system-data"),a=document.getElementById("galaxy-data"),b=document.getElementById("meta-data");if(!i||!a||!b){console.error("Missing required data elements");return}const M=JSON.parse(i.textContent||"{}"),F=JSON.parse(a.textContent||"{}"),u=JSON.parse(b.textContent||"{}"),D={system:M,galaxy:F,system_url:u.system_url,version:u.version,system_index:u.system_index,image_url:u.image_url,page:u.page||1,cosmic_origin_time:u.cosmic_origin_time},x=document.getElementById("atlas-react-root");x&&(Le.createRoot(x).render(Re.createElement(_e,D)),console.log("System React app rendered successfully!"))}catch(i){console.error("Error initializing System React app:",i)}});
