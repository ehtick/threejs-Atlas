import{r as u,j as e,a as ht,c as lt,R as dt}from"./atlas_DztNjO7RDBVhWZ-y1bcy1.js";import{R as pt,F as Gt,H as It}from"./atlas_UIs4DxQZG7OpD2-OKsvyi.js";import{W as nt}from"./atlas_oohEvMdySAEvykvrmEZWK.js";import{a4 as st,C as Fe,a5 as ot,G as Te,r as ft,cH as xt,a2 as Je,cI as qe,cJ as Ze,b as Re,z as Ge,M as H,V as Ye,B as Ue,cM as gt,o as vt,aa as it,a9 as wt,v as bt,cK as yt,cL as Mt,S as Be,c as jt,A as Le,g as Se,x as Qe,D as Ke,H as St,t as et,m as He,P as tt,Y as Rt,y as zt}from"./atlas_Dr7FhitegIaVfnn-NnCom.js";import{R as Dt,S as At,M as Tt,a as rt,D as _t,b as Ht,c as Ft,T as Vt,d as Bt}from"./atlas_BMqd4nMOKpH7k8kGIiIm1.js";import{L as qt,g as Ut,S as Oe,m as $t,C as Wt,a as Yt}from"./atlas_s2bgnsIZLLEyKsbqi4Luw.js";import{S as ut,a as Xt,b as Ot,E as Zt}from"./atlas_DdsZULULPMiO_4zNpU1tX.js";import{O as Nt}from"./atlas_ujwtN6M9bdCDvth7wAGyD.js";import{V as Kt}from"./atlas_DkhYSJBHjNj1C82pPhqOg.js";import"./atlas_NcbMusH95geV1bEYmniMW.js";import"./atlas_CKgoXdq-KyExGQBSbNLMh.js";import"./atlas_DkjWl6DBdcRHoaQOD3LxM.js";import"./atlas__CL3BPjFCShNZQgiuy96B.js";import"./atlas_BdebLE6kENmVicNOGBriK.js";import"./atlas_B4h7HMyQvysW2t3kwcZc2.js";import"./atlas_LmNqYy6uQH9vpkVULiG4p.js";import"./atlas_BubEFgwZNtoXO-z9Q9wEM.js";import"./atlas_4-27xE74LxWyUAjrvAgcW.js";import"./atlas_BjC_Fz8nmmwS5iQXABlo6.js";import"./atlas_DuEOYaRqZw9VGGcooJL65.js";import"./atlas_Clq1hI88mh2hnP8wawid6.js";import"./atlas_bk2GuLrBc-a8g-ZUi9u-B.js";import"./atlas_Dohzt8kNSWBW4t2pSLrOG.js";import"./atlas_BZAQSikhKZZ5xAz2fSejO.js";import"./atlas_d3wRMmIM3beVxA8U4ZSx1.js";import"./atlas_8-sUAIYrEquYKNHyuaDIT.js";import"./atlas_Cr--5ccr_z-3uMKugVLdP.js";import"./atlas_BhfXArVbz0VMjCsAVbuxT.js";import"./atlas_Du-q93KmniM5XLjL-sUNe.js";import"./atlas_CcLpZYqmxXrxxJ3feKVBA.js";import"./atlas_CY6vRMTTMMDq88_E4Ga6d.js";import"./atlas_BtKkxPNO8uv1ulUTBtO3u.js";import"./atlas_LxNETNBNJbeTSVer7KRf3.js";import"./atlas_tTsb1BC2IVJIZQilvmmKB.js";import"./atlas_C2xr_99yY6_9pq7aCug1k.js";import"./atlas_DI6t1QVlZPFhIU-PhQ6vw.js";import"./atlas_BpwjBdIbVNG6bMh_70lqk.js";import"./atlas_YQVc2BxsbLdn4jMOuYI4o.js";import"./atlas_DfPI8o51UsUd0-lnvnem7.js";import"./atlas_Dgpw2YXwEz49D0_FAtbrO.js";import"./atlas_0CnXsjTuKVkgXCLEEOsmC.js";import"./atlas_3RU-W6J4gRJdbKRjxZdBQ.js";import"./atlas_B64ovZGXw863qGvOeN-fq.js";import"./atlas_J_hKHxv4X2mvaxc_vS-K2.js";import"./atlas_Te4_B5LRR9G-AERdQRAGw.js";import"./atlas_CxaSSLWLI5Swdwucf8mJh.js";import"./atlas_c7NYwATbNrXlqUdhe9xmE.js";import"./atlas_BEw5h6egQDdMHyfAl1W2y.js";import"./atlas_wRuh9cJZMDNFAHxd36BRd.js";import"./atlas_iOol0R4GQHkpmsB1SUL5f.js";import"./atlas_DFwxZG4IPq83mMg_yQGFi.js";import"./atlas_DR8c879j9p7s0oYp3qq9E.js";import"./atlas_B0Ic-6FMoVLALzwwzQswz.js";import"./atlas_DjS4F2W_cpkRKixK-GWhJ.js";import"./atlas_D-j-06JoizwnE1-s8SbVv.js";import"./atlas_C8jcx-Hy87N24z7gO68J-.js";import"./atlas_D0bj_RJsK1GE2jmDZu7rB.js";import"./atlas_zuNd-wlCvv0z-g5BPCO3V.js";import"./atlas_rsN9U5zVe9zqvX_BGb08h.js";import"./atlas_C9Zv5JYYEBCbF7KLXF-gO.js";import"./atlas_17oRChKuJ6Ikye-gHzt30.js";import"./atlas_DRAq8awPo0B6HZ_XOgtbW.js";import"./atlas_RvtgSuNkg9MFF7eIotjGD.js";import"./atlas_B0DOS25QVmvMiQ0kDrzPR.js";import"./atlas_CL1FEvCMa5769vO7IeA4_.js";import"./atlas_C0NoXn30NvQskZTlvs4ww.js";const Jt=({coordinates:l,galaxyName:y})=>{const D=u.useRef(null),q=u.useRef(null),k=u.useRef(null),P=u.useRef(null);return u.useEffect(()=>{if(!D.current)return;const _=D.current,L=_.clientWidth,ze=_.clientHeight,Q=new st;Q.background=new Fe(657930),q.current=Q;const F=new ot(45,L/ze,.1,1e3);F.position.set(20,15,20),F.lookAt(0,0,0);const G=new nt({antialias:!0,alpha:!0});G.setSize(L,ze),G.setClearColor(0,.2),k.current=G,_.appendChild(G.domElement);const $=0,U=1e7,A=5e6,[ve,X,ae]=l,T=((ve-$)/(U-$)-.5)*16,Z=((X-$)/(U-$)-.5)*16,Ne=((ae-$)/(U-$)-.5)*16,V=new Te;Q.add(V);const se=new ft(16,16,16),le=new xt(se),xe=new Je({color:16777215,opacity:.4,transparent:!0,linewidth:2}),pe=new qe(le,xe);V.add(pe);const ue=new Ze(16,16,16777215,16777215);ue.material.opacity=.1,ue.material.transparent=!0,ue.position.y=-8,V.add(ue);const oe=new Ze(16,16,16777215,16777215);oe.material.opacity=.05,oe.material.transparent=!0,oe.rotation.z=Math.PI/2,oe.position.x=-8,V.add(oe);const R=new Ze(16,16,16777215,16777215);R.material.opacity=.05,R.material.transparent=!0,R.rotation.x=Math.PI/2,R.position.z=-8,V.add(R);const _e=new Re(.5,32,32),Ce=new Ge({color:16777215,transparent:!0,opacity:.9}),fe=new H(_e,Ce);fe.position.set(0,0,0),V.add(fe);const me=new H(new Re(.8,32,32),new Ge({color:16777215,transparent:!0,opacity:.2}));fe.add(me);const v=new Re(.4,32,32),w=new Ge({color:6605055,transparent:!0,opacity:1}),O=new H(v,w);O.position.set(T,Z,Ne),V.add(O);const Me=new H(new Re(.7,32,32),new Ge({color:6605055,transparent:!0,opacity:.3}));if(O.add(Me),Math.sqrt(Math.pow(ve-A,2)+Math.pow(X-A,2)+Math.pow(ae-A,2))<2e6){const r=[new Ye(0,0,0),new Ye(T,Z,Ne)],M=new Ue().setFromPoints(r),h=new gt({color:16762980,dashSize:.6,gapSize:.6,opacity:.4,transparent:!0,linewidth:2}),I=new vt(M,h);I.computeLineDistances(),V.add(I)}const he=new it(4210752,.6);Q.add(he);const ne=new wt(16777215,.8);ne.position.set(10,10,10),Q.add(ne);const ee=(r,M)=>{const h=document.createElement("canvas"),I=h.getContext("2d");if(!I)return null;h.width=64,h.height=64,I.fillStyle=`#${M.toString(16).padStart(6,"0")}`,I.font="bold 48px Arial",I.textAlign="center",I.textBaseline="middle",I.fillText(r,32,32);const N=new bt(h),S=new yt({map:N,transparent:!0,opacity:.8}),K=new Mt(S);return K.scale.set(1.6,1.6,1),K},W=ee("X",16739179);W&&(W.position.set(8.4,-7.6,-7.6),V.add(W));const p=ee("Y",7077739);p&&(p.position.set(-7.6,8.4,-7.6),V.add(p));const c=ee("Z",7039999);c&&(c.position.set(-7.6,-7.6,8.4),V.add(c));let n=!1,s=0,i=0,x=!0,m=0;const b=r=>{n=!0,x=!1,s=r.clientX,i=r.clientY},J=r=>{if(!n)return;const M=r.clientX-s,h=r.clientY-i;V.rotation.y+=M*.01,V.rotation.x+=h*.01,s=r.clientX,i=r.clientY},Y=()=>{n=!1,setTimeout(()=>{n||(x=!0)},3e3)},z=r=>{r.preventDefault();const M=.1,h=F.position.distanceTo(new Ye(0,0,0));r.deltaY>0&&h<50?F.position.multiplyScalar(1+M):r.deltaY<0&&h>10&&F.position.multiplyScalar(1-M)},ie=r=>{r.key==="Escape"&&document.dispatchEvent(new CustomEvent("universe-close-fullscreen"))},B=r=>{if(r.preventDefault(),r.touches.length===1)n=!0,x=!1,s=r.touches[0].clientX,i=r.touches[0].clientY;else if(r.touches.length===2){const M=r.touches[0].clientX-r.touches[1].clientX,h=r.touches[0].clientY-r.touches[1].clientY;m=Math.sqrt(M*M+h*h)}},te=r=>{if(r.preventDefault(),r.touches.length===1&&n){const M=r.touches[0].clientX-s,h=r.touches[0].clientY-i;V.rotation.y+=M*.01,V.rotation.x+=h*.01,s=r.touches[0].clientX,i=r.touches[0].clientY}else if(r.touches.length===2){const M=r.touches[0].clientX-r.touches[1].clientX,h=r.touches[0].clientY-r.touches[1].clientY,I=Math.sqrt(M*M+h*h);if(m>0){const S=I/m,K=F.position.distanceTo(new Ye(0,0,0));S>1&&K>10?F.position.multiplyScalar(1-.01):S<1&&K<50&&F.position.multiplyScalar(1+.01)}m=I}},a=r=>{r.preventDefault(),n=!1,m=0,setTimeout(()=>{n||(x=!0)},3e3)},t=G.domElement;t.style.cursor="grab",t.addEventListener("mousedown",r=>{t.style.cursor="grabbing",b(r)}),t.addEventListener("mousemove",J),t.addEventListener("mouseup",()=>{t.style.cursor="grab",Y()}),t.addEventListener("mouseleave",()=>{t.style.cursor="grab",Y()}),t.addEventListener("wheel",z),t.addEventListener("touchstart",B,{passive:!1}),t.addEventListener("touchmove",te,{passive:!1}),t.addEventListener("touchend",a,{passive:!1}),document.addEventListener("keydown",ie);const o=()=>{P.current=requestAnimationFrame(o),x&&(V.rotation.y+=.002,V.rotation.x+=.001);const r=Date.now()*.005;fe.scale.setScalar(1+Math.sin(r)*.1),O.rotation.y+=.01,G.render(Q,F)};o();const g=()=>{const r=_.clientWidth,M=_.clientHeight;F.aspect=r/M,F.updateProjectionMatrix(),G.setSize(r,M)};return window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g),document.removeEventListener("keydown",ie),t.removeEventListener("mousedown",b),t.removeEventListener("mousemove",J),t.removeEventListener("mouseup",Y),t.removeEventListener("mouseleave",Y),t.removeEventListener("wheel",z),t.removeEventListener("touchstart",B),t.removeEventListener("touchmove",te),t.removeEventListener("touchend",a),P.current&&cancelAnimationFrame(P.current),_&&G.domElement&&_.removeChild(G.domElement),G.dispose(),se.dispose(),le.dispose(),xe.dispose(),_e.dispose(),Ce.dispose(),v.dispose(),w.dispose()}},[l,y]),e.jsx("div",{ref:D,className:"w-full h-full"})},Qt=({coordinates:l,galaxyName:y})=>{const D=u.useRef(null),q=u.useRef(null),k=u.useRef(null),P=u.useRef(null),[_,L]=u.useState(!1),[ze,Q]=u.useState(!1),[F,G]=u.useState(!1),$=()=>{Q(!0),setTimeout(()=>{L(!1),Q(!1)},300)};u.useEffect(()=>{const T=Z=>{Z.key==="Escape"&&_&&$()};return document.addEventListener("universe-close-fullscreen",$),document.addEventListener("keydown",T),()=>{document.removeEventListener("universe-close-fullscreen",$),document.removeEventListener("keydown",T)}},[_]),u.useEffect(()=>{if(_&&F){const T=setTimeout(()=>{G(!1)},50);return()=>clearTimeout(T)}},[_,F]),u.useEffect(()=>{if(!D.current)return;const T=D.current,Z=T.clientWidth,Ne=Z<640,V=new st;V.background=new Fe(657930),q.current=V;const se=new ot(30,Z/120,.1,1e3);se.position.set(12,8,12),se.lookAt(0,0,0);const le=new nt({antialias:!0,alpha:!0});le.setSize(Z,120),le.setClearColor(0,.2),k.current=le,T.appendChild(le.domElement);const xe=0,pe=1e7,ue=5e6,[oe,R,_e]=l,Ce=((oe-xe)/(pe-xe)-.5)*8,fe=((R-xe)/(pe-xe)-.5)*8,me=((_e-xe)/(pe-xe)-.5)*8,v=new Te;V.add(v);const w=new ft(8,8,8),O=new xt(w),Me=new Je({color:16777215,opacity:.4,transparent:!0}),ge=new qe(O,Me);v.add(ge);const he=new Ze(8,8,16777215,16777215);he.material.opacity=.1,he.material.transparent=!0,he.position.y=-4,v.add(he);const ne=new Ze(8,8,16777215,16777215);ne.material.opacity=.05,ne.material.transparent=!0,ne.rotation.z=Math.PI/2,ne.position.x=-4,v.add(ne);const ee=new Ze(8,8,16777215,16777215);ee.material.opacity=.05,ee.material.transparent=!0,ee.rotation.x=Math.PI/2,ee.position.z=-4,v.add(ee);const W=new Re(.25,16,16),p=new Ge({color:16777215,transparent:!0,opacity:.9}),c=new H(W,p);c.position.set(0,0,0),v.add(c);const n=new H(new Re(.45,16,16),new Ge({color:16777215,transparent:!0,opacity:.2}));c.add(n);const s=new Re(.2,16,16),i=new Ge({color:6605055,transparent:!0,opacity:1}),x=new H(s,i);x.position.set(Ce,fe,me),v.add(x);const m=new H(new Re(.35,16,16),new Ge({color:6605055,transparent:!0,opacity:.3}));if(x.add(m),Math.sqrt(Math.pow(oe-ue,2)+Math.pow(R-ue,2)+Math.pow(_e-ue,2))<2e6){const d=[new Ye(0,0,0),new Ye(Ce,fe,me)],j=new Ue().setFromPoints(d),f=new gt({color:16762980,dashSize:.3,gapSize:.3,opacity:.4,transparent:!0}),C=new vt(j,f);C.computeLineDistances(),v.add(C)}const J=new it(4210752,.6);V.add(J);const Y=new wt(16777215,.8);Y.position.set(5,5,5),V.add(Y);const z=(d,j)=>{const f=document.createElement("canvas"),C=f.getContext("2d");if(!C)return null;f.width=32,f.height=32,C.fillStyle=`#${j.toString(16).padStart(6,"0")}`,C.font="bold 24px Arial",C.textAlign="center",C.textBaseline="middle",C.fillText(d,16,16);const E=new bt(f),re=new yt({map:E,transparent:!0,opacity:.8}),de=new Mt(re);return de.scale.set(.8,.8,1),de},ie=z("X",16739179);ie&&(ie.position.set(4.2,-3.8,-3.8),v.add(ie));const B=z("Y",7077739);B&&(B.position.set(-3.8,4.2,-3.8),v.add(B));const te=z("Z",7039999);te&&(te.position.set(-3.8,-3.8,4.2),v.add(te));let a=!1,t=0,o=0,g=!0;const r=d=>{a=!0,g=!1,t=d.clientX,o=d.clientY},M=d=>{if(!a)return;const j=d.clientX-t,f=d.clientY-o;v.rotation.y+=j*.01,v.rotation.x+=f*.01,t=d.clientX,o=d.clientY},h=()=>{a=!1,setTimeout(()=>{a||(g=!0)},3e3)},I=d=>{d.preventDefault();const j=.1,f=se.position.distanceTo(new Ye(0,0,0));d.deltaY>0&&f<25?se.position.multiplyScalar(1+j):d.deltaY<0&&f>5&&se.position.multiplyScalar(1-j)},N=le.domElement;N.style.cursor="grab",N.style.borderRadius="8px",N.addEventListener("mousedown",d=>{N.style.cursor="grabbing",r(d)}),N.addEventListener("mousemove",M),N.addEventListener("mouseup",()=>{N.style.cursor="grab",h()}),N.addEventListener("mouseleave",()=>{N.style.cursor="grab",h()}),N.addEventListener("wheel",I);const S=()=>{P.current=requestAnimationFrame(S),g&&(v.rotation.y+=.002,v.rotation.x+=.001);const d=Date.now()*.005;c.scale.setScalar(1+Math.sin(d)*.1),x.rotation.y+=.01,le.render(V,se)};S();const K=()=>{const d=T.clientWidth,j=d<640?150:160;se.aspect=d/j,se.updateProjectionMatrix(),le.setSize(d,j)};return window.addEventListener("resize",K),()=>{window.removeEventListener("resize",K),N.removeEventListener("mousedown",r),N.removeEventListener("mousemove",M),N.removeEventListener("mouseup",h),N.removeEventListener("mouseleave",h),N.removeEventListener("wheel",I),P.current&&cancelAnimationFrame(P.current),T&&le.domElement&&T.removeChild(le.domElement),le.dispose(),w.dispose(),O.dispose(),Me.dispose(),W.dispose(),p.dispose(),s.dispose(),i.dispose()}},[l,y]);const U=T=>T.replace(/_/g," "),A=T=>T>=1e6?`${(T/1e6).toFixed(1)}M`:T>=1e3?`${(T/1e3).toFixed(1)}K`:T.toString(),[ve,X,ae]=l;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"text-xs text-gray-300 mb-2",children:"Galaxy Location"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:D,className:"w-full border border-white/20 rounded bg-black/20",style:{height:"auto"}}),e.jsx("button",{onClick:()=>{L(!0),G(!0)},className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg z-10",title:"Expand to fullscreen",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-[10px]",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-[10px]",children:U(y)})]})]}),e.jsxs("div",{className:"text-[10px] text-gray-500",children:[A(ve),", ",A(X),", ",A(ae)]})]}),e.jsx("div",{className:"text-center text-[10px] text-gray-500",children:"Scroll: Zoom • Drag: Rotate View"})]})]}),_&&ht.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${ze||F?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${ze||F?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:U(y)})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-1",children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[U(y)," - Galaxy Location"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-white rounded-full opacity-90"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Bit Bang"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Galaxy"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[A(ve),", ",A(X),", ",A(ae)]})]})]}),e.jsx("button",{onClick:$,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(Jt,{coordinates:l,galaxyName:y})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},en=({galaxy:l})=>{const[y,D]=u.useState({isOnCooldown:!1,isSaved:!1,isCollecting:!1,timeUntilNext:0});u.useEffect(()=>{let k;const P=()=>{const Q=rt.generateLocationId("galaxy",l.coordinates.join(","),void 0,void 0),F=rt.canCollectFromLocation(Q),G=rt.getTimeUntilNextCollection(Q),$=l.coordinates,U=ut.generateGalaxyUrl($,ut.getCurrentPage()),ve=qt.getLocations().some(X=>X.stargateUrl===U);D(X=>({isOnCooldown:!F&&G>0,isSaved:ve,isCollecting:X.isCollecting,timeUntilNext:G}))},_=()=>{D(Q=>({...Q,isCollecting:!0})),k=setTimeout(()=>{D(Q=>({...Q,isCollecting:!1}))},1e3)};P();const L=setInterval(P,1e3),ze=pt.subscribe("mining_completed",_);return()=>{clearInterval(L),k&&clearTimeout(k),ze()}},[l.name,l.coordinates]);const q=k=>k.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col relative",children:[e.jsxs("div",{className:"absolute top-0 right-0 flex gap-2 z-10",children:[e.jsx(Dt,{locationType:"galaxy",locationId:l.name,coordinates:l.coordinates.join(","),className:"text-xs"}),e.jsx(At,{type:"galaxy",name:l.name,coordinates:l.coordinates.join(","),className:"text-xs"}),e.jsx("div",{className:"inline-flex items-center bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] font-medium px-1.5 py-0.5 rounded h-[21px] box-border",children:"VISITED"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Tt,{isOnCooldown:y.isOnCooldown,isSaved:y.isSaved,isCollecting:y.isCollecting}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Details"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300",children:l.galaxy_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Solar Systems"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:l.num_systems.toLocaleString()})]})]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-gray-500/30 mb-3 col-span-2",children:e.jsx(Qt,{coordinates:l.coordinates,galaxyName:l.name})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-gray-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Cosmic Objects"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-pink-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Black Holes"}),e.jsx("div",{className:"text-xs font-bold text-pink-300",children:l.black_holes.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Pulsars"}),e.jsx("div",{className:"text-xs font-bold text-cyan-300",children:l.pulsars.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Quasars"}),e.jsx("div",{className:"text-xs font-bold text-indigo-300",children:l.quasars.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("div",{className:"text-green-400 font-medium",children:"Visited"})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:q(l.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded px-1.5 py-0.5",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:l.coordinates.join(", ")})]})]})]})]})},Ct=u.forwardRef(({galaxyType:l,numSystems:y,blackHoles:D,pulsars:q,quasars:k,seed:P=12345,onExpandClick:_,galaxyName:L,galaxyUrl:ze},Q)=>{const F=u.useRef(null),G=u.useRef(null),$=u.useRef(null),U=u.useRef(null),A=u.useRef(null),ve=u.useRef(null),X=u.useRef(null),ae=u.useRef(!1),[T,Z]=u.useState(!1),[Ne,V]=u.useState(!1),[se,le]=u.useState(!1),xe=u.useRef(null),pe=u.useRef(null),ue=u.useRef(.002),oe=u.useRef(.002),R=u.useRef(!1),_e=u.useRef(0),Ce=u.useRef(!1);u.useImperativeHandle(Q,()=>({captureScreenshot:me,isGeneratingImage:se}));class fe{seed;constructor(w){this.seed=w}random(){const w=Math.sin(this.seed++)*1e4;return w-Math.floor(w)}uniform(w,O){return w+this.random()*(O-w)}gauss(w,O){let Me=0,ge=0;for(;Me===0;)Me=this.random();for(;ge===0;)ge=this.random();const he=Math.sqrt(-2*Math.log(Me))*Math.cos(2*Math.PI*ge);return w+O*he}randint(w,O){return Math.floor(this.uniform(w,O+1))}}u.useEffect(()=>{const v=X.current;if(!v)return;const w=v.getContext("2d");if(!w)return;let O=[];const Me=800;let ge,he;const ne=800;let ee,W=.5;function p(){const i=v?.parentElement;if(!i||!v)return;const x=i.clientWidth,m=i.clientHeight;v.width=Math.min(x,ne),v.height=Math.min(m,ne),ge=v.width/2,he=v.height/2}function c(){p(),O=[];for(let i=0;i<Me;i++)O.push({x:Math.random()*(v?.width||800),y:Math.random()*(v?.height||800),z:Math.random()*(v?.width||800),o:Math.random()});n()}function n(){!v||!w||(w.clearRect(0,0,v.width,v.height),O.forEach(i=>{i.z-=W,i.z<=0&&(i.z=v.width,i.x=Math.random()*v.width,i.y=Math.random()*v.height,i.o=Math.random());const x=v.width/i.z,m=(i.x-ge)*x+ge,b=(i.y-he)*x+he,J=2*x;w.beginPath(),w.fillStyle=`rgba(255, 255, 255, ${i.o})`,w.arc(m,b,J,0,2*Math.PI),w.fill()}),!ae.current&&W<60&&(W+=1),ae.current&&W>2&&(W-=2),ee=requestAnimationFrame(n))}c();const s=()=>p();return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s),ee&&cancelAnimationFrame(ee)}},[]),u.useEffect(()=>{if(!F.current)return;const v=F.current,w=v.clientWidth,O=v.clientHeight,Me=Math.min(w,O),ge=new st;ge.background=new Fe(17),G.current=ge;const he=new ot(45,1,.1,1e4);he.position.set(0,200,400),he.lookAt(0,0,0),xe.current=he;const ne=new nt({antialias:!0,alpha:!0});ne.setSize(Me,Me),ne.setClearColor(17,1),$.current=ne,ne.domElement.className="",v.appendChild(ne.domElement);const ee=new Nt(he,ne.domElement);ee.enableDamping=!0,ee.dampingFactor=.05,ee.minDistance=50,ee.maxDistance=800,ee.autoRotate=!1,ee.enablePan=!0,ee.enableZoom=!0,ee.target.set(0,0,0),A.current=ee,ee.addEventListener("start",()=>{pe.current&&clearTimeout(pe.current),Ce.current=!0,ue.current=0,R.current=!1}),ee.addEventListener("end",()=>{Ce.current=!1,pe.current=setTimeout(()=>{R.current=!0,_e.current=performance.now(),ue.current=0},3e3)});const W=new Te;ve.current=W,ge.add(W);const p=new fe(P),c=p.uniform(0,2*Math.PI),n=new Ue,s=[],i=[],x=[],m=200;let b=y;if(l==="Spiral"){b=Math.min(y,5e4);const a=4,t=2*Math.PI/a,o=.15,g=.5,r=.1;for(let M=0;M<b*r;M++){const h=p.uniform(0,2*Math.PI),I=p.gauss(m*.1,m*.05),N=p.gauss(0,5),S=I*Math.cos(h),K=I*Math.sin(h);s.push(S,N,K),i.push(1,1,1);const d=P+M*1337,j=new fe(d),f=j.gauss(1,.3),C=j.random()<.05,E=j.random()<.3;let re=Math.max(.3,f);C&&(re*=3+j.uniform(0,2)),E&&(re*=.5+j.uniform(0,.3)),I<m*.2&&(re*=1.8+j.uniform(0,.7),i[i.length-3]=1.2,i[i.length-2]=1.1,i[i.length-1]=.9),x.push(Math.min(re*1.5,12))}for(let M=0;M<b;M++){const h=g*Math.sqrt(M/b)*2*Math.PI,I=M%a*t,N=m*Math.sqrt(M/b),S=N*Math.cos(h+I+c)+p.uniform(-o*N,o*N),K=N*Math.sin(h+I+c)+p.uniform(-o*N,o*N),d=p.gauss(0,3);s.push(S,d,K),i.push(1,1,.8);const j=P+M*1337,f=new fe(j),C=f.gauss(.8,.25),E=f.random()<.03,re=f.random()<.4;let de=Math.max(.2,C);E&&(de*=2.5+f.uniform(0,1.5)),re&&(de*=.4+f.uniform(0,.2)),N>m*.7&&(de*=.8),x.push(Math.min(de*1.3,8))}}else if(l==="Elliptical"){b=Math.min(y,1e5);for(let a=0;a<b;a++){const t=p.uniform(0,2*Math.PI),o=p.uniform(-1,1),g=Math.sqrt(1-o*o),r=p.random(),M=Math.pow(r,.6),h=-Math.log(1-M*.98)*m*.35,I=h*g*Math.cos(t),N=h*o*.6,S=h*g*Math.sin(t);s.push(I,N,S),i.push(1,.9,.7);const K=P+a*1337,d=new fe(K),j=d.gauss(.6,.2),f=d.random()<.08,C=d.random()<.25;let E=Math.max(.2,j);f&&(E*=2+d.uniform(0,1)),C&&(E*=.6+d.uniform(0,.2)),Math.sqrt(I*I+N*N+S*S)<m*.3&&(E*=1.5+d.uniform(0,.5)),x.push(Math.min(E*1.4,7))}}else if(l==="Dwarf"){let a;y<=1500?a=1:y<=5e3?a=1+(y-1500)/3500*9:y<=15e3?a=10+(y-5e3)/1e4*40:a=50+Math.min((y-15e3)/35e3,1)*50,b=Math.min(Math.floor(y/a),1e4);for(let t=0;t<b;t++){const o=p.uniform(0,2*Math.PI),g=p.uniform(0,Math.PI),r=p.gauss(m/3,m*.3),M=r*Math.sin(g)*Math.cos(o),h=r*Math.cos(g)*.5,I=r*Math.sin(g)*Math.sin(o);s.push(M,h,I),i.push(.8,.8,1);const N=P+t*1337,S=new fe(N),K=S.gauss(.7,.3),d=S.random()<.02,j=S.random()<.6;let f=Math.max(.3,K);d&&(f*=2.5+S.uniform(0,1)),j&&(f*=.5+S.uniform(0,.3)),x.push(Math.min(f*1.2,5))}}else if(l==="Singularity Void"){b=1e4;for(let be=0;be<b;be++){const je=be/b,ye=je*30*Math.PI,Pe=m*(1-je*.8)+p.uniform(-10,10),Ee=(je-.5)*300+Math.sin(ye*.5)*20,De=Pe*Math.cos(ye)+Math.sin(je*20)*10,Ae=Pe*Math.sin(ye)+Math.cos(je*20)*10;s.push(De,Ee,Ae);const Ie=(je+Math.sin(ye*.1))%1,ke=new Fe;ke.setHSL(Ie,1,.5+Math.sin(je*10)*.3),i.push(ke.r,ke.g,ke.b),x.push(p.uniform(.3,2)*(1+Math.sin(je*50)*.5))}const a=(be,je,ye=1)=>{const Pe=new Re(be,64,64),Ee=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,De=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;

          void main() {
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);

            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;

            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;

            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x +
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);

            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;

            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);

            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;

            gl_FragColor = vec4(color, ${je});
          }
        `,Ae=new Be({uniforms:{time:{value:0},speed:{value:ye}},vertexShader:Ee,fragmentShader:De,transparent:!0,blending:Le,side:Ke,depthWrite:!1}),Ie=new H(Pe,Ae);return Ie.isSingularityShader=!0,Ie.shaderSpeed=ye,Ie},t=a(250,.3,1);W.add(t);const o=a(180,.4,-.7);W.add(o);const g=a(120,.5,1.5);W.add(g);const r=a(300,.2,.5);r.scale.set(-1,1,1),W.add(r);const M=new Re(350,32,32),h=new Be({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);


            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;

            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;

          void main() {

            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;

            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;

            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Le,side:jt,depthWrite:!1}),I=new H(M,h);I.isSingularityShader=!0,I.shaderSpeed=.3,W.add(I);const N=new Ue,S=[],K=[];for(let be=0;be<1e3;be++){const je=p.uniform(-m,m),ye=p.uniform(-m/2,m/2),Pe=p.uniform(-m,m),Ee=p.uniform(-50,50),De=p.uniform(-30,30),Ae=p.uniform(-50,50);S.push(je,ye,Pe),S.push(je+Ee,ye+De,Pe+Ae);const Ie=p.random(),ke=new Fe;ke.setHSL(Ie,1,.6),K.push(ke.r,ke.g,ke.b),K.push(ke.r*.5,ke.g*.5,ke.b*.5)}N.setAttribute("position",new Se(S,3)),N.setAttribute("color",new Se(K,3));const d=new Je({vertexColors:!0,transparent:!0,opacity:.4,blending:Le}),j=new qe(N,d);j.isGlitchLines=!0,W.add(j);const f=new Te,C=new Re(20,32,32),E=new Ge({color:0,transparent:!0,opacity:.95}),re=new H(C,E);f.add(re);const de=new Qe(25,80,64),we=new Be({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;

          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);


            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;


            vec3 hotColor = vec3(1.0, 0.5, 0.0);
            vec3 coldColor = vec3(0.0, 0.3, 1.0);
            vec3 color = mix(coldColor, hotColor, intensity);


            color *= (0.7 + swirl * 0.3);


            float alpha = intensity * 0.8;

            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Le,side:Ke}),ce=new H(de,we);ce.rotation.x=Math.PI/2,ce.isAccretionDisk=!0,f.add(ce);for(let be=0;be<8;be++){const je=30+be*20,ye=new St(je,1+be*.5,8,64),Pe=new Ge({color:new Fe().setHSL((.7+be*.05)%1,1,.5),transparent:!0,opacity:.3-be*.03,wireframe:!0}),Ee=new H(ye,Pe);Ee.rotation.x=p.uniform(0,Math.PI),Ee.rotation.y=p.uniform(0,Math.PI),Ee.isDistortionRing=!0,Ee.rotationSpeed=p.uniform(.001,.005)*(be%2===0?1:-1),f.add(Ee)}W.add(f);const Xe=new et(5,100,8),$e=new He({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Le}),We=new H(Xe,$e);We.position.y=50,W.add(We);const Ve=new H(Xe,$e);Ve.position.y=-50,Ve.rotation.z=Math.PI,W.add(Ve)}const J=[],Y=new fe(P+999);for(let a=0;a<D;a++){const t=Y.uniform(-50,50),o=Y.uniform(-20,20),g=Y.uniform(-50,50),r=Y.uniform(.5,1);J.push({x:t,y:o,z:g,sizeMultiplier:r})}if(l!=="Singularity Void"){const a=[],t=[],o=[],g=[],r=[];for(let S=0;S<s.length;S+=3){const K=s[S],d=s[S+1],j=s[S+2];let f=1/0,C=null;for(const E of J){const re=Math.sqrt(Math.pow(K-E.x,2)+Math.pow(d-E.y,2)+Math.pow(j-E.z,2));re<f&&(f=re,C=E)}if(!(f<.4))if(f<10&&C){const E=1-(f-.4)/9.6;C.x-K,C.y-d,C.z-j;const re=Math.atan2(j-C.z,K-C.x),de=E*.8,we=8;for(let ye=0;ye<we-1;ye++){const Pe=ye/(we-1),Ee=(ye+1)/(we-1),De=f*(1-Pe*de*.7),Ae=re+Pe*de*1.5,Ie=C.x+De*Math.cos(Ae),ke=d+(C.y-d)*Pe*.3,Et=C.z+De*Math.sin(Ae),at=f*(1-Ee*de*.7),ct=re+Ee*de*1.5,kt=C.x+at*Math.cos(ct),Pt=d+(C.y-d)*Ee*.3,Lt=C.z+at*Math.sin(ct);g.push(Ie,ke,Et),g.push(kt,Pt,Lt)}const ce=E*1.5,Xe=i[S],$e=i[S+1],We=i[S+2],Ve=Math.min(Xe+ce,2),be=Math.max($e*(1-ce*.6),.1),je=Math.max(We*(1-ce*.8),.1);for(let ye=0;ye<we-1;ye++){const Pe=ye/(we-1),Ee=(ye+1)/(we-1),De=1-Pe*E*.6,Ae=1-Ee*E*.6,Ie=ce*(.5+Pe*.5),ke=ce*(.5+Ee*.5);r.push(Math.min(Ve+Ie*.3,2)*De,Math.max(be*(1-Ie*.2),.1)*De,Math.max(je*(1-Ie*.4),.1)*De),r.push(Math.min(Ve+ke*.3,2)*Ae,Math.max(be*(1-ke*.2),.1)*Ae,Math.max(je*(1-ke*.4),.1)*Ae)}a.push(K,d,j),t.push(Ve,be,je),o.push(Math.max(x[S/3]*(1-E*.5),.3))}else a.push(K,d,j),t.push(i[S],i[S+1],i[S+2]),o.push(x[S/3])}n.setAttribute("position",new Se(a,3)),n.setAttribute("color",new Se(t,3)),n.setAttribute("size",new Se(o,1));const I=new Be({uniforms:{},vertexShader:`
          attribute float size;
          varying vec3 vColor;
          void main() {
            vColor = color;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * (400.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
          }
        `,fragmentShader:`
          varying vec3 vColor;
          void main() {

            vec2 center = gl_PointCoord - vec2(0.5);
            float distanceFromCenter = length(center);

            if (distanceFromCenter > 0.5) {
              discard;
            }


            float alpha = 1.0 - (distanceFromCenter / 0.5);
            alpha = pow(alpha, 2.0);

            gl_FragColor = vec4(vColor, alpha * 0.8);
          }
        `,transparent:!0,blending:Le,vertexColors:!0,depthWrite:!1}),N=new tt(n,I);if(W.add(N),g.length>0){const S=new Ue;S.setAttribute("position",new Se(g,3)),S.setAttribute("color",new Se(r,3));const K=new Je({vertexColors:!0,transparent:!0,opacity:.8,linewidth:2,blending:Le}),d=new qe(S,K);W.add(d)}}else{n.setAttribute("position",new Se(s,3)),n.setAttribute("color",new Se(i,3)),n.setAttribute("size",new Se(x,1));const a=new Rt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Le,sizeAttenuation:!0}),t=new tt(n,a);W.add(t)}for(let a=0;a<D;a++){const t=new Te,o=l!=="Singularity Void"&&a<J.length?J[a]:{x:p.uniform(-50,50),y:p.uniform(-20,20),z:p.uniform(-50,50),sizeMultiplier:p.uniform(.5,1)},{x:g,y:r,z:M,sizeMultiplier:h}=o,I=new Re(.8*h,16,16),N=new Ge({color:0,transparent:!0,opacity:.9}),S=new H(I,N);t.add(S),[{innerRadius:1.2*h,outerRadius:1.5*h,color:16777215,opacity:.8,emissive:16777164},{innerRadius:1.5*h,outerRadius:1.8*h,color:16755200,opacity:.7,emissive:16746496},{innerRadius:1.8*h,outerRadius:2.2*h,color:16729088,opacity:.6,emissive:16720384},{innerRadius:2.2*h,outerRadius:2.8*h,color:11141120,opacity:.5,emissive:6684672},{innerRadius:2.8*h,outerRadius:3.5*h,color:4456448,opacity:.3,emissive:2228224}].forEach((d,j)=>{const f=new Qe(d.innerRadius,d.outerRadius,32),C=new He({color:d.color,transparent:!0,opacity:d.opacity,emissive:d.emissive,emissiveIntensity:.3,side:Ke}),E=new H(f,C);E.rotation.x=Math.PI/2,E.rotation.z=p.uniform(0,Math.PI*2),E.isAccretionRing=!0,E.rotationSpeed=.002+j*5e-4,t.add(E)}),t.position.set(g,r,M),W.add(t)}for(let a=0;a<q;a++){const t=p.uniform(.6,1),o=new Re(t,8,8),g=new He({color:16776960,emissive:16776960,emissiveIntensity:1}),r=new H(o,g);r.position.set(p.uniform(-m,m),p.uniform(-m/4,m/4),p.uniform(-m,m)),r.isPulsar=!0,r.pulseSpeed=p.uniform(1,3),W.add(r)}for(let a=0;a<k;a++){const t=new Te,o=p.uniform(.8,1.3),g=new Re(o,16,16),r=new He({color:16777215,emissive:16777215,emissiveIntensity:2}),M=new H(g,r);t.add(M);const h=new et(.5*o,12*o,8),I=new He({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),N=new H(h,I);N.position.y=6*o,t.add(N);const S=new H(h,I);S.position.y=-6*o,S.rotation.z=Math.PI,t.add(S),t.position.set(p.uniform(-m,m),p.uniform(-m/4,m/4),p.uniform(-m,m)),W.add(t)}const z=new it(4210752,.5);ge.add(z);const ie=new zt(16777215,.5,1e3);ie.position.set(0,100,0),ge.add(ie);const B=()=>{U.current=requestAnimationFrame(B);const a=performance.now()/1e3;if(ve.current&&!Ce.current){if(R.current){const o=performance.now()-_e.current,g=3e3;if(o<g){const r=o/g,M=r*r*r;ue.current=oe.current*M}else ue.current=oe.current,R.current=!1}ve.current.rotation.y+=ue.current}W.children.forEach(t=>{if(t.isPulsar){const o=t.pulseSpeed||1;t.scale.setScalar(1+Math.sin(Date.now()*.001*o)*.3)}if(t.isSingularityShader&&t instanceof H){const o=t.material;o.uniforms&&o.uniforms.time&&(o.uniforms.time.value=a);const g=t.shaderSpeed||1;t.rotation.y+=.001*g,t.rotation.x+=5e-4*g}if(t.isAccretionDisk&&t instanceof H){const o=t.material;o.uniforms&&o.uniforms.time&&(o.uniforms.time.value=a),t.rotation.z+=.002}if(t.isDistortionRing){const o=t.rotationSpeed||.001;t.rotation.x+=o,t.rotation.y+=o*.7,t.scale.setScalar(1+Math.sin(a*2)*.1)}if(t.isGlitchLines&&t instanceof qe){const o=t.material;o.opacity=.2+Math.sin(a*3)*.2,t.rotation.z+=5e-4}t instanceof Te&&t.children.forEach(o=>{if(o.isAccretionDisk&&o instanceof H){const g=o.material;g.uniforms&&g.uniforms.time&&(g.uniforms.time.value=a),o.rotation.z+=.002}if(o.isAccretionRing&&o instanceof H){const g=o.rotationSpeed||.002;o.rotation.z+=g}if(o.isDistortionRing){const g=o.rotationSpeed||.001;o.rotation.x+=g,o.rotation.y+=g*.7,o.scale.setScalar(1+Math.sin(a*2)*.1)}})}),A.current&&A.current.update(),ne.render(ge,he)};B(),setTimeout(()=>{Z(!0),V(!0),ae.current=!0},800);const te=()=>{if(!F.current||!ne)return;const a=F.current,t=Math.min(a.clientWidth,a.clientHeight);ne.setSize(t,t),he.aspect=1,he.updateProjectionMatrix()};return window.addEventListener("resize",te),()=>{window.removeEventListener("resize",te),pe.current&&clearTimeout(pe.current),A.current&&A.current.dispose(),U.current&&cancelAnimationFrame(U.current),v&&ne.domElement&&v.removeChild(ne.domElement),ne.dispose()}},[l,y,D,q,k,P]);const me=()=>{if(!$.current||!G.current||!xe.current||se)return;le(!0),A.current&&(A.current.enabled=!1);const v=$.current,w=G.current,O=xe.current,Me=v.domElement.width,ge=v.domElement.height,he=3840/Me,ne=[];w.traverse(p=>{if(p.isPoints&&p.material){const c=p.material;if(c.size!==void 0&&(ne.push({material:c,originalSize:c.size}),c.size=c.size*he*1),c.uniforms&&c.uniforms.scale&&(ne.push({material:c,originalScale:c.uniforms.scale.value}),c.uniforms.scale.value=c.uniforms.scale.value*he*1),p.geometry&&p.geometry.attributes.size){const n=p.geometry.attributes.size,s=n.array.slice();ne.push({geometry:p.geometry,originalSizeArray:s});for(let i=0;i<n.array.length;i++)n.array[i]*=he*1;n.needsUpdate=!0}}});const ee=3840,W=3840;v.setSize(ee,W),O.aspect=1,O.updateProjectionMatrix(),v.render(w,O),v.domElement.toBlob(p=>{if(p){const c=document.createElement("canvas"),n=c.getContext("2d");if(c.width=ee,c.height=W,n){const s=new Image;s.onload=async()=>{n.drawImage(s,0,0),Xt(n,{imageWidth:ee,imageHeight:W}),ze&&await Ot(n,ee,W,{type:"galaxy",stargateUrl:ze}),c.toBlob(x=>{if(x){const m=URL.createObjectURL(x),b=document.createElement("a");b.href=m,b.download=`galaxy_${L||l}_${Date.now()}.jpg`,b.click(),URL.revokeObjectURL(m)}},"image/jpeg",1)};const i=URL.createObjectURL(p);s.src=i}}ne.forEach(({material:c,originalSize:n,originalScale:s,geometry:i,originalSizeArray:x})=>{if(n!==void 0&&(c.size=n),s!==void 0&&(c.uniforms.scale.value=s),i&&x){const m=i.attributes.size;for(let b=0;b<x.length;b++)m.array[b]=x[b];m.needsUpdate=!0}}),v.setSize(Me,ge),O.aspect=1,O.updateProjectionMatrix(),A.current&&(A.current.enabled=!0),le(!1)},"image/jpeg",1)};return e.jsxs("div",{className:"relative w-full h-full bg-black rounded",children:[e.jsx("canvas",{ref:X,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${Ne?"opacity-0":"opacity-100"}`,style:{filter:Ne?"blur(50px)":"none"}}),e.jsxs("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${T?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:[e.jsx("div",{ref:F,className:"w-full h-full border border-white/20 rounded bg-black/20"}),e.jsx(Zt,{isVisible:se}),T&&L&&e.jsx("div",{className:"absolute bottom-0 left-0 p-2 text-white bg-black bg-opacity-50 max-w-xs rounded-tr-lg",children:e.jsx("h3",{className:"text-xs font-bold",children:L})}),T&&e.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 z-10",children:[e.jsx("button",{onClick:me,disabled:se,className:`p-2 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg ${se?"bg-black/40 cursor-not-allowed opacity-50":"bg-black/60 hover:bg-black/80"}`,title:se?"Generating image...":"Download 4K screenshot",children:se?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(_t,{className:"w-4 h-4 text-white"})}),_&&e.jsx("button",{onClick:_,disabled:se,className:`p-2 border border-white/30 rounded-lg transition-all duration-200 backdrop-blur-sm shadow-lg ${se?"bg-black/40 cursor-not-allowed opacity-50":"bg-black/60 hover:bg-black/80"}`,title:se?"Please wait...":"Expand to fullscreen",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]})]})});Ct.displayName="Galaxy3DViewer";const tn=({galaxyType:l,numSystems:y,blackHoles:D,pulsars:q,quasars:k,seed:P=12345,galaxyName:_})=>{const L=u.useRef(null),ze=u.useRef(null),Q=u.useRef(null),F=u.useRef(null),G=u.useRef(null),$=u.useRef(null),U=u.useRef(null),A=u.useRef(.002),ve=u.useRef(.002),X=u.useRef(!1),ae=u.useRef(0),T=u.useRef(!1);class Z{seed;constructor(V){this.seed=V}random(){const V=Math.sin(this.seed++)*1e4;return V-Math.floor(V)}uniform(V,se){return V+this.random()*(se-V)}gauss(V,se){let le=0,xe=0;for(;le===0;)le=this.random();for(;xe===0;)xe=this.random();const pe=Math.sqrt(-2*Math.log(le))*Math.cos(2*Math.PI*xe);return V+se*pe}randint(V,se){return Math.floor(this.uniform(V,se+1))}}return u.useEffect(()=>{if(!L.current)return;const Ne=L.current,V=Ne.clientWidth,se=Ne.clientHeight,le=new st;le.background=new Fe(17),ze.current=le;const xe=new ot(45,V/se,.1,1e4);xe.position.set(0,200,400),xe.lookAt(0,0,0);const pe=new nt({antialias:!0,alpha:!0});pe.setSize(V,se),pe.setClearColor(17,1),Q.current=pe,Ne.appendChild(pe.domElement);const ue=new Nt(xe,pe.domElement);ue.enableDamping=!0,ue.dampingFactor=.05,ue.minDistance=50,ue.maxDistance=1200,ue.autoRotate=!1,ue.enablePan=!0,ue.enableZoom=!0,ue.target.set(0,0,0),G.current=ue,ue.addEventListener("start",()=>{U.current&&clearTimeout(U.current),T.current=!0,A.current=0,X.current=!1}),ue.addEventListener("end",()=>{T.current=!1,U.current=setTimeout(()=>{X.current=!0,ae.current=performance.now(),A.current=0},3e3)});const oe=new Te;$.current=oe,le.add(oe);const R=new Z(P),_e=R.uniform(0,2*Math.PI),Ce=new Ue,fe=[],me=[],v=[],w=200;let O=y;if(l==="Spiral"){O=Math.min(y,5e4);const c=4,n=2*Math.PI/c,s=.15,i=.5,x=.1;for(let m=0;m<O*x;m++){const b=R.uniform(0,2*Math.PI),J=R.gauss(w*.1,w*.05),Y=R.gauss(0,5),z=J*Math.cos(b),ie=J*Math.sin(b);fe.push(z,Y,ie),me.push(1,1,1);const B=P+m*1337,te=new Z(B),a=te.gauss(1,.3),t=te.random()<.05,o=te.random()<.3;let g=Math.max(.3,a);t&&(g*=3+te.uniform(0,2)),o&&(g*=.5+te.uniform(0,.3)),J<w*.2&&(g*=1.8+te.uniform(0,.7),me[me.length-3]=1.2,me[me.length-2]=1.1,me[me.length-1]=.9),v.push(Math.min(g*1.5,12))}for(let m=0;m<O;m++){const b=i*Math.sqrt(m/O)*2*Math.PI,J=m%c*n,Y=w*Math.sqrt(m/O),z=Y*Math.cos(b+J+_e)+R.uniform(-s*Y,s*Y),ie=Y*Math.sin(b+J+_e)+R.uniform(-s*Y,s*Y),B=R.gauss(0,3);fe.push(z,B,ie),me.push(1,1,.8);const te=P+m*1337,a=new Z(te),t=a.gauss(.8,.25),o=a.random()<.03,g=a.random()<.4;let r=Math.max(.2,t);o&&(r*=2.5+a.uniform(0,1.5)),g&&(r*=.4+a.uniform(0,.2)),Y>w*.7&&(r*=.8),v.push(Math.min(r*1.3,8))}}else if(l==="Elliptical"){O=Math.min(y,1e5);for(let c=0;c<O;c++){const n=R.uniform(0,2*Math.PI),s=R.uniform(-1,1),i=Math.sqrt(1-s*s),x=R.random(),m=Math.pow(x,.6),b=-Math.log(1-m*.98)*w*.35,J=b*i*Math.cos(n),Y=b*s*.6,z=b*i*Math.sin(n);fe.push(J,Y,z),me.push(1,.9,.7);const ie=P+c*1337,B=new Z(ie),te=B.gauss(.6,.2),a=B.random()<.08,t=B.random()<.25;let o=Math.max(.2,te);a&&(o*=2+B.uniform(0,1)),t&&(o*=.6+B.uniform(0,.2)),Math.sqrt(J*J+Y*Y+z*z)<w*.3&&(o*=1.5+B.uniform(0,.5)),v.push(Math.min(o*1.4,7))}}else if(l==="Dwarf"){let c;y<=1500?c=1:y<=5e3?c=1+(y-1500)/3500*9:y<=15e3?c=10+(y-5e3)/1e4*40:c=50+Math.min((y-15e3)/35e3,1)*50,O=Math.min(Math.floor(y/c),1e4);for(let n=0;n<O;n++){const s=R.uniform(0,2*Math.PI),i=R.uniform(0,Math.PI),x=R.gauss(w/3,w*.3),m=x*Math.sin(i)*Math.cos(s),b=x*Math.cos(i)*.5,J=x*Math.sin(i)*Math.sin(s);fe.push(m,b,J),me.push(.8,.8,1);const Y=P+n*1337,z=new Z(Y),ie=z.gauss(.7,.3),B=z.random()<.02,te=z.random()<.6;let a=Math.max(.3,ie);B&&(a*=2.5+z.uniform(0,1)),te&&(a*=.5+z.uniform(0,.3)),v.push(Math.min(a*1.2,5))}}else if(l==="Singularity Void"){O=1e4;for(let d=0;d<O;d++){const j=d/O,f=j*30*Math.PI,C=w*(1-j*.8)+R.uniform(-10,10),E=(j-.5)*300+Math.sin(f*.5)*20,re=C*Math.cos(f)+Math.sin(j*20)*10,de=C*Math.sin(f)+Math.cos(j*20)*10;fe.push(re,E,de);const we=(j+Math.sin(f*.1))%1,ce=new Fe;ce.setHSL(we,1,.5+Math.sin(j*10)*.3),me.push(ce.r,ce.g,ce.b),v.push(R.uniform(.3,2)*(1+Math.sin(j*50)*.5))}const c=(d,j,f=1)=>{const C=new Re(d,64,64),E=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          void main() {
            vUv = uv;
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,re=`
          varying vec2 vUv;
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          uniform float speed;
          
          void main() {
            float theta = atan(vPosition.z, vPosition.x);
            float phi = acos(vPosition.y / length(vPosition));
            vec2 p = vec2(theta / 3.14159, phi / 3.14159);
            
            float a = time * 40.0 * speed;
            float d, e, f, g = 1.0 / 40.0, h, i, r, q;
            
            e = 400.0 * (p.x * 0.5 + 0.5);
            f = 400.0 * (p.y * 0.5 + 0.5);
            i = 200.0 + sin(e * g + a / 150.0) * 20.0;
            d = 200.0 + cos(f * g / 2.0) * 18.0 + cos(e * g) * 7.0;
            r = sqrt(pow(abs(i - e), 2.0) + pow(abs(d - f), 2.0));
            q = f / r;
            e = (r * cos(q)) - a / 2.0;
            f = (r * sin(q)) - a / 2.0;
            d = sin(e * g) * 176.0 + sin(e * g) * 164.0 + r;
            h = ((f + d) + a / 2.0) * g;
            i = cos(h + r * p.x / 1.3) * (e + e + a) + cos(q * g * 6.0) * (r + h / 3.0);
            h = sin(f * g) * 144.0 - sin(e * g) * 212.0 * p.x;
            h = (h + (f - e) * q + sin(r - (a + h) / 7.0) * 10.0 + i / 4.0) * g;
            i += cos(h * 2.3 * sin(a / 350.0 - q)) * 184.0 * sin(q - (r * 4.3 + a / 12.0) * g) + tan(r * g + h) * 184.0 * cos(r * g + h);
            i = mod(i / 5.6, 256.0) / 64.0;
            if (i < 0.0) i += 4.0;
            if (i >= 2.0) i = 4.0 - i;
            d = r / 350.0;
            d += sin(d * d * 8.0) * 0.52;
            f = (sin(a * g) + 1.0) / 2.0;
            
            vec3 color = vec3(f * i / 1.6, i / 2.0 + d / 13.0, i) * d * p.x + 
                         vec3(i / 1.3 + d / 8.0, i / 2.0 + d / 18.0, i) * d * (1.0 - p.x);
            
            float depth = dot(vNormal, vec3(0.0, 0.0, 1.0));
            color *= 0.7 + depth * 0.3;
            
            color = mix(color, vec3(0.5, 0.0, 1.0), 0.3);
            
            float edgeFactor = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 2.0);
            color += vec3(0.5, 0.0, 1.0) * edgeFactor * 0.5;
            
            gl_FragColor = vec4(color, ${j});
          }
        `,de=new Be({uniforms:{time:{value:0},speed:{value:f}},vertexShader:E,fragmentShader:re,transparent:!0,blending:Le,side:Ke,depthWrite:!1}),we=new H(C,de);return we.isSingularityShader=!0,we.shaderSpeed=f,we},n=c(250,.3,1);oe.add(n);const s=c(180,.4,-.7);oe.add(s);const i=c(120,.5,1.5);oe.add(i);const x=c(300,.2,.5);x.scale.set(-1,1,1),oe.add(x);const m=new Re(350,32,32),b=new Be({uniforms:{time:{value:0}},vertexShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          void main() {
            vPosition = position;
            vNormal = normalize(normalMatrix * normal);
            
            vec3 distortedPosition = position;
            float distortion = sin(time * 0.5 + length(position) * 0.01) * 5.0;
            distortedPosition += normal * distortion;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4(distortedPosition, 1.0);
          }
        `,fragmentShader:`
          varying vec3 vPosition;
          varying vec3 vNormal;
          uniform float time;
          
          void main() {
            float fresnel = pow(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0))), 3.0);
            float wave = sin(time * 2.0 + length(vPosition) * 0.05) * 0.5 + 0.5;
            
            vec3 color = vec3(0.1, 0.0, 0.3) * fresnel * wave;
            float alpha = fresnel * 0.1 * wave;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Le,side:jt,depthWrite:!1}),J=new H(m,b);J.isSingularityShader=!0,J.shaderSpeed=.3,oe.add(J);const Y=new Ue,z=[],ie=[];for(let d=0;d<1e3;d++){const j=R.uniform(-w,w),f=R.uniform(-w/2,w/2),C=R.uniform(-w,w),E=R.uniform(-50,50),re=R.uniform(-30,30),de=R.uniform(-50,50);z.push(j,f,C),z.push(j+E,f+re,C+de);const we=R.random(),ce=new Fe;ce.setHSL(we,1,.6),ie.push(ce.r,ce.g,ce.b),ie.push(ce.r*.5,ce.g*.5,ce.b*.5)}Y.setAttribute("position",new Se(z,3)),Y.setAttribute("color",new Se(ie,3));const B=new Je({vertexColors:!0,transparent:!0,opacity:.4,blending:Le}),te=new qe(Y,B);te.isGlitchLines=!0,oe.add(te);const a=new Te,t=new Re(20,32,32),o=new Ge({color:0,transparent:!0,opacity:.95}),g=new H(t,o);a.add(g);const r=new Qe(25,80,64),M=new Be({uniforms:{time:{value:0},innerRadius:{value:25},outerRadius:{value:80}},vertexShader:`
          varying vec2 vUv;
          varying float vRadius;
          void main() {
            vUv = uv;
            vec4 worldPosition = modelMatrix * vec4(position, 1.0);
            vRadius = length(worldPosition.xy);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `,fragmentShader:`
          uniform float time;
          uniform float innerRadius;
          uniform float outerRadius;
          varying vec2 vUv;
          varying float vRadius;
          
          void main() {
            float normalizedRadius = (vRadius - innerRadius) / (outerRadius - innerRadius);
            float angle = atan(vUv.y - 0.5, vUv.x - 0.5);
            
            float swirl = sin(angle * 5.0 - time * 2.0 + normalizedRadius * 10.0) * 0.5 + 0.5;
            float intensity = 1.0 - normalizedRadius;
            
            vec3 hotColor = vec3(1.0, 0.5, 0.0);
            vec3 coldColor = vec3(0.0, 0.3, 1.0);
            vec3 color = mix(coldColor, hotColor, intensity);
            
            color *= (0.7 + swirl * 0.3);
            
            float alpha = intensity * 0.8;
            
            gl_FragColor = vec4(color, alpha);
          }
        `,transparent:!0,blending:Le,side:Ke}),h=new H(r,M);h.rotation.x=Math.PI/2,h.isAccretionDisk=!0,a.add(h);for(let d=0;d<8;d++){const j=30+d*20,f=new St(j,1+d*.5,8,64),C=new Ge({color:new Fe().setHSL((.7+d*.05)%1,1,.5),transparent:!0,opacity:.3-d*.03,wireframe:!0}),E=new H(f,C);E.rotation.x=R.uniform(0,Math.PI),E.rotation.y=R.uniform(0,Math.PI),E.isDistortionRing=!0,E.rotationSpeed=R.uniform(.001,.005)*(d%2===0?1:-1),a.add(E)}oe.add(a);const I=new et(5,100,8),N=new He({color:16711935,transparent:!0,opacity:.6,emissive:16711935,emissiveIntensity:1,blending:Le}),S=new H(I,N);S.position.y=50,oe.add(S);const K=new H(I,N);K.position.y=-50,K.rotation.z=Math.PI,oe.add(K)}const Me=[],ge=new Z(P+999);for(let c=0;c<D;c++){const n=ge.uniform(-50,50),s=ge.uniform(-20,20),i=ge.uniform(-50,50),x=ge.uniform(.5,1);Me.push({x:n,y:s,z:i,sizeMultiplier:x})}if(l!=="Singularity Void"){const c=[],n=[],s=[],i=[],x=[];for(let z=0;z<fe.length;z+=3){const ie=fe[z],B=fe[z+1],te=fe[z+2];let a=1/0,t=null;for(const o of Me){const g=Math.sqrt(Math.pow(ie-o.x,2)+Math.pow(B-o.y,2)+Math.pow(te-o.z,2));g<a&&(a=g,t=o)}if(!(a<.4))if(a<10&&t){const o=1-(a-.4)/9.6;t.x-ie,t.y-B,t.z-te;const g=Math.atan2(te-t.z,ie-t.x),r=o*.8,M=8;for(let f=0;f<M-1;f++){const C=f/(M-1),E=(f+1)/(M-1),re=a*(1-C*r*.7),de=g+C*r*1.5,we=t.x+re*Math.cos(de),ce=B+(t.y-B)*C*.3,Xe=t.z+re*Math.sin(de),$e=a*(1-E*r*.7),We=g+E*r*1.5,Ve=t.x+$e*Math.cos(We),be=B+(t.y-B)*E*.3,je=t.z+$e*Math.sin(We);i.push(we,ce,Xe),i.push(Ve,be,je)}const h=o*1.5,I=me[z],N=me[z+1],S=me[z+2],K=Math.min(I+h,2),d=Math.max(N*(1-h*.6),.1),j=Math.max(S*(1-h*.8),.1);for(let f=0;f<M-1;f++){const C=f/(M-1),E=(f+1)/(M-1),re=1-C*o*.6,de=1-E*o*.6,we=h*(.5+C*.5),ce=h*(.5+E*.5);x.push(Math.min(K+we*.3,2)*re,Math.max(d*(1-we*.2),.1)*re,Math.max(j*(1-we*.4),.1)*re),x.push(Math.min(K+ce*.3,2)*de,Math.max(d*(1-ce*.2),.1)*de,Math.max(j*(1-ce*.4),.1)*de)}c.push(ie,B,te),n.push(K,d,j),s.push(Math.max(v[z/3]*(1-o*.5),.3))}else c.push(ie,B,te),n.push(me[z],me[z+1],me[z+2]),s.push(v[z/3])}Ce.setAttribute("position",new Se(c,3)),Ce.setAttribute("color",new Se(n,3)),Ce.setAttribute("size",new Se(s,1));const J=new Be({uniforms:{},vertexShader:`
          attribute float size;
          varying vec3 vColor;
          void main() {
            vColor = color;
            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
            gl_PointSize = size * (400.0 / -mvPosition.z);
            gl_Position = projectionMatrix * mvPosition;
          }
        `,fragmentShader:`
          varying vec3 vColor;
          void main() {
            vec2 center = gl_PointCoord - vec2(0.5);
            float distanceFromCenter = length(center);
            
            if (distanceFromCenter > 0.5) {
              discard;
            }
            
            float alpha = 1.0 - (distanceFromCenter / 0.5);
            alpha = pow(alpha, 2.0);
            
            gl_FragColor = vec4(vColor, alpha * 0.8);
          }
        `,transparent:!0,blending:Le,vertexColors:!0,depthWrite:!1}),Y=new tt(Ce,J);if(oe.add(Y),i.length>0){const z=new Ue;z.setAttribute("position",new Se(i,3)),z.setAttribute("color",new Se(x,3));const ie=new Je({vertexColors:!0,transparent:!0,opacity:.8,linewidth:2,blending:Le}),B=new qe(z,ie);oe.add(B)}}else{Ce.setAttribute("position",new Se(fe,3)),Ce.setAttribute("color",new Se(me,3)),Ce.setAttribute("size",new Se(v,1));const c=new Rt({size:2,vertexColors:!0,transparent:!0,opacity:.8,blending:Le,sizeAttenuation:!0}),n=new tt(Ce,c);oe.add(n)}for(let c=0;c<D;c++){const n=new Te,s=c<Me.length?Me[c]:{x:R.uniform(-50,50),y:R.uniform(-20,20),z:R.uniform(-50,50),sizeMultiplier:R.uniform(.5,1)},{x:i,y:x,z:m,sizeMultiplier:b}=s,J=new Re(.8*b,16,16),Y=new Ge({color:0,transparent:!0,opacity:.9}),z=new H(J,Y);n.add(z),[{innerRadius:1.2*b,outerRadius:1.5*b,color:16777215,opacity:.8,emissive:16777164},{innerRadius:1.5*b,outerRadius:1.8*b,color:16755200,opacity:.7,emissive:16746496},{innerRadius:1.8*b,outerRadius:2.2*b,color:16729088,opacity:.6,emissive:16720384},{innerRadius:2.2*b,outerRadius:2.8*b,color:11141120,opacity:.5,emissive:6684672},{innerRadius:2.8*b,outerRadius:3.5*b,color:4456448,opacity:.3,emissive:2228224}].forEach((B,te)=>{const a=new Qe(B.innerRadius,B.outerRadius,32),t=new He({color:B.color,transparent:!0,opacity:B.opacity,emissive:B.emissive,emissiveIntensity:.3,side:Ke}),o=new H(a,t);o.rotation.x=Math.PI/2,o.rotation.z=R.uniform(0,Math.PI*2),o.isAccretionRing=!0,o.rotationSpeed=.002+te*5e-4,n.add(o)}),n.position.set(i,x,m),oe.add(n)}for(let c=0;c<q;c++){const n=R.uniform(.6,1),s=new Re(n,8,8),i=new He({color:16776960,emissive:16776960,emissiveIntensity:1}),x=new H(s,i);x.position.set(R.uniform(-w,w),R.uniform(-w/4,w/4),R.uniform(-w,w)),x.isPulsar=!0,x.pulseSpeed=R.uniform(1,3),oe.add(x)}for(let c=0;c<k;c++){const n=new Te,s=R.uniform(.8,1.3),i=new Re(s,16,16),x=new He({color:16777215,emissive:16777215,emissiveIntensity:2}),m=new H(i,x);n.add(m);const b=new et(.5*s,12*s,8),J=new He({color:16711680,transparent:!0,opacity:.6,emissive:16711680,emissiveIntensity:.5}),Y=new H(b,J);Y.position.y=6*s,n.add(Y);const z=new H(b,J);z.position.y=-6*s,z.rotation.z=Math.PI,n.add(z),n.position.set(R.uniform(-w,w),R.uniform(-w/4,w/4),R.uniform(-w,w)),oe.add(n)}const he=new it(4210752,.5);le.add(he);const ne=new zt(16777215,.5,1e3);ne.position.set(0,100,0),le.add(ne);const ee=c=>{c.key==="Escape"&&document.dispatchEvent(new CustomEvent("galaxy-close-fullscreen"))};document.addEventListener("keydown",ee);const W=()=>{F.current=requestAnimationFrame(W);const c=performance.now()/1e3;if($.current&&!T.current){if(X.current){const s=performance.now()-ae.current,i=3e3;if(s<i){const x=s/i,m=x*x*x;A.current=ve.current*m}else A.current=ve.current,X.current=!1}$.current.rotation.y+=A.current}oe.children.forEach(n=>{if(n.isPulsar){const s=n.pulseSpeed||1;n.scale.setScalar(1+Math.sin(Date.now()*.001*s)*.3)}if(n.isSingularityShader&&n instanceof H){const s=n.material;s.uniforms&&s.uniforms.time&&(s.uniforms.time.value=c);const i=n.shaderSpeed||1;n.rotation.y+=.001*i,n.rotation.x+=5e-4*i}if(n.isAccretionDisk&&n instanceof H){const s=n.material;s.uniforms&&s.uniforms.time&&(s.uniforms.time.value=c),n.rotation.z+=.002}if(n.isDistortionRing){const s=n.rotationSpeed||.001;n.rotation.x+=s,n.rotation.y+=s*.7,n.scale.setScalar(1+Math.sin(c*2)*.1)}if(n.isGlitchLines&&n instanceof qe){const s=n.material;s.opacity=.2+Math.sin(c*3)*.2,n.rotation.z+=5e-4}n instanceof Te&&n.children.forEach(s=>{if(s.isAccretionDisk&&s instanceof H){const i=s.material;i.uniforms&&i.uniforms.time&&(i.uniforms.time.value=c),s.rotation.z+=.002}if(s.isAccretionRing&&s instanceof H){const i=s.rotationSpeed||.002;s.rotation.z+=i}if(s.isDistortionRing){const i=s.rotationSpeed||.001;s.rotation.x+=i,s.rotation.y+=i*.7,s.scale.setScalar(1+Math.sin(c*2)*.1)}})}),G.current&&G.current.update(),pe.render(le,xe)};W();const p=()=>{if(!L.current||!pe)return;const c=L.current,n=c.clientWidth,s=c.clientHeight;pe.setSize(n,s),xe.aspect=n/s,xe.updateProjectionMatrix()};return window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p),document.removeEventListener("keydown",ee),U.current&&clearTimeout(U.current),G.current&&G.current.dispose(),F.current&&cancelAnimationFrame(F.current),Ne&&pe.domElement&&Ne.removeChild(pe.domElement),pe.dispose()}},[l,y,D,q,k,P]),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{ref:L,className:"w-full h-full"}),_&&e.jsx("div",{className:"absolute bottom-0 left-0 p-2 text-white bg-black bg-opacity-50 max-w-xs rounded-tr-lg",children:e.jsx("h3",{className:"text-xs font-bold",children:_})})]})},nn=({galaxyUrl:l,galaxyType:y="Spiral",numSystems:D=1e4,blackHoles:q=5,pulsars:k=10,quasars:P=3,galaxyName:_})=>{const[L,ze]=u.useState(!1),[Q,F]=u.useState(!1),[G,$]=u.useState(!1),[U,A]=u.useState(!1),[ve,X]=u.useState(!1),ae=u.useRef(null);u.useEffect(()=>{const Z=document.createElement("style");return Z.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(Z),()=>{document.head.removeChild(Z)}},[]);const T=()=>{F(!0),setTimeout(()=>{ze(!1),F(!1)},300)};return u.useEffect(()=>(document.addEventListener("galaxy-close-fullscreen",T),()=>{document.removeEventListener("galaxy-close-fullscreen",T)}),[]),u.useEffect(()=>{if(G){const Z=setTimeout(()=>$(!1),50);return()=>clearTimeout(Z)}},[G]),u.useEffect(()=>{const Z=setInterval(()=>{ae.current&&U&&!ae.current.isGeneratingImage&&U&&A(!1)},50);return()=>clearInterval(Z)},[U]),u.useEffect(()=>{const Z=()=>{X(!0)},Ne=pt.subscribe("mining_completed",Z);return()=>{Ne()}},[]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Galaxy Visualization"})}),e.jsxs("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:[e.jsx(Ct,{ref:ae,galaxyType:y,numSystems:D,blackHoles:q,pulsars:k,quasars:P,galaxyName:_,galaxyUrl:l,onExpandClick:()=>{ze(!0),$(!0)}}),e.jsx(Ht,{isActive:ve,onAnimationComplete:()=>{X(!1)}})]}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsx(Ft,{href:l,onTakeScreenshot:()=>{ae.current&&!U&&(A(!0),ae.current.captureScreenshot())},isGeneratingImage:U}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]}),L&&ht.createPortal(e.jsx("div",{className:`fixed inset-0 z-50 bg-black/95 backdrop-blur-xl transition-all duration-300 ${Q||G?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:e.jsxs("div",{className:`w-full h-full flex flex-col p-1 sm:p-2 transition-all duration-300 delay-75 ${Q||G?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx("h2",{className:"text-xs font-medium text-white",children:"Galaxy View"})}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Galaxy Visualization"}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Type: ",y," • Systems: ",D.toLocaleString()]})]})}),e.jsx("button",{onClick:T,className:"p-0.5 sm:p-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded transition-colors duration-200 text-red-400 hover:text-red-300",title:"Close",children:e.jsx("svg",{className:"w-3 h-3 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 border border-white/20 rounded-lg bg-black/20 overflow-hidden min-h-0",children:e.jsx(tn,{galaxyType:y,numSystems:D,blackHoles:q,pulsars:k,quasars:P,galaxyName:_})}),e.jsxs("div",{className:"mt-2 sm:mt-4 text-center text-xs sm:text-sm text-gray-400",children:[e.jsx("div",{className:"hidden sm:block",children:"Scroll: Zoom • Drag: Rotate View • ESC: Close"}),e.jsx("div",{className:"sm:hidden",children:"Pinch: Zoom • Drag: Rotate • ESC: Close"})]})]})}),document.body)]})},sn=({systems:l,coordinates:y})=>{const[D,q]=u.useState(new Map);return u.useEffect(()=>{(()=>{try{const P=new Map;l.forEach(_=>{const L=Ut(y,_.index,_.num_planets||1);P.set(_.index,L)}),q(P)}catch{}})()},[y,l]),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:l.map(k=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[(()=>{const P=D.get(k.index)||"none";return P==="complete"?e.jsx("div",{className:"absolute top-1 right-1 bg-green-500/20 border border-green-500/50 text-green-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"VISITED"}):P==="partial"?e.jsx("div",{className:"absolute top-1 right-1 bg-yellow-500/20 border border-yellow-500/50 text-yellow-400 text-[10px] px-1.5 py-0.5 rounded z-10",children:"PARTIAL"}):null})(),e.jsxs("button",{onClick:()=>window.location.href=`/system/${k.index}`,className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["#",k.number]}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:k.name})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},k.index))}),l.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No systems found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This galaxy appears to be empty"})]})]})},on=({currentGalaxy:l})=>{const[y,D]=u.useState(!1),[q,k]=u.useState(!1),[P,_]=u.useState(!0),L=1e7;u.useEffect(()=>{const[$,U,A]=l.coordinates,ve=!($===0&&U===0&&A===0),X=!($===L&&U===L&&A===L);D(ve),k(X),_(!1)},[l.coordinates]);const ze=()=>{const[$,U,A]=l.coordinates;return A>0?[$,U,A-1]:U>0?[$,U-1,L]:$>0?[$-1,L,L]:[0,0,0]},Q=()=>{const[$,U,A]=l.coordinates;return A<L?[$,U,A+1]:U<L?[$,U+1,0]:$<L?[$+1,0,0]:[L,L,L]},F=()=>{if(y){if(!Oe.canAffordTravel("galaxy",1)){Oe.executeTravel("galaxy",1);return}if(!Oe.executeTravel("galaxy",1))return;const[U,A,ve]=ze(),X=document.createElement("form");X.method="POST",X.action="/navigate";const ae=document.createElement("input");ae.type="hidden",ae.name="x",ae.value=U.toString();const T=document.createElement("input");T.type="hidden",T.name="y",T.value=A.toString();const Z=document.createElement("input");Z.type="hidden",Z.name="z",Z.value=ve.toString(),X.appendChild(ae),X.appendChild(T),X.appendChild(Z),document.body.appendChild(X),X.submit()}},G=()=>{if(q){if(!Oe.canAffordTravel("galaxy",1)){Oe.executeTravel("galaxy",1);return}if(!Oe.executeTravel("galaxy",1))return;const[U,A,ve]=Q(),X=document.createElement("form");X.method="POST",X.action="/navigate";const ae=document.createElement("input");ae.type="hidden",ae.name="x",ae.value=U.toString();const T=document.createElement("input");T.type="hidden",T.name="y",T.value=A.toString();const Z=document.createElement("input");Z.type="hidden",Z.name="z",Z.value=ve.toString(),X.appendChild(ae),X.appendChild(T),X.appendChild(Z),document.body.appendChild(X),X.submit()}};return P?null:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:F,disabled:!y,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${y?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:G,disabled:!q,className:`flex items-center justify-center px-3 py-1.5 rounded-lg transition-all duration-200 ${q?"bg-white/10 hover:bg-white/20 border border-white/20 text-white hover:text-blue-300":"bg-white/5 border border-white/10 text-gray-600 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})},rn=({page:l,prevPage:y,nextPage:D,finish:q})=>{const k="px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105",P="bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg",_="bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white border border-white/20";return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 sm:gap-4 flex-wrap",children:[l!==1&&e.jsxs("button",{onClick:()=>window.location.href="/galaxy/1",className:`${k} ${_}`,title:"First page",children:[e.jsx("span",{className:"hidden sm:inline",children:"First"}),e.jsx("span",{className:"sm:hidden",children:"«"})]}),y&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${y}`,className:`${k} ${_}`,title:"Previous page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"‹"})]}),(()=>{const L=[],Q=Math.max(1,l-2),F=Math.min(q,l+2);Q>1&&(L.push(e.jsx("button",{onClick:()=>window.location.href="/galaxy/1",className:`${k} ${_}`,children:"1"},1)),Q>2&&L.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"start-ellipsis")));for(let G=Q;G<=F;G++)G===l?L.push(e.jsx("span",{className:`${k} ${P} cursor-default`,children:G},G)):L.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${G}`,className:`${k} ${_} cursor-pointer`,children:G},G));return F<q&&(F<q-1&&L.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"end-ellipsis")),L.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${q}`,className:`${k} ${_}`,children:q},q))),L})(),D&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${D}`,className:`${k} ${_}`,title:"Next page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"›"})]}),l!==q&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${q}`,className:`${k} ${_}`,title:"Last page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Last"}),e.jsx("span",{className:"sm:hidden",children:"»"})]})]}),e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-400",children:["Page ",l," of ",q]})]})},mt=({galaxy:l,systems:y,galaxy_url:D,version:q,page:k,prev_page:P,next_page:_,finish:L,image_url:ze})=>{const[Q]=u.useState(l.coordinates.join(","));u.useEffect(()=>{document.body.setAttribute("data-coordinates",Q),$t(Q)},[Q]);const F=G=>G.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsx(Gt,{}),e.jsxs("div",{className:"relative z-10 pt-1",children:[e.jsx(It,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-2",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["Galaxy '",F(l.name),"'"]}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-gray-300 flex items-center justify-center gap-x-4 gap-y-1 flex-wrap",children:[e.jsx(Wt,{size:15,color:"#ffffffff"}),l.coordinates.join(", ")]})]}),e.jsx(on,{currentGalaxy:l}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(nn,{galaxyUrl:D,galaxyType:l.galaxy_type,numSystems:l.num_systems,blackHoles:l.black_holes,pulsars:l.pulsars,quasars:l.quasars,galaxyName:F(l.name)})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(en,{galaxy:l})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Systems in '",F(l.name),"'"]}),e.jsx(sn,{systems:y,coordinates:Q})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsx("span",{className:"text-base sm:text-lg",children:"← Go Back to Planetary Index"})})}),e.jsx(rn,{page:k,prevPage:P,nextPage:_,finish:L})]}),e.jsx(Kt,{version:q})]}),e.jsx(Vt,{}),e.jsx(Yt,{currentLocation:{type:"galaxy",name:l.name,coordinates:l.coordinates.join(",")}}),e.jsx(Bt,{currentView:"galaxy"})]})};document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("atlas-react-root");if(!l)return;const y=D=>{const q=document.getElementById(D);if(!q||!q.textContent)return null;try{return JSON.parse(q.textContent.trim())}catch{return null}};try{const D=y("data-galaxy")||{},q=y("data-systems")||[],k=y("data-navigation")||{},P=y("data-common")||{},_={galaxy:{name:D.name||"Unknown Galaxy",coordinates:D.coordinates||[0,0,0],galaxy_type:D.galaxy_type||"Unknown",num_systems:D.num_systems||0,black_holes:D.black_holes||0,pulsars:D.pulsars||0,quasars:D.quasars||0},systems:q,galaxy_url:k.galaxy_url||"#",version:P.version||"1.0.0",page:k.page||1,prev_page:k.prev_page,next_page:k.next_page,finish:k.finish||1,image_url:P.image_url||""};lt.createRoot(l).render(dt.createElement(mt,_))}catch{const q={galaxy:{name:"Unknown Galaxy",coordinates:[0,0,0],galaxy_type:"Unknown",num_systems:0,black_holes:0,pulsars:0,quasars:0},systems:[],galaxy_url:"#",version:"1.0.0",page:1,finish:1,image_url:""};lt.createRoot(l).render(dt.createElement(mt,q))}});
