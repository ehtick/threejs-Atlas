import{S as m}from"./atlas_ouOT0ykXceu4Q_V1lX7IB.js";import{C as a}from"./atlas_C0Xm8D4F9LGKGgzeG7E8_.js";const t={STORM_COUNT:{min:2,max:5},STORM_CENTERS:{min:-.8,max:.8},STORM_INTENSITY:{min:.5,max:1},SPIRAL_SPEED:{min:.5,max:1.5},ANIMATION_SPEED:{min:.1,max:.5},OPACITY:{min:.2,max:.6}};class T{layerMesh;material;params;layerSystem;constructor(e,i={}){this.layerSystem=e;const r=i.seed||Math.floor(Math.random()*1e6),o=new m(r);this.params={stormCenters:i.stormCenters||this.generateStormCenters(r),stormColor:i.stormColor||new a(9109504),stormIntensity:i.stormIntensity||o.uniform(t.STORM_INTENSITY.min,t.STORM_INTENSITY.max),spiralSpeed:i.spiralSpeed||o.uniform(t.SPIRAL_SPEED.min,t.SPIRAL_SPEED.max),animationSpeed:i.animationSpeed||o.uniform(t.ANIMATION_SPEED.min,t.ANIMATION_SPEED.max),opacity:i.opacity||o.uniform(t.OPACITY.min,t.OPACITY.max),seed:r},this.material=this.layerSystem.createCloudGyrosLayerMaterial(this.params),this.layerMesh=this.layerSystem.addEffectLayer("cloudGyros",this.material,1.002,this)}generateStormCenters(e){const i=new m(e+5e3),r=Math.floor(i.uniform(t.STORM_COUNT.min,t.STORM_COUNT.max)),o=[];for(let n=0;n<r;n++)o.push({x:i.uniform(t.STORM_CENTERS.min,t.STORM_CENTERS.max),y:i.uniform(t.STORM_CENTERS.min,t.STORM_CENTERS.max)});return o}update(e){this.material.uniforms.time&&(this.material.uniforms.time.value+=e)}updateParams(e){this.params={...this.params,...e},e.stormIntensity!==void 0&&(this.material.uniforms.stormIntensity.value=e.stormIntensity),e.spiralSpeed!==void 0&&(this.material.uniforms.spiralSpeed.value=e.spiralSpeed),e.animationSpeed!==void 0&&(this.material.uniforms.animationSpeed.value=e.animationSpeed)}dispose(){}}function I(s,e,i){const r=e.storms||{},o=i||Math.floor(Math.random()*1e6),n=new m(o+5e3),S={stormCenters:r.centers||void 0,stormColor:new a(9109504),stormIntensity:r.intensity||e.storm_intensity||n.uniform(t.STORM_INTENSITY.min,t.STORM_INTENSITY.max),spiralSpeed:r.spiral_speed||n.uniform(t.SPIRAL_SPEED.min,t.SPIRAL_SPEED.max),animationSpeed:n.uniform(t.ANIMATION_SPEED.min,t.ANIMATION_SPEED.max),opacity:n.uniform(t.OPACITY.min,t.OPACITY.max),seed:o};return new T(s,S)}export{I as c};
