import{r as p,j as t,c as Ae}from"./atlas_BSujyM3STIIs7ogMAeFeS.js";import{U as ze}from"./atlas_7jDVOScTHowPLwcHrWtwq.js";import{u as Ke,g as ot}from"./atlas_BrYhsyGbdfinGesBjh40k.js";import{W as it}from"./atlas_DDJH3F64TRS7xAljnqyWd.js";import{E as lt,R as ct,U as dt,S as Ge}from"./atlas_BQNDIxYWnXCSJpAGcevGg.js";import{a5 as mt,C as Te,a6 as ut,f as ht,B as We,a as Re,Y as Oe,A as Ve,P as Fe,V as Q,M as Ye,z as Je,G as Ze,l as gt,n as pt,v as Xe,R as qe}from"./atlas_B2lpKXcKkLCAPkjGiW29w.js";class $e{static glitchChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()[]{}|;:,.<>?";static baseText="MULTIVERSE ONLINE";static createGlitchText(){let e=this.baseText;const s=Math.floor(Math.random()*2)+1;for(let a=0;a<s;a++){const r=Math.floor(Math.random()*e.length),o=this.glitchChars[Math.floor(Math.random()*this.glitchChars.length)];e=e.substring(0,r)+o+e.substring(r+1)}return e}static shouldGlitch(){return Math.random()<.3}static getRandomInterval(){return Math.floor(Math.random()*2e3)+2e3}static getGlitchAnimationSpeed(){return Math.floor(Math.random()*50)+50}}const xt=(d=!1)=>{const[e,s]=p.useState("MULTIVERSE ONLINE");return p.useEffect(()=>{if(!d){s("MULTIVERSE ONLINE");return}const a=async()=>{const n=$e.getGlitchAnimationSpeed(),i=Math.floor(500/n);for(let m=0;m<i;m++)s($e.createGlitchText()),await new Promise(c=>setTimeout(c,n));s("MULTIVERSE ONLINE")},r=()=>{const o=$e.getRandomInterval();setTimeout(()=>{a(),r()},o)};return r(),()=>{s("MULTIVERSE ONLINE")}},[d]),e},ft=({className:d="w-4 h-4"})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:d,viewBox:"0 0 24 24",children:[t.jsx("rect",{width:"24",height:"24",fill:"none"}),t.jsx("defs",{children:t.jsxs("filter",{id:"SVGg4wYRcsm",children:[t.jsx("feGaussianBlur",{in:"SourceGraphic",result:"y",stdDeviation:"1.5"}),t.jsx("feColorMatrix",{in:"y",result:"z",values:"1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 18 -7"}),t.jsx("feBlend",{in:"SourceGraphic",in2:"z"})]})}),t.jsxs("g",{fill:"currentColor",filter:"url(#SVGg4wYRcsm)",children:[t.jsxs("circle",{cx:"4",cy:"12",r:"3",children:[t.jsx("animate",{attributeName:"cx",calcMode:"spline",dur:"0.75s",keySplines:".56,.52,.17,.98;.56,.52,.17,.98",repeatCount:"indefinite",values:"4;9;4"}),t.jsx("animate",{attributeName:"r",calcMode:"spline",dur:"0.75s",keySplines:".56,.52,.17,.98;.56,.52,.17,.98",repeatCount:"indefinite",values:"3;8;3"})]}),t.jsxs("circle",{cx:"15",cy:"12",r:"8",children:[t.jsx("animate",{attributeName:"cx",calcMode:"spline",dur:"0.75s",keySplines:".56,.52,.17,.98;.56,.52,.17,.98",repeatCount:"indefinite",values:"15;20;15"}),t.jsx("animate",{attributeName:"r",calcMode:"spline",dur:"0.75s",keySplines:".56,.52,.17,.98;.56,.52,.17,.98",repeatCount:"indefinite",values:"8;3;8"})]})]})]}),Rt=()=>{const[d,e]=p.useState(!1),s=xt(d);return p.useEffect(()=>{const a=()=>{e(ze.isRemoteUniverse())};a();const r=setInterval(a,1e3);return()=>clearInterval(r)},[]),t.jsx("header",{className:"bg-black/20 backdrop-blur-md border-b border-white/10 px-4 sm:px-6 py-4",children:t.jsxs("div",{className:"w-full flex items-center justify-between",children:[t.jsxs("a",{href:"/",className:"flex items-center space-x-3 sm:space-x-4",children:[t.jsx("img",{src:"/static/atlas-logo.jpg",alt:"Atlas Logo",className:"h-10 w-10 sm:h-12 sm:w-12 rounded-full border-2 border-blue-400 shadow-lg"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"The Atlas"}),t.jsx("p",{className:"text-xs sm:text-sm text-gray-400 hidden sm:block",children:"Universal Navigation System"})]})]}),t.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-6",children:[t.jsx("a",{href:"/multiverse",className:"hover:scale-105 transition-transform",children:t.jsxs("div",{className:"flex items-center space-x-2 text-green-400 relative",children:[d?t.jsx(ft,{className:"w-4 h-4"}):t.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"text-xs sm:text-sm font-medium font-mono",children:d?s:"MULTIVERSE ONLINE"}),d&&t.jsx("div",{className:"absolute top-full left-0 w-full h-0.5 bg-green-900 overflow-hidden -mt-0.5 rounded-3xl",children:t.jsx("div",{className:"w-full h-full bg-gradient-to-r from-transparent via-green-400 to-transparent animate-pulse-slow relative",children:t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-green-300 to-transparent animate-data-stream"})})})]})]})}),t.jsx("div",{className:"text-xs sm:text-sm hidden lg:block text-gray-400",children:"Quantum Navigation Ready"})]})]})})},de=({size:d=24,className:e="",color:s="currentColor"})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:d,height:d,viewBox:"0 0 24 24",className:e,children:[t.jsx("circle",{cx:12,cy:12,r:2.197,fill:s}),t.jsx("path",{fill:s,d:"M21.63441 6.43671c-.70909-1.22723-2.41155-1.73142-4.79628-1.42354c-.30258.03942-.61354.09379-.92927.15769C15.00856 2.619 13.6066 1 12 1C10.39089 1 8.98713 2.62441 8.087 5.1834c-2.7384-.54268-4.90657-.15669-5.72186 1.25331C1.55256 7.84376 2.2947 9.90626 4.12193 12C2.2947 14.09374 1.55256 16.15624 2.3651 17.56329c.58143 1.00732 1.85 1.49542 3.52453 1.49542a11.47535 11.47535 0 0 0 2.197-.24305C8.98673 21.37518 10.39069 23 12 23c1.60658 0 3.00854-1.619 3.90884-4.17086c.31573.0639.62669.11827.92927.15769a10.18235 10.18235 0 0 0 1.297.088c1.70461 0 2.92647-.52028 3.49932-1.51151c.81254-1.407.07053-3.46955-1.75643-5.56329C21.70494 9.90626 22.447 7.84376 21.63441 6.43671ZM16.9851 6.13956a9.0809 9.0809 0 0 1 1.15965-.08046c1.26048 0 2.14979.32826 2.507.94617c.50426.87335-.06645 2.44138-1.55187 4.16777a20.50554 20.50554 0 0 0-2.30139-1.95281a19.9752 19.9752 0 0 0-.5471-2.93612C16.49539 6.23744 16.7503 6.17013 16.9851 6.13956Zm-3.07236 9.17417c-.64647.37332-1.28408.70346-1.90695.9935c-.63936-.29755-1.2812-.62534-1.919-.9935c-.64888-.37459-1.25525-.76326-1.81959-1.15917c-.06229-.6861-.09688-1.405-.09688-2.15456s.03459-1.46846.09688-2.15456c.56434-.39591 1.17071-.78458 1.81959-1.15917c.63487-.36648 1.27383-.69333 1.91024-.98982c.62668.29132 1.26511.61409 1.91573.98982c.64908.37472 1.25572.76346 1.82019 1.15958c.06222.686.09682 1.40477.09682 2.15415s-.0346 1.46813-.09682 2.15415C15.16846 14.55027 14.56182 14.939 13.91274 15.31373Zm1.628.3351a17.87565 17.87565 0 0 1-.39136 1.82408a18.46424 18.46424 0 0 1-1.76012-.58257c.36293-.18713.72713-.38337 1.092-.594C14.8457 16.086 15.1977 15.86928 15.54078 15.64883Zm-4.92407 1.24372A18.41329 18.41329 0 0 1 8.851 17.474a17.86018 17.86018 0 0 1-.39176-1.82549c.34328.22058.69541.43734 1.06.64787C9.88355 16.50677 10.24989 16.70348 10.61671 16.89255ZM7.07428 13.25036A18.3863 18.3863 0 0 1 5.67548 12a18.38878 18.38878 0 0 1 1.3988-1.25043c-.02005.41033-.03252.82636-.03252 1.25043S7.05423 12.8401 7.07428 13.25036Zm1.385-4.89886a17.86727 17.86727 0 0 1 .391-1.82227a18.22228 18.22228 0 0 1 1.76937.57681c-.36775.18947-.735.38659-1.10031.59759C9.15468 7.91416 8.80255 8.13092 8.45927 8.3515Zm4.93057-1.242a18.48842 18.48842 0 0 1 1.75958-.58237a17.87565 17.87565 0 0 1 .39136 1.82408c-.34308-.22045-.69508-.43715-1.05948-.64754C14.11663 7.4931 13.75263 7.29652 13.38984 7.10946ZM16.92577 10.75A18.40125 18.40125 0 0 1 18.324 12a18.38809 18.38809 0 0 1-1.39826 1.25c.02-.41013.03251-.826.03251-1.25S16.94581 11.1601 16.92577 10.75ZM12 2.12854c.99773 0 2.05613 1.23433 2.80746 3.31044a20.80159 20.80159 0 0 0-2.8094 1.01141A20.51935 20.51935 0 0 0 9.19055 5.44481C9.94208 3.36508 11.00163 2.12854 12 2.12854ZM3.34774 7.00527c.35133-.60825 1.2519-.93437 2.52043-.93437a10.26212 10.26212 0 0 1 1.88362.20148A19.96778 19.96778 0 0 0 7.20147 9.2205a20.48874 20.48874 0 0 0-2.30166 1.95288C3.41412 9.44692 2.84341 7.87869 3.34774 7.00527Zm0 9.98946c-.50433-.87342.06638-2.44165 1.55207-4.16811A20.50145 20.50145 0 0 0 7.20147 14.7795a19.94422 19.94422 0 0 0 .5518 2.95356C5.50578 18.162 3.85468 17.87245 3.34774 16.99473ZM12 21.87146c-.99866 0-2.05847-1.23708-2.81007-3.31775a20.44828 20.44828 0 0 0 2.81155-1.00255a20.80209 20.80209 0 0 0 2.806 1.00979C14.05615 20.63706 12.99775 21.87146 12 21.87146Zm8.65175-4.87673c-.45914.79277-1.79257 1.10923-3.66667.86571c-.2348-.03057-.48971-.09788-.73369-.14455a19.97619 19.97619 0 0 0 .5471-2.93619A20.50419 20.50419 0 0 0 19.0999 12.827C20.58532 14.55335 21.156 16.12138 20.65177 16.99473Z"}),t.jsx("circle",{cx:-.5,cy:2,r:1.5,fill:s,children:t.jsx("animateMotion",{dur:"2s",path:"M14.75 14.1471C12.2277 15.6034 9.69019 16.4332 7.6407 16.6145C5.54599 16.7998 4.15833 16.3018 3.62324 15.375C3.08815 14.4482 3.35067 12.9974 4.55852 11.276C5.74031 9.59178 7.72768 7.80915 10.25 6.35289C12.7723 4.89662 15.3098 4.06682 17.3593 3.88549C19.454 3.70016 20.8417 4.1982 21.3768 5.125C21.9118 6.0518 21.6493 7.50256 20.4415 9.22397C19.2597 10.9082 17.2723 12.6909 14.75 14.1471Z",repeatCount:"indefinite"})})]}),me=({size:d=24,className:e="",color:s="currentColor"})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:d,height:d,viewBox:"0 0 24 24",className:e,children:t.jsxs("g",{fill:"none",stroke:s,strokeLinecap:"round",strokeWidth:1.3,children:[t.jsxs("path",{fill:s,fillOpacity:0,strokeDasharray:28,strokeDashoffset:28,d:"M12 10l4 7h-8Z",children:[t.jsx("animate",{fill:"freeze",attributeName:"fill-opacity",begin:"0.7s",dur:"0.5s",values:"0;1"}),t.jsx("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.4s",values:"28;0"})]}),t.jsxs("path",{d:"M12 10l4 7h-8Z",opacity:0,children:[t.jsx("animate",{attributeName:"d",begin:"0.4s",dur:"0.8s",keyTimes:"0;0.25;1",repeatCount:"indefinite",values:"M12 10l4 7h-8Z;M12 4l9.25 16h-18.5Z;M12 4l9.25 16h-18.5Z"}),t.jsx("animate",{attributeName:"opacity",begin:"0.4s",dur:"0.8s",keyTimes:"0;0.1;0.75;1",repeatCount:"indefinite",values:"0;1;1;0"})]})]})}),ue=({size:d=24,className:e="",color:s="currentColor"})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:d,height:d,viewBox:"0 0 24 24",className:e,children:[t.jsx("path",{fill:s,fillOpacity:0,d:"M12 3l2.35 5.76l6.21 0.46l-4.76 4.02l1.49 6.04l-5.29 -3.28l-5.29 3.28l1.49 -6.04l-4.76 -4.02l6.21 -0.46Z",children:t.jsx("animate",{fill:"freeze",attributeName:"fill-opacity",begin:"0.5s",dur:"0.5s",values:"0;1"})}),t.jsxs("path",{fill:"none",stroke:s,strokeDasharray:36,strokeDashoffset:36,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M12 3L9.65 8.76L3.44 9.22L8.2 13.24L6.71 19.28L12 16M12 3L14.35 8.76L20.56 9.22L15.8 13.24L17.29 19.28L12 16",children:[t.jsx("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.5s",values:"36;0"}),t.jsx("animate",{attributeName:"d",dur:"1.5s",repeatCount:"indefinite",values:"M12 3L9.65 8.76L3.44 9.22L8.2 13.24L6.71 19.28L12 16M12 3L14.35 8.76L20.56 9.22L15.8 13.24L17.29 19.28L12 16;M12 7L10.82 10.38L7.24 10.45L10.1 12.62L9.06 16.05L12 14M12 7L13.18 10.38L16.76 10.45L13.9 12.62L14.94 16.05L12 14;M12 3L9.65 8.76L3.44 9.22L8.2 13.24L6.71 19.28L12 16M12 3L14.35 8.76L20.56 9.22L15.8 13.24L17.29 19.28L12 16"})]})]}),vt=100,Be=4*1024*1024,R={SPACESHIP:"_atlasSpaceShip",ARCHIVE:"__atlasArchive",DAILY_CHALLENGES:"_atlasDailyChallenges",LOCATIONS:"_atlasLocations"},bt=()=>{try{const d=document.getElementById("data-universe-config");if(d){const e=JSON.parse(d.textContent||"{}");if(e.remote===!0&&e.node_id)return e.node_id}return null}catch{return null}},Pe=d=>{if(d===R.ARCHIVE){const e=bt();if(e)return`${d}_${e}`}return d},xe=d=>{const e=Pe(d);return btoa(encodeURIComponent(e))},Qe=d=>{let e="";const s=d.byteLength;for(let a=0;a<s;a++)e+=String.fromCharCode(d[a]);return btoa(e)},et=d=>{const e=atob(d),s=e.length,a=new Uint8Array(s);for(let r=0;r<s;r++)a[r]=e.charCodeAt(r);return a},fe=(d,e)=>{const s=Pe(d);try{const a=new Blob([e]).size;if(a>Be)throw console.warn(`Value too large: ${a} bytes exceeds ${Be} bytes limit`),new Error("Value exceeds maximum storage size");const r=btoa(encodeURIComponent(s)),n=new TextEncoder().encode(e);let i;if(n.length>=vt){const c=ot(n);i="c:"+Qe(c)}else i="u:"+Qe(n);if(new Blob([i]).size>Be)throw new Error("Encoded value exceeds maximum storage size");localStorage.setItem(r,i)}catch(a){if(a instanceof Error&&a.message.includes("storage size"))throw a;localStorage.setItem(s,e)}},z=d=>{const e=Pe(d);try{const s=btoa(encodeURIComponent(e)),a=localStorage.getItem(s);if(a===null)return null;let r;if(a.startsWith("c:")){const n=et(a.slice(2));r=Ke(n)}else if(a.startsWith("u:"))r=et(a.slice(2));else{const n=atob(a),i=new Uint8Array(n.split("").map(m=>m.charCodeAt(0)));r=Ke(i)}return new TextDecoder().decode(r)}catch{return localStorage.getItem(e)}},tt=d=>{const e=Pe(d);try{const s=btoa(encodeURIComponent(e));localStorage.removeItem(s)}catch{localStorage.removeItem(e)}},yt=()=>{Object.values(R).forEach(e=>{const s=xe(e);if(localStorage.getItem(s)!==null)return;const a=localStorage.getItem(e);a!==null&&(localStorage.setItem(s,a),localStorage.removeItem(e))})},st=()=>{try{const d=document.getElementById("data-universe-config");if(d){const e=JSON.parse(d.textContent||"{}");return{isRemote:e.remote===!0,nodeId:e.node_id||null,seedName:e.seed_name}}return{isRemote:!1,nodeId:null}}catch{return{isRemote:!1,nodeId:null}}};class Me{static STORAGE_KEY="_atlasDailyChallenges";static BASE_GOALS={galaxies:1,systems:3,planets:10};static getTodaysChallenges(){const e=new Date().toISOString().split("T")[0],s=this.getStoredChallenges();return!s||s.date!==e?this.createNewDayChallenges(e,s):s}static getStoredChallenges(){try{const e=z(this.STORAGE_KEY);return e?JSON.parse(e):null}catch(e){return console.error("Error reading daily challenges:",e),null}}static createNewDayChallenges(e,s){const a=s?s.dayNumber+1:1,r=Math.pow(1.1,a-1),o=this.getCurrentStats(),n=[{type:"galaxies",current:o.galaxies,target:Math.ceil(a*this.BASE_GOALS.galaxies*r),dayNumber:a,completed:!1},{type:"systems",current:o.systems,target:Math.ceil(a*this.BASE_GOALS.systems*r),dayNumber:a,completed:!1},{type:"planets",current:o.planets,target:Math.ceil(a*this.BASE_GOALS.planets*r),dayNumber:a,completed:!1}],i=(s?.totalCompletedDays||0)+(s?.dayCompleted?1:0),m={date:e,dayNumber:a,challenges:n,lastReset:Date.now(),totalCompletedDays:i,dayCompleted:!1};return this.saveChallenges(m),m}static getCurrentStats(){try{const e=z("__atlasArchive");if(!e)return{galaxies:0,systems:0,planets:0};const s=JSON.parse(e);let a=0,r=0;Object.values(s.g||{}).forEach(m=>{a+=Object.keys(m).length,Object.values(m).forEach(c=>{typeof c=="string"&&(r+=(c.match(/1/g)||[]).length)})});const o=new Set(Object.keys(s.g||{})),n=new Set(Object.keys(s.gv||{}));return{galaxies:new Set([...o,...n]).size,systems:a,planets:r}}catch(e){return console.error("Error getting current stats:",e),{galaxies:0,systems:0,planets:0}}}static updateProgress(){const e=this.getTodaysChallenges(),s=this.getCurrentStats();return e.challenges.forEach(r=>{const o=s[r.type];r.current=o,r.completed=o>=r.target}),e.challenges.every(r=>r.completed)&&!e.dayCompleted&&(e.dayCompleted=!0),this.saveChallenges(e),e}static getCompletedDaysCount(){try{return this.getTodaysChallenges().totalCompletedDays||0}catch(e){return console.error("Error getting completed days count:",e),0}}static saveChallenges(e){try{fe(this.STORAGE_KEY,JSON.stringify(e))}catch(s){console.error("Error saving daily challenges:",s)}}static getCompletionStatus(){const e=this.getTodaysChallenges(),s=e.challenges.filter(r=>r.completed).length,a=e.challenges.length;return{completed:s,total:a,allCompleted:s===a}}static getDayInfo(){const e=this.getTodaysChallenges(),s=Math.pow(1.1,e.dayNumber-1);return{dayNumber:e.dayNumber,multiplier:Math.round(s*100)/100}}}const pe=d=>{const[e,s,a]=d.split(",").map(Number);return`${e.toString(36)}_${s.toString(36)}_${a.toString(36)}`};class be{static STORAGE_KEY=R.ARCHIVE;static MAX_ENTRIES_PER_GALAXY=1e3;static getData(){try{this.migrateToEncodedStorage(),this.cleanupLegacyStorage();const e=z(this.STORAGE_KEY);if(!e)return{g:{},gv:{}};const s=JSON.parse(e);return s.gv||(s.gv={}),s}catch(e){return console.error("Error reading Atlas archive:",e),{g:{},gv:{}}}}static cleanupLegacyStorage(){try{const e="atlasHistoricalData";localStorage.getItem(e)&&localStorage.removeItem(e)}catch(e){console.error("Error cleaning up legacy storage:",e)}}static migrateToEncodedStorage(){try{localStorage.getItem(this.STORAGE_KEY)&&yt()}catch(e){console.error("Error migrating to encoded storage:",e)}}static saveData(e){try{fe(this.STORAGE_KEY,JSON.stringify(e))}catch(s){console.error("Error saving Atlas archive:",s)}}static performCleanup(e){const s=Object.keys(e.g);s.length>100&&s.slice(0,s.length-100).forEach(r=>delete e.g[r]),Object.keys(e.g).forEach(a=>{const r=e.g[a],o=Object.keys(r);o.length>this.MAX_ENTRIES_PER_GALAXY&&o.slice(0,o.length-this.MAX_ENTRIES_PER_GALAXY).forEach(i=>delete r[i])})}static performEmergencyCleanup(){const e=document.body.getAttribute("data-coordinates");if(e){const s=pe(e),a=this.getData(),r=a.g[s];a.g={},r&&(a.g[s]=r),this.saveData(a)}}static markPlanetVisited(e,s,a,r){const o=this.getData(),n=pe(e),i=s.toString(16),m=r.findIndex(g=>g.name.toLowerCase()===a.toLowerCase());if(m===-1){console.warn(`Planet ${a} not found in system planets list`);return}o.g[n]||(o.g[n]={}),o.g[n][i]||(o.g[n][i]="");const c=this.bitmapToIndices(o.g[n][i]);c.includes(m)||(c.push(m),o.g[n][i]=this.indicesToBitmap(c),this.saveData(o),Me.updateProgress())}static markGalaxyVisited(e){const s=this.getData(),a=pe(e);s.gv[a]||(s.gv[a]=!0,this.saveData(s),Me.updateProgress())}static markSystemVisited(e,s){const a=this.getData(),r=pe(e),o=s.toString(16);this.markGalaxyVisited(e),a.g[r]||(a.g[r]={}),a.g[r][o]||(a.g[r][o]="",this.saveData(a),Me.updateProgress())}static bitmapToIndices(e){return e?e.split("").map((s,a)=>s==="1"?a:-1).filter(s=>s!==-1):[]}static indicesToBitmap(e){if(e.length===0)return"";const s=Math.max(...e),a=Array(s+1).fill("0");return e.forEach(r=>{r>=0&&(a[r]="1")}),a.join("")}static isGalaxyVisited(e){const s=this.getData(),a=pe(e);return!!s.gv[a]}static isSystemVisited(e,s){const a=this.getData(),r=pe(e),o=s.toString(16);return!!(a.g[r]&&o in a.g[r])}static getVisitedPlanets(e,s,a){const r=this.getData(),o=pe(e),n=s.toString(16),i=r.g[o]?.[n]||"";return this.bitmapToIndices(i).map(c=>{const g=a[c];return g?g.name.toLowerCase():null}).filter(c=>c!==null)}static getVisitedPlanetCount(e,s){const a=this.getData(),r=pe(e),o=s.toString(16),n=a.g[r]?.[o]||"";return this.bitmapToIndices(n).length}static getStorageStats(){const e=this.getData();let s=0;[R.SPACESHIP,R.DAILY_CHALLENGES,R.LOCATIONS].forEach(c=>{const g=z(c);g&&(s+=g.length)});for(let c=0;c<localStorage.length;c++){const g=localStorage.key(c);if(g)try{const w=decodeURIComponent(atob(g));if(w.startsWith(R.ARCHIVE)){const v=localStorage.getItem(g);if(v)try{const b=z(w.includes("_")?w:R.ARCHIVE);b&&(s+=b.length)}catch{s+=v.length}}}catch{continue}}let r=0,o=0;Object.values(e.g).forEach(c=>{r+=Object.keys(c).length,Object.values(c).forEach(g=>{typeof g=="string"&&(o+=(g.match(/1/g)||[]).length)})});const n=new Set(Object.keys(e.g||{})),i=new Set(Object.keys(e.gv||{})),m=new Set([...n,...i]);return{size:s,galaxies:m.size,visitedGalaxies:Object.keys(e.gv).length,systems:r,planets:o}}static getCurrentUniverseInfo(){return st()}static debugListAllUniverseKeys(){const e=[];for(let a=0;a<localStorage.length;a++){const r=localStorage.key(a);if(r)try{const o=decodeURIComponent(atob(r));(o.includes("atlas")||o.includes("Atlas"))&&e.push(o)}catch{(r.includes("atlas")||r.includes("Atlas"))&&e.push(r)}}console.group("🗄️ All Atlas Storage Keys Across Universes"),console.log("Found",e.length,"Atlas-related keys:");const s={};e.forEach(a=>{const r=a.match(/^(__?atlas\w+)(_.*)?$/);if(r){const o=r[1],n=r[2]||" (local)";s[o]||(s[o]=[]),s[o].push(n)}}),Object.entries(s).forEach(([a,r])=>{console.log(`  ${a}:`,r)}),console.groupEnd()}}const Ot=d=>{be.markGalaxyVisited(d)},_t=(d,e,s,a)=>{be.markPlanetVisited(d,e,s,a)},Pt=(d,e)=>{be.markSystemVisited(d,e)},Ut=(d,e,s)=>be.getVisitedPlanets(d,e,s),wt=(d,e)=>be.isSystemVisited(d,e),Gt=(d,e,s,a)=>{if(!wt(d,e))return"none";{const r=be.getVisitedPlanetCount(d,e);return r>=s&&s>0?"complete":(r>0,"partial")}},jt=()=>be.getStorageStats();class Ie{static STORAGE_KEY="_atlasLocations";static BASE_MAX_LOCATIONS=5;static BONUS_PER_COMPLETION=5;static ABSOLUTE_MAX_LOCATIONS=999;static getLocations(){try{const e=z(this.STORAGE_KEY);if(!e)return[];const s=JSON.parse(e);return Array.isArray(s)?s:[]}catch(e){return console.error("Error reading saved locations:",e),[]}}static normalizeStargateUrl(e){const s=e.indexOf("/stargate/");return s!==-1?e.substring(s):e}static decodeStargateUrl(e){try{const s=e.match(/\/stargate\/([A-Za-z0-9\-_]+)/);if(!s)return e;const a=s[1],r=atob(a.replace(/-/g,"+").replace(/_/g,"/"));return r.includes("&system=")||r.includes("&planet=")?r.replace(/&page=\d+/,""):r}catch{return e}}static isLocationSaved(e){const s=this.normalizeStargateUrl(e),a=this.decodeStargateUrl(s);return this.getLocations().some(o=>{const n=this.normalizeStargateUrl(o.stargateUrl);return this.decodeStargateUrl(n)===a})}static isGalaxyLocationSavedDifferentPage(e,s){if(s!=="galaxy")return!1;try{const r=this.normalizeStargateUrl(e).split("/stargate/")[1];if(!r)return!1;const o=atob(r.replace(/-/g,"+").replace(/_/g,"/")),n=new URLSearchParams(o),i=n.get("coordinates"),m=n.get("page");return!i||!m?!1:this.getLocations().some(g=>{if(g.type!=="galaxy")return!1;try{const v=this.normalizeStargateUrl(g.stargateUrl).split("/stargate/")[1];if(!v)return!1;const b=atob(v.replace(/-/g,"+").replace(/_/g,"/")),N=new URLSearchParams(b),u=N.get("coordinates"),y=N.get("page");return u===i&&y!==m}catch{return!1}})}catch{return!1}}static async saveLocation(e){try{const s=this.getLocations(),a=this.getCurrentMaxLocations(),r=this.decodeStargateUrl(this.normalizeStargateUrl(e.stargateUrl)),o=s.findIndex(i=>this.decodeStargateUrl(this.normalizeStargateUrl(i.stargateUrl))===r),n={...e,id:this.generateId(),timestamp:Date.now()};return o!==-1?(s[o]=n,fe(this.STORAGE_KEY,JSON.stringify(s)),!0):s.length>=a&&!await this.showSlotFullDialog(a)?!1:(s.push(n),s.length>a&&(s.sort((i,m)=>m.timestamp-i.timestamp),s.splice(a)),fe(this.STORAGE_KEY,JSON.stringify(s)),window.dispatchEvent(new CustomEvent("locationSaved",{detail:{location:n}})),!0)}catch(s){return console.error("Error saving location:",s),!1}}static saveLocationSync(e){const s=this.getLocations(),a=this.getCurrentMaxLocations(),r=this.decodeStargateUrl(this.normalizeStargateUrl(e.stargateUrl)),o=s.findIndex(i=>this.decodeStargateUrl(this.normalizeStargateUrl(i.stargateUrl))===r),n={...e,id:this.generateId(),timestamp:Date.now()};o!==-1?s[o]=n:s.push(n),s.length>a&&(s.sort((i,m)=>m.timestamp-i.timestamp),s.splice(a)),fe(this.STORAGE_KEY,JSON.stringify(s)),window.dispatchEvent(new CustomEvent("locationSaved",{detail:{location:n}}))}static removeLocation(e){try{const a=this.getLocations().filter(r=>r.id!==e);fe(this.STORAGE_KEY,JSON.stringify(a))}catch(s){console.error("Error removing location:",s)}}static clearAllLocations(){try{tt(this.STORAGE_KEY)}catch(e){console.error("Error clearing locations:",e)}}static generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static async showSlotFullDialog(e){return new Promise(s=>{const a=document.createElement("div");a.className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm transition-all duration-300 opacity-0",a.style.backdropFilter="blur(8px)";const r=document.createElement("div");r.className="relative bg-gradient-to-br from-slate-900/95 to-slate-800/95 border border-slate-600/50 rounded-2xl p-8 max-w-md mx-4 text-white shadow-2xl backdrop-blur-xl transform scale-95 transition-all duration-300",r.style.backdropFilter="blur(20px)",r.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.05)";const o=document.createElement("div");o.className="text-center";const n=document.createElement("div");n.className="inline-flex items-center justify-center w-16 h-16 bg-amber-500/20 rounded-full mb-6";const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("class","w-8 h-8 text-amber-400"),i.setAttribute("fill","none"),i.setAttribute("stroke","currentColor"),i.setAttribute("viewBox","0 0 24 24");const m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-width","2"),m.setAttribute("d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z");const c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-width","2"),c.setAttribute("d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"),i.appendChild(m),i.appendChild(c),n.appendChild(i);const g=document.createElement("h2");g.className="text-2xl font-bold mb-4 text-white",g.textContent="Storage Full";const w=document.createElement("p");w.className="text-slate-400 mb-6 text-[10px] bg-slate-800/50 rounded-lg p-3 border border-slate-700/50",w.textContent="💡 Complete daily challenges to increase your storage capacity";const v=document.createElement("p");v.className="text-slate-300 mb-4 text-base leading-relaxed",v.textContent="You have reached your maximum of ";const b=document.createElement("span");b.className="font-bold text-amber-400 bg-amber-400/10 px-2 py-1 rounded-lg",b.textContent=e.toString(),v.appendChild(b),v.appendChild(document.createTextNode(" saved locations."));const N=document.createElement("p");N.className="text-slate-200 mb-8 text-base",N.textContent="Overwrite the oldest saved location?";const u=document.createElement("div");u.className="flex gap-4 justify-center";const y=document.createElement("button");y.id="cancelSave",y.className="px-6 py-3 bg-slate-700/80 hover:bg-slate-600/80 border border-slate-600/50 hover:border-slate-500/50 rounded-xl transition-all duration-200 font-medium text-slate-200 hover:text-white transform hover:scale-105 hover:shadow-lg",y.textContent="Cancel";const j=document.createElement("button");j.id="confirmOverwrite",j.className="px-6 py-3 bg-gradient-to-r from-amber-600 to-amber-500 hover:from-amber-500 hover:to-amber-400 rounded-xl transition-all duration-200 font-semibold text-white transform hover:scale-105 hover:shadow-lg border border-amber-400/30",j.textContent="Overwrite",u.appendChild(y),u.appendChild(j),o.appendChild(n),o.appendChild(g),o.appendChild(w),o.appendChild(v),o.appendChild(N),o.appendChild(u),r.appendChild(o),a.appendChild(r),document.body.appendChild(a),requestAnimationFrame(()=>{a.style.opacity="1",r.style.transform="scale(1)"});const D=r.querySelector("#cancelSave"),O=r.querySelector("#confirmOverwrite"),ae=ee=>{a.style.opacity="0",r.style.transform="scale(0.95)",setTimeout(()=>{document.body.contains(a)&&document.body.removeChild(a),s(ee)},300)};D?.addEventListener("click",()=>{ae(!1)}),O?.addEventListener("click",()=>{ae(!0)}),a.addEventListener("click",ee=>{ee.target===a&&ae(!1)});const E=ee=>{ee.key==="Escape"&&(document.removeEventListener("keydown",E),ae(!1))};document.addEventListener("keydown",E)})}static hasAvailableSlot(){const e=this.getLocations(),s=this.getCurrentMaxLocations();return e.length<s}static getAvailableSlots(){const e=this.getLocations(),s=this.getCurrentMaxLocations();return Math.max(0,s-e.length)}static getCurrentMaxLocations(){try{const e=this.getCompletedDaysCount(),s=Me.getCompletionStatus().allCompleted?1:0,a=this.BASE_MAX_LOCATIONS+(e+s)*this.BONUS_PER_COMPLETION;return Math.min(a,this.ABSOLUTE_MAX_LOCATIONS)}catch(e){return console.error("Error calculating max locations:",e),this.BASE_MAX_LOCATIONS}}static getCompletedDaysCount(){try{const e=z("_atlasDailyChallenges");return e&&JSON.parse(e).totalCompletedDays||0}catch(e){return console.error("Error getting completion history:",e),0}}static getLocationStats(){const e=this.getLocations(),s=this.getCurrentMaxLocations();return{total:e.length,galaxies:e.filter(a=>a.type==="galaxy").length,systems:e.filter(a=>a.type==="system").length,planets:e.filter(a=>a.type==="planet").length,maxAllowed:s,available:Math.max(0,s-e.length)}}static async saveLocationWithConfirmation(e,s,a){try{const r={name:e,type:s,stargateUrl:a};return await this.saveLocation(r)?{success:!0,message:`Location "${e}" saved successfully!`}:{success:!1,message:"Save operation cancelled by user."}}catch(r){return console.error("Error saving location with confirmation:",r),{success:!1,message:"Failed to save location. Please try again."}}}}class H{static STORAGE_KEY="_atlasSpaceShip";static COLLECTION_COOLDOWNS={planet:900*1e3,system:2700*1e3,galaxy:480*60*1e3};static DAILY_COLLECTION_LIMITS={planet:1/0,system:15,galaxy:5};static PASSIVE_INTERVAL=60*1e3;static DEFAULT_DATA={r:{a:300,e:200,d:250},u:{l:1,ef:1,rn:500,st:1e3,m:1},c:{},t:{},s:{tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0,dcp:0,dcs:0,dcg:0,lcd:new Date().toDateString()}};static getData(){try{const e=z(this.STORAGE_KEY);if(!e)return this.saveData(this.DEFAULT_DATA),{...this.DEFAULT_DATA};const s=JSON.parse(e),a=this.expandData(s);return{r:a.r||{...this.DEFAULT_DATA.r},u:a.u||{...this.DEFAULT_DATA.u},c:a.c||{},t:a.t||{},s:a.s||{...this.DEFAULT_DATA.s}}}catch(e){return console.error("Error reading spaceship data:",e),{...this.DEFAULT_DATA}}}static saveData(e){try{const a=Date.now()-1440*60*1e3;Object.keys(e.c).forEach(n=>{e.c[n]<a&&delete e.c[n]});const r=Object.keys(e.c);if(r.length>500){const n=r.sort((m,c)=>e.c[m]-e.c[c]);n.slice(0,n.length-500).forEach(m=>delete e.c[m])}const o=this.compactData(e);fe(this.STORAGE_KEY,JSON.stringify(o))}catch(s){console.error("Error saving spaceship data:",s),s.name==="QuotaExceededError"&&this.performEmergencyCleanup()}}static performEmergencyCleanup(){const e=this.getData();e.c={},e.s={tc:0,tr:{a:0,e:0,d:0},tt:0},this.saveData(e)}static getResources(){const e=this.getData();return{antimatter:Math.round(e.r.a),element115:Math.round(e.r.e),deuterium:Math.round(e.r.d)}}static setResources(e){const s=this.getData(),a=s.u;s.r.a=Math.min(Math.max(0,e.antimatter),a.st),s.r.e=Math.min(Math.max(0,e.element115),a.st),s.r.d=Math.min(Math.max(0,e.deuterium),a.st),this.saveData(s)}static addResources(e){const s=this.getData(),a=s.u;s.r.a=Math.round(Math.min(s.r.a+e.antimatter,a.st)),s.r.e=Math.round(Math.min(s.r.e+e.element115,a.st)),s.r.d=Math.round(Math.min(s.r.d+e.deuterium,a.st)),s.s&&(s.s.tr=s.s.tr||{a:0,e:0,d:0},s.s.tr.a+=e.antimatter,s.s.tr.e+=e.element115,s.s.tr.d+=e.deuterium),this.saveData(s)}static consumeResources(e){const s=this.getData(),a={antimatter:Math.floor(e.antimatter/s.u.ef),element115:Math.floor(e.element115/s.u.ef),deuterium:Math.floor(e.deuterium/s.u.ef)};return s.r.a>=a.antimatter&&s.r.e>=a.element115&&s.r.d>=a.deuterium?(s.r.a-=a.antimatter,s.r.e-=a.element115,s.r.d-=a.deuterium,s.s&&(s.s.tt=(s.s.tt||0)+1),this.saveData(s),!0):!1}static getUpgrade(){const e=this.getData();return{level:e.u.l,efficiency:e.u.ef,range:e.u.rn,storage:e.u.st,multiplier:e.u.m}}static upgradeShip(e){const s=this.getData();if(s.u.l>=100)return!1;if(s.r.a>=e.antimatter&&s.r.e>=e.element115&&s.r.d>=e.deuterium){s.r.a-=e.antimatter,s.r.e-=e.element115,s.r.d-=e.deuterium,s.u.l+=1;let r=Math.min(4,1+(s.u.l-1)*.2),o=s.u.l<=25?500+(s.u.l-1)*200:5500+Math.floor(Math.log(s.u.l-25+1)*800);o=Math.min(o,25e3);let n=s.u.l<=20?1e3+(s.u.l-1)*400:1e3+20*400+Math.floor(Math.log(s.u.l-20+1)*1200);n=Math.min(n,5e4);let i=1+(s.u.l-1)*.242;return s.u.ef=Math.min(6,r),s.u.rn=Math.floor(o),s.u.st=Math.floor(n),s.u.m=Math.min(25,i),this.saveData(s),!0}return!1}static getLocationTypeFromId(e){return e.startsWith("planet_")?"planet":e.startsWith("system_")?"system":e.startsWith("galaxy_")?"galaxy":"planet"}static getCooldownForLocation(e){const s=this.getLocationTypeFromId(e);return this.COLLECTION_COOLDOWNS[s]}static canCollectFromLocationType(e,s){s||(s=this.getData());const a=new Date().toDateString();if(s.s&&s.s.lcd!==a&&(s.s.dcp=0,s.s.dcs=0,s.s.dcg=0,s.s.lcd=a,this.saveData(s)),!s.s)return!0;const r=this.DAILY_COLLECTION_LIMITS[e];return r===1/0?!0:(e==="planet"?s.s.dcp||0:e==="system"?s.s.dcs||0:s.s.dcg||0)<r}static canCollectFromLocation(e){const s=this.getData(),a=s.c[e];if(a){const o=Date.now(),n=this.getCooldownForLocation(e);if(o-a<n)return!1}const r=this.getLocationTypeFromId(e);return this.canCollectFromLocationType(r,s)}static getTimeUntilNextCollection(e){const a=this.getData().c[e];if(!a)return 0;const r=Date.now(),n=this.getCooldownForLocation(e)-(r-a);return n>0?n/(1e3*60*60):0}static markLocationCollected(e){const s=this.getData();s.c[e]=Date.now();const a=this.getLocationTypeFromId(e);this.updateDailyCollectionCounters(s,a),this.updateCollectionStreaks(s),this.saveData(s)}static updateDailyCollectionCounters(e,s){const a=new Date().toDateString();e.s||(e.s={tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0,dcp:0,dcs:0,dcg:0,lcd:a}),e.s.lcd!==a&&(e.s.dcp=0,e.s.dcs=0,e.s.dcg=0,e.s.lcd=a),s==="planet"?e.s.dcp=(e.s.dcp||0)+1:s==="system"?e.s.dcs=(e.s.dcs||0)+1:s==="galaxy"&&(e.s.dcg=(e.s.dcg||0)+1)}static updateCollectionStreaks(e){const s=Date.now(),a=new Date(s).toDateString(),r=e.t.lc?new Date(e.t.lc).toDateString():null;if(e.s||(e.s={tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0}),e.s.tc=(e.s.tc||0)+1,a!==r){const o=e.t.lc;if(e.t.lc=s,r&&o){const n=new Date(o),i=new Date(s),m=Math.floor((i.getTime()-n.getTime())/(1e3*60*60*24));m===1?e.s.cs=(e.s.cs||0)+1:m>1&&(e.s.cs=1)}else e.s.cs=1;e.s.dc=1}else e.s.dc=(e.s.dc||0)+1}static getCollectionStreakInfo(){const e=this.getData(),s=e.s?.cs||0,a=e.s?.dc||0;return{currentStreak:s,dailyCollections:a,streakMultiplier:1}}static getCollectionCount(e){const s=this.getData();return Object.keys(s.c).filter(r=>r.startsWith(e.split("_")[0])).length}static shouldProcessPassive(){const e=this.getData(),s=Date.now(),a=e.t.lp||0;return s-a>=this.PASSIVE_INTERVAL}static markPassiveProcessed(){const e=this.getData();e.t.lp=Date.now(),this.saveData(e)}static getStats(){const e=this.getData(),s=e.s?.tr||{a:0,e:0,d:0};return{totalCollections:e.s?.tc||0,totalResourcesCollected:{antimatter:s.a||0,element115:s.e||0,deuterium:s.d||0},totalTravels:e.s?.tt||0}}static migrateFromOldStorage(){try{const e=["atlas_ship_resources","atlas_ship_upgrades","atlas_resource_collections","_atlasSpaceShip_collections","_atlasSpaceShip_lastPassive","atlas_last_resource_generation","atlas_last_passive_generation"];if(z(this.STORAGE_KEY))return;const a=localStorage.getItem("atlas_ship_resources"),r=localStorage.getItem("atlas_ship_upgrades"),o=localStorage.getItem("atlas_resource_collections")||localStorage.getItem("_atlasSpaceShip_collections"),n={...this.DEFAULT_DATA};if(a)try{const i=JSON.parse(a);n.r.a=i.antimatter||150,n.r.e=i.element115||100,n.r.d=i.deuterium||125}catch{}if(r)try{const i=JSON.parse(r);n.u.l=i.level||1,n.u.ef=i.efficiency||1,n.u.rn=i.range||300,n.u.st=i.storage||500,n.u.m=i.multiplier||i.passiveGeneration||1}catch{}if(o)try{const i=JSON.parse(o);Object.keys(i).forEach(m=>{i[m].lastCollected&&(n.c[i[m].id]=i[m].lastCollected)})}catch{}this.saveData(n),e.forEach(i=>{try{localStorage.removeItem(i)}catch{}}),console.log("Successfully migrated to unified spaceship storage")}catch(e){console.error("Error during migration:",e)}}static reset(){tt(this.STORAGE_KEY)}static getStorageSize(){return(z(this.STORAGE_KEY)||"{}").length}static compactData(e){return{r:e.r,u:e.u,c:e.c,s:e.s,t:e.t}}static expandData(e){const s=Date.now(),a=1440*60*1e3,r={};return e.c&&Object.keys(e.c).forEach(n=>{const i=e.c[n],m=15778368e5,c=1893456e6;if(i===0){const g=s-a;r[n]=g}else if(i>=m&&i<=c)r[n]=i;else if(i>0&&i<86400*30){const g=s-i*1e3;r[n]=g}else r[n]=s-a}),{r:e.r||{a:300,e:200,d:250},u:e.u||{l:1,ef:1,rn:500,st:1e3,m:1},c:r,t:e.t||{},s:e.s||{tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0,dcp:0,dcs:0,dcg:0,lcd:new Date().toDateString()}}}static cleanCorruptedTimestamps(){const e=this.getData(),s=Date.now(),a=15778368e5,r=1893456e6,o=1440*60*1e3;let n=!1;Object.keys(e.c).forEach(i=>{const m=e.c[i];(m===0||m<a||m>r)&&(e.c[i]=s-o,n=!0)}),n&&this.saveData(e)}static getDailyCollectionInfo(){const e=this.getData(),s=new Date().toDateString();return e.s||(e.s={tc:0,tr:{a:0,e:0,d:0},tt:0,cs:0,dc:0,dcp:0,dcs:0,dcg:0,lcd:s},this.saveData(e)),e.s.lcd!==s&&(e.s.dcp=0,e.s.dcs=0,e.s.dcg=0,e.s.lcd=s,this.saveData(e)),{planets:{used:e.s.dcp||0,limit:this.DAILY_COLLECTION_LIMITS.planet,unlimited:this.DAILY_COLLECTION_LIMITS.planet===1/0},systems:{used:e.s.dcs||0,limit:this.DAILY_COLLECTION_LIMITS.system,unlimited:this.DAILY_COLLECTION_LIMITS.system===1/0},galaxies:{used:e.s.dcg||0,limit:this.DAILY_COLLECTION_LIMITS.galaxy,unlimited:this.DAILY_COLLECTION_LIMITS.galaxy===1/0}}}}const Vt=Object.freeze(Object.defineProperty({__proto__:null,UnifiedSpaceshipStorage:H},Symbol.toStringTag,{value:"Module"}));class T{static initialize(){H.migrateFromOldStorage()}static getResources(){return H.getResources()}static getUpgrade(){return H.getUpgrade()}static addResources(e){H.addResources({antimatter:e.antimatter||0,element115:e.element115||0,deuterium:e.deuterium||0})}static consumeResources(e){return H.consumeResources(e)}static calculateTravelCost(e,s=0){const r={galaxy:{antimatter:25,element115:20,deuterium:15},system:{antimatter:8,element115:6,deuterium:10},planet:{antimatter:2,element115:1,deuterium:3}}[e],o=Math.max(1,s/100);return{antimatter:Math.floor(r.antimatter*o),element115:Math.floor(r.element115*o),deuterium:Math.floor(r.deuterium*o)}}static canAffordTravel(e,s=0){const a=this.calculateTravelCost(e,s),r=this.getResources(),o=this.getUpgrade(),n={antimatter:Math.floor(a.antimatter/o.efficiency),element115:Math.floor(a.element115/o.efficiency),deuterium:Math.floor(a.deuterium/o.efficiency)};return r.antimatter>=n.antimatter&&r.element115>=n.element115&&r.deuterium>=n.deuterium&&s<=o.range}static getUpgradeCost(e){let s;e<=20?s=1e3+(e-1)*400:s=1e3+20*400+Math.floor(Math.log(e-20+1)*1200);const r=Math.floor(s*.4/1.3),o=1+(e-1)*.01,n=Math.floor(r*o);return{antimatter:n,element115:Math.floor(n*1.3),deuterium:Math.floor(n*.9)}}static canAffordUpgrade(){const e=this.getUpgrade();if(e.level>=100)return!1;const a=this.getUpgradeCost(e.level),r=this.getResources();return r.antimatter>=a.antimatter&&r.element115>=a.element115&&r.deuterium>=a.deuterium}static upgradeShip(){const e=this.getUpgrade(),s=this.getUpgradeCost(e.level);return H.upgradeShip(s)}static calculatePassiveGeneration(){const e=this.getUpgrade(),s=JSON.parse(z("_atlasLocations")||"[]"),a=Array.isArray(s)?s:s.locations||[];let r={antimatter:0,element115:0,deuterium:0},o={planets:0,systems:0,galaxies:0};return a.forEach(n=>{n.type==="planet"?(o.planets++,r.antimatter+=.07,r.element115+=.05,r.deuterium+=.08):n.type==="system"&&(o.systems++,r.antimatter+=.02,r.element115+=.02,r.deuterium+=.02)}),r.antimatter=r.antimatter*e.multiplier,r.element115=r.element115*e.multiplier,r.deuterium=r.deuterium*e.multiplier,{...r,sources:o}}static processPassiveGeneration(){if(H.shouldProcessPassive()){const e=this.calculatePassiveGeneration();(e.antimatter>0||e.element115>0||e.deuterium>0)&&(this.addResources({antimatter:Math.round(e.antimatter),element115:Math.round(e.element115),deuterium:Math.round(e.deuterium)}),this.showPassiveGenerationNotification(e)),H.markPassiveProcessed()}}static getAccumulatedResourcesWithLimit(){const e=this.calculatePassiveGeneration(),s=this.getUpgrade(),a=this.getUpgradeCost(s.level),r={antimatter:a.antimatter*5,element115:a.element115*5,deuterium:a.deuterium*5},n=H.getData().t.lp,i=Date.now();if(!n||n===0||e.sources.planets===0&&e.sources.systems===0)return e;const m=Math.floor((i-n)/(60*1e3));return m<1?{antimatter:0,element115:0,deuterium:0,sources:e.sources}:m>=1?{antimatter:Math.min(e.antimatter*m,r.antimatter*2),element115:Math.min(e.element115*m,r.element115*2),deuterium:Math.min(e.deuterium*m,r.deuterium*2),sources:e.sources}:{antimatter:Math.min(e.antimatter*m,r.antimatter*2),element115:Math.min(e.element115*m,r.element115*2),deuterium:Math.min(e.deuterium*m,r.deuterium*2),sources:e.sources}}static showPassiveGenerationNotification(e){if(e.antimatter+e.element115+e.deuterium===0)return;const s=document.createElement("div");s.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-purple-900/90 to-blue-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-purple-500/50 w-[90vw] max-w-lg",s.className+=" animate-slideInDown";const a=document.createElement("div");a.className="flex items-center space-x-3";const r=document.createElement("span");r.className="text-2xl",r.textContent="⛏️";const o=document.createElement("div"),n=document.createElement("div");n.className="text-sm font-bold text-purple-300",n.textContent="Mining Operations Complete!";const i=document.createElement("div");i.className="text-xs text-purple-200 mt-1 flex gap-3";const m=document.createElement("span");m.className="text-purple-300 flex items-center gap-1",Ae.createRoot(m).render(t.jsxs(t.Fragment,{children:[t.jsx(de,{size:12,color:"currentColor"}),"+",Math.round(e.antimatter)," AM"]}));const g=document.createElement("span");g.className="text-cyan-300 flex items-center gap-1",Ae.createRoot(g).render(t.jsxs(t.Fragment,{children:[t.jsx(me,{size:12,color:"currentColor"}),"+",Math.round(e.element115)," E115"]}));const v=document.createElement("span");v.className="text-orange-300 flex items-center gap-1",Ae.createRoot(v).render(t.jsxs(t.Fragment,{children:[t.jsx(ue,{size:12,color:"currentColor"}),"+",Math.round(e.deuterium)," D"]})),i.appendChild(m),i.appendChild(g),i.appendChild(v);const N=document.createElement("div");N.className="text-xs text-purple-300 mt-1",N.textContent=`Collected from ${e.sources.planets}🪐 ${e.sources.systems}⭐`,o.appendChild(n),o.appendChild(i),o.appendChild(N),a.appendChild(r),a.appendChild(o),s.appendChild(a),document.body.appendChild(s),setTimeout(()=>{s.className=s.className.replace("animate-slideInDown","animate-slideOutUp"),setTimeout(()=>{s.remove()},300)},3e3)}static reset(){H.reset()}static getResourcesPercentage(){const e=this.getResources(),s=this.getUpgrade();return{antimatter:e.antimatter/s.storage*100,element115:e.element115/s.storage*100,deuterium:e.deuterium/s.storage*100}}static getPassiveGenerationInfo(){const e=this.calculatePassiveGeneration(),s=H.shouldProcessPassive()?0:(60*1e3-(Date.now()-(H.getData().t.lp||0)))/1e3;return{generation:e,perHour:{antimatter:e.antimatter*60,element115:e.element115*60,deuterium:e.deuterium*60},nextGenerationIn:Math.max(0,s)}}static getExchangeRates(){const e=this.getResources();return{antimatter:[{from:"antimatter",to:"element115",rate:1.2,available:e.antimatter},{from:"antimatter",to:"deuterium",rate:.8,available:e.antimatter}],element115:[{from:"element115",to:"antimatter",rate:.9,available:e.element115},{from:"element115",to:"deuterium",rate:1.1,available:e.element115}],deuterium:[{from:"deuterium",to:"antimatter",rate:1.3,available:e.deuterium},{from:"deuterium",to:"element115",rate:.95,available:e.deuterium}]}}static exchangeResources(e,s,a){const r=this.getResources(),i=this.getExchangeRates()[e].find(w=>w.to===s);if(!i||a<=0||r[e]<a)return!1;const m=Math.floor(a*i.rate),c=this.getUpgrade();if(r[s]+m>c.storage)return!1;const g={...r};return g[e]-=a,g[s]+=m,H.setResources(g),this.showExchangeNotification(e,s,a,m),!0}static showExchangeNotification(e,s,a,r){const o=document.createElement("div");o.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r from-amber-900/90 to-orange-900/90 text-white px-4 py-3 rounded-lg shadow-lg border border-amber-500/50",o.className+=" animate-slideInDown";const n={antimatter:{name:"AM",color:"text-purple-300"},element115:{name:"E115",color:"text-cyan-300"},deuterium:{name:"D",color:"text-orange-300"}},i=n[e],m=n[s],c=document.createElement("div");c.className="flex items-center space-x-3";const g=document.createElement("span");g.className="text-2xl",g.textContent="🔄";const w=document.createElement("div"),v=document.createElement("div");v.className="text-sm font-bold text-amber-300",v.textContent="Resource Exchange";const b=document.createElement("div");b.className="text-xs text-amber-200 mt-1";const N=document.createElement("span");N.className=`${i.color} flex items-center gap-1`;const u=document.createElement("span");u.className=`${m.color} flex items-center gap-1`;const y=document.createElement("span");y.className="text-amber-300 mx-2",y.textContent="→";const j=Ae.createRoot(N),D=e==="antimatter"?t.jsx(de,{size:10,color:"currentColor"}):e==="element115"?t.jsx(me,{size:10,color:"currentColor"}):t.jsx(ue,{size:10,color:"currentColor"}),O=Ae.createRoot(u),ae=s==="antimatter"?t.jsx(de,{size:10,color:"currentColor"}):s==="element115"?t.jsx(me,{size:10,color:"currentColor"}):t.jsx(ue,{size:10,color:"currentColor"});j.render(t.jsxs(t.Fragment,{children:[D,"-",a," ",i.name]})),O.render(t.jsxs(t.Fragment,{children:[ae,"+",r," ",m.name]})),b.appendChild(N),b.appendChild(y),b.appendChild(u),w.appendChild(v),w.appendChild(b),c.appendChild(g),c.appendChild(w),o.appendChild(c),document.body.appendChild(o),setTimeout(()=>{o.className=o.className.replace("animate-slideInDown","animate-slideOutUp"),setTimeout(()=>{o.remove()},300)},3e3)}}class _e{static listeners=new Map;static subscribe(e,s){return this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(s),()=>{const a=this.listeners.get(e);if(a){const r=a.indexOf(s);r>-1&&a.splice(r,1)}}}static emit(e,s){const a=this.listeners.get(e);a&&a.forEach(r=>{try{r(s)}catch(o){console.warn("Error in resource event callback:",o)}})}static clear(){this.listeners.clear()}}class He{static VERSION="2.8.48";static generateFallbackHash(e){let s=0;for(let a=0;a<e.length;a++){const r=e.charCodeAt(a);s=(s<<5)-s+r,s=s&s}return Math.abs(s).toString(16).padStart(8,"0")}static async generateHash(e){if(!crypto||!crypto.subtle||!crypto.subtle.digest)return console.warn("crypto.subtle not available, using fallback hash"),this.generateFallbackHash(e);const s=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(a)).map(n=>n.toString(16).padStart(2,"0")).join("")}static async verifyHash(e,s){const a=await this.generateHash(e);if(s===a)return!0;if(s.length===8||a.length===8){if(!crypto||!crypto.subtle||!crypto.subtle.digest)return console.warn("Cannot verify SHA-256 hash in non-secure context, accepting"),!0;{const r=this.generateFallbackHash(e);return s===r}}return!1}static async exportAllData(){const e=Date.now(),s=st(),a={spaceship:xe(R.SPACESHIP),dailyChallenges:xe(R.DAILY_CHALLENGES),locations:xe(R.LOCATIONS)},r={};let o=null;for(let u=0;u<localStorage.length;u++){const y=localStorage.key(u);if(y)try{const j=decodeURIComponent(atob(y));if(j.startsWith(R.ARCHIVE)){const D=localStorage.getItem(y);if(D)if(j===R.ARCHIVE)o=D;else{const O=j.substring(R.ARCHIVE.length+1);r[O]=D}}}catch{continue}}const n={spaceship:localStorage.getItem(a.spaceship),dailyChallenges:localStorage.getItem(a.dailyChallenges),locations:localStorage.getItem(a.locations)};o&&(n.archive=o),Object.keys(r).length>0&&(n.archives=r);const i={};if(n.spaceship&&(i.spaceship=await this.generateHash(n.spaceship)),n.archive&&(i.archive=await this.generateHash(n.archive)),n.dailyChallenges&&(i.dailyChallenges=await this.generateHash(n.dailyChallenges)),n.locations&&(i.locations=await this.generateHash(n.locations)),n.archives){i.archives={};for(const[u,y]of Object.entries(n.archives))i.archives[u]=await this.generateHash(y)}const m={version:this.VERSION,timestamp:e,currentUniverse:s,data:n,hashes:i},c=JSON.stringify(m),g=await this.generateHash(c),w={...m,checksum:g},v=JSON.stringify(w),b=new TextEncoder().encode(v);return btoa(String.fromCharCode(...b))}static async downloadExport(){try{const e=await this.exportAllData(),a=`atlas-data-saved-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}.atl`,r=new Blob([e],{type:"application/octet-stream"}),o=URL.createObjectURL(r),n=document.createElement("a");n.href=o,n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(o)}catch(e){throw console.error("Error exporting data:",e),new Error("Failed to export data")}}static async importData(e){return new Promise((s,a)=>{const r=new FileReader;r.onload=async o=>{try{const n=o.target?.result,i=atob(n).split("").map(u=>u.charCodeAt(0)),m=new TextDecoder().decode(new Uint8Array(i)),c=JSON.parse(m);if(!this.validateImportData(c))throw new Error("Invalid import data format");const{checksum:g,...w}=c,v=JSON.stringify(w);if(!await this.verifyHash(v,g))throw new Error("Data integrity check failed. File may have been tampered with.");if(c.data.spaceship&&c.hashes.spaceship&&!await this.verifyHash(c.data.spaceship,c.hashes.spaceship))throw new Error("Spaceship data integrity check failed");if(c.data.archive&&c.hashes.archive&&!await this.verifyHash(c.data.archive,c.hashes.archive))throw new Error("Archive data integrity check failed");if(c.data.dailyChallenges&&c.hashes.dailyChallenges&&!await this.verifyHash(c.data.dailyChallenges,c.hashes.dailyChallenges))throw new Error("Daily challenges data integrity check failed");if(c.data.locations&&c.hashes.locations&&!await this.verifyHash(c.data.locations,c.hashes.locations))throw new Error("Locations data integrity check failed");if(c.data.archives&&c.hashes.archives){for(const[u,y]of Object.entries(c.data.archives))if(c.hashes.archives[u]&&!await this.verifyHash(y,c.hashes.archives[u]))throw new Error(`Archive data integrity check failed for universe ${u}`)}const N={spaceship:xe(R.SPACESHIP),dailyChallenges:xe(R.DAILY_CHALLENGES),locations:xe(R.LOCATIONS)};if(c.data.spaceship!==void 0&&(c.data.spaceship===null?localStorage.removeItem(N.spaceship):localStorage.setItem(N.spaceship,c.data.spaceship)),c.data.dailyChallenges!==void 0&&(c.data.dailyChallenges===null?localStorage.removeItem(N.dailyChallenges):localStorage.setItem(N.dailyChallenges,c.data.dailyChallenges)),c.data.locations!==void 0&&(c.data.locations===null?localStorage.removeItem(N.locations):localStorage.setItem(N.locations,c.data.locations)),c.data.archive!==void 0){const u=xe(R.ARCHIVE);c.data.archive===null?localStorage.removeItem(u):localStorage.setItem(u,c.data.archive)}if(c.data.archives)for(const[u,y]of Object.entries(c.data.archives)){const j=`${R.ARCHIVE}_${u}`,D=btoa(encodeURIComponent(j));localStorage.setItem(D,y)}window.location.reload(),s()}catch(n){console.error("Error importing data:",n),a(new Error(n instanceof Error?n.message:"Failed to import data. Please ensure the file is valid."))}},r.onerror=()=>{a(new Error("Failed to read file"))},r.readAsText(e)})}static validateImportData(e){return e&&typeof e=="object"&&typeof e.version=="string"&&typeof e.timestamp=="number"&&e.data&&typeof e.data=="object"&&e.hashes&&typeof e.hashes=="object"&&typeof e.checksum=="string"}static getDataSummary(){const e=z(R.SPACESHIP),s=z(R.ARCHIVE),a=z(R.DAILY_CHALLENGES),r=z(R.LOCATIONS),o=n=>n?new Blob([n]).size:0;return{hasSpaceship:!!e,hasArchive:!!s,hasDailyChallenges:!!a,hasLocations:!!r,totalSize:o(e)+o(s)+o(a)+o(r)}}}const ke=({value:d,max:e,label:s,color:a="indigo",size:r="xs",showPercentage:o=!1})=>{const n=e>0?Math.min(d/e*100,100):0,i={indigo:{bg:"bg-indigo-500/20",fill:"bg-gradient-to-r from-indigo-500 to-indigo-400",text:"text-indigo-400"},blue:{bg:"bg-blue-500/20",fill:"bg-gradient-to-r from-blue-500 to-blue-400",text:"text-blue-400"},purple:{bg:"bg-purple-500/20",fill:"bg-gradient-to-r from-purple-500 to-purple-400",text:"text-purple-400"},cyan:{bg:"bg-cyan-500/20",fill:"bg-gradient-to-r from-cyan-500 to-cyan-400",text:"text-cyan-400"},green:{bg:"bg-green-500/20",fill:"bg-gradient-to-r from-green-500 to-green-400",text:"text-green-400"},orange:{bg:"bg-orange-500/20",fill:"bg-gradient-to-r from-orange-500 to-orange-400",text:"text-orange-400"},yellow:{bg:"bg-yellow-500/20",fill:"bg-gradient-to-r from-yellow-500 to-yellow-400",text:"text-yellow-400"}},m={xs:"h-1.5",sm:"h-2"},c=i[a]||i.indigo,g=m[r];return t.jsxs("div",{className:"w-full",children:[s&&t.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[t.jsx("span",{className:"text-gray-400",children:s}),o&&t.jsxs("span",{className:`${c.text} font-medium`,children:[n.toFixed(0),"%"]})]}),t.jsx("div",{className:`w-full ${c.bg} rounded-full overflow-hidden ${g}`,children:t.jsx("div",{className:`${c.fill} ${g} rounded-full transition-all duration-700 ease-out shadow-sm`,style:{width:`${n}%`},children:t.jsx("div",{className:`w-full h-full ${c.fill} opacity-50 animate-pulse`})})})]})},Ft=({currentLocation:d})=>{const[e,s]=p.useState(!1),[a,r]=p.useState(!1),[o,n]=p.useState("stats"),[i,m]=p.useState(null),[c,g]=p.useState([]),[w,v]=p.useState(null),[b,N]=p.useState(null),[u,y]=p.useState({antimatter:0,element115:0,deuterium:0}),[j,D]=p.useState({level:1,efficiency:1,range:300,storage:500,multiplier:1}),[O,ae]=p.useState({antimatter:0,element115:0,deuterium:0}),[E,ee]=p.useState({antimatter:0,element115:0,deuterium:0,sources:{planets:0,systems:0,galaxies:0}}),[l,C]=p.useState({antimatter:0,element115:0,deuterium:0,sources:{planets:0,systems:0,galaxies:0}}),[I,A]=p.useState(!1),[K,W]=p.useState(!1),[,Z]=p.useState({}),[F,U]=p.useState(null),[te,J]=p.useState(!1),[V,he]=p.useState(!1),X=p.useRef(null),ne=p.useRef(null),ye=p.useRef(null);p.useEffect(()=>{if(e){m(jt()),g(Ie.getLocations()),v(Ie.getLocationStats());const h=Me.updateProgress();N(h),y(T.getResources()),D(T.getUpgrade());const L=T.getUpgrade();ae(T.getUpgradeCost(L.level));const x=T.getAccumulatedResourcesWithLimit();ee(x);const M=T.calculatePassiveGeneration();C(M),he(ze.isRemoteUniverse())}},[e]),p.useEffect(()=>{if(!e)return;const L=setInterval(()=>{he(ze.isRemoteUniverse())},1e3);return()=>clearInterval(L)},[e]),p.useEffect(()=>{if(!e)return;const h=()=>{const q=T.getAccumulatedResourcesWithLimit();ee(q);const ie=T.calculatePassiveGeneration();C(ie)},L=()=>{y(T.getResources())},x=setInterval(h,15e3),M=_e.subscribe("resources_updated",L);let _=null;return o==="saved"&&(_=setInterval(()=>{Z({})},3e4)),()=>{clearInterval(x),_&&clearInterval(_),M()}},[e,o]);const oe=()=>{r(!0),setTimeout(()=>{s(!1),r(!1)},300)},Le=async()=>{try{await He.downloadExport()}catch(h){console.error("Export failed:",h),U("Export failed. Please try again."),setTimeout(()=>U(null),3e3)}},we=async h=>{const L=h.target.files?.[0];if(L){if(!L.name.endsWith(".atl")){U("Please select a valid .atl file"),setTimeout(()=>U(null),3e3);return}try{await He.importData(L),J(!0),setTimeout(()=>J(!1),3e3)}catch(x){U(x instanceof Error?x.message:"Import failed"),setTimeout(()=>U(null),3e3)}ye.current&&(ye.current.value="")}},je=()=>{e?oe():s(!0)};p.useEffect(()=>{const h=L=>{e&&!a&&X.current&&!X.current.contains(L.target)&&oe()};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[e,a]),p.useEffect(()=>{const h=L=>{I&&!K&&ne.current&&!ne.current.contains(L.target)&&Ne()};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[I,K]);const De=h=>{if(h===0)return"0 B";const L=1024,x=["B","KB","MB"],M=Math.floor(Math.log(h)/Math.log(L));return parseFloat((h/Math.pow(L,M)).toFixed(2))+" "+x[M]},Se=h=>h.replace(/_/g," "),Ce=(h,L)=>{h.stopPropagation(),Ie.removeLocation(L),g(Ie.getLocations()),v(Ie.getLocationStats())},Ne=()=>{W(!0),setTimeout(()=>{A(!1),W(!1)},300)};return t.jsx(t.Fragment,{children:t.jsxs("div",{ref:X,className:"fixed bottom-4 sm:bottom-6 right-4 sm:right-6 z-50",children:[t.jsxs("button",{onClick:je,className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-600 via-purple-600 to-blue-800 hover:from-blue-500 hover:via-purple-500 hover:to-blue-700 text-white rounded-full shadow-2xl border-2 border-blue-400/30 transition-all duration-300 transform hover:scale-105 backdrop-blur-sm",title:"Spaceship Control Panel",children:[t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("svg",{className:"flex items-center justify-center",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",children:t.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[t.jsx("path",{d:"M12 3a6.02 6.02 0 0 0-5.923 4.9c-.086.466-.13.699.032 1.005c.161.307.39.409.847.613c1.38.614 3.134.982 5.044.982s3.665-.368 5.044-.982c.457-.204.686-.306.847-.613c.162-.306.118-.54.032-1.005A6.02 6.02 0 0 0 12 3"}),t.jsx("path",{d:"M17 5.5c2.989.788 5 2.26 5 3.945C22 11.961 17.523 14 12 14S2 11.96 2 9.445C2 7.76 4.011 6.288 7 5.5M12 18v3m5-4l1 4M7 17l-1 4"})]})})}),t.jsx("div",{className:"absolute inset-0 rounded-full bg-blue-400/20 animate-ping"})]}),e&&t.jsxs("div",{className:"fixed bottom-20 sm:bottom-24 right-2 sm:right-6 w-[calc(100vw-1rem)] sm:w-96 max-w-md max-h-[70vh] sm:max-h-96 bg-black/90 backdrop-blur-xl rounded-2xl border border-blue-400/30 shadow-2xl z-40 overflow-hidden transition-all duration-300 ease-out",style:{animation:a?"slideDownFadeOut 0.3s ease-out forwards":"slideUpFadeIn 0.3s ease-out forwards"},children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 p-4 border-b border-white/10",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),t.jsx("h3",{className:"text-white font-bold text-lg",children:"🚀 Spaceship Control"})]}),t.jsx("button",{onClick:oe,className:"text-gray-400 hover:text-white transition-colors duration-200",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex mt-3 space-x-1 overflow-x-auto",children:[t.jsx("button",{onClick:()=>n("stats"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 whitespace-nowrap ${o==="stats"?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:"📊 Stats"}),t.jsx("button",{onClick:()=>n("ship"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 whitespace-nowrap ${o==="ship"?"bg-green-500/30 text-green-300 border border-green-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:"🚀 Ship"}),t.jsxs("button",{onClick:()=>n("saved"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors duration-200 whitespace-nowrap ${o==="saved"?"bg-purple-500/30 text-purple-300 border border-purple-500/50":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:["📍 Saved (",w?.total||0,")"]})]})]}),t.jsxs("div",{className:"p-4 max-h-64 overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[o==="stats"&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-semibold mb-2 text-xs",children:"🌟 Daily Challenges"}),t.jsx("div",{className:"bg-white/5 rounded p-2 border border-indigo-500/20",children:b&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-[10px] text-gray-400",children:"Today's Progress"}),t.jsxs("span",{className:"text-[9px] text-indigo-400",children:["Day ",b.dayNumber," • x",Me.getDayInfo().multiplier]})]}),t.jsx("div",{className:"space-y-1.5 mb-2",children:b.challenges.map(h=>{const L={galaxies:"indigo",systems:"blue",planets:"purple"},x={galaxies:"Galaxies",systems:"Systems",planets:"Planets"};return t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"text-[10px] text-gray-400 mb-0.5",children:x[h.type]}),t.jsx(ke,{value:h.current,max:h.target,label:`${h.current}/${h.target}`,color:L[h.type],showPercentage:!0}),h.completed&&t.jsx("div",{className:"absolute -right-2 top-1.5",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,viewBox:"0 0 128 128",children:t.jsx("path",{fill:"#40c0e7",stroke:"#40c0e7",strokeMiterlimit:10,strokeWidth:6,d:"M48.3 103.45L12.65 67.99a2.2 2.2 0 0 1 0-3.12l9-9.01c.86-.86 2.25-.86 3.11 0l23.47 23.33c.86.86 2.26.85 3.12-.01l51.86-52.36c.86-.87 2.26-.87 3.13-.01l9.01 9.01c.86.86.86 2.25.01 3.11l-56.5 57.01l.01.01l-7.45 7.49c-.86.86-2.26.86-3.12.01z"})})})]},h.type)})}),t.jsxs("div",{className:"grid grid-cols-2 gap-1 text-[10px]",children:[t.jsxs("div",{className:"bg-black/30 rounded p-1.5 border border-indigo-500/30",children:[t.jsx("div",{className:"text-gray-400 text-[9px]",children:"Completed"}),t.jsxs("div",{className:"text-indigo-400 font-bold",children:[b.challenges.filter(h=>h.completed).length,"/",b.challenges.length]})]}),t.jsxs("div",{className:"bg-black/30 rounded p-1.5 border border-green-500/30",children:[t.jsx("div",{className:"text-gray-400 text-[9px]",children:"Atlas Size"}),t.jsx("div",{className:"text-green-400 font-bold",children:i?De(i.size):"0 B"})]})]})]})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-semibold mb-2 text-xs",children:"📍 Saved Locations"}),t.jsxs("div",{className:"bg-white/5 rounded p-2 border border-purple-500/20",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-[10px] text-gray-400",children:"Storage Usage"}),t.jsxs("span",{className:"text-[9px] text-purple-400",children:[w?.total||0,"/",w?.maxAllowed||50," slots"]})]}),t.jsx("div",{className:"mb-2",children:t.jsx(ke,{value:w?.total||0,max:w?.maxAllowed||50,label:`${w?.total||0}/${w?.maxAllowed||50}`,color:"purple",showPercentage:!0})}),t.jsxs("div",{className:"grid grid-cols-3 gap-1 text-[10px]",children:[t.jsxs("div",{className:"bg-black/30 rounded p-1 text-center border border-indigo-500/30",children:[t.jsx("div",{className:"text-gray-400 text-[9px]",children:"Galaxies"}),t.jsx("div",{className:"text-indigo-400 font-bold",children:w?.galaxies||0})]}),t.jsxs("div",{className:"bg-black/30 rounded p-1 text-center border border-blue-500/30",children:[t.jsx("div",{className:"text-gray-400 text-[9px]",children:"Systems"}),t.jsx("div",{className:"text-blue-400 font-bold",children:w?.systems||0})]}),t.jsxs("div",{className:"bg-black/30 rounded p-1 text-center border border-purple-500/30",children:[t.jsx("div",{className:"text-gray-400 text-[9px]",children:"Planets"}),t.jsx("div",{className:"text-purple-400 font-bold",children:w?.planets||0})]})]}),t.jsx("div",{className:"text-[8px] text-gray-500 mt-2",children:"Complete daily tasks to save more locations"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-semibold mb-2 text-xs",children:"💾 Data Management"}),t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"bg-white/5 rounded p-2 border border-blue-500/20",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"text-[10px] text-gray-400",children:"Export/Import Atlas Data"}),t.jsx("span",{className:"text-[9px] text-blue-400",children:(()=>{const h=He.getDataSummary();return`${[h.hasSpaceship,h.hasArchive,h.hasDailyChallenges,h.hasLocations].filter(Boolean).length}/4 keys`})()})]}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[t.jsxs("button",{onClick:Le,className:"flex-1 bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 text-[10px] px-2 py-1.5 rounded border border-blue-500/50 transition-colors duration-200 flex items-center justify-center gap-1",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,viewBox:"0 0 24 24",children:t.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.5,children:[t.jsx("path",{d:"M4 12a8 8 0 1 0 16 0"}),t.jsx("path",{strokeLinejoin:"round",d:"M12 14V4m0 0l3 3m-3-3L9 7"})]})}),t.jsx("span",{children:"Export"})]}),t.jsxs("button",{onClick:()=>ye.current?.click(),className:"flex-1 bg-green-500/20 hover:bg-green-500/30 text-green-300 text-[10px] px-2 py-1.5 rounded border border-green-500/50 transition-colors duration-200 flex items-center justify-center gap-1",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"currentColor",d:"M14.47 10.47a.75.75 0 1 1 1.06 1.06l-3 3a.75.75 0 0 1-1.06 0l-3-3a.75.75 0 1 1 1.06-1.06l1.72 1.72V4a.75.75 0 0 1 1.5 0v8.19z"}),t.jsx("path",{fill:"currentColor",d:"M20.75 12a.75.75 0 0 0-1.5 0a7.25 7.25 0 1 1-14.5 0a.75.75 0 0 0-1.5 0a8.75 8.75 0 1 0 17.5 0"})]}),t.jsx("span",{children:"Import"})]})]}),t.jsx("input",{ref:ye,type:"file",accept:".atl",onChange:we,className:"hidden"}),F&&t.jsx("div",{className:"mt-2 text-[9px] text-red-400 bg-red-500/10 p-1 rounded",children:F}),te&&t.jsx("div",{className:"mt-2 text-[9px] text-green-400 bg-green-500/10 p-1 rounded",children:"Data imported successfully! Reloading..."}),t.jsx("div",{className:"text-[8px] text-gray-500 mt-2",children:"Saves all localStorage keys to .atl file"})]})})]})]}),o==="ship"&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-white font-semibold mb-2 text-xs flex items-center gap-1",children:["⚡ Resources",t.jsxs("div",{className:"text-[10px] text-gray-400",children:["Lv.",j.level]})]}),t.jsxs("div",{className:"space-y-1 mb-2",children:[t.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-purple-500/20",children:[t.jsxs("div",{className:"flex justify-between text-[10px] mb-0.5",children:[t.jsxs("span",{className:"text-purple-300 flex items-center gap-1",children:[t.jsx(de,{size:12,color:"currentColor"}),"Antimatter"]}),t.jsxs("span",{className:"text-white font-mono",children:[u.antimatter,"/",j.storage]})]}),t.jsx(ke,{value:u.antimatter,max:j.storage,label:"",color:"purple",showPercentage:!1})]}),t.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[t.jsxs("div",{className:"flex justify-between text-[10px] mb-0.5",children:[t.jsxs("span",{className:"text-cyan-300 flex items-center gap-1",children:[t.jsx(me,{size:12,color:"currentColor"}),"Element 115"]}),t.jsxs("span",{className:"text-white font-mono",children:[u.element115,"/",j.storage]})]}),t.jsx(ke,{value:u.element115,max:j.storage,label:"",color:"cyan",showPercentage:!1})]}),t.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-orange-500/20",children:[t.jsxs("div",{className:"flex justify-between text-[10px] mb-0.5",children:[t.jsxs("span",{className:"text-orange-300 flex items-center gap-1",children:[t.jsx(ue,{size:12,color:"currentColor"}),"Deuterium"]}),t.jsxs("span",{className:"text-white font-mono",children:[u.deuterium,"/",j.storage]})]}),t.jsx(ke,{value:u.deuterium,max:j.storage,label:"",color:"orange",showPercentage:!1})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-white font-semibold mb-2 text-xs",children:"🔧 Ship Upgrade"}),t.jsxs("div",{className:"grid grid-cols-3 gap-1 text-[10px] mb-2",children:[t.jsxs("div",{className:"bg-white/5 rounded p-1 border border-blue-500/20",children:[t.jsx("div",{className:"text-gray-400 text-[9px]",children:"Efficiency"}),t.jsxs("div",{className:"text-blue-400 font-bold",children:[j.efficiency.toFixed(1),"x"]})]}),t.jsxs("div",{className:"bg-white/5 rounded p-1 border border-yellow-500/20",children:[t.jsx("div",{className:"text-gray-400 text-[9px]",children:"Storage"}),t.jsx("div",{className:"text-yellow-400 font-bold",children:j.storage})]}),t.jsxs("div",{className:"bg-white/5 rounded p-1 border border-indigo-500/20",children:[t.jsx("div",{className:"text-gray-400 text-[9px]",children:"Multiplier"}),t.jsxs("div",{className:"text-indigo-400 font-bold",children:[j.multiplier.toFixed(1),"x"]})]})]}),j.level<100&&!T.canAffordUpgrade()&&t.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded p-1.5 mb-2",children:[t.jsx("div",{className:"text-[10px] text-red-300 font-semibold mb-0.5",children:"Missing resources:"}),t.jsxs("div",{className:"text-[9px] text-red-200 space-y-0.5",children:[O.antimatter>u.antimatter&&t.jsxs("div",{className:"flex items-center gap-1",children:["• Need ",O.antimatter-u.antimatter," more ",t.jsx(de,{size:10,color:"currentColor"})," Antimatter"]}),O.element115>u.element115&&t.jsxs("div",{className:"flex items-center gap-1",children:["• Need ",O.element115-u.element115," more ",t.jsx(me,{size:10,color:"currentColor"})," Element 115"]}),O.deuterium>u.deuterium&&t.jsxs("div",{className:"flex items-center gap-1",children:["• Need ",O.deuterium-u.deuterium," more ",t.jsx(ue,{size:10,color:"currentColor"})," Deuterium"]})]})]}),t.jsx("button",{onClick:()=>{if(T.upgradeShip()){y(T.getResources()),D(T.getUpgrade());const h=T.getUpgrade();ae(T.getUpgradeCost(h.level));const L=T.getAccumulatedResourcesWithLimit();ee(L),_e.emit("resources_updated")}},disabled:!T.canAffordUpgrade(),className:`w-full px-2 py-1.5 rounded text-[10px] font-medium transition-all duration-200 ${T.canAffordUpgrade()?"bg-gradient-to-r from-green-600/30 to-blue-600/30 hover:from-green-600/40 hover:to-blue-600/40 text-green-300 border border-green-500/50 hover:border-green-400/70 cursor-pointer":"bg-gray-700/30 text-gray-500 border border-gray-600/30 cursor-not-allowed"}`,children:j.level>=100?t.jsx("div",{className:"text-yellow-400",children:"🌟 MAX LEVEL - Ultimate Spaceship!"}):t.jsxs("div",{children:[t.jsxs("div",{className:"font-bold",children:["Upgrade to Level ",j.level+1]}),t.jsxs("div",{className:"opacity-80 flex gap-2 justify-center mt-0.5",children:[t.jsxs("span",{className:"text-purple-300 flex items-center gap-0.5",children:[t.jsx(de,{size:10,color:"currentColor"}),O.antimatter,"AM"]}),t.jsxs("span",{className:"text-cyan-300 flex items-center gap-0.5",children:[t.jsx(me,{size:10,color:"currentColor"}),O.element115,"E115"]}),t.jsxs("span",{className:"text-orange-300 flex items-center gap-0.5",children:[t.jsx(ue,{size:10,color:"currentColor"}),O.deuterium,"D"]})]})]})})]})]}),o==="saved"&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-500/20 to-blue-500/20 rounded-lg p-2 border border-purple-500/30",children:[t.jsxs("h4",{className:"text-white font-semibold text-xs flex items-center gap-1 mb-1",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",children:t.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.5 8V6.5l4-3l3 1.5l4-3l6 4.5V8zm-.476 8.124L1.184 9.5h21.632l-1.84 6.624a4.5 4.5 0 0 0-7.364 4.376h-3.224q.111-.483.112-1a4.5 4.5 0 0 0-7.476-3.376M6 22.5a3 3 0 1 0 0-6a3 3 0 0 0 0 6m12 0a3 3 0 1 0 0-6a3 3 0 0 0 0 6",clipRule:"evenodd"})}),"Mining Operations"]}),E.sources.planets===0&&E.sources.systems===0?t.jsx("div",{className:"text-[10px] text-gray-400",children:"💡 Save planets and systems to enable mining operations"}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-1",children:[t.jsx("span",{className:"text-purple-300",children:"Generating/hour:"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("span",{className:"text-purple-300 flex items-center gap-0.5",children:[t.jsx(de,{size:8,color:"currentColor"}),"+",Math.round(l.antimatter*60)," AM"]}),t.jsxs("span",{className:"text-cyan-300 flex items-center gap-0.5",children:[t.jsx(me,{size:8,color:"currentColor"}),"+",Math.round(l.element115*60)," E115"]}),t.jsxs("span",{className:"text-orange-300 flex items-center gap-0.5",children:[t.jsx(ue,{size:8,color:"currentColor"}),"+",Math.round(l.deuterium*60)," D"]})]})]}),t.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-2",children:[t.jsx("span",{className:"text-gray-400",children:"Ready to collect:"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("span",{className:"text-purple-300 flex items-center gap-0.5",children:[t.jsx(de,{size:8,color:"currentColor"}),"+",Math.round(E.antimatter)," AM"]}),t.jsxs("span",{className:"text-cyan-300 flex items-center gap-0.5",children:[t.jsx(me,{size:8,color:"currentColor"}),"+",Math.round(E.element115)," E115"]}),t.jsxs("span",{className:"text-orange-300 flex items-center gap-0.5",children:[t.jsx(ue,{size:8,color:"currentColor"}),"+",Math.round(E.deuterium)," D"]})]})]}),t.jsxs("button",{onClick:()=>{A(!0)},disabled:E.antimatter+E.element115+E.deuterium===0,className:`w-full px-2 py-1.5 rounded text-[10px] font-medium transition-all duration-200 ${E.antimatter+E.element115+E.deuterium>0?"bg-gradient-to-r from-purple-600/30 to-blue-600/30 hover:from-purple-600/40 hover:to-blue-600/40 text-purple-300 border border-purple-500/50 hover:border-purple-400/70 cursor-pointer":"bg-gray-700/30 text-gray-500 border border-gray-600/30 cursor-not-allowed"}`,children:["🚀 Collect From ",E.sources.planets,"🪐 ",E.sources.systems,"⭐"]})]})]}),t.jsx("div",{className:"space-y-1",children:c.length===0?t.jsxs("div",{className:"text-center py-4",children:[t.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"No saved locations"}),t.jsx("div",{className:"text-gray-500 text-[10px]",children:"Use the 📍 button to save locations"})]}):c.map(h=>{const x=((f,S)=>{try{const P=f.split("/stargate/")[1];if(!P)return"";const G=atob(P.replace(/-/g,"+").replace(/_/g,"/")),B=new URLSearchParams(G),k=B.get("coordinates"),le=B.get("system"),ce=B.get("planet");return k?S==="galaxy"?`galaxy_${k}`:S==="system"&&le?`system_${k}_${le}`:S==="planet"&&le&&ce?`planet_${k}_${le}_${ce}`:"":""}catch{return""}})(h.stargateUrl,h.type),M=x?H.canCollectFromLocation(x):!0,_=x?H.getTimeUntilNextCollection(x):0,q={planet:900*1e3,system:2700*1e3,galaxy:480*60*1e3},ie=q[h.type]||q.planet,$=_*60*60*1e3,Y=ie-$,re=Math.max(0,Math.min(100,Y/ie*100)),Ee=f=>{if(f<=0)return"Ready";const S=Math.floor(f*60),P=Math.floor(S/60),G=S%60;return P>0?`${P}h ${G}m`:`${G}m`},ge=h.stargateUrl.indexOf("/stargate/"),ve=ge!==-1?h.stargateUrl.substring(ge):h.stargateUrl,se=`${window.location.origin}${ve}`;return V?t.jsxs("div",{className:"block bg-red-500/10 rounded p-1.5 border border-red-500/30 opacity-60 cursor-not-allowed",title:"Cannot travel to saved locations from remote universes - return to local universe first",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsxs("div",{className:"text-[8px]",children:[h.type==="galaxy"&&"🌌",h.type==="system"&&"⭐",h.type==="planet"&&"🪐"]}),t.jsx("div",{className:"text-red-300 text-[10px] font-medium truncate",children:Se(h.name)}),t.jsx("div",{className:"text-red-400 text-[8px] shrink-0",children:"REMOTE"})]})}),t.jsx("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),Ce(f,h.id)},className:"text-gray-400 hover:text-red-400 transition-all duration-200 ml-1 p-0.5",title:"Remove location",children:t.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),t.jsxs("div",{className:"text-[8px] text-red-400 flex items-center gap-1",children:[t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L5.636 5.636"})}),"Navigation disabled in remote universe"]})]},h.id):t.jsxs("a",{href:se,className:"block bg-white/5 hover:bg-white/10 rounded p-1.5 border border-white/10 hover:border-white/20 transition-all duration-200 hover:text-blue-300",title:`Navigate to ${Se(h.name)}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsxs("div",{className:"text-[8px]",children:[h.type==="galaxy"&&"🌌",h.type==="system"&&"⭐",h.type==="planet"&&"🪐"]}),t.jsx("div",{className:"text-white text-[10px] font-medium truncate",children:Se(h.name)}),t.jsx("div",{className:"text-gray-500 text-[8px] shrink-0",children:(()=>{try{const f=new Date(h.timestamp);return isNaN(f.getTime())?"N/A":f.toLocaleDateString()}catch{return"N/A"}})()})]})}),t.jsx("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),Ce(f,h.id)},className:"text-gray-400 hover:text-red-400 transition-all duration-200 ml-1 p-0.5",title:"Remove location",children:t.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),!M&&_>0&&t.jsxs("div",{className:"mt-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[t.jsx("span",{className:"text-[8px] text-gray-400",children:"Manual mining cooldown"}),t.jsx("span",{className:"text-[8px] text-orange-400",children:Ee(_)})]}),t.jsx("div",{className:"w-full bg-gray-800/50 rounded-full h-1 overflow-hidden",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full transition-all duration-300",style:{width:`${re}%`}})})]}),M&&x&&t.jsx("div",{className:"mt-1",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("span",{className:"text-[8px] text-green-400",children:"✓ Ready to mine"})})})]},h.id)})})]})]})]}),I&&t.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 ${K?"animate-fadeOut":"animate-fadeIn"}`,children:t.jsxs("div",{ref:ne,className:`bg-black/90 backdrop-blur-xl rounded-2xl border border-purple-400/30 shadow-2xl w-full max-w-md ${K?"animate-slideDown":"animate-slideUp"}`,children:[t.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 to-blue-600/20 px-4 py-3 border-b border-white/10 rounded-t-2xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",children:t.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.5 8V6.5l4-3l3 1.5l4-3l6 4.5V8zm-.476 8.124L1.184 9.5h21.632l-1.84 6.624a4.5 4.5 0 0 0-7.364 4.376h-3.224q.111-.483.112-1a4.5 4.5 0 0 0-7.476-3.376M6 22.5a3 3 0 1 0 0-6a3 3 0 0 0 0 6m12 0a3 3 0 1 0 0-6a3 3 0 0 0 0 6",clipRule:"evenodd"})}),"Mass Collection"]}),t.jsx("button",{onClick:Ne,className:"text-gray-400 hover:text-white transition-colors duration-200",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsxs("div",{className:"p-4",children:[t.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"Collect resources from all your saved mining locations at once."}),t.jsxs("div",{className:"bg-white/5 rounded-lg p-3 mb-4",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Available to collect:"}),t.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:`font-bold flex items-center justify-center gap-1 ${E.antimatter>0?"text-purple-300":"text-gray-500"}`,children:[t.jsx(de,{size:12,color:"currentColor"}),"+",Math.round(E.antimatter)]}),t.jsx("div",{className:"text-gray-500",children:"Antimatter"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:`font-bold flex items-center justify-center gap-1 ${E.element115>0?"text-cyan-300":"text-gray-500"}`,children:[t.jsx(me,{size:12,color:"currentColor"}),"+",Math.round(E.element115)]}),t.jsx("div",{className:"text-gray-500",children:"Element 115"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:`font-bold flex items-center justify-center gap-1 ${E.deuterium>0?"text-orange-300":"text-gray-500"}`,children:[t.jsx(ue,{size:12,color:"currentColor"}),"+",Math.round(E.deuterium)]}),t.jsx("div",{className:"text-gray-500",children:"Deuterium"})]})]})]}),t.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["🌟 Sources: ",E.sources.planets," Planets, ",E.sources.systems," Systems"]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:Ne,className:"flex-1 px-4 py-2 rounded-lg text-sm font-medium bg-gray-700/50 text-gray-300 hover:bg-gray-700/70 border border-gray-600/50 transition-all duration-200",children:"Cancel"}),t.jsx("button",{onClick:()=>{T.addResources({antimatter:Math.round(E.antimatter),element115:Math.round(E.element115),deuterium:Math.round(E.deuterium)}),T.showPassiveGenerationNotification(E);const h=JSON.parse(z("_atlasSpaceShip")||"{}");h.t||(h.t={}),h.t.lp=Date.now(),fe("_atlasSpaceShip",JSON.stringify(h)),y(T.getResources());const L=T.getAccumulatedResourcesWithLimit();ee(L),_e.emit("resources_updated"),Ne()},className:"flex-1 px-4 py-2 rounded-lg text-sm font-medium bg-gradient-to-r from-purple-600/30 to-blue-600/30 hover:from-purple-600/40 hover:to-blue-600/40 text-purple-300 border border-purple-500/50 hover:border-purple-400/70 transition-all duration-200",children:"🚀 Collect All"})]})]})]})})]})})},$t=()=>{const[d,e]=p.useState({antimatter:0,element115:0,deuterium:0}),[s,a]=p.useState(500),[r,o]=p.useState(!1),[n,i]=p.useState(null),[m,c]=p.useState(!1);p.useEffect(()=>{const u=()=>{const D=T.getResources();e(D),a(T.getUpgrade().storage)};u();const y=setInterval(u,5e3),j=_e.subscribe("resources_updated",u);return()=>{clearInterval(y),j()}},[]);const g=u=>u>=1e6?`${(u/1e6).toFixed(2)}M`:u>=1e3?`${(u/1e3).toFixed(1)}k`:u.toFixed(0),w=u=>Math.min(u/s*100,100),v=[{name:"ANTIMATTER",value:d.antimatter,color:"purple",glow:"rgba(168, 85, 247, 0.5)",icon:t.jsx(de,{size:20,color:"#ffffff"}),gradient:"from-purple-600 via-purple-500 to-fuchsia-500"},{name:"ELEMENT 115",value:d.element115,color:"cyan",glow:"rgba(34, 211, 238, 0.5)",icon:t.jsx(me,{size:20,color:"#ffffff"}),gradient:"from-cyan-500 via-cyan-400 to-blue-400"},{name:"DEUTERIUM",value:d.deuterium,color:"orange",glow:"rgba(251, 146, 60, 0.5)",icon:t.jsx(ue,{size:20,color:"#ffffff"}),gradient:"from-orange-500 via-amber-500 to-yellow-500"}],b=r||m,N=()=>{c(!m),i(null)};return t.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[t.jsxs("div",{className:`relative w-full transition-all duration-500 ease-out ${b?"h-14 sm:h-20":"h-1 sm:h-1.5"}`,onMouseEnter:()=>o(!0),onMouseLeave:()=>{o(!1),i(null)},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-black/30 to-transparent backdrop-blur-xl"}),t.jsx("div",{className:"relative h-full flex gap-px",children:v.map(u=>{const y=w(u.value),j=n===u.name,D=y<20,O=y>90;return t.jsxs("div",{className:"flex-1 relative overflow-hidden group",onMouseEnter:()=>i(u.name),onMouseLeave:()=>i(null),children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-900/50 to-gray-800/50"}),t.jsx("div",{className:`absolute left-0 h-full bg-gradient-to-r ${u.gradient} 
                    transition-all duration-700 ease-out ${j?"brightness-125 saturate-150":""} ${D?"animate-pulse":""}`,style:{width:`${y}%`,boxShadow:`0 0 20px ${u.glow}`},children:t.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent 
                    animate-shimmer`,style:{backgroundSize:"200% 100%",animation:"shimmer 3s infinite"}})}),D&&t.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-pulse pointer-events-none"}),O&&t.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-white/20 to-transparent animate-pulse"}),b&&t.jsxs("div",{className:`absolute inset-0 transition-opacity duration-300 ${b?"opacity-100":"opacity-0"}`,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 via-black/50 to-black/60"}),t.jsxs("div",{className:"sm:hidden absolute inset-0 flex flex-col justify-center px-2 z-10",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx("div",{className:"text-base",style:{filter:`drop-shadow(0 0 8px ${u.glow})`},children:u.icon}),t.jsx("span",{className:"text-[10px] font-bold tracking-wider text-white/90 uppercase drop-shadow-lg",children:u.name})]}),t.jsxs("div",{className:"flex items-baseline gap-1",children:[t.jsx("span",{className:"text-xs font-bold text-white font-mono drop-shadow-lg",children:g(u.value)}),t.jsxs("span",{className:"text-[9px] text-white/70 drop-shadow-lg",children:["/ ",g(s)]})]}),D&&t.jsx("div",{className:"absolute bottom-1 right-2",children:t.jsx("span",{className:"text-[8px] text-red-400 uppercase tracking-wider animate-pulse font-bold drop-shadow-lg",children:"LOW"})}),O&&t.jsx("div",{className:"absolute bottom-1 right-2",children:t.jsx("span",{className:"text-[8px] text-green-400 uppercase tracking-wider font-bold drop-shadow-lg",children:"FULL"})})]}),t.jsxs("div",{className:"hidden sm:flex absolute inset-0 items-center justify-between px-4 z-10",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`text-2xl ${j?"animate-spin-slow":""}`,style:{filter:`drop-shadow(0 0 12px ${u.glow})`},children:u.icon}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[11px] font-bold tracking-wider text-white/90 uppercase drop-shadow-lg",children:u.name}),t.jsxs("div",{className:"flex items-baseline gap-1",children:[t.jsx("span",{className:"text-base font-bold text-white font-mono drop-shadow-lg",children:g(u.value)}),t.jsxs("span",{className:"text-xs text-white/80 drop-shadow-lg",children:["/ ",g(s)]})]})]})]}),(D||O)&&t.jsxs("div",{className:`text-right transition-all duration-300 ${j?"scale-110":""}`,children:[D&&t.jsx("div",{className:"text-[11px] text-red-400 uppercase tracking-wider animate-pulse font-bold",children:"LOW"}),O&&t.jsx("div",{className:"text-[11px] text-green-400 uppercase tracking-wider font-bold",children:"FULL"})]})]})]}),j&&b&&t.jsx("div",{className:"absolute inset-0 pointer-events-none"})]},u.name)})}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"})]}),t.jsx("div",{className:"sm:hidden absolute top-full right-2 z-40",children:t.jsxs("div",{onClick:N,className:`bg-gradient-to-b from-black/40 via-black/50 to-black/60 backdrop-blur-md 
            border-l border-r border-b border-white/10 w-6 h-6 cursor-pointer 
            transition-all duration-300 hover:bg-black/70 active:bg-black/80
            flex items-center justify-center relative overflow-hidden
            shadow-lg shadow-black/30 ${b?"opacity-100":"opacity-70"}`,style:{borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px"},children:[t.jsx("div",{className:`absolute inset-0 transition-opacity duration-300 ${b?"bg-gradient-to-r from-blue-500/10 to-transparent":"bg-gradient-to-r from-blue-500/5 to-transparent"}`}),t.jsx("div",{className:"text-white/90 relative z-10",children:t.jsx("div",{className:`text-sm font-bold transition-all duration-300 transform ${b?"rotate-180 scale-110":"rotate-0 scale-100"}`,children:b?"−":"+"})})]})})]})},St=({size:d=24,color:e="currentColor",className:s=""})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:d,height:d,viewBox:"0 0 24 24",className:s,children:t.jsxs("g",{fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[t.jsx("path",{d:"M21 7.353v9.294a.6.6 0 0 1-.309.525l-8.4 4.666a.6.6 0 0 1-.582 0l-8.4-4.666A.6.6 0 0 1 3 16.647V7.353a.6.6 0 0 1 .309-.524l8.4-4.667a.6.6 0 0 1 .582 0l8.4 4.667a.6.6 0 0 1 .309.524"}),t.jsx("path",{d:"m3.528 7.294l8.18 4.544a.6.6 0 0 0 .583 0l8.209-4.56M12 21v-9"})]})}),Ct=({size:d=24,color:e="currentColor",className:s=""})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:d,height:d,viewBox:"0 0 24 24",className:s,children:t.jsxs("g",{fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,children:[t.jsx("path",{d:"M18.893 7.936a8.003 8.003 0 0 1-7.774 12.016m-6.012-3.888a8.003 8.003 0 0 1 7.774-12.016"}),t.jsx("circle",{cx:17.657,cy:6.343,r:2,fill:e,transform:"rotate(45 17.657 6.343)"}),t.jsx("circle",{cx:6.343,cy:17.657,r:2,fill:e,transform:"rotate(45 6.343 17.657)"}),t.jsx("circle",{cx:12,cy:12,r:2,fill:e,transform:"rotate(45 12 12)"})]})}),Nt=({size:d=24,color:e="currentColor",className:s=""})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:d,height:d,viewBox:"0 0 24 24",className:s,children:t.jsx("path",{fill:e,d:"m19 1l-1.26 2.75L15 5l2.74 1.26L19 9l1.25-2.74L23 5l-2.75-1.25M9 4L6.5 9.5L1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5M19 15l-1.26 2.74L15 19l2.74 1.25L19 23l1.25-2.75L23 19l-2.75-1.26"})}),Et=({size:d=24,color:e="currentColor",className:s=""})=>t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:d,height:d,viewBox:"0 0 48 48",className:s,style:{color:e},children:[t.jsx("rect",{width:"48",height:"48",fill:"none"}),t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"m30 27l-6 17m-6-17l6 17m-6-17h12m11 7l-11-7m11-13L30 27m11-13l-17 3m6 10l-6-10m0-13v13M7 14l17 3m-6 10l6-10m-6 10L7 14m11 13L7 34m34.32-20L24 4L6.68 14v20L24 44l17.32-10z"})]}),Mt=({isActive:d,onTransitionComplete:e})=>{const s=p.useRef(null),a=p.useRef(null),r=p.useRef(null),o=p.useRef(null),n=p.useRef(null),i=p.useRef(null),[m,c]=p.useState(!1),g=p.useRef(null),w=3,v=.8,b=1.4,N=.8,u=()=>{const l=document.createElement("canvas");l.width=64,l.height=64;const C=l.getContext("2d");C.clearRect(0,0,64,64);const I=C.createRadialGradient(32,32,0,32,32,32);I.addColorStop(0,"rgba(255,255,255,1.0)"),I.addColorStop(.3,"rgba(255,255,255,0.8)"),I.addColorStop(.7,"rgba(255,255,255,0.2)"),I.addColorStop(1,"rgba(255,255,255,0.0)"),C.fillStyle=I,C.beginPath(),C.arc(32,32,32,0,Math.PI*2),C.fill();const A=new Xe(l);return A.premultiplyAlpha=!1,A.format=qe,A},y=()=>{const l=document.createElement("canvas");l.width=128,l.height=128;const C=l.getContext("2d");C.clearRect(0,0,128,128);for(let A=0;A<50;A++){const K=A/50*Math.PI*4,W=A/50*60,Z=64+Math.cos(K)*W,F=64+Math.sin(K)*W,U=C.createRadialGradient(Z,F,0,Z,F,8);U.addColorStop(0,`rgba(100, 200, 255, ${.8-A/50*.8})`),U.addColorStop(1,"rgba(100, 200, 255, 0)"),C.fillStyle=U,C.beginPath(),C.arc(Z,F,8,0,Math.PI*2),C.fill()}const I=new Xe(l);return I.premultiplyAlpha=!1,I.format=qe,I},j=(l,C)=>{const I=new Ze,A=C.clone().sub(l);A.length();const K=new pt([l,l.clone().add(A.clone().multiplyScalar(.2)).add(new Q((Math.random()-.5)*10,(Math.random()-.5)*10,(Math.random()-.5)*10)),l.clone().add(A.clone().multiplyScalar(.5)).add(new Q((Math.random()-.5)*15,(Math.random()-.5)*15,(Math.random()-.5)*15)),l.clone().add(A.clone().multiplyScalar(.8)).add(new Q((Math.random()-.5)*10,(Math.random()-.5)*10,(Math.random()-.5)*10)),C]),W=100,Z=new Float32Array(W*3),F=new Float32Array(W*3);for(let V=0;V<W;V++){const he=V/W,X=K.getPointAt(he);Z[V*3]=X.x,Z[V*3+1]=X.y,Z[V*3+2]=X.z,F[V*3]=.3+Math.random()*.7,F[V*3+1]=.6+Math.random()*.4,F[V*3+2]=1}const U=new We;U.setAttribute("position",new Re(Z,3)),U.setAttribute("color",new Re(F,3));const te=new Oe({size:1,vertexColors:!0,blending:Ve,transparent:!0,map:y()}),J=new Fe(U,te);return I.add(J),I.userData={curve:K,particleGeometry:U,particleCount:W},I},D={uniforms:{tDiffuse:{value:null},distortion:{value:0},time:{value:0}},vertexShader:`
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
      }
    `,fragmentShader:`
      uniform sampler2D tDiffuse;
      uniform float distortion;
      uniform float time;
      varying vec2 vUv;

      void main() {
        vec2 center = vec2(0.5, 0.5);
        vec2 direction = vUv - center;
        float distance = length(direction);

        float aberration = distortion * distance;

        vec2 redOffset = direction * aberration * 1.5;
        vec2 greenOffset = direction * aberration;
        vec2 blueOffset = direction * aberration * 0.5;

        float red = texture2D(tDiffuse, vUv + redOffset).r;
        float green = texture2D(tDiffuse, vUv + greenOffset).g;
        float blue = texture2D(tDiffuse, vUv + blueOffset).b;

        gl_FragColor = vec4(red, green, blue, 1.0);
      }
    `},O={uniforms:{tDiffuse:{value:null},distortionAmount:{value:0},time:{value:0}},vertexShader:`
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
      }
    `,fragmentShader:`
      uniform sampler2D tDiffuse;
      uniform float distortionAmount;
      uniform float time;
      varying vec2 vUv;

      void main() {
        vec2 center = vec2(0.5, 0.5);
        vec2 uv = vUv;

        vec2 direction = uv - center;
        float distance = length(direction);

        float waveDistortion = sin(distance * 20.0 + time * 10.0) * distortionAmount * 0.02;
        float radialDistortion = distance * distortionAmount * 0.1;

        uv += direction * (waveDistortion + radialDistortion);

        gl_FragColor = texture2D(tDiffuse, uv);
      }
    `},ae={uniforms:{tDiffuse:{value:null},time:{value:0},waveStrength:{value:0},waveSources:{value:[]},sourceCount:{value:0},cameraVelocity:{value:0}},vertexShader:`
      varying vec2 vUv;
      void main() {
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
      }
    `,fragmentShader:`
      uniform sampler2D tDiffuse;
      uniform float time;
      uniform float waveStrength;
      uniform float cameraVelocity;
      uniform vec4 waveSources[10];
      uniform int sourceCount;
      varying vec2 vUv;

      void main() {
        vec2 uv = vUv;
        vec2 center = vec2(0.5, 0.5);

        float lorentzFactor = 1.0 / sqrt(1.0 - cameraVelocity * cameraVelocity * 0.01);
        vec2 contractionDirection = normalize(uv - center);
        float contractionAmount = (cameraVelocity * 0.05) / lorentzFactor;

        vec2 toCenter = center - uv;
        float distFromCenter = length(toCenter);
        uv += normalize(toCenter) * contractionAmount * distFromCenter * 0.5;

        float totalWaveEffect = 0.0;

        for (int i = 0; i < 10; i++) {
          if (i >= sourceCount) break;

          vec3 sourcePos = waveSources[i].xyz;
          float sourceStrength = waveSources[i].w;

          vec2 sourceScreenPos = sourcePos.xy * 0.5 + 0.5;

          float distToSource = length(uv - sourceScreenPos);

          float wavePhase = distToSource * 50.0 - time * 20.0;
          float wave = sin(wavePhase) * exp(-distToSource * 2.0) * sourceStrength;

          vec2 dirToSource = normalize(uv - sourceScreenPos);
          float quadrupole = cos(2.0 * atan(dirToSource.y, dirToSource.x));

          totalWaveEffect += wave * quadrupole;
        }

        vec2 waveDistortion = (uv - center) * totalWaveEffect * waveStrength * 0.02;
        uv += waveDistortion;

        vec3 color = texture2D(tDiffuse, uv).rgb;
        if (cameraVelocity > 0.3) {
          float dopplerShift = cameraVelocity * 0.1;
          color.r *= (1.0 - dopplerShift);
          color.b *= (1.0 + dopplerShift);
        }

        gl_FragColor = vec4(color, 1.0);
      }
    `},E=(l,C,I=new Te(16777215),A=.8)=>{const K=new Ze,W=new Je({color:I,transparent:!0,opacity:A,blending:Ve});return[[[-l/2,-l/2,l/2],[l/2,-l/2,l/2]],[[l/2,-l/2,l/2],[l/2,l/2,l/2]],[[l/2,l/2,l/2],[-l/2,l/2,l/2]],[[-l/2,l/2,l/2],[-l/2,-l/2,l/2]],[[-l/2,-l/2,-l/2],[l/2,-l/2,-l/2]],[[l/2,-l/2,-l/2],[l/2,l/2,-l/2]],[[l/2,l/2,-l/2],[-l/2,l/2,-l/2]],[[-l/2,l/2,-l/2],[-l/2,-l/2,-l/2]],[[-l/2,-l/2,-l/2],[-l/2,-l/2,l/2]],[[l/2,-l/2,-l/2],[l/2,-l/2,l/2]],[[l/2,l/2,-l/2],[l/2,l/2,l/2]],[[-l/2,l/2,-l/2],[-l/2,l/2,l/2]]].forEach(([F,U])=>{const te=new Q(F[0],F[1],F[2]),J=new Q(U[0],U[1],U[2]),he=J.clone().sub(te).length(),X=new gt(C,C,he,8),ne=new Ye(X,W);ne.position.copy(te.clone().add(J).multiplyScalar(.5)),ne.lookAt(J),ne.rotateX(Math.PI/2),K.add(ne)}),K},ee=()=>{if(s.current)try{const l=new mt;l.background=new Te(17),a.current=l;const C=new ut(75,window.innerWidth/window.innerHeight,.01,2e3);C.position.set(0,0,3),o.current=C;const I=new it({antialias:!0,alpha:!1});I.setSize(window.innerWidth,window.innerHeight),s.current.appendChild(I.domElement),r.current=I;const A=new lt(I),K=new ct(l,C);A.addPass(K);const W=new dt(new ht(window.innerWidth,window.innerHeight),.15,.3,.2);A.addPass(W);const Z=new Ge(O);A.addPass(Z);const F=new Ge(D);A.addPass(F);const U=new Ge(ae);A.addPass(U),n.current=A;const te=E(10,.12,new Te(9055202),.9);l.add(te);const J=[],V=50,he=[],X=[];for(let x=0;x<V;x++){const M=Math.random()*5+2,_=.06+Math.random()*.08,q=Math.random()*.3+.5,ie=new Te().setHSL(q,.8,.6),$=E(M,_,ie,0),Y=150;$.position.set((Math.random()-.5)*Y,(Math.random()-.5)*Y,(Math.random()-.5)*Y),$.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI);const re=Math.random()<.2,Ee=re?2+Math.random()*3:1;$.userData={originalOpacity:.6,rotationSpeed:{x:.005+Math.random()*.01,y:.003+Math.random()*.007,z:.007+Math.random()*.005},mass:Ee,isMassive:re},re&&($.children.forEach(ge=>{ge.material.color.setHSL(.1,1,.7)}),X.push({position:$.position.clone(),strength:Ee*.5})),J.push($),l.add($)}const ne=Math.min(15,V/3);for(let x=0;x<ne;x++){const M=J[Math.floor(Math.random()*V)],_=J[Math.floor(Math.random()*V)];if(M!==_&&M.position.distanceTo(_.position)>30){const q=j(M.position,_.position);he.push(q),l.add(q)}}const ye=Math.floor(Math.random()*V),oe=J[ye];oe.children.forEach(x=>{const M=x.material;M.color.setHex(65535),M.opacity=1});const Le=2e3,we=new Float32Array(Le*3),je=new Float32Array(Le*3);for(let x=0;x<Le;x++){const M=x*3;we[M]=(Math.random()-.5)*400,we[M+1]=(Math.random()-.5)*400,we[M+2]=(Math.random()-.5)*400;const _=Math.random()*.8+.2;je[M]=_,je[M+1]=_*.8,je[M+2]=_}const De=new We;De.setAttribute("position",new Re(we,3)),De.setAttribute("color",new Re(je,3));const Se=new Oe({size:.8,vertexColors:!0,blending:Ve,transparent:!0,alphaTest:.01,depthWrite:!1,map:u()}),Ce=new Fe(De,Se);Se.opacity=0,l.add(Ce);let Ne=Date.now(),h=new Q(0,0,3);const L=()=>{const x=(Date.now()-Ne)/1e3;if(x>=w){e&&e();return}const M=n.current,_=M?.passes[1],q=M?.passes[2],ie=M?.passes[3],$=M?.passes[4];let Y,re;if(x<v){const f=x/v,S=Math.sin(f*Math.PI*.5)*Math.sin(f*Math.PI*.5),P=3;Y=P+S*(25-P),re=new Q(0,0,Y),C.lookAt(0,0,0)}else if(x<v+b){const S=(x-v)/b,P=S*Math.PI*2,G=25+Math.sin(S*Math.PI)*20,B=Math.sin(S*Math.PI*3)*15;Y=G,re=new Q(Math.cos(P)*G,B,Math.sin(P)*G);let k;if(S<.6)k=new Q(0,0,0);else{const le=(S-.6)/.4,ce=new Q(0,0,0),Ue=oe.position.clone();k=ce.lerp(Ue,le)}C.lookAt(k)}else{const S=(x-v-b)/N,P=Math.pow(S,2),G=1*Math.PI*2,B=25+Math.sin(Math.PI)*20,k=Math.sin(Math.PI*3)*15,le=new Q(Math.cos(G)*B,k,Math.sin(G)*B),ce=oe.position.clone().add(new Q(0,0,.1));re=le.lerp(ce,P),Y=re.length();const Ue=Math.min(1,S+.6),at=new Q(0,0,0),rt=oe.position.clone(),nt=at.lerp(rt,Ue);C.lookAt(nt)}C.position.copy(re);const Ee=C.position.distanceTo(h)*60;h.copy(C.position);const ge=Math.min(1,Math.max(0,(Y-4)/16));J.forEach(f=>{const S=f.position.distanceTo(oe.position);let P=ge*f.userData.originalOpacity;if(x>v+b){const G=(x-v-b)/N;if(f!==oe&&f!==te){const B=Math.min(1,S/100);P*=Math.max(0,1-G*(1+B))}}f.children.forEach(G=>{const B=G.material;B.opacity=P}),f.rotation.x+=f.userData.rotationSpeed.x,f.rotation.y+=f.userData.rotationSpeed.y,f.rotation.z+=f.userData.rotationSpeed.z}),he.forEach(f=>{const{curve:S,particleGeometry:P,particleCount:G}=f.userData,B=P.attributes.position.array;for(let k=0;k<G;k++){let le=(k/G+x*.1)%1;const ce=S.getPointAt(le);B[k*3]=ce.x,B[k*3+1]=ce.y,B[k*3+2]=ce.z}P.attributes.position.needsUpdate=!0,f.children.forEach(k=>{k instanceof Ye&&k.material instanceof Je&&(k.material.opacity=ge*.3),k instanceof Fe&&k.material instanceof Oe&&(k.material.opacity=ge*.7)})});let ve;if(Y<3.5?ve=.2:Y<6?ve=.2+(Y-3.5)/2.5*.6:ve=.8,te.children.forEach(f=>{const S=f.material;S.opacity=ve}),Ce.material instanceof Oe){const f=Math.min(1,Math.max(0,(Y-3)/12));Ce.material.opacity=f*.3}if(x<v+b*.5){const f=x/(v+b*.5);te.rotation.y=f*Math.PI*.5,te.rotation.x=f*Math.PI*.3}let se=0;if(x<v)se=x/v*.2;else if(x<v+b){const S=(x-v)/b;if(S<.3||S>.7)se=.2;else{const P=(S-.3)/.4;se=.2+.3*Math.sin(P*Math.PI)}}else{const S=(x-v-b)/N;se=.2*(1-S*S*S)}if($){const f=[];X.slice(0,10).forEach(S=>{f.push(S.position.x/100,S.position.y/100,S.position.z/100,S.strength)}),$.uniforms.time.value=x,$.uniforms.waveStrength.value=se*1,$.uniforms.cameraVelocity.value=Math.min(.5,Ee/15),$.uniforms.waveSources.value=f,$.uniforms.sourceCount.value=Math.min(10,X.length)}if(_&&q&&ie&&(x<v?_.strength=.08+se*.05:x<v+b?_.strength=.1+se*.15:_.strength=.08+se*.02,q.uniforms.distortionAmount.value=se*.06,q.uniforms.time.value=x,ie.uniforms.distortion.value=se*.03,ie.uniforms.time.value=x),g.current&&x>w-.3){const f=(x-(w-.3))/.3;g.current.style.opacity=f.toString()}n.current?n.current.render():r.current&&r.current.render(l,C),i.current=requestAnimationFrame(L)};L()}catch(l){console.error("Error initializing multiverse transition scene:",l)}};return p.useEffect(()=>{d&&!m&&(c(!0),setTimeout(()=>{ee()},100))},[d,m]),p.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current),r.current&&s.current&&r.current.domElement.parentNode&&(s.current.removeChild(r.current.domElement),r.current.dispose())},[]),m?t.jsxs(t.Fragment,{children:[t.jsx("div",{ref:s,className:"fixed inset-0 z-50 bg-black",style:{width:"100vw",height:"100vh"}}),t.jsx("div",{ref:g,className:"fixed inset-0 z-[51] bg-black pointer-events-none",style:{width:"100vw",height:"100vh",opacity:0,transition:"none"}})]}):null},Bt=()=>{const[d,e]=p.useState(!1),[s,a]=p.useState(!1),[r,o]=p.useState(null),[n,i]=p.useState(!1),m=p.useRef(null);p.useEffect(()=>{const u=()=>{const j=document.getElementById("data-universe-config");if(j)try{const D=JSON.parse(j.textContent);o(D)}catch(D){console.error("Error parsing universe config:",D)}};u();const y=setInterval(u,1e3);return()=>clearInterval(y)},[]);const c=()=>{a(!0),setTimeout(()=>{e(!1),i(!0)},300)},g=()=>{window.location.href="/multiverse/exit"},w=()=>{a(!0),setTimeout(()=>{e(!1),a(!1)},300)},v=()=>{d?w():e(!0)};p.useEffect(()=>{const u=y=>{d&&!s&&m.current&&!m.current.contains(y.target)&&w()};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[d,s]);const b=u=>u||"Unknown",N=u=>{if(!u)return"Unknown";const y=new Date(u*1e3);return`${y.getFullYear()}-${String(y.getMonth()+1).padStart(2,"0")}-${String(y.getDate()).padStart(2,"0")} ${String(y.getHours()).padStart(2,"0")}:${String(y.getMinutes()).padStart(2,"0")}:${String(y.getSeconds()).padStart(2,"0")}`};return r?.remote?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed bottom-20 sm:bottom-24 right-4 sm:right-6 z-50",children:t.jsxs("button",{onClick:v,className:"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-emerald-900 via-slate-900 to-black hover:from-emerald-800 hover:via-slate-800 hover:to-gray-900 text-white rounded-full shadow-2xl border-2 border-emerald-400/40 transition-all duration-300 transform hover:scale-105 backdrop-blur-sm",title:"Remote Universe Info",children:[t.jsx("div",{className:"flex items-center justify-center",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",className:"text-emerald-200",children:[t.jsx("rect",{width:"24",height:"24",fill:"none"}),t.jsxs("g",{fill:"none",fillRule:"evenodd",children:[t.jsx("path",{d:"m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"}),t.jsx("path",{fill:"currentColor",d:"M11 2.423a2 2 0 0 1 1.842-.082l.158.082l3.33 1.922a2 2 0 0 1 .993 1.569l.007.163v3.846l3.33 1.922a2 2 0 0 1 .994 1.569l.006.163v3.846a2 2 0 0 1-.861 1.644l-.139.088l-3.33 1.922a2 2 0 0 1-1.842.082l-.158-.082L12 19.155l-3.33 1.922a2 2 0 0 1-1.843.082l-.157-.082l-3.33-1.922a2 2 0 0 1-.993-1.568l-.007-.164v-3.846a2 2 0 0 1 .861-1.644l.139-.088l3.33-1.922V6.077a2 2 0 0 1 .861-1.644l.139-.088zm0 12.31l-2.33 1.344v2.69L11 17.424zm2 0v2.69l2.33 1.345v-2.69zm6.66 0l-2.33 1.344v2.691l2.33-1.345zm-15.32-.001v2.69l2.33 1.346v-2.69zm11.99-3.077L14 13l2.33 1.345L18.66 13zm-8.66 0L5.34 13l2.33 1.345L10 13zm7.66-4.423L13 8.577v2.691l2.33-1.345zm-6.66 0v2.69L11 11.269v-2.69zM12 4.155L9.67 5.5L12 6.845L14.33 5.5z"})]})]})}),t.jsx("div",{className:"absolute inset-0 rounded-full bg-emerald-400/20 animate-ping"})]})}),d&&t.jsxs("div",{ref:m,className:"fixed bottom-36 sm:bottom-40 right-2 sm:right-6 w-[calc(100vw-1rem)] sm:w-96 max-w-md max-h-[70vh] sm:max-h-96 bg-black/90 backdrop-blur-xl rounded-2xl border border-purple-400/30 shadow-2xl z-40 overflow-hidden transition-all duration-300 ease-out",style:{animation:s?"slideDownFadeOut 0.3s ease-out forwards":"slideUpFadeIn 0.3s ease-out forwards"},children:[t.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 via-blue-600/20 to-purple-600/20 p-4 border-b border-white/10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-purple-400 rounded-full animate-pulse"}),t.jsx("h3",{className:"text-white font-bold text-lg",children:"🌌 Remote Universe"})]}),t.jsx("button",{onClick:w,className:"text-gray-400 hover:text-white transition-colors duration-200",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),t.jsxs("div",{className:"p-4 space-y-3 max-h-64 overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[t.jsx("div",{className:"text-purple-200 text-sm",children:r.seed_name||"Unknown Universe"}),t.jsxs("div",{className:"bg-white/5 rounded-lg p-3 border border-purple-500/20",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(St,{size:14,color:"#c084fc"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"Atlas Node ID"})]}),t.jsx("div",{className:"text-purple-400 font-mono text-[10px] pl-5 truncate",children:b(r.node_id)})]}),t.jsxs("div",{className:"bg-white/5 rounded-lg p-3 border border-blue-500/20",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Ct,{size:14,color:"#60a5fa"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"Remote Seed"})]}),t.jsx("div",{className:"text-blue-400 font-mono text-[10px] pl-5 truncate",children:r.seed_str||"Not available"})]}),t.jsxs("div",{className:"bg-white/5 rounded-lg p-3 border border-cyan-500/20",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Nt,{size:14,color:"#06b6d4"}),t.jsx("span",{className:"text-gray-400 text-xs",children:"Remote Bit Bang (Cosmic Origin Time)"})]}),t.jsx("div",{className:"text-cyan-400 font-mono text-[10px] pl-5 truncate",children:N(r.cosmic_origin_time)||"Not available"})]}),t.jsx("button",{onClick:c,className:"w-full bg-gray-700/30 hover:bg-gray-600/40 text-gray-300 hover:text-white text-sm py-2 px-3 rounded-lg transition-all duration-200 border border-gray-600/30 hover:border-gray-500/50",children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(Et,{size:16,color:"currentColor"}),t.jsx("span",{children:"Return to Your Universe"})]})}),t.jsx("a",{href:"/multiverse",className:"block w-full bg-purple-700/20 hover:bg-purple-600/30 text-purple-300 hover:text-purple-200 text-xs py-1.5 px-2 rounded-md transition-all duration-200 border border-purple-500/20 hover:border-purple-400/30 text-center mt-2",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx("span",{children:"🌌"}),t.jsx("span",{children:"Explore more Universes"})]})})]})]}),n&&t.jsx("div",{className:"fixed inset-0 z-[9999] animate-fadeIn",children:t.jsx(Mt,{isActive:n,onTransitionComplete:g})})]}):null};export{de as A,Nt as B,ue as D,me as E,$t as F,Rt as H,Ie as L,Bt as M,St as N,_e as R,Ct as S,H as U,Ft as a,T as b,Ut as c,_t as d,Pt as e,Et as f,Gt as g,Mt as h,Vt as i,Ot as m};
