import{j as e,r as m,H as L,V as D,c as _,R as z}from"./atlas_DArxhnO07qmbaT9666OZK.js";import{U as A}from"./atlas_D4fBgQtAIStahxnANW6uS.js";const P=({galaxy:t})=>{const o=n=>n.replace(/_/g," ");return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3",children:"Galaxy Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-blue-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Type"}),e.jsx("div",{className:"text-sm font-bold text-blue-300",children:t.galaxy_type})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-purple-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200",children:"Solar Systems"}),e.jsx("div",{className:"text-sm font-bold text-purple-300",children:t.num_systems.toLocaleString()})]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-2 border border-gray-500/30",children:[e.jsx("div",{className:"text-xs text-gray-200 mb-2",children:"Cosmic Objects"}),e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-pink-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Black Holes"}),e.jsx("div",{className:"text-xs font-bold text-pink-300",children:t.black_holes.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-cyan-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Pulsars"}),e.jsx("div",{className:"text-xs font-bold text-cyan-300",children:t.pulsars.toLocaleString()})]}),e.jsxs("div",{className:"bg-white/5 rounded p-1.5 border border-indigo-500/20",children:[e.jsx("div",{className:"text-xs text-gray-300",children:"Quasars"}),e.jsx("div",{className:"text-xs font-bold text-indigo-300",children:t.quasars.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Technical Data"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Galaxy:"}),e.jsx("div",{className:"text-white truncate font-medium",children:o(t.name)})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsx("span",{className:"text-gray-400",children:"Coordinates:"}),e.jsx("div",{className:"text-white font-medium",children:t.coordinates.join(", ")})]})]})]})]})},H=({galaxyUrl:t,imageUrl:o})=>{const n=m.useRef(null),r=m.useRef(null),[a,h]=m.useState("Aligning Stargate..."),[l,c]=m.useState(!1),[b,x]=m.useState(!1),[g,d]=m.useState(!1);return m.useEffect(()=>{const s=n.current;if(!s)return;const u=s.getContext("2d");if(!u)return;let w=[];const N=800;let v,j;const p=800;let f,y=.5;function k(){const i=s?.parentElement;if(!i||!s)return;const S=i.clientWidth,C=i.clientHeight;s.width=Math.min(S,p),s.height=Math.min(C,p),v=s.width/2,j=s.height/2}function I(){k(),w=[];for(let i=0;i<N;i++)w.push({x:Math.random()*(s?.width||800),y:Math.random()*(s?.height||800),z:Math.random()*(s?.width||800),o:Math.random()});E()}function E(){!s||!u||(u.clearRect(0,0,s.width,s.height),w.forEach(i=>{i.z-=y,i.z<=0&&(i.z=s.width,i.x=Math.random()*s.width,i.y=Math.random()*s.height,i.o=Math.random());const S=s.width/i.z,C=(i.x-v)*S+v,G=(i.y-j)*S+j,R=2*S;u.beginPath(),u.fillStyle=`rgba(255, 255, 255, ${i.o})`,u.arc(C,G,R,0,2*Math.PI),u.fill()}),y<60&&(y+=1),f=requestAnimationFrame(E))}I();const $=()=>k();return window.addEventListener("resize",$),()=>{window.removeEventListener("resize",$),f&&cancelAnimationFrame(f)}},[]),m.useEffect(()=>{if(o){console.log("Loading galaxy image:",o);const s=new Image;s.onload=()=>{console.log("Galaxy image loaded successfully"),r.current&&(r.current.src=o,x(!0),d(!0))},s.onerror=()=>{console.error("Failed to load galaxy image:",o),setTimeout(()=>{x(!0),d(!0)},1500)},s.src=o}else console.log("No imageUrl provided, using placeholder"),setTimeout(()=>{x(!0),d(!0)},1500)},[o]),m.useEffect(()=>{if(sessionStorage.getItem("stargateAnimationShown")){h("Stargate system aligned");return}sessionStorage.setItem("stargateAnimationShown","true"),c(!0);const u=(p,f)=>Array.from({length:f},()=>p[Math.floor(Math.random()*p.length)]).join(""),w=[{chars:"01",duration:40,iterations:20},{chars:"0123456789",duration:25,iterations:30},{chars:"0123456789ABCDEF",duration:20,iterations:40},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()-_=+[]{}|;:'\",.<>?/`~",duration:10,iterations:100}];let N=0,v=0;const j=()=>{if(N>=w.length){const f="Stargate system aligned";let y=0;h("");const k=()=>{y<f.length?(h(f.substring(0,y+1)),y++,setTimeout(k,30)):c(!1)};k();return}const p=w[N];h(u(p.chars,32)),v++,v>=p.iterations&&(N++,v=0),setTimeout(j,p.duration)};j()},[]),m.useEffect(()=>{const s=document.createElement("style");return s.textContent=`
      [data-rmiz-modal-overlay="visible"] {
        background-color: rgba(0, 0, 0, 0.8) !important;
        backdrop-filter: blur(20px) !important;
        -webkit-backdrop-filter: blur(20px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
      
      [data-rmiz-modal-img] {
        border-radius: 1rem !important;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8) !important;
      }
      
      [data-rmiz-modal-overlay="hidden"] {
        backdrop-filter: blur(0px) !important;
        -webkit-backdrop-filter: blur(0px) !important;
        transition: backdrop-filter 0.3s ease-in-out !important;
      }
    `,document.head.appendChild(s),()=>{document.head.removeChild(s)}},[]),e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3",children:"Galaxy Visualization"}),e.jsxs("div",{className:"relative w-full max-w-80 sm:max-w-96 aspect-square mx-auto bg-black/50 flex justify-center items-center rounded-xl overflow-hidden border-2 border-blue-400/30 mb-4",children:[e.jsx("canvas",{ref:n,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-[2500ms] ${g?"opacity-0":"opacity-100"}`,style:{filter:g?"blur(50px)":"none"}}),e.jsx("div",{className:`absolute inset-0 w-full h-full transition-all duration-500 ${b?"opacity-100 blur-0":"opacity-0 blur-[25px]"}`,children:b&&o?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(A,{zoomMargin:20,classDialog:"backdrop-blur-3xl",children:e.jsx("img",{ref:r,className:"max-w-full max-h-full object-contain rounded-xl shadow-2xl shadow-blue-500/20",src:o,alt:"Galaxy visualization",style:{width:"100%",height:"100%",objectFit:"contain",backgroundColor:"transparent"}})})}):e.jsx("img",{ref:r,className:"w-full h-full object-cover",src:"/static/images/placeholder-min.jpg",alt:"Galaxy visualization"})})]}),e.jsxs("div",{className:"text-center mt-auto",children:[e.jsxs("a",{href:t,className:`inline-block px-4 py-2 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 text-gray-200 font-medium text-sm rounded-lg border border-slate-600 hover:border-slate-500 shadow-md hover:shadow-lg transition-all duration-300 relative overflow-hidden group ${l?"animate-pulse":""}`,style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("span",{className:"relative z-10 font-mono flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6s.792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95a1 1 0 001.715 1.029zM8.5 10a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zM10 14c-.304 0-.792-.193-1.264-.979a1 1 0 00-1.715 1.029C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 00-1.715-1.029C10.792 13.807 10.304 14 10 14z",clipRule:"evenodd"})}),a]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Gateway to the stars"})]})]})},F=({systems:t,coordinates:o})=>{const[n,r]=m.useState(new Set);return m.useEffect(()=>{(()=>{try{const c=JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}")[o]||{},b=new Set;Object.keys(c).forEach(x=>{b.add(parseInt(x))}),r(b)}catch(l){console.error("Error loading historical data:",l)}})(),(()=>{try{let l=JSON.parse(localStorage.getItem("atlasHistoricalData")||"{}");l[o]||(l[o]={}),localStorage.setItem("atlasHistoricalData",JSON.stringify(l))}catch(l){console.error("Error saving historical data:",l)}})()},[o]),e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 sm:gap-3",children:t.map(a=>e.jsxs("div",{className:"relative bg-white/10 rounded-lg border border-white/20 hover:bg-white/20 hover:border-white/40 transition-all duration-300 group",children:[n.has(a.index)&&e.jsx("div",{className:"absolute left-0 top-0 w-1 h-full bg-cyan-400 rounded-l-lg opacity-100 transition-opacity duration-300",style:{background:"linear-gradient(180deg, #00d4ff 0%, #00a0ff 100%)"}}),e.jsxs("button",{onClick:()=>window.location.href=`/system/${a.index}`,className:"w-full text-left block p-2 sm:p-3 text-gray-200 hover:text-white transition-colors duration-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["#",a.number]}),e.jsx("div",{className:"text-sm font-semibold text-white truncate group-hover:text-blue-300 transition-colors duration-300",children:a.name})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]},a.index))}),t.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"No systems found"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"This galaxy appears to be empty"})]})]})},O=({page:t,prevPage:o,nextPage:n,finish:r})=>{const a="px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105",h="bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg",l="bg-white/10 text-gray-300 hover:bg-white/20 hover:text-white border border-white/20";return e.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 sm:gap-4 flex-wrap",children:[t!==1&&e.jsxs("button",{onClick:()=>window.location.href="/galaxy/1",className:`${a} ${l}`,title:"First page",children:[e.jsx("span",{className:"hidden sm:inline",children:"First"}),e.jsx("span",{className:"sm:hidden",children:"«"})]}),o&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${o}`,className:`${a} ${l}`,title:"Previous page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Previous"}),e.jsx("span",{className:"sm:hidden",children:"‹"})]}),(()=>{const c=[],x=Math.max(1,t-2),g=Math.min(r,t+2);x>1&&(c.push(e.jsx("button",{onClick:()=>window.location.href="/galaxy/1",className:`${a} ${l}`,children:"1"},1)),x>2&&c.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"start-ellipsis")));for(let d=x;d<=g;d++)d===t?c.push(e.jsx("span",{className:`${a} ${h} cursor-default`,children:d},d)):c.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${d}`,className:`${a} ${l} cursor-pointer`,children:d},d));return g<r&&(g<r-1&&c.push(e.jsx("span",{className:"px-2 text-gray-400",children:"..."},"end-ellipsis")),c.push(e.jsx("button",{onClick:()=>window.location.href=`/galaxy/${r}`,className:`${a} ${l}`,children:r},r))),c})(),n&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${n}`,className:`${a} ${l}`,title:"Next page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx("span",{className:"sm:hidden",children:"›"})]}),t!==r&&e.jsxs("button",{onClick:()=>window.location.href=`/galaxy/${r}`,className:`${a} ${l}`,title:"Last page",children:[e.jsx("span",{className:"hidden sm:inline",children:"Last"}),e.jsx("span",{className:"sm:hidden",children:"»"})]})]}),e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-400",children:["Page ",t," of ",r]})]})},M=({galaxy:t,systems:o,galaxy_url:n,version:r,page:a,prev_page:h,next_page:l,finish:c,image_url:b})=>{const[x]=m.useState(t.coordinates.join(","));m.useEffect(()=>{document.body.setAttribute("data-coordinates",x)},[x]);const g=d=>d.replace(/_/g," ");return e.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white overflow-auto",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(L,{}),e.jsxs("div",{className:"w-full px-2 sm:px-4 lg:px-6 py-4 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2",children:["Galaxy '",g(t.name),"'"]}),e.jsxs("p",{className:"text-lg sm:text-xl text-gray-300",children:["at Coordinates ",t.coordinates.join(", ")]})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-[400px_1fr] gap-6 lg:gap-8 relative",children:[e.jsx("div",{className:"order-1 lg:order-1",children:e.jsx(H,{galaxyUrl:n,imageUrl:b})}),e.jsx("div",{className:"hidden lg:block absolute left-[416px] top-0 bottom-0 w-1 rounded-full bg-white/10 -translate-x-1.5"}),e.jsx("div",{className:"order-2 lg:order-2",children:e.jsx(P,{galaxy:t})})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Systems in '",g(t.name),"'"]}),e.jsx(F,{systems:o,coordinates:x})]}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 mb-8 shadow-2xl p-4 sm:p-6 text-center",children:e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-gray-600 via-gray-700 to-gray-600 hover:from-gray-700 hover:via-gray-800 hover:to-gray-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg backdrop-blur-sm",children:e.jsx("span",{className:"text-base sm:text-lg",children:"← Go Back to Planetary Index"})})}),e.jsx(O,{page:a,prevPage:h,nextPage:l,finish:c})]}),e.jsx(D,{version:r})]})]})};console.log("Atlas Galaxy React script loading...");document.addEventListener("DOMContentLoaded",()=>{console.log("DOM loaded, mounting Galaxy React component...");const t=document.getElementById("atlas-react-root");if(!t){console.error("Could not find atlas-react-root element");return}const o=n=>{const r=document.getElementById(n);if(!r||!r.textContent)return null;try{return JSON.parse(r.textContent.trim())}catch(a){return console.error(`Error parsing data from script ${n}:`,a),null}};try{const n=o("data-galaxy")||{},r=o("data-systems")||[],a=o("data-navigation")||{},h=o("data-common")||{},l={galaxy:{name:n.name||"Unknown Galaxy",coordinates:n.coordinates||[0,0,0],galaxy_type:n.galaxy_type||"Unknown",num_systems:n.num_systems||0,black_holes:n.black_holes||0,pulsars:n.pulsars||0,quasars:n.quasars||0},systems:r,galaxy_url:a.galaxy_url||"#",version:h.version||"1.0.0",page:a.page||1,prev_page:a.prev_page,next_page:a.next_page,finish:a.finish||1,image_url:h.image_url||""};console.log("Galaxy props loaded from JSON scripts:",l),_.createRoot(t).render(z.createElement(M,l)),console.log("Galaxy React component mounted successfully!")}catch(n){console.error("Error parsing galaxy data:",n);const r={galaxy:{name:"Unknown Galaxy",coordinates:[0,0,0],galaxy_type:"Unknown",num_systems:0,black_holes:0,pulsars:0,quasars:0},systems:[],galaxy_url:"#",version:"1.0.0",page:1,finish:1,image_url:""};_.createRoot(t).render(z.createElement(M,r))}});
